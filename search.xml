<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[IOæ¨¡åž‹]]></title>
      <url>%2F2020%2F03%2F24%2FIO%E6%A8%A1%E5%9E%8B%2F</url>
      <content type="text"><![CDATA[IOæ¨¡åž‹ä»‹ç» (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åå…«ç¯‡åŽŸåˆ›æ–‡ç«  å‰è¨€è¯´åˆ°IOæ¨¡åž‹ï¼Œéƒ½ä¼šç‰µæ‰¯åˆ°åŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡žã€éžé˜»å¡žè¿™å‡ ä¸ªè¯ã€‚ä»Žè¯çš„è¡¨é¢ä¸Šçœ‹ï¼Œå¾ˆå¤šäººéƒ½è§‰å¾—å¾ˆå®¹æ˜“ç†è§£ã€‚ä½†æ˜¯ç»†ç»†ä¸€æƒ³ï¼Œå´æ€»ä¼šå‘çŽ°æœ‰ç‚¹æ‘¸ä¸ç€å¤´è„‘ã€‚è‡ªå·±ä¹Ÿæ›¾è¢«è¿™å‡ ä¸ªè¯å¼„çš„è¿·è¿·ç³Šç³Šçš„ï¼Œæ¯æ¬¡çœ‹ç›¸å…³èµ„æ–™å¼„æ˜Žç™½äº†ï¼Œç„¶åŽå¾ˆå¿«åˆç»™æžæ··äº†ã€‚ ç»åŽ†è¿‡è¿™ä¹ˆå‡ æ¬¡ä¹‹åŽï¼Œå‘çŽ°è¿™ä¸œè¥¿å¿…é¡»å¾—æœ‰æ‰€æ€»ç»“æç‚¼æ‰ä¸è‡³äºŽå†æ¬¡æ··ä¸ºä¸€è°ˆã€‚å°¤å…¶æ˜¯æœ€è¿‘çœ‹åˆ°å¥½å‡ ç¯‡è®²è¿™ä¸ªçš„æ–‡ç« ï¼Œå¾ˆå¤šéƒ½æœ‰è°¬è¯¯ï¼Œå¾ˆå®¹æ˜“æŠŠæœ¬æ¥å°±æžä¸æ¸…æ¥šçš„äººå¼„çš„æ›´åŠ è¿·ç³Šã€‚ æœ€é€‚åˆIOæ¨¡åž‹çš„ä¾‹å­åº”è¯¥æ˜¯å’±ä»¬å¹³å¸¸ç”Ÿæ´»ä¸­çš„åŽ»é¤é¦†åƒé¥­è¿™ä¸ªåœºæ™¯ï¼Œä¸‹æ–‡å°±ç»“åˆè¿™ä¸ªæ¥è®²è§£ä¸€ä¸‹ç»å…¸çš„å‡ ä¸ªIOæ¨¡åž‹ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆéœ€è¦è¯´æ˜Žä»¥ä¸‹å‡ ç‚¹ï¼š IOæœ‰å†…å­˜IOã€ç½‘ç»œIOå’Œç£ç›˜IOä¸‰ç§ï¼Œé€šå¸¸æˆ‘ä»¬è¯´çš„IOæŒ‡çš„æ˜¯åŽä¸¤è€…ã€‚ é˜»å¡žå’Œéžé˜»å¡žï¼Œæ˜¯å‡½æ•°/æ–¹æ³•çš„å®žçŽ°æ–¹å¼ï¼Œå³åœ¨æ•°æ®å°±ç»ªä¹‹å‰æ˜¯ç«‹åˆ»è¿”å›žè¿˜æ˜¯ç­‰å¾…ï¼Œå³å‘èµ·IOè¯·æ±‚æ˜¯å¦ä¼šè¢«é˜»å¡žã€‚ ä»¥æ–‡ä»¶IOä¸ºä¾‹,ä¸€ä¸ªIOè¯»è¿‡ç¨‹æ˜¯æ–‡ä»¶æ•°æ®ä»Žç£ç›˜â†’å†…æ ¸ç¼“å†²åŒºâ†’ç”¨æˆ·å†…å­˜çš„è¿‡ç¨‹ã€‚åŒæ­¥ä¸Žå¼‚æ­¥çš„åŒºåˆ«ä¸»è¦åœ¨äºŽæ•°æ®ä»Žå†…æ ¸ç¼“å†²åŒºâ†’ç”¨æˆ·å†…å­˜è¿™ä¸ªè¿‡ç¨‹éœ€ä¸éœ€è¦ç”¨æˆ·è¿›ç¨‹ç­‰å¾…ï¼Œå³å®žé™…çš„IOè¯»å†™æ˜¯å¦é˜»å¡žè¯·æ±‚è¿›ç¨‹ã€‚(ç½‘ç»œIOæŠŠç£ç›˜æ¢åšç½‘å¡å³å¯) IOæ¨¡åž‹åŒæ­¥é˜»å¡žåŽ»é¤é¦†åƒé¥­ï¼Œç‚¹ä¸€ä¸ªè‡ªå·±æœ€çˆ±åƒçš„ç›–æµ‡é¥­ï¼Œç„¶åŽåœ¨åŽŸåœ°ç­‰ç€ä¸€ç›´åˆ°ç›–æµ‡é¥­åšå¥½ï¼Œè‡ªå·±ç«¯åˆ°é¤æ¡Œå°±é¤ã€‚è¿™å°±æ˜¯å…¸åž‹çš„åŒæ­¥é˜»å¡žã€‚å½“åŽ¨å¸ˆç»™ä½ åšé¥­çš„æ—¶å€™ï¼Œä½ éœ€è¦ä¸€ç›´åœ¨é‚£é‡Œç­‰ç€ã€‚ ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œè¯»å–å®¢æˆ·ç«¯çš„æ•°æ®éœ€è¦è°ƒç”¨recvfromã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šä¸€ç›´é˜»å¡žç›´åˆ°æ•°æ®æŽ¥æ”¶å®Œæ¯•ï¼Œå°±æ˜¯ä¸€ä¸ªåŒæ­¥é˜»å¡žçš„IOæ–¹å¼ã€‚è¿™ä¹Ÿæ˜¯æœ€ç®€å•çš„IOæ¨¡åž‹ï¼Œåœ¨é€šå¸¸fdè¾ƒå°‘ã€å°±ç»ªå¾ˆå¿«çš„æƒ…å†µä¸‹ä½¿ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ åŒæ­¥éžé˜»å¡žæŽ¥ç€ä¸Šé¢çš„ä¾‹å­ï¼Œä½ æ¯æ¬¡ç‚¹å®Œé¥­å°±åœ¨é‚£é‡Œç­‰ç€ï¼Œçªç„¶æœ‰ä¸€å¤©ä½ å‘çŽ°è‡ªå·±çœŸå‚»ã€‚äºŽæ˜¯ï¼Œä½ ç‚¹å®Œä¹‹åŽï¼Œå°±å›žæ¡Œå­é‚£é‡Œåç€ï¼Œç„¶åŽä¼°è®¡å·®ä¸å¤šäº†ï¼Œå°±é—®è€æ¿é¥­å¥½äº†æ²¡ï¼Œå¦‚æžœå¥½äº†å°±åŽ»ç«¯ï¼Œæ²¡å¥½çš„è¯å°±ç­‰ä¸€ä¼šå†åŽ»é—®ï¼Œä¾æ¬¡å¾ªçŽ¯ç›´åˆ°é¥­åšå¥½ã€‚è¿™å°±æ˜¯åŒæ­¥éžé˜»å¡žã€‚ è¿™ç§æ–¹å¼åœ¨ç¼–ç¨‹ä¸­å¯¹socketè®¾ç½®O_NONBLOCKå³å¯ã€‚ä½†æ­¤æ–¹å¼ä»…ä»…é’ˆå¯¹ç½‘ç»œIOæœ‰æ•ˆï¼Œå¯¹ç£ç›˜IOå¹¶æ²¡æœ‰ä½œç”¨ã€‚å› ä¸ºæœ¬åœ°æ–‡ä»¶IOå°±æ²¡æœ‰è¢«è®¤ä¸ºæ˜¯é˜»å¡žï¼Œæˆ‘ä»¬æ‰€è¯´çš„ç½‘ç»œIOçš„é˜»å¡žæ˜¯å› ä¸ºç½‘è·¯IOæœ‰æ— é™é˜»å¡žçš„å¯èƒ½ï¼Œè€Œæœ¬åœ°æ–‡ä»¶é™¤éžæ˜¯è¢«é”ä½ï¼Œå¦åˆ™æ˜¯ä¸å¯èƒ½æ— é™é˜»å¡žçš„ï¼Œå› æ­¤åªæœ‰é”è¿™ç§æƒ…å†µä¸‹ï¼ŒO_NONBLOCKæ‰ä¼šæœ‰ä½œç”¨ã€‚è€Œä¸”ï¼Œç£ç›˜IOæ—¶è¦ä¹ˆæ•°æ®åœ¨å†…æ ¸ç¼“å†²åŒºä¸­ç›´æŽ¥å¯ä»¥è¿”å›žï¼Œè¦ä¹ˆéœ€è¦è°ƒç”¨ç‰©ç†è®¾å¤‡åŽ»è¯»å–ï¼Œè¿™æ—¶å€™è¿›ç¨‹çš„å…¶ä»–å·¥ä½œéƒ½éœ€è¦ç­‰å¾…ã€‚å› æ­¤ï¼ŒåŽç»­çš„IOå¤ç”¨å’Œä¿¡å·é©±åŠ¨IOå¯¹æ–‡ä»¶IOä¹Ÿæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ æ­¤å¤–ï¼Œéœ€è¦è¯´æ˜Žçš„ä¸€ç‚¹æ˜¯nginxå’Œnodeä¸­å¯¹äºŽæœ¬åœ°æ–‡ä»¶çš„IOæ˜¯ç”¨çº¿ç¨‹çš„æ–¹å¼æ¨¡æ‹Ÿéžé˜»å¡žçš„æ•ˆæžœçš„ï¼Œè€Œå¯¹äºŽé™æ€æ–‡ä»¶çš„ioï¼Œä½¿ç”¨zero copy(ä¾‹å¦‚sendfileã€kafkaã€spark)çš„æ•ˆçŽ‡æ˜¯éžå¸¸é«˜çš„ã€‚ IOå¤ç”¨æŽ¥ç€ä¸Šé¢çš„åˆ—å­ï¼Œä½ ç‚¹ä¸€ä»½é¥­ç„¶åŽå¾ªçŽ¯çš„åŽ»é—®å¥½æ²¡å¥½æ˜¾ç„¶æœ‰ç‚¹å¾—ä¸å¿å¤±ï¼Œè¿˜ä¸å¦‚å°±ç­‰åœ¨é‚£é‡Œç›´åˆ°å‡†å¤‡å¥½ï¼Œä½†æ˜¯å½“ä½ ç‚¹äº†å¥½å‡ æ ·é¥­èœçš„æ—¶å€™ï¼Œä½ æ¯æ¬¡éƒ½åŽ»é—®ä¸€ä¸‹æ‰€æœ‰é¥­èœçš„çŠ¶æ€(æœªåšå¥½/å·²åšå¥½)è‚¯å®šæ¯”ä½ æ¯æ¬¡é˜»å¡žåœ¨é‚£é‡Œç­‰ç€å¥½å¤šäº†ã€‚å½“ç„¶ï¼Œä½ é—®çš„æ—¶å€™æ˜¯éœ€è¦é˜»å¡žçš„ï¼Œä¸€ç›´åˆ°æœ‰å‡†å¤‡å¥½çš„é¥­èœæˆ–è€…ä½ ç­‰çš„ä¸è€çƒ¦(è¶…æ—¶)ã€‚ è¿™å°±å¼•å‡ºäº†IOå¤ç”¨ï¼Œä¹Ÿå«å¤šè·¯IOå°±ç»ªé€šçŸ¥ã€‚è¿™æ˜¯ä¸€ç§è¿›ç¨‹é¢„å…ˆå‘ŠçŸ¥å†…æ ¸çš„èƒ½åŠ›ï¼Œè®©å†…æ ¸å‘çŽ°è¿›ç¨‹æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªIOæ¡ä»¶å°±ç»ªäº†ï¼Œå°±é€šçŸ¥è¿›ç¨‹ã€‚ä½¿å¾—ä¸€ä¸ªè¿›ç¨‹èƒ½åœ¨ä¸€è¿žä¸²çš„äº‹ä»¶ä¸Šç­‰å¾…ã€‚ IOå¤ç”¨çš„å®žçŽ°æ–¹å¼ç›®å‰ä¸»è¦æœ‰selectã€pollå’Œepollã€‚ selectå’Œpollçš„åŽŸç†åŸºæœ¬ç›¸åŒï¼š æ³¨å†Œå¾…ä¾¦å¬çš„fd(è¿™é‡Œçš„fdåˆ›å»ºæ—¶æœ€å¥½ä½¿ç”¨éžé˜»å¡ž) æ¯æ¬¡è°ƒç”¨éƒ½åŽ»æ£€æŸ¥è¿™äº›fdçš„çŠ¶æ€ï¼Œå½“æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªfdå°±ç»ªçš„æ—¶å€™è¿”å›ž è¿”å›žç»“æžœä¸­åŒ…æ‹¬å·²å°±ç»ªå’Œæœªå°±ç»ªçš„fd ç›¸æ¯”selectï¼Œpollè§£å†³äº†å•ä¸ªè¿›ç¨‹èƒ½å¤Ÿæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æœ‰é™åˆ¶è¿™ä¸ªé—®é¢˜ï¼šselectå—é™äºŽFD_SIZEçš„é™åˆ¶ï¼Œå¦‚æžœä¿®æ”¹åˆ™éœ€è¦ä¿®æ”¹è¿™ä¸ªå®é‡æ–°ç¼–è¯‘å†…æ ¸ï¼›è€Œpollé€šè¿‡ä¸€ä¸ªpollfdæ•°ç»„å‘å†…æ ¸ä¼ é€’éœ€è¦å…³æ³¨çš„äº‹ä»¶ï¼Œé¿å¼€äº†æ–‡ä»¶æè¿°ç¬¦æ•°é‡é™åˆ¶ã€‚ æ­¤å¤–ï¼Œselectå’Œpollå…±åŒå…·æœ‰çš„ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹å°±æ˜¯åŒ…å«å¤§é‡fdçš„æ•°ç»„è¢«æ•´ä½“å¤åˆ¶äºŽç”¨æˆ·æ€å’Œå†…æ ¸æ€åœ°å€ç©ºé—´ä¹‹é—´ï¼Œå¼€é”€ä¼šéšç€fdæ•°é‡å¢žå¤šè€Œçº¿æ€§å¢žå¤§ã€‚ selectå’Œpollå°±ç±»ä¼¼äºŽä¸Šé¢è¯´çš„å°±é¤æ–¹å¼ã€‚ä½†å½“ä½ æ¯æ¬¡éƒ½åŽ»è¯¢é—®æ—¶ï¼Œè€æ¿ä¼šæŠŠæ‰€æœ‰ä½ ç‚¹çš„é¥­èœéƒ½è½®è¯¢ä¸€éå†å‘Šè¯‰ä½ æƒ…å†µï¼Œå½“å¤§é‡é¥­èœå¾ˆé•¿æ—¶é—´éƒ½ä¸èƒ½å‡†å¤‡å¥½çš„æƒ…å†µä¸‹æ˜¯å¾ˆä½Žæ•ˆçš„ã€‚äºŽæ˜¯ï¼Œè€æ¿æœ‰äº›ä¸è€çƒ¦äº†ï¼Œå°±è®©åŽ¨å¸ˆæ¯åšå¥½ä¸€ä¸ªèœå°±é€šçŸ¥ä»–ã€‚è¿™æ ·æ¯æ¬¡ä½ å†åŽ»é—®çš„æ—¶å€™ï¼Œä»–ä¼šç›´æŽ¥æŠŠå·²ç»å‡†å¤‡å¥½çš„èœå‘Šè¯‰ä½ ï¼Œä½ å†åŽ»ç«¯ã€‚è¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨IOå°±ç»ªé€šçŸ¥çš„æ–¹å¼-epollã€‚ epollçš„å‡ºçŽ°ï¼Œè§£å†³äº†selectã€pollçš„ç¼ºç‚¹ï¼š åŸºäºŽäº‹ä»¶é©±åŠ¨çš„æ–¹å¼ï¼Œé¿å…äº†æ¯æ¬¡éƒ½è¦æŠŠæ‰€æœ‰fdéƒ½æ‰«æä¸€éã€‚ epoll_waitåªè¿”å›žå°±ç»ªçš„fdã€‚ epollä½¿ç”¨mmapå†…å­˜æ˜ å°„æŠ€æœ¯é¿å…äº†å†…å­˜å¤åˆ¶çš„å¼€é”€ã€‚ epollçš„fdæ•°é‡ä¸Šé™æ˜¯æ“ä½œç³»ç»Ÿçš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ç›®,è¿™ä¸ªæ•°ç›®ä¸€èˆ¬å’Œå†…å­˜æœ‰å…³ï¼Œé€šå¸¸è¿œå¤§äºŽ1024ã€‚ ç›®å‰ï¼Œepollæ˜¯Linux2.6ä¸‹æœ€é«˜æ•ˆçš„IOå¤ç”¨æ–¹å¼ï¼Œä¹Ÿæ˜¯Nginxã€Nodeçš„IOå®žçŽ°æ–¹å¼ã€‚è€Œåœ¨freeBSDä¸‹ï¼Œkqueueæ˜¯å¦ä¸€ç§ç±»ä¼¼äºŽepollçš„IOå¤ç”¨æ–¹å¼ã€‚ æ­¤å¤–ï¼Œå¯¹äºŽIOå¤ç”¨è¿˜æœ‰ä¸€ä¸ªæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„æ¦‚å¿µï¼š æ°´å¹³è§¦å‘ï¼šå½“å°±ç»ªçš„fdæœªè¢«ç”¨æˆ·è¿›ç¨‹å¤„ç†åŽï¼Œä¸‹ä¸€æ¬¡æŸ¥è¯¢ä¾æ—§ä¼šè¿”å›žï¼Œè¿™æ˜¯selectå’Œpollçš„è§¦å‘æ–¹å¼ã€‚ è¾¹ç¼˜è§¦å‘ï¼šæ— è®ºå°±ç»ªçš„fdæ˜¯å¦è¢«å¤„ç†ï¼Œä¸‹ä¸€æ¬¡ä¸å†è¿”å›žã€‚ç†è®ºä¸Šæ€§èƒ½æ›´é«˜ï¼Œä½†æ˜¯å®žçŽ°ç›¸å½“å¤æ‚ï¼Œå¹¶ä¸”ä»»ä½•æ„å¤–çš„ä¸¢å¤±äº‹ä»¶éƒ½ä¼šé€ æˆè¯·æ±‚å¤„ç†é”™è¯¯ã€‚epollé»˜è®¤ä½¿ç”¨æ°´å¹³è§¦å‘ï¼Œé€šè¿‡ç›¸åº”é€‰é¡¹å¯ä»¥ä½¿ç”¨è¾¹ç¼˜è§¦å‘ã€‚ ä¿¡å·é©±åŠ¨ä¸Šæ–‡çš„å°±é¤æ–¹å¼è¿˜æ˜¯éœ€è¦ä½ æ¯æ¬¡éƒ½åŽ»é—®ä¸€ä¸‹é¥­èœçŠ¶å†µã€‚äºŽæ˜¯ï¼Œä½ å†æ¬¡ä¸è€çƒ¦äº†ï¼Œå°±è·Ÿè€æ¿è¯´ï¼Œå“ªä¸ªé¥­èœå¥½äº†å°±é€šçŸ¥æˆ‘ä¸€å£°å§ã€‚ç„¶åŽå°±è‡ªå·±ååœ¨æ¡Œå­é‚£é‡Œå¹²è‡ªå·±çš„äº‹æƒ…ã€‚æ›´ç”šè€…ï¼Œä½ å¯ä»¥æŠŠæ‰‹æœºå·ç•™ç»™è€æ¿ï¼Œè‡ªå·±å‡ºé—¨ï¼Œç­‰é¥­èœå¥½äº†ç›´æŽ¥å‘æ¡çŸ­ä¿¡ç»™ä½ ã€‚è¿™å°±ç±»ä¼¼ä¿¡å·é©±åŠ¨çš„IOæ¨¡åž‹ã€‚ æµç¨‹å¦‚ä¸‹ï¼š å¼€å¯å¥—æŽ¥å­—ä¿¡å·é©±åŠ¨IOåŠŸèƒ½ ç³»ç»Ÿè°ƒç”¨sigactionæ‰§è¡Œä¿¡å·å¤„ç†å‡½æ•°ï¼ˆéžé˜»å¡žï¼Œç«‹åˆ»è¿”å›žï¼‰ æ•°æ®å°±ç»ªï¼Œç”Ÿæˆsigioä¿¡å·ï¼Œé€šè¿‡ä¿¡å·å›žè°ƒé€šçŸ¥åº”ç”¨æ¥è¯»å–æ•°æ®ã€‚ æ­¤ç§ioæ–¹å¼å­˜åœ¨çš„ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼šLinuxä¸­ä¿¡å·é˜Ÿåˆ—æ˜¯æœ‰é™åˆ¶çš„ï¼Œå¦‚æžœè¶…è¿‡è¿™ä¸ªæ•°å­—é—®é¢˜å°±æ— æ³•è¯»å–æ•°æ®ã€‚ ##å¼‚æ­¥éžé˜»å¡ž ä¹‹å‰çš„å°±é¤æ–¹å¼ï¼Œåˆ°æœ€åŽæ€»æ˜¯éœ€è¦ä½ è‡ªå·±åŽ»æŠŠé¥­èœç«¯åˆ°é¤æ¡Œã€‚è¿™ä¸‹ä½ ä¹Ÿä¸è€çƒ¦äº†ï¼ŒäºŽæ˜¯å°±å‘Šè¯‰è€æ¿ï¼Œèƒ½ä¸èƒ½é¥­å¥½äº†ç›´æŽ¥ç«¯åˆ°ä½ çš„é¢å‰æˆ–è€…é€åˆ°ä½ çš„å®¶é‡Œ(å¤–å–)ã€‚è¿™å°±æ˜¯å¼‚æ­¥éžé˜»å¡žIOäº†ã€‚ å¯¹æ¯”ä¿¡å·é©±åŠ¨IOï¼Œå¼‚æ­¥IOçš„ä¸»è¦åŒºåˆ«åœ¨äºŽï¼šä¿¡å·é©±åŠ¨ç”±å†…æ ¸å‘Šè¯‰æˆ‘ä»¬ä½•æ—¶å¯ä»¥å¼€å§‹ä¸€ä¸ªIOæ“ä½œ(æ•°æ®åœ¨å†…æ ¸ç¼“å†²åŒºä¸­)ï¼Œè€Œå¼‚æ­¥IOåˆ™ç”±å†…æ ¸é€šçŸ¥IOæ“ä½œä½•æ—¶å·²ç»å®Œæˆ(æ•°æ®å·²ç»åœ¨ç”¨æˆ·ç©ºé—´ä¸­)ã€‚ å¼‚æ­¥IOåˆå«åšäº‹ä»¶é©±åŠ¨IOï¼Œåœ¨Unixä¸­ï¼ŒPOSIX1003.1æ ‡å‡†ä¸ºå¼‚æ­¥æ–¹å¼è®¿é—®æ–‡ä»¶å®šä¹‰äº†ä¸€å¥—åº“å‡½æ•°ï¼Œå®šä¹‰äº†AIOçš„ä¸€ç³»åˆ—æŽ¥å£ã€‚ä½¿ç”¨aio_readæˆ–è€…aio_writeå‘èµ·å¼‚æ­¥IOæ“ä½œï¼Œä½¿ç”¨aio_erroræ£€æŸ¥æ­£åœ¨è¿è¡Œçš„IOæ“ä½œçš„çŠ¶æ€ã€‚ä½†æ˜¯å…¶å®žçŽ°æ²¡æœ‰é€šè¿‡å†…æ ¸è€Œæ˜¯ä½¿ç”¨äº†å¤šçº¿ç¨‹é˜»å¡žã€‚æ­¤å¤–ï¼Œè¿˜æœ‰Linuxè‡ªå·±å®žçŽ°çš„Native AIOï¼Œä¾èµ–ä¸¤ä¸ªå‡½æ•°ï¼šio_submitå’Œio_geteventsï¼Œè™½ç„¶ioæ˜¯éžé˜»å¡žçš„ï¼Œä½†ä»éœ€è¦ä¸»åŠ¨åŽ»èŽ·å–è¯»å†™çš„çŠ¶æ€ã€‚ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šAIOæ˜¯I/Oå¤„ç†æ¨¡å¼ï¼Œæ˜¯ä¸€ç§æŽ¥å£æ ‡å‡†ï¼Œå„å®¶æ“ä½œç³»ç»Ÿå¯ä»¥å®žçŽ°ä¹Ÿå¯ä»¥ä¸å®žçŽ°ã€‚ç›®å‰Linuxä¸­AIOçš„å†…æ ¸å®žçŽ°åªå¯¹æ–‡ä»¶IOæœ‰æ•ˆï¼Œå¦‚æžœè¦å®žçŽ°çœŸæ­£çš„AIOï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±æ¥å®žçŽ°ã€‚ #ç½‘ç»œç¼–ç¨‹æ¨¡åž‹ ä¸Šæ–‡è®²è¿°äº†UNIXçŽ¯å¢ƒçš„äº”ç§IOæ¨¡åž‹ã€‚åŸºäºŽè¿™äº”ç§æ¨¡åž‹ï¼Œåœ¨Javaä¸­ï¼Œéšç€NIOå’ŒNIO2.0(AIO)çš„å¼•å…¥ï¼Œä¸€èˆ¬å…·æœ‰ä»¥ä¸‹å‡ ç§ç½‘ç»œç¼–ç¨‹æ¨¡åž‹ï¼š BIO NIO AIO ##BIO BIOæ˜¯ä¸€ä¸ªå…¸åž‹çš„ç½‘ç»œç¼–ç¨‹æ¨¡åž‹ï¼Œæ˜¯é€šå¸¸æˆ‘ä»¬å®žçŽ°ä¸€ä¸ªæœåŠ¡ç«¯ç¨‹åºçš„è¿‡ç¨‹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š ä¸»çº¿ç¨‹acceptè¯·æ±‚é˜»å¡ž è¯·æ±‚åˆ°è¾¾ï¼Œåˆ›å»ºæ–°çš„çº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªå¥—æŽ¥å­—ï¼Œå®Œæˆå¯¹å®¢æˆ·ç«¯çš„å“åº”ã€‚ ä¸»çº¿ç¨‹ç»§ç»­acceptä¸‹ä¸€ä¸ªè¯·æ±‚ è¿™ç§æ¨¡åž‹æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜æ˜¯ï¼šå½“å®¢æˆ·ç«¯è¿žæŽ¥å¢žå¤šæ—¶ï¼ŒæœåŠ¡ç«¯åˆ›å»ºçš„çº¿ç¨‹ä¹Ÿä¼šæš´æ¶¨ï¼Œç³»ç»Ÿæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚å› æ­¤ï¼Œåœ¨æ­¤æ¨¡åž‹çš„åŸºç¡€ä¸Šï¼Œç±»ä¼¼äºŽ tomcatçš„bio connectorï¼Œé‡‡ç”¨çš„æ˜¯çº¿ç¨‹æ± æ¥é¿å…å¯¹äºŽæ¯ä¸€ä¸ªå®¢æˆ·ç«¯éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚æœ‰äº›åœ°æ–¹æŠŠè¿™ç§æ–¹å¼å«åšä¼ªå¼‚æ­¥IO(æŠŠè¯·æ±‚æŠ›åˆ°çº¿ç¨‹æ± ä¸­å¼‚æ­¥ç­‰å¾…å¤„ç†)ã€‚ ##NIO JDK1.4å¼€å§‹å¼•å…¥äº†NIOç±»åº“ï¼Œè¿™é‡Œçš„NIOæŒ‡çš„æ˜¯Non-blcok IOï¼Œä¸»è¦æ˜¯ä½¿ç”¨Selectorå¤šè·¯å¤ç”¨å™¨æ¥å®žçŽ°ã€‚Selectoråœ¨Linuxç­‰ä¸»æµæ“ä½œç³»ç»Ÿä¸Šæ˜¯é€šè¿‡epollå®žçŽ°çš„ã€‚ NIOçš„å®žçŽ°æµç¨‹ï¼Œç±»ä¼¼äºŽselectï¼š åˆ›å»ºServerSocketChannelç›‘å¬å®¢æˆ·ç«¯è¿žæŽ¥å¹¶ç»‘å®šç›‘å¬ç«¯å£ï¼Œè®¾ç½®ä¸ºéžé˜»å¡žæ¨¡å¼ã€‚ åˆ›å»ºReactorçº¿ç¨‹ï¼Œåˆ›å»ºå¤šè·¯å¤ç”¨å™¨(Selector)å¹¶å¯åŠ¨çº¿ç¨‹ã€‚ å°†ServerSocketChannelæ³¨å†Œåˆ°Reactorçº¿ç¨‹çš„Selectorä¸Šã€‚ç›‘å¬acceptäº‹ä»¶ã€‚ Selectoråœ¨çº¿ç¨‹runæ–¹æ³•ä¸­æ— çº¿å¾ªçŽ¯è½®è¯¢å‡†å¤‡å°±ç»ªçš„Keyã€‚ Selectorç›‘å¬åˆ°æ–°çš„å®¢æˆ·ç«¯æŽ¥å…¥ï¼Œå¤„ç†æ–°çš„è¯·æ±‚ï¼Œå®Œæˆtcpä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹ç‰©ç†è¿žæŽ¥ã€‚ å°†æ–°çš„å®¢æˆ·ç«¯è¿žæŽ¥æ³¨å†Œåˆ°Selectorä¸Šï¼Œç›‘å¬è¯»æ“ä½œã€‚è¯»å–å®¢æˆ·ç«¯å‘é€çš„ç½‘ç»œæ¶ˆæ¯ã€‚ å®¢æˆ·ç«¯å‘é€çš„æ•°æ®å°±ç»ªåˆ™è¯»å–å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¿›è¡Œå¤„ç†ã€‚ ç›¸æ¯”BIOï¼ŒNIOçš„ç¼–ç¨‹éžå¸¸å¤æ‚ã€‚ AIOJDK1.7å¼•å…¥NIO2.0ï¼Œæä¾›äº†å¼‚æ­¥æ–‡ä»¶é€šé“å’Œå¼‚æ­¥å¥—æŽ¥å­—é€šé“çš„å®žçŽ°ã€‚å…¶åº•å±‚åœ¨windowsä¸Šæ˜¯é€šè¿‡IOCPï¼Œåœ¨Linuxä¸Šæ˜¯é€šè¿‡epollæ¥å®žçŽ°çš„(LinuxAsynchronousChannelProvider.java,UnixAsynchronousServerSocketChannelImpl.java)ã€‚ åˆ›å»ºAsynchronousServerSocketChannelï¼Œç»‘å®šç›‘å¬ç«¯å£ è°ƒç”¨AsynchronousServerSocketChannelçš„accpetæ–¹æ³•ï¼Œä¼ å…¥è‡ªå·±å®žçŽ°çš„CompletionHandlerã€‚åŒ…æ‹¬ä¸Šä¸€æ­¥ï¼Œéƒ½æ˜¯éžé˜»å¡žçš„ è¿žæŽ¥ä¼ å…¥ï¼Œå›žè°ƒCompletionHandlerçš„completedæ–¹æ³•ï¼Œåœ¨é‡Œé¢ï¼Œè°ƒç”¨AsynchronousSocketChannelçš„readæ–¹æ³•ï¼Œä¼ å…¥è´Ÿè´£å¤„ç†æ•°æ®çš„CompletionHandlerã€‚ æ•°æ®å°±ç»ªï¼Œè§¦å‘è´Ÿè´£å¤„ç†æ•°æ®çš„CompletionHandlerçš„completedæ–¹æ³•ã€‚ç»§ç»­åšä¸‹ä¸€æ­¥å¤„ç†å³å¯ã€‚ å†™å…¥æ“ä½œç±»ä¼¼ï¼Œä¹Ÿéœ€è¦ä¼ å…¥CompletionHandlerã€‚ å…¶ç¼–ç¨‹æ¨¡åž‹ç›¸æ¯”NIOæœ‰äº†ä¸å°‘çš„ç®€åŒ–ã€‚ å¯¹æ¯” . åŒæ­¥é˜»å¡žIO ä¼ªå¼‚æ­¥IO NIO AIO å®¢æˆ·ç«¯æ•°ç›® ï¼šIOçº¿ç¨‹ 1 : 1 m : n m : 1 m : 0 IOæ¨¡åž‹ åŒæ­¥é˜»å¡žIO åŒæ­¥é˜»å¡žIO åŒæ­¥éžé˜»å¡žIO å¼‚æ­¥éžé˜»å¡žIO åžåé‡ ä½Ž ä¸­ é«˜ é«˜ ç¼–ç¨‹å¤æ‚åº¦ ç®€å• ç®€å• éžå¸¸å¤æ‚ å¤æ‚ #å‚è€ƒèµ„æ–™ æž„å»ºé«˜æ€§èƒ½Webç«™ç‚¹ Nettyæƒå¨æŒ‡å—]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Redis å’Œ I/O å¤šè·¯å¤ç”¨]]></title>
      <url>%2F2020%2F03%2F24%2FRedis-%E5%92%8C-I-O-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  é¢è¯•å¿…é—® æœ€è¿‘åœ¨çœ‹ UNIX ç½‘ç»œç¼–ç¨‹å¹¶ç ”ç©¶äº†ä¸€ä¸‹ Redis çš„å®žçŽ°ï¼Œæ„Ÿè§‰ Redis çš„æºä»£ç ååˆ†é€‚åˆé˜…è¯»å’Œåˆ†æžï¼Œå…¶ä¸­ I/O å¤šè·¯å¤ç”¨ï¼ˆmutiplexingï¼‰éƒ¨åˆ†çš„å®žçŽ°éžå¸¸å¹²å‡€å’Œä¼˜é›…ï¼Œåœ¨è¿™é‡Œæƒ³å¯¹è¿™éƒ¨åˆ†çš„å†…å®¹è¿›è¡Œç®€å•çš„æ•´ç†ã€‚ å‡ ç§ I/O æ¨¡åž‹ä¸ºä»€ä¹ˆ Redis ä¸­è¦ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨è¿™ç§æŠ€æœ¯å‘¢ï¼Ÿ é¦–å…ˆï¼ŒRedis æ˜¯è·‘åœ¨å•çº¿ç¨‹ä¸­çš„ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æŒ‰ç…§é¡ºåºçº¿æ€§æ‰§è¡Œçš„ï¼Œä½†æ˜¯ç”±äºŽè¯»å†™æ“ä½œç­‰å¾…ç”¨æˆ·è¾“å…¥æˆ–è¾“å‡ºéƒ½æ˜¯é˜»å¡žçš„ï¼Œæ‰€ä»¥ I/O æ“ä½œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹å¾€å¾€ä¸èƒ½ç›´æŽ¥è¿”å›žï¼Œè¿™ä¼šå¯¼è‡´æŸä¸€æ–‡ä»¶çš„ I/O é˜»å¡žå¯¼è‡´æ•´ä¸ªè¿›ç¨‹æ— æ³•å¯¹å…¶å®ƒå®¢æˆ·æä¾›æœåŠ¡ï¼Œè€Œ I/O å¤šè·¯å¤ç”¨å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå‡ºçŽ°çš„ã€‚ Blocking I/Oå…ˆæ¥çœ‹ä¸€ä¸‹ä¼ ç»Ÿçš„é˜»å¡ž I/O æ¨¡åž‹åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼šå½“ä½¿ç”¨ read æˆ–è€… write å¯¹æŸä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptor ä»¥ä¸‹ç®€ç§° FD)è¿›è¡Œè¯»å†™æ—¶ï¼Œå¦‚æžœå½“å‰ FD ä¸å¯è¯»æˆ–ä¸å¯å†™ï¼Œæ•´ä¸ª Redis æœåŠ¡å°±ä¸ä¼šå¯¹å…¶å®ƒçš„æ“ä½œä½œå‡ºå“åº”ï¼Œå¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€‚ è¿™ä¹Ÿå°±æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨æœ€å¤šçš„é˜»å¡žæ¨¡åž‹ï¼š é˜»å¡žæ¨¡åž‹è™½ç„¶å¼€å‘ä¸­éžå¸¸å¸¸è§ä¹Ÿéžå¸¸æ˜“äºŽç†è§£ï¼Œä½†æ˜¯ç”±äºŽå®ƒä¼šå½±å“å…¶ä»– FD å¯¹åº”çš„æœåŠ¡ï¼Œæ‰€ä»¥åœ¨éœ€è¦å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯ä»»åŠ¡çš„æ—¶å€™ï¼Œå¾€å¾€éƒ½ä¸ä¼šä½¿ç”¨é˜»å¡žæ¨¡åž‹ã€‚ I/O å¤šè·¯å¤ç”¨è™½ç„¶è¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„ I/O æ¨¡åž‹ï¼Œä½†æ˜¯åœ¨è¿™é‡Œéƒ½ä¸ä¼šå…·ä½“ä»‹ç»ã€‚ é˜»å¡žå¼çš„ I/O æ¨¡åž‹å¹¶ä¸èƒ½æ»¡è¶³è¿™é‡Œçš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ•ˆçŽ‡æ›´é«˜çš„ I/O æ¨¡åž‹æ¥æ”¯æ’‘ Redis çš„å¤šä¸ªå®¢æˆ·ï¼ˆredis-cliï¼‰ï¼Œè¿™é‡Œæ¶‰åŠçš„å°±æ˜¯ I/O å¤šè·¯å¤ç”¨æ¨¡åž‹äº†ï¼š åœ¨ I/O å¤šè·¯å¤ç”¨æ¨¡åž‹ä¸­ï¼Œæœ€é‡è¦çš„å‡½æ•°è°ƒç”¨å°±æ˜¯ selectï¼Œè¯¥æ–¹æ³•çš„èƒ½å¤ŸåŒæ—¶ç›‘æŽ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„å¯è¯»å¯å†™æƒ…å†µï¼Œå½“å…¶ä¸­çš„æŸäº›æ–‡ä»¶æè¿°ç¬¦å¯è¯»æˆ–è€…å¯å†™æ—¶ï¼Œselect æ–¹æ³•å°±ä¼šè¿”å›žå¯è¯»ä»¥åŠå¯å†™çš„æ–‡ä»¶æè¿°ç¬¦ä¸ªæ•°ã€‚ å…³äºŽ select çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨ç½‘ç»œä¸Šèµ„æ–™å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šå±•å¼€ä»‹ç»äº†ï¼› ä¸Žæ­¤åŒæ—¶ä¹Ÿæœ‰å…¶å®ƒçš„ I/O å¤šè·¯å¤ç”¨å‡½æ•° epoll/kqueue/evportï¼Œå®ƒä»¬ç›¸æ¯” select æ€§èƒ½æ›´ä¼˜ç§€ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æ’‘æ›´å¤šçš„æœåŠ¡ã€‚ Reactor è®¾è®¡æ¨¡å¼Redis æœåŠ¡é‡‡ç”¨ Reactor çš„æ–¹å¼æ¥å®žçŽ°æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼ˆæ¯ä¸€ä¸ªç½‘ç»œè¿žæŽ¥å…¶å®žéƒ½å¯¹åº”ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼‰ æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ä½¿ç”¨ I/O å¤šè·¯å¤ç”¨æ¨¡å—åŒæ—¶ç›‘å¬å¤šä¸ª FDï¼Œå½“ acceptã€readã€write å’Œ close æ–‡ä»¶äº‹ä»¶äº§ç”Ÿæ—¶ï¼Œæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨å°±ä¼šå›žè°ƒ FD ç»‘å®šçš„äº‹ä»¶å¤„ç†å™¨ã€‚ è™½ç„¶æ•´ä¸ªæ–‡ä»¶äº‹ä»¶å¤„ç†å™¨æ˜¯åœ¨å•çº¿ç¨‹ä¸Šè¿è¡Œçš„ï¼Œä½†æ˜¯é€šè¿‡ I/O å¤šè·¯å¤ç”¨æ¨¡å—çš„å¼•å…¥ï¼Œå®žçŽ°äº†åŒæ—¶å¯¹å¤šä¸ª FD è¯»å†™çš„ç›‘æŽ§ï¼Œæé«˜äº†ç½‘ç»œé€šä¿¡æ¨¡åž‹çš„æ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¿è¯æ•´ä¸ª Redis æœåŠ¡å®žçŽ°çš„ç®€å•ã€‚ I/O å¤šè·¯å¤ç”¨æ¨¡å—I/O å¤šè·¯å¤ç”¨æ¨¡å—å°è£…äº†åº•å±‚çš„ selectã€epollã€avport ä»¥åŠ kqueue è¿™äº› I/O å¤šè·¯å¤ç”¨å‡½æ•°ï¼Œä¸ºä¸Šå±‚æä¾›äº†ç›¸åŒçš„æŽ¥å£ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ç®€å•ä»‹ç» Redis æ˜¯å¦‚ä½•åŒ…è£… select å’Œ epoll çš„ï¼Œç®€è¦äº†è§£è¯¥æ¨¡å—çš„åŠŸèƒ½ï¼Œæ•´ä¸ª I/O å¤šè·¯å¤ç”¨æ¨¡å—æŠ¹å¹³äº†ä¸åŒå¹³å°ä¸Š I/O å¤šè·¯å¤ç”¨å‡½æ•°çš„å·®å¼‚æ€§ï¼Œæä¾›äº†ç›¸åŒçš„æŽ¥å£ï¼š static int aeApiCreate(aeEventLoop *eventLoop) static int aeApiResize(aeEventLoop *eventLoop, int setsize) static void aeApiFree(aeEventLoop *eventLoop) static int aeApiAddEvent(aeEventLoop *eventLoop, int fd, int mask) static void aeApiDelEvent(aeEventLoop *eventLoop, int fd, int mask) static int aeApiPoll(aeEventLoop eventLoop, struct timeval tvp) åŒæ—¶ï¼Œå› ä¸ºå„ä¸ªå‡½æ•°æ‰€éœ€è¦çš„å‚æ•°ä¸åŒï¼Œæˆ‘ä»¬åœ¨æ¯ä¸€ä¸ªå­æ¨¡å—å†…éƒ¨é€šè¿‡ä¸€ä¸ª aeApiState æ¥å­˜å‚¨éœ€è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š 1234567891011// selecttypedef struct aeApiState &#123; fd_set rfds, wfds; fd_set _rfds, _wfds;&#125; aeApiState;// epolltypedef struct aeApiState &#123; int epfd; struct epoll_event *events;&#125; aeApiState; è¿™äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ä¼šå­˜å‚¨åœ¨ eventLoop çš„ void *state ä¸­ï¼Œä¸ä¼šæš´éœ²åˆ°ä¸Šå±‚ï¼Œåªåœ¨å½“å‰å­æ¨¡å—ä¸­ä½¿ç”¨ã€‚ å°è£… select å‡½æ•°select å¯ä»¥ç›‘æŽ§ FD çš„å¯è¯»ã€å¯å†™ä»¥åŠå‡ºçŽ°é”™è¯¯çš„æƒ…å†µã€‚ åœ¨ä»‹ç» I/O å¤šè·¯å¤ç”¨æ¨¡å—å¦‚ä½•å¯¹ select å‡½æ•°å°è£…ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ select å‡½æ•°ä½¿ç”¨çš„å¤§è‡´æµç¨‹ï¼š 123456789101112int fd = /* file descriptor */fd_set rfds;FD_ZERO(&amp;rfds);FD_SET(fd, &amp;rfds)for ( ; ; ) &#123; select(fd+1, &amp;rfds, NULL, NULL, NULL); if (FD_ISSET(fd, &amp;rfds)) &#123; /* file descriptor `fd` becomes readable */ &#125;&#125; åˆå§‹åŒ–ä¸€ä¸ªå¯è¯»çš„ fd_set é›†åˆï¼Œä¿å­˜éœ€è¦ç›‘æŽ§å¯è¯»æ€§çš„ FDï¼› ä½¿ç”¨ FD_SET å°† fd åŠ å…¥ rfdsï¼› è°ƒç”¨ select æ–¹æ³•ç›‘æŽ§ rfds ä¸­çš„ FD æ˜¯å¦å¯è¯»ï¼› å½“ select è¿”å›žæ—¶ï¼Œæ£€æŸ¥ FD çš„çŠ¶æ€å¹¶å®Œæˆå¯¹åº”çš„æ“ä½œã€‚ è€Œåœ¨ Redis çš„ ae_select æ–‡ä»¶ä¸­ä»£ç çš„ç»„ç»‡é¡ºåºä¹Ÿæ˜¯å·®ä¸å¤šçš„ï¼Œé¦–å…ˆåœ¨ aeApiCreate å‡½æ•°ä¸­åˆå§‹åŒ– rfds å’Œ wfdsï¼š 12345678static int aeApiCreate(aeEventLoop *eventLoop) &#123; aeApiState *state = zmalloc(sizeof(aeApiState)); if (!state) return -1; FD_ZERO(&amp;state-&gt;rfds); FD_ZERO(&amp;state-&gt;wfds); eventLoop-&gt;apidata = state; return 0;&#125; è€Œ aeApiAddEvent å’Œ aeApiDelEvent ä¼šé€šè¿‡ FD_SET å’Œ FD_CLR ä¿®æ”¹ fd_set ä¸­å¯¹åº” FD çš„æ ‡å¿—ä½ï¼š 123456static int aeApiAddEvent(aeEventLoop *eventLoop, int fd, int mask) &#123; aeApiState *state = eventLoop-&gt;apidata; if (mask &amp; AE_READABLE) FD_SET(fd,&amp;state-&gt;rfds); if (mask &amp; AE_WRITABLE) FD_SET(fd,&amp;state-&gt;wfds); return 0;&#125; æ•´ä¸ª ae_select å­æ¨¡å—ä¸­æœ€é‡è¦çš„å‡½æ•°å°±æ˜¯ aeApiPollï¼Œå®ƒæ˜¯å®žé™…è°ƒç”¨ select å‡½æ•°çš„éƒ¨åˆ†ï¼Œå…¶ä½œç”¨å°±æ˜¯åœ¨ I/O å¤šè·¯å¤ç”¨å‡½æ•°è¿”å›žæ—¶ï¼Œå°†å¯¹åº”çš„ FD åŠ å…¥ aeEventLoop çš„ fired æ•°ç»„ä¸­ï¼Œå¹¶è¿”å›žäº‹ä»¶çš„ä¸ªæ•°ï¼š 1234567891011121314151617181920212223242526static int aeApiPoll(aeEventLoop *eventLoop, struct timeval *tvp) &#123; aeApiState *state = eventLoop-&gt;apidata; int retval, j, numevents = 0; memcpy(&amp;state-&gt;_rfds,&amp;state-&gt;rfds,sizeof(fd_set)); memcpy(&amp;state-&gt;_wfds,&amp;state-&gt;wfds,sizeof(fd_set)); retval = select(eventLoop-&gt;maxfd+1, &amp;state-&gt;_rfds,&amp;state-&gt;_wfds,NULL,tvp); if (retval &gt; 0) &#123; for (j = 0; j &lt;= eventLoop-&gt;maxfd; j++) &#123; int mask = 0; aeFileEvent *fe = &amp;eventLoop-&gt;events[j]; if (fe-&gt;mask == AE_NONE) continue; if (fe-&gt;mask &amp; AE_READABLE &amp;&amp; FD_ISSET(j,&amp;state-&gt;_rfds)) mask |= AE_READABLE; if (fe-&gt;mask &amp; AE_WRITABLE &amp;&amp; FD_ISSET(j,&amp;state-&gt;_wfds)) mask |= AE_WRITABLE; eventLoop-&gt;fired[numevents].fd = j; eventLoop-&gt;fired[numevents].mask = mask; numevents++; &#125; &#125; return numevents;&#125; å°è£… epoll å‡½æ•°Redis å¯¹ epoll çš„å°è£…å…¶å®žä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä½¿ç”¨ epoll_create åˆ›å»º epoll ä¸­ä½¿ç”¨çš„ epfdï¼š 123456789101112131415161718static int aeApiCreate(aeEventLoop *eventLoop) &#123; aeApiState *state = zmalloc(sizeof(aeApiState)); if (!state) return -1; state-&gt;events = zmalloc(sizeof(struct epoll_event)*eventLoop-&gt;setsize); if (!state-&gt;events) &#123; zfree(state); return -1; &#125; state-&gt;epfd = epoll_create(1024); /* 1024 is just a hint for the kernel */ if (state-&gt;epfd == -1) &#123; zfree(state-&gt;events); zfree(state); return -1; &#125; eventLoop-&gt;apidata = state; return 0;&#125; åœ¨ aeApiAddEvent ä¸­ä½¿ç”¨ epoll_ctl å‘ epfd ä¸­æ·»åŠ éœ€è¦ç›‘æŽ§çš„ FD ä»¥åŠç›‘å¬çš„äº‹ä»¶ï¼š 12345678910111213141516static int aeApiAddEvent(aeEventLoop *eventLoop, int fd, int mask) &#123; aeApiState *state = eventLoop-&gt;apidata; struct epoll_event ee = &#123;0&#125;; /* avoid valgrind warning */ /* If the fd was already monitored for some event, we need a MOD * operation. Otherwise we need an ADD operation. */ int op = eventLoop-&gt;events[fd].mask == AE_NONE ? EPOLL_CTL_ADD : EPOLL_CTL_MOD; ee.events = 0; mask |= eventLoop-&gt;events[fd].mask; /* Merge old events */ if (mask &amp; AE_READABLE) ee.events |= EPOLLIN; if (mask &amp; AE_WRITABLE) ee.events |= EPOLLOUT; ee.data.fd = fd; if (epoll_ctl(state-&gt;epfd,op,fd,&amp;ee) == -1) return -1; return 0;&#125; ç”±äºŽ epoll ç›¸æ¯” select æœºåˆ¶ç•¥æœ‰ä¸åŒï¼Œåœ¨ epoll_wait å‡½æ•°è¿”å›žæ—¶å¹¶ä¸éœ€è¦éåŽ†æ‰€æœ‰çš„ FD æŸ¥çœ‹è¯»å†™æƒ…å†µï¼›åœ¨ epoll_wait å‡½æ•°è¿”å›žæ—¶ä¼šæä¾›ä¸€ä¸ª epoll_event æ•°ç»„ï¼š 1234567891011typedef union epoll_data &#123; void *ptr; int fd; /* æ–‡ä»¶æè¿°ç¬¦ */ uint32_t u32; uint64_t u64;&#125; epoll_data_t;struct epoll_event &#123; uint32_t events; /* Epoll äº‹ä»¶ */ epoll_data_t data;&#125;; å…¶ä¸­ä¿å­˜äº†å‘ç”Ÿçš„ epoll äº‹ä»¶ï¼ˆEPOLLINã€EPOLLOUTã€EPOLLERR å’Œ EPOLLHUPï¼‰ä»¥åŠå‘ç”Ÿè¯¥äº‹ä»¶çš„ FDã€‚ aeApiPoll å‡½æ•°åªéœ€è¦å°† epoll_event æ•°ç»„ä¸­å­˜å‚¨çš„ä¿¡æ¯åŠ å…¥ eventLoop çš„ fired æ•°ç»„ä¸­ï¼Œå°†ä¿¡æ¯ä¼ é€’ç»™ä¸Šå±‚æ¨¡å—ï¼š 123456789101112131415161718192021222324static int aeApiPoll(aeEventLoop *eventLoop, struct timeval *tvp) &#123; aeApiState *state = eventLoop-&gt;apidata; int retval, numevents = 0; retval = epoll_wait(state-&gt;epfd,state-&gt;events,eventLoop-&gt;setsize, tvp ? (tvp-&gt;tv_sec*1000 + tvp-&gt;tv_usec/1000) : -1); if (retval &gt; 0) &#123; int j; numevents = retval; for (j = 0; j &lt; numevents; j++) &#123; int mask = 0; struct epoll_event *e = state-&gt;events+j; if (e-&gt;events &amp; EPOLLIN) mask |= AE_READABLE; if (e-&gt;events &amp; EPOLLOUT) mask |= AE_WRITABLE; if (e-&gt;events &amp; EPOLLERR) mask |= AE_WRITABLE; if (e-&gt;events &amp; EPOLLHUP) mask |= AE_WRITABLE; eventLoop-&gt;fired[j].fd = e-&gt;data.fd; eventLoop-&gt;fired[j].mask = mask; &#125; &#125; return numevents;&#125; å­æ¨¡å—çš„é€‰æ‹©å› ä¸º Redis éœ€è¦åœ¨å¤šä¸ªå¹³å°ä¸Šè¿è¡Œï¼ŒåŒæ—¶ä¸ºäº†æœ€å¤§åŒ–æ‰§è¡Œçš„æ•ˆçŽ‡ä¸Žæ€§èƒ½ï¼Œæ‰€ä»¥ä¼šæ ¹æ®ç¼–è¯‘å¹³å°çš„ä¸åŒé€‰æ‹©ä¸åŒçš„ I/O å¤šè·¯å¤ç”¨å‡½æ•°ä½œä¸ºå­æ¨¡å—ï¼Œæä¾›ç»™ä¸Šå±‚ç»Ÿä¸€çš„æŽ¥å£ï¼›åœ¨ Redis ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å®å®šä¹‰çš„ä½¿ç”¨ï¼Œåˆç†çš„é€‰æ‹©ä¸åŒçš„å­æ¨¡å—ï¼š 12345678910111213#ifdef HAVE_EVPORT#include "ae_evport.c"#else #ifdef HAVE_EPOLL #include "ae_epoll.c" #else #ifdef HAVE_KQUEUE #include "ae_kqueue.c" #else #include "ae_select.c" #endif #endif#endif å› ä¸º select å‡½æ•°æ˜¯ä½œä¸º POSIX æ ‡å‡†ä¸­çš„ç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨ä¸åŒç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿä¸Šéƒ½ä¼šå®žçŽ°ï¼Œæ‰€ä»¥å°†å…¶ä½œä¸ºä¿åº•æ–¹æ¡ˆï¼š Redis ä¼šä¼˜å…ˆé€‰æ‹©æ—¶é—´å¤æ‚åº¦ä¸º ð‘‚(1) çš„ I/O å¤šè·¯å¤ç”¨å‡½æ•°ä½œä¸ºåº•å±‚å®žçŽ°ï¼ŒåŒ…æ‹¬ Solaries 10 ä¸­çš„ evportã€Linux ä¸­çš„ epoll å’Œ macOS/FreeBSD ä¸­çš„ kqueueï¼Œä¸Šè¿°çš„è¿™äº›å‡½æ•°éƒ½ä½¿ç”¨äº†å†…æ ¸å†…éƒ¨çš„ç»“æž„ï¼Œå¹¶ä¸”èƒ½å¤ŸæœåŠ¡å‡ åä¸‡çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ ä½†æ˜¯å¦‚æžœå½“å‰ç¼–è¯‘çŽ¯å¢ƒæ²¡æœ‰ä¸Šè¿°å‡½æ•°ï¼Œå°±ä¼šé€‰æ‹© select ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆï¼Œç”±äºŽå…¶åœ¨ä½¿ç”¨æ—¶ä¼šæ‰«æå…¨éƒ¨ç›‘å¬çš„æè¿°ç¬¦ï¼Œæ‰€ä»¥å…¶æ—¶é—´å¤æ‚åº¦è¾ƒå·® ð‘‚(ð‘›)ï¼Œå¹¶ä¸”åªèƒ½åŒæ—¶æœåŠ¡ 1024 ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œæ‰€ä»¥ä¸€èˆ¬å¹¶ä¸ä¼šä»¥ select ä½œä¸ºç¬¬ä¸€æ–¹æ¡ˆä½¿ç”¨ã€‚ æ€»ç»“Redis å¯¹äºŽ I/O å¤šè·¯å¤ç”¨æ¨¡å—çš„è®¾è®¡éžå¸¸ç®€æ´ï¼Œé€šè¿‡å®ä¿è¯äº† I/O å¤šè·¯å¤ç”¨æ¨¡å—åœ¨ä¸åŒå¹³å°ä¸Šéƒ½æœ‰ç€ä¼˜å¼‚çš„æ€§èƒ½ï¼Œå°†ä¸åŒçš„ I/O å¤šè·¯å¤ç”¨å‡½æ•°å°è£…æˆç›¸åŒçš„ API æä¾›ç»™ä¸Šå±‚ä½¿ç”¨ã€‚ æ•´ä¸ªæ¨¡å—ä½¿ Redis èƒ½ä»¥å•è¿›ç¨‹è¿è¡Œçš„åŒæ—¶æœåŠ¡æˆåƒä¸Šä¸‡ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œé¿å…äº†ç”±äºŽå¤šè¿›ç¨‹åº”ç”¨çš„å¼•å…¥å¯¼è‡´ä»£ç å®žçŽ°å¤æ‚åº¦çš„æå‡ï¼Œå‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚ ReferenceSelect-Man-PagesReactor-Patternepoll vs kqueue åŽŸæ–‡é“¾æŽ¥ï¼šRedis å’Œ I/O å¤šè·¯å¤ç”¨ Â· é¢å‘ä¿¡ä»°ç¼–ç¨‹ Follow: Draveness Â· GitHub]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆå¾ˆä¹…æ²¡å†™åšå®¢äº†]]></title>
      <url>%2F2020%2F03%2F13%2F%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BE%88%E4%B9%85%E6%B2%A1%E5%86%99%E5%8D%9A%E5%AE%A2%E4%BA%86%2F</url>
      <content type="text"><![CDATA[çœ‹äº†ä¸‹å…¬ä¼—å·è®°å½•ï¼Œå‘çŽ°ä¸Šæ¬¡æŽ¨æ–‡ç«Ÿç„¶è¿˜æ˜¯åŽ»å¹´åŒåäºŒå‘çš„ä¸€ç¯‡è–…ç¾Šæ¯›çš„æ–‡ç« ï¼Œæœ‰ç‚¹å°å°´å°¬ï¼Œè¿™ä¹ˆä¹…æ²¡å‘ï¼Œä¸æ˜¯å› ä¸ºå¯†ç å®Œäº†]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javaå¹¶å‘ç¼–ç¨‹å®žæˆ˜-01-å¯è§æ€§ã€åŽŸå­æ€§å’Œæœ‰åºæ€§é—®é¢˜ï¼šå¹¶å‘ç¼–ç¨‹Bugçš„æºå¤´]]></title>
      <url>%2F2020%2F03%2F10%2FJava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98-01-%E5%8F%AF%E8%A7%81%E6%80%A7%E3%80%81%E5%8E%9F%E5%AD%90%E6%80%A7%E5%92%8C%E6%9C%89%E5%BA%8F%E6%80%A7%E9%97%AE%E9%A2%98%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8BBug%E7%9A%84%E6%BA%90%E5%A4%B4%2F</url>
      <content type="text"><![CDATA[Java å¹¶å‘ç¼–ç¨‹å®žæˆ˜ (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åå…­ç¯‡åŽŸåˆ›æ–‡ç«  å¦‚æžœä½ ç»†å¿ƒè§‚å¯Ÿçš„è¯ï¼Œä½ ä¼šå‘çŽ°ï¼Œä¸ç®¡æ˜¯å“ªä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶å‘ç±»çš„çŸ¥è¯†éƒ½æ˜¯åœ¨é«˜çº§ç¯‡é‡Œã€‚æ¢å¥è¯è¯´ï¼Œè¿™å—çŸ¥è¯†ç‚¹å…¶å®žå¯¹äºŽç¨‹åºå‘˜æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒè¿›é˜¶çš„çŸ¥è¯†ã€‚æˆ‘è‡ªå·±è¿™ä¹ˆå¤šå¹´å­¦ä¹ è¿‡æ¥ï¼Œä¹Ÿç¡®å®žè§‰å¾—å¹¶å‘æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œå› ä¸ºå®ƒä¼šæ¶‰åŠåˆ°å¾ˆå¤šçš„åº•å±‚çŸ¥è¯†ï¼Œæ¯”å¦‚è‹¥ä½ å¯¹æ“ä½œç³»ç»Ÿç›¸å…³çš„çŸ¥è¯†ä¸€æ— æ‰€çŸ¥çš„è¯ï¼Œé‚£åŽ»ç†è§£ä¸€äº›åŽŸç†å°±ä¼šè´¹äº›åŠ›æ°”ã€‚è¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªä¸“æ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘è¯´è¿™äº›è¯çš„æ„æ€æ˜¯å¦‚æžœä½ åœ¨ä¸­é—´é‡åˆ°è‡ªå·±æ²¡æƒ³é€šçš„é—®é¢˜ï¼Œå¯ä»¥åŽ»æŸ¥é˜…èµ„æ–™ï¼Œä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºæ‰¾æˆ‘ï¼Œä»¥ä¿è¯ä½ èƒ½å¤Ÿè·Ÿä¸Šå­¦ä¹ è¿›åº¦ã€‚ ä½ æˆ‘éƒ½çŸ¥é“ï¼Œç¼–å†™æ­£ç¡®çš„å¹¶å‘ç¨‹åºæ˜¯ä¸€ä»¶æžå›°éš¾çš„äº‹æƒ…ï¼Œå¹¶å‘ç¨‹åºçš„ Bug å¾€å¾€ä¼šè¯¡å¼‚åœ°å‡ºçŽ°ï¼Œç„¶åŽåˆè¯¡å¼‚åœ°æ¶ˆå¤±ï¼Œå¾ˆéš¾é‡çŽ°ï¼Œä¹Ÿå¾ˆéš¾è¿½è¸ªï¼Œå¾ˆå¤šæ—¶å€™éƒ½è®©äººå¾ˆæŠ“ç‹‚ã€‚ä½†è¦å¿«é€Ÿè€Œåˆç²¾å‡†åœ°è§£å†³â€œå¹¶å‘â€ç±»çš„ç–‘éš¾æ‚ç—‡ï¼Œä½ å°±è¦ç†è§£è¿™ä»¶äº‹æƒ…çš„æœ¬è´¨ï¼Œè¿½æœ¬æº¯æºï¼Œæ·±å…¥åˆ†æžè¿™äº› Bug çš„æºå¤´åœ¨å“ªé‡Œã€‚ é‚£ä¸ºä»€ä¹ˆå¹¶å‘ç¼–ç¨‹å®¹æ˜“å‡ºé—®é¢˜å‘¢ï¼Ÿå®ƒæ˜¯æ€Žä¹ˆå‡ºé—®é¢˜çš„ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±é‡ç‚¹èŠèŠè¿™äº› Bug çš„æºå¤´ã€‚ å¹¶å‘ç¨‹åºå¹•åŽçš„æ•…äº‹è¿™äº›å¹´ï¼Œæˆ‘ä»¬çš„ CPUã€å†…å­˜ã€I/O è®¾å¤‡éƒ½åœ¨ä¸æ–­è¿­ä»£ï¼Œä¸æ–­æœç€æ›´å¿«çš„æ–¹å‘åŠªåŠ›ã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ä¸ªå¿«é€Ÿå‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾ä¸€ç›´å­˜åœ¨ï¼Œå°±æ˜¯è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ã€‚CPU å’Œå†…å­˜çš„é€Ÿåº¦å·®å¼‚å¯ä»¥å½¢è±¡åœ°æè¿°ä¸ºï¼šCPU æ˜¯å¤©ä¸Šä¸€å¤©ï¼Œå†…å­˜æ˜¯åœ°ä¸Šä¸€å¹´ï¼ˆå‡è®¾ CPU æ‰§è¡Œä¸€æ¡æ™®é€šæŒ‡ä»¤éœ€è¦ä¸€å¤©ï¼Œé‚£ä¹ˆ CPU è¯»å†™å†…å­˜å¾—ç­‰å¾…ä¸€å¹´çš„æ—¶é—´ï¼‰ã€‚å†…å­˜å’Œ I/O è®¾å¤‡çš„é€Ÿåº¦å·®å¼‚å°±æ›´å¤§äº†ï¼Œå†…å­˜æ˜¯å¤©ä¸Šä¸€å¤©ï¼ŒI/O è®¾å¤‡æ˜¯åœ°ä¸Šåå¹´ã€‚ ç¨‹åºé‡Œå¤§éƒ¨åˆ†è¯­å¥éƒ½è¦è®¿é—®å†…å­˜ï¼Œæœ‰äº›è¿˜è¦è®¿é—® I/Oï¼Œæ ¹æ®æœ¨æ¡¶ç†è®ºï¼ˆä¸€åªæ°´æ¡¶èƒ½è£…å¤šå°‘æ°´å–å†³äºŽå®ƒæœ€çŸ­çš„é‚£å—æœ¨æ¿ï¼‰ï¼Œç¨‹åºæ•´ä½“çš„æ€§èƒ½å–å†³äºŽæœ€æ…¢çš„æ“ä½œâ€”â€”è¯»å†™ I/O è®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯è¯´å•æ–¹é¢æé«˜ CPU æ€§èƒ½æ˜¯æ— æ•ˆçš„ã€‚ ä¸ºäº†åˆç†åˆ©ç”¨ CPU çš„é«˜æ€§èƒ½ï¼Œå¹³è¡¡è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ï¼Œè®¡ç®—æœºä½“ç³»ç»“æž„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ç¨‹åºéƒ½åšå‡ºäº†è´¡çŒ®ï¼Œä¸»è¦ä½“çŽ°ä¸ºï¼š CPU å¢žåŠ äº†ç¼“å­˜ï¼Œä»¥å‡è¡¡ä¸Žå†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼› æ“ä½œç³»ç»Ÿå¢žåŠ äº†è¿›ç¨‹ã€çº¿ç¨‹ï¼Œä»¥åˆ†æ—¶å¤ç”¨ CPUï¼Œè¿›è€Œå‡è¡¡ CPU ä¸Ž I/O è®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼› ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åºï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚ çŽ°åœ¨æˆ‘ä»¬å‡ ä¹Žæ‰€æœ‰çš„ç¨‹åºéƒ½é»˜é»˜åœ°äº«å—ç€è¿™äº›æˆæžœï¼Œä½†æ˜¯å¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œå¹¶å‘ç¨‹åºå¾ˆå¤šè¯¡å¼‚é—®é¢˜çš„æ ¹æºä¹Ÿåœ¨è¿™é‡Œã€‚ æºå¤´ä¹‹ä¸€ï¼šç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜åœ¨å•æ ¸æ—¶ä»£ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯åœ¨ä¸€é¢— CPU ä¸Šæ‰§è¡Œï¼ŒCPU ç¼“å­˜ä¸Žå†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å®¹æ˜“è§£å†³ã€‚å› ä¸ºæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯æ“ä½œåŒä¸€ä¸ª CPU çš„ç¼“å­˜ï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ç¼“å­˜çš„å†™ï¼Œå¯¹å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ¥è¯´ä¸€å®šæ˜¯å¯è§çš„ã€‚ä¾‹å¦‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œçº¿ç¨‹ A å’Œçº¿ç¨‹ B éƒ½æ˜¯æ“ä½œåŒä¸€ä¸ª CPU é‡Œé¢çš„ç¼“å­˜ï¼Œæ‰€ä»¥çº¿ç¨‹ A æ›´æ–°äº†å˜é‡ V çš„å€¼ï¼Œé‚£ä¹ˆçº¿ç¨‹ B ä¹‹åŽå†è®¿é—®å˜é‡ Vï¼Œå¾—åˆ°çš„ä¸€å®šæ˜¯ V çš„æœ€æ–°å€¼ï¼ˆçº¿ç¨‹ A å†™è¿‡çš„å€¼ï¼‰ã€‚ ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°ï¼Œæˆ‘ä»¬ç§°ä¸ºå¯è§æ€§ã€‚ å¤šæ ¸æ—¶ä»£ï¼Œæ¯é¢— CPU éƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼Œè¿™æ—¶ CPU ç¼“å­˜ä¸Žå†…å­˜çš„æ•°æ®ä¸€è‡´æ€§å°±æ²¡é‚£ä¹ˆå®¹æ˜“è§£å†³äº†ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨ä¸åŒçš„ CPU ä¸Šæ‰§è¡Œæ—¶ï¼Œè¿™äº›çº¿ç¨‹æ“ä½œçš„æ˜¯ä¸åŒçš„ CPU ç¼“å­˜ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œçº¿ç¨‹ A æ“ä½œçš„æ˜¯ CPU-1 ä¸Šçš„ç¼“å­˜ï¼Œè€Œçº¿ç¨‹ B æ“ä½œçš„æ˜¯ CPU-2 ä¸Šçš„ç¼“å­˜ï¼Œå¾ˆæ˜Žæ˜¾ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹ A å¯¹å˜é‡ V çš„æ“ä½œå¯¹äºŽçº¿ç¨‹ B è€Œè¨€å°±ä¸å…·å¤‡å¯è§æ€§äº†ã€‚è¿™ä¸ªå°±å±žäºŽç¡¬ä»¶ç¨‹åºå‘˜ç»™è½¯ä»¶ç¨‹åºå‘˜æŒ–çš„â€œå‘â€ã€‚ ä¸‹é¢æˆ‘ä»¬å†ç”¨ä¸€æ®µä»£ç æ¥éªŒè¯ä¸€ä¸‹å¤šæ ¸åœºæ™¯ä¸‹çš„å¯è§æ€§é—®é¢˜ã€‚ä¸‹é¢çš„ä»£ç ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡ add10K()æ–¹æ³•ï¼Œéƒ½ä¼šå¾ªçŽ¯ 10000 æ¬¡ count+=1 æ“ä½œã€‚åœ¨ calc()æ–¹æ³•ä¸­æˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è°ƒç”¨ä¸€æ¬¡ add10K()æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥æƒ³ä¸€æƒ³æ‰§è¡Œ calc()æ–¹æ³•å¾—åˆ°çš„ç»“æžœåº”è¯¥æ˜¯å¤šå°‘å‘¢ï¼Ÿ 123456789101112131415161718192021222324252627public class Test &#123; private long count = 0; private void add10K() &#123; int idx = 0; while(idx++ &lt; 10000) &#123; count += 1; &#125; &#125; public static long calc() &#123; final Test test = new Test(); // åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œadd()æ“ä½œ Thread th1 = new Thread(()-&gt;&#123; test.add10K(); &#125;); Thread th2 = new Thread(()-&gt;&#123; test.add10K(); &#125;); // å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ th1.start(); th2.start(); // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸ th1.join(); th2.join(); return count; &#125;&#125; ç›´è§‰å‘Šè¯‰æˆ‘ä»¬åº”è¯¥æ˜¯ 20000ï¼Œå› ä¸ºåœ¨å•çº¿ç¨‹é‡Œè°ƒç”¨ä¸¤æ¬¡ add10K()æ–¹æ³•ï¼Œcount çš„å€¼å°±æ˜¯ 20000ï¼Œä½†å®žé™…ä¸Š calc()çš„æ‰§è¡Œç»“æžœæ˜¯ä¸ª 10000 åˆ° 20000 ä¹‹é—´çš„éšæœºæ•°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬å‡è®¾çº¿ç¨‹ A å’Œçº¿ç¨‹ B åŒæ—¶å¼€å§‹æ‰§è¡Œï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡éƒ½ä¼šå°† count=0 è¯»åˆ°å„è‡ªçš„ CPU ç¼“å­˜é‡Œï¼Œæ‰§è¡Œå®Œ count+=1 ä¹‹åŽï¼Œå„è‡ª CPU ç¼“å­˜é‡Œçš„å€¼éƒ½æ˜¯ 1ï¼ŒåŒæ—¶å†™å…¥å†…å­˜åŽï¼Œæˆ‘ä»¬ä¼šå‘çŽ°å†…å­˜ä¸­æ˜¯ 1ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ 2ã€‚ä¹‹åŽç”±äºŽå„è‡ªçš„ CPU ç¼“å­˜é‡Œéƒ½æœ‰äº† count çš„å€¼ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯åŸºäºŽ CPU ç¼“å­˜é‡Œçš„ count å€¼æ¥è®¡ç®—ï¼Œæ‰€ä»¥å¯¼è‡´æœ€ç»ˆ count çš„å€¼éƒ½æ˜¯å°äºŽ 20000 çš„ã€‚è¿™å°±æ˜¯ç¼“å­˜çš„å¯è§æ€§é—®é¢˜ã€‚ å¾ªçŽ¯ 10000 æ¬¡ count+=1 æ“ä½œå¦‚æžœæ”¹ä¸ºå¾ªçŽ¯ 1 äº¿æ¬¡ï¼Œä½ ä¼šå‘çŽ°æ•ˆæžœæ›´æ˜Žæ˜¾ï¼Œæœ€ç»ˆ count çš„å€¼æŽ¥è¿‘ 1 äº¿ï¼Œè€Œä¸æ˜¯ 2 äº¿ã€‚å¦‚æžœå¾ªçŽ¯ 10000 æ¬¡ï¼Œcount çš„å€¼æŽ¥è¿‘ 20000ï¼ŒåŽŸå› æ˜¯ä¸¤ä¸ªçº¿ç¨‹ä¸æ˜¯åŒæ—¶å¯åŠ¨çš„ï¼Œæœ‰ä¸€ä¸ªæ—¶å·®ã€‚ æºå¤´ä¹‹äºŒï¼šçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŽŸå­æ€§é—®é¢˜ç”±äºŽ IO å¤ªæ…¢ï¼Œæ—©æœŸçš„æ“ä½œç³»ç»Ÿå°±å‘æ˜Žäº†å¤šè¿›ç¨‹ï¼Œå³ä¾¿åœ¨å•æ ¸çš„ CPU ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸€è¾¹å¬ç€æ­Œï¼Œä¸€è¾¹å†™ Bugï¼Œè¿™ä¸ªå°±æ˜¯å¤šè¿›ç¨‹çš„åŠŸåŠ³ã€‚ æ“ä½œç³»ç»Ÿå…è®¸æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€å°æ®µæ—¶é—´ï¼Œä¾‹å¦‚ 50 æ¯«ç§’ï¼Œè¿‡äº† 50 æ¯«ç§’æ“ä½œç³»ç»Ÿå°±ä¼šé‡æ–°é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹æ¥æ‰§è¡Œï¼ˆæˆ‘ä»¬ç§°ä¸ºâ€œä»»åŠ¡åˆ‡æ¢â€ï¼‰ï¼Œè¿™ä¸ª 50 æ¯«ç§’ç§°ä¸ºæ—¶é—´ç‰‡ã€‚ åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…ï¼Œå¦‚æžœä¸€ä¸ªè¿›ç¨‹è¿›è¡Œä¸€ä¸ª IO æ“ä½œï¼Œä¾‹å¦‚è¯»ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ—¶å€™è¯¥è¿›ç¨‹å¯ä»¥æŠŠè‡ªå·±æ ‡è®°ä¸ºâ€œä¼‘çœ çŠ¶æ€â€å¹¶å‡ºè®© CPU çš„ä½¿ç”¨æƒï¼Œå¾…æ–‡ä»¶è¯»è¿›å†…å­˜ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠè¿™ä¸ªä¼‘çœ çš„è¿›ç¨‹å”¤é†’ï¼Œå”¤é†’åŽçš„è¿›ç¨‹å°±æœ‰æœºä¼šé‡æ–°èŽ·å¾— CPU çš„ä½¿ç”¨æƒäº†ã€‚ è¿™é‡Œçš„è¿›ç¨‹åœ¨ç­‰å¾… IO æ—¶ä¹‹æ‰€ä»¥ä¼šé‡Šæ”¾ CPU ä½¿ç”¨æƒï¼Œæ˜¯ä¸ºäº†è®© CPU åœ¨è¿™æ®µç­‰å¾…æ—¶é—´é‡Œå¯ä»¥åšåˆ«çš„äº‹æƒ…ï¼Œè¿™æ ·ä¸€æ¥ CPU çš„ä½¿ç”¨çŽ‡å°±ä¸Šæ¥äº†ï¼›æ­¤å¤–ï¼Œå¦‚æžœè¿™æ—¶æœ‰å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹Ÿè¯»æ–‡ä»¶ï¼Œè¯»æ–‡ä»¶çš„æ“ä½œå°±ä¼šæŽ’é˜Ÿï¼Œç£ç›˜é©±åŠ¨åœ¨å®Œæˆä¸€ä¸ªè¿›ç¨‹çš„è¯»æ“ä½œåŽï¼Œå‘çŽ°æœ‰æŽ’é˜Ÿçš„ä»»åŠ¡ï¼Œå°±ä¼šç«‹å³å¯åŠ¨ä¸‹ä¸€ä¸ªè¯»æ“ä½œï¼Œè¿™æ · IO çš„ä½¿ç”¨çŽ‡ä¹Ÿä¸Šæ¥äº†ã€‚ æ˜¯ä¸æ˜¯å¾ˆç®€å•çš„é€»è¾‘ï¼Ÿä½†æ˜¯ï¼Œè™½ç„¶çœ‹ä¼¼ç®€å•ï¼Œæ”¯æŒå¤šè¿›ç¨‹åˆ†æ—¶å¤ç”¨åœ¨æ“ä½œç³»ç»Ÿçš„å‘å±•å²ä¸Šå´å…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰ï¼ŒUnix å°±æ˜¯å› ä¸ºè§£å†³äº†è¿™ä¸ªé—®é¢˜è€Œåå™ªå¤©ä¸‹çš„ã€‚ æ—©æœŸçš„æ“ä½œç³»ç»ŸåŸºäºŽè¿›ç¨‹æ¥è°ƒåº¦ CPUï¼Œä¸åŒè¿›ç¨‹é—´æ˜¯ä¸å…±äº«å†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥è¿›ç¨‹è¦åšä»»åŠ¡åˆ‡æ¢å°±è¦åˆ‡æ¢å†…å­˜æ˜ å°„åœ°å€ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹åˆ›å»ºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œéƒ½æ˜¯å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´çš„ï¼Œæ‰€ä»¥çº¿ç¨‹åšä»»åŠ¡åˆ‡æ¢æˆæœ¬å°±å¾ˆä½Žäº†ã€‚çŽ°ä»£çš„æ“ä½œç³»ç»Ÿéƒ½åŸºäºŽæ›´è½»é‡çš„çº¿ç¨‹æ¥è°ƒåº¦ï¼ŒçŽ°åœ¨æˆ‘ä»¬æåˆ°çš„â€œä»»åŠ¡åˆ‡æ¢â€éƒ½æ˜¯æŒ‡â€œçº¿ç¨‹åˆ‡æ¢â€ã€‚ Java å¹¶å‘ç¨‹åºéƒ½æ˜¯åŸºäºŽå¤šçº¿ç¨‹çš„ï¼Œè‡ªç„¶ä¹Ÿä¼šæ¶‰åŠåˆ°ä»»åŠ¡åˆ‡æ¢ï¼Œä¹Ÿè®¸ä½ æƒ³ä¸åˆ°ï¼Œä»»åŠ¡åˆ‡æ¢ç«Ÿç„¶ä¹Ÿæ˜¯å¹¶å‘ç¼–ç¨‹é‡Œè¯¡å¼‚ Bug çš„æºå¤´ä¹‹ä¸€ã€‚ä»»åŠ¡åˆ‡æ¢çš„æ—¶æœºå¤§å¤šæ•°æ˜¯åœ¨æ—¶é—´ç‰‡ç»“æŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬çŽ°åœ¨åŸºæœ¬éƒ½ä½¿ç”¨é«˜çº§è¯­è¨€ç¼–ç¨‹ï¼Œé«˜çº§è¯­è¨€é‡Œä¸€æ¡è¯­å¥å¾€å¾€éœ€è¦å¤šæ¡ CPU æŒ‡ä»¤å®Œæˆï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ä¸­çš„count += 1ï¼Œè‡³å°‘éœ€è¦ä¸‰æ¡ CPU æŒ‡ä»¤ã€‚ æŒ‡ä»¤ 1ï¼šé¦–å…ˆï¼Œéœ€è¦æŠŠå˜é‡ count ä»Žå†…å­˜åŠ è½½åˆ° CPU çš„å¯„å­˜å™¨ï¼› æŒ‡ä»¤ 2ï¼šä¹‹åŽï¼Œåœ¨å¯„å­˜å™¨ä¸­æ‰§è¡Œ+1 æ“ä½œï¼› æŒ‡ä»¤ 3ï¼šæœ€åŽï¼Œå°†ç»“æžœå†™å…¥å†…å­˜ï¼ˆç¼“å­˜æœºåˆ¶å¯¼è‡´å¯èƒ½å†™å…¥çš„æ˜¯ CPU ç¼“å­˜è€Œä¸æ˜¯å†…å­˜ï¼‰ã€‚ æ“ä½œç³»ç»Ÿåšä»»åŠ¡åˆ‡æ¢ï¼Œå¯ä»¥å‘ç”Ÿåœ¨ä»»ä½•ä¸€æ¡CPU æŒ‡ä»¤æ‰§è¡Œå®Œï¼Œæ˜¯çš„ï¼Œæ˜¯ CPU æŒ‡ä»¤ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€é‡Œçš„ä¸€æ¡è¯­å¥ã€‚å¯¹äºŽä¸Šé¢çš„ä¸‰æ¡æŒ‡ä»¤æ¥è¯´ï¼Œæˆ‘ä»¬å‡è®¾ count=0ï¼Œå¦‚æžœçº¿ç¨‹ A åœ¨æŒ‡ä»¤ 1 æ‰§è¡Œå®ŒåŽåšçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹ A å’Œçº¿ç¨‹ B æŒ‰ç…§ä¸‹å›¾çš„åºåˆ—æ‰§è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå‘çŽ°ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº† count+=1 çš„æ“ä½œï¼Œä½†æ˜¯å¾—åˆ°çš„ç»“æžœä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ 2ï¼Œè€Œæ˜¯ 1ã€‚ æˆ‘ä»¬æ½œæ„è¯†é‡Œé¢è§‰å¾— count+=1 è¿™ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œå°±åƒä¸€ä¸ªåŽŸå­ä¸€æ ·ï¼Œçº¿ç¨‹çš„åˆ‡æ¢å¯ä»¥å‘ç”Ÿåœ¨ count+=1 ä¹‹å‰ï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨ count+=1 ä¹‹åŽï¼Œä½†å°±æ˜¯ä¸ä¼šå‘ç”Ÿåœ¨ä¸­é—´ã€‚æˆ‘ä»¬æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ“ä½œåœ¨ CPU æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¸è¢«ä¸­æ–­çš„ç‰¹æ€§ç§°ä¸ºåŽŸå­æ€§ã€‚CPU èƒ½ä¿è¯çš„åŽŸå­æ“ä½œæ˜¯ CPU æŒ‡ä»¤çº§åˆ«çš„ï¼Œè€Œä¸æ˜¯é«˜çº§è¯­è¨€çš„æ“ä½œç¬¦ï¼Œè¿™æ˜¯è¿èƒŒæˆ‘ä»¬ç›´è§‰çš„åœ°æ–¹ã€‚å› æ­¤ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨é«˜çº§è¯­è¨€å±‚é¢ä¿è¯æ“ä½œçš„åŽŸå­æ€§ã€‚ æºå¤´ä¹‹ä¸‰ï¼šç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜é‚£å¹¶å‘ç¼–ç¨‹é‡Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æœ‰è¿ç›´è§‰å®¹æ˜“å¯¼è‡´è¯¡å¼‚ Bug çš„æŠ€æœ¯å‘¢ï¼Ÿæœ‰çš„ï¼Œå°±æ˜¯æœ‰åºæ€§ã€‚é¡¾åæ€ä¹‰ï¼Œæœ‰åºæ€§æŒ‡çš„æ˜¯ç¨‹åºæŒ‰ç…§ä»£ç çš„å…ˆåŽé¡ºåºæ‰§è¡Œã€‚ç¼–è¯‘å™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæœ‰æ—¶å€™ä¼šæ”¹å˜ç¨‹åºä¸­è¯­å¥çš„å…ˆåŽé¡ºåºï¼Œä¾‹å¦‚ç¨‹åºä¸­ï¼šâ€œa=6ï¼›b=7ï¼›â€ç¼–è¯‘å™¨ä¼˜åŒ–åŽå¯èƒ½å˜æˆâ€œb=7ï¼›a=6ï¼›â€ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨è°ƒæ•´äº†è¯­å¥çš„é¡ºåºï¼Œä½†æ˜¯ä¸å½±å“ç¨‹åºçš„æœ€ç»ˆç»“æžœã€‚ä¸è¿‡æœ‰æ—¶å€™ç¼–è¯‘å™¨åŠè§£é‡Šå™¨çš„ä¼˜åŒ–å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„ Bugã€‚ åœ¨ Java é¢†åŸŸä¸€ä¸ªç»å…¸çš„æ¡ˆä¾‹å°±æ˜¯åˆ©ç”¨åŒé‡æ£€æŸ¥åˆ›å»ºå•ä¾‹å¯¹è±¡ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼šåœ¨èŽ·å–å®žä¾‹ getInstance()çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­ instance æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æžœä¸ºç©ºï¼Œåˆ™é”å®š Singleton.class å¹¶å†æ¬¡æ£€æŸ¥ instance æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æžœè¿˜ä¸ºç©ºåˆ™åˆ›å»º Singleton çš„ä¸€ä¸ªå®žä¾‹ã€‚ 123456789101112public class Singleton &#123; static Singleton instance; static Singleton getInstance()&#123; if (instance == null) &#123; synchronized(Singleton.class) &#123; if (instance == null) instance = new Singleton(); &#125; &#125; return instance; &#125;&#125; å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ Aã€B åŒæ—¶è°ƒç”¨ getInstance()æ–¹æ³•ï¼Œä»–ä»¬ä¼šåŒæ—¶å‘çŽ° instance == null ï¼ŒäºŽæ˜¯åŒæ—¶å¯¹ Singleton.class åŠ é”ï¼Œæ­¤æ—¶ JVM ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸåŠ é”æˆåŠŸï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Aï¼‰ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ™ä¼šå¤„äºŽç­‰å¾…çŠ¶æ€ï¼ˆå‡è®¾æ˜¯çº¿ç¨‹ Bï¼‰ï¼›çº¿ç¨‹ A ä¼šåˆ›å»ºä¸€ä¸ª Singleton å®žä¾‹ï¼Œä¹‹åŽé‡Šæ”¾é”ï¼Œé”é‡Šæ”¾åŽï¼Œçº¿ç¨‹ B è¢«å”¤é†’ï¼Œçº¿ç¨‹ B å†æ¬¡å°è¯•åŠ é”ï¼Œæ­¤æ—¶æ˜¯å¯ä»¥åŠ é”æˆåŠŸçš„ï¼ŒåŠ é”æˆåŠŸåŽï¼Œçº¿ç¨‹ B æ£€æŸ¥ instance == null æ—¶ä¼šå‘çŽ°ï¼Œå·²ç»åˆ›å»ºè¿‡ Singleton å®žä¾‹äº†ï¼Œæ‰€ä»¥çº¿ç¨‹ B ä¸ä¼šå†åˆ›å»ºä¸€ä¸ª Singleton å®žä¾‹ã€‚ è¿™çœ‹ä¸ŠåŽ»ä¸€åˆ‡éƒ½å¾ˆå®Œç¾Žï¼Œæ— æ‡ˆå¯å‡»ï¼Œä½†å®žé™…ä¸Šè¿™ä¸ª getInstance()æ–¹æ³•å¹¶ä¸å®Œç¾Žã€‚é—®é¢˜å‡ºåœ¨å“ªé‡Œå‘¢ï¼Ÿå‡ºåœ¨ new æ“ä½œä¸Šï¼Œæˆ‘ä»¬ä»¥ä¸ºçš„ new æ“ä½œåº”è¯¥æ˜¯ï¼š åˆ†é…ä¸€å—å†…å­˜ Mï¼› åœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ï¼› ç„¶åŽ M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ã€‚ ä½†æ˜¯å®žé™…ä¸Šä¼˜åŒ–åŽçš„æ‰§è¡Œè·¯å¾„å´æ˜¯è¿™æ ·çš„ï¼š åˆ†é…ä¸€å—å†…å­˜ Mï¼› å°† M çš„åœ°å€èµ‹å€¼ç»™ instance å˜é‡ï¼› æœ€åŽåœ¨å†…å­˜ M ä¸Šåˆå§‹åŒ– Singleton å¯¹è±¡ã€‚ ä¼˜åŒ–åŽä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å‡è®¾çº¿ç¨‹ A å…ˆæ‰§è¡Œ getInstance()æ–¹æ³•ï¼Œå½“æ‰§è¡Œå®ŒæŒ‡ä»¤ 2 æ—¶æ°å¥½å‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°äº†çº¿ç¨‹ B ä¸Šï¼›å¦‚æžœæ­¤æ—¶çº¿ç¨‹ B ä¹Ÿæ‰§è¡Œ getInstance()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ B åœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªåˆ¤æ–­æ—¶ä¼šå‘çŽ° instance != nullï¼Œæ‰€ä»¥ç›´æŽ¥è¿”å›ž instanceï¼Œè€Œæ­¤æ—¶çš„ instance æ˜¯æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„ï¼Œå¦‚æžœæˆ‘ä»¬è¿™ä¸ªæ—¶å€™è®¿é—® instance çš„æˆå‘˜å˜é‡å°±å¯èƒ½è§¦å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ æ€»ç»“è¦å†™å¥½å¹¶å‘ç¨‹åºï¼Œé¦–å…ˆè¦çŸ¥é“å¹¶å‘ç¨‹åºçš„é—®é¢˜åœ¨å“ªé‡Œï¼Œåªæœ‰ç¡®å®šäº†â€œé¶å­â€ï¼Œæ‰æœ‰å¯èƒ½æŠŠé—®é¢˜è§£å†³ï¼Œæ¯•ç«Ÿæ‰€æœ‰çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯é’ˆå¯¹é—®é¢˜çš„ã€‚å¹¶å‘ç¨‹åºç»å¸¸å‡ºçŽ°çš„è¯¡å¼‚é—®é¢˜çœ‹ä¸ŠåŽ»éžå¸¸æ— åŽ˜å¤´ï¼Œä½†æ˜¯æ·±ç©¶çš„è¯ï¼Œæ— å¤–ä¹Žå°±æ˜¯ç›´è§‰æ¬ºéª—äº†æˆ‘ä»¬ï¼Œåªè¦æˆ‘ä»¬èƒ½å¤Ÿæ·±åˆ»ç†è§£å¯è§æ€§ã€åŽŸå­æ€§ã€æœ‰åºæ€§åœ¨å¹¶å‘åœºæ™¯ä¸‹çš„åŽŸç†ï¼Œå¾ˆå¤šå¹¶å‘ Bug éƒ½æ˜¯å¯ä»¥ç†è§£ã€å¯ä»¥è¯Šæ–­çš„. åœ¨ä»‹ç»å¯è§æ€§ã€åŽŸå­æ€§ã€æœ‰åºæ€§çš„æ—¶å€™ï¼Œç‰¹æ„æåˆ°ç¼“å­˜å¯¼è‡´çš„å¯è§æ€§é—®é¢˜ï¼Œçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„åŽŸå­æ€§é—®é¢˜ï¼Œç¼–è¯‘ä¼˜åŒ–å¸¦æ¥çš„æœ‰åºæ€§é—®é¢˜ï¼Œå…¶å®žç¼“å­˜ã€çº¿ç¨‹ã€ç¼–è¯‘ä¼˜åŒ–çš„ç›®çš„å’Œæˆ‘ä»¬å†™å¹¶å‘ç¨‹åºçš„ç›®çš„æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯æé«˜ç¨‹åºæ€§èƒ½ã€‚ä½†æ˜¯æŠ€æœ¯åœ¨è§£å†³ä¸€ä¸ªé—®é¢˜çš„åŒæ—¶ï¼Œå¿…ç„¶ä¼šå¸¦æ¥å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åœ¨é‡‡ç”¨ä¸€é¡¹æŠ€æœ¯çš„åŒæ—¶ï¼Œä¸€å®šè¦æ¸…æ¥šå®ƒå¸¦æ¥çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•è§„é¿ã€‚ æˆ‘ä»¬è¿™ä¸ªä¸“æ åœ¨è®²è§£æ¯é¡¹æŠ€æœ¯çš„æ—¶å€™ï¼Œéƒ½ä¼šå°½é‡å°†æ¯é¡¹æŠ€æœ¯è§£å†³çš„é—®é¢˜ä»¥åŠäº§ç”Ÿçš„é—®é¢˜è®²æ¸…æ¥šï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½å¤Ÿåœ¨è¿™æ–¹é¢å¤šæ€è€ƒã€å¤šæ€»ç»“ã€‚ è¯¾åŽæ€è€ƒå¸¸å¬äººè¯´ï¼Œåœ¨ 32 ä½çš„æœºå™¨ä¸Šå¯¹ long åž‹å˜é‡è¿›è¡ŒåŠ å‡æ“ä½œå­˜åœ¨å¹¶å‘éšæ‚£ï¼Œåˆ°åº•æ˜¯ä¸æ˜¯è¿™æ ·å‘¢ï¼ŸçŽ°åœ¨ç›¸ä¿¡ä½ ä¸€å®šèƒ½åˆ†æžå‡ºæ¥ã€‚ æ¬¢è¿Žåœ¨ç•™è¨€åŒºä¸Žæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿Žä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æžœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿ŽæŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚ ä¼˜ç§€å›žå¤@Jialinå¯¹äºŽåŒé‡é”çš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—ä»»å¤§é¹åˆ†æžçš„è›®æœ‰é“ç†ï¼Œçº¿ç¨‹Aè¿›å…¥ç¬¬äºŒä¸ªåˆ¤ç©ºæ¡ä»¶ï¼Œè¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œå‘ç”Ÿäº†æ—¶é—´ç‰‡åˆ‡æ¢ï¼Œå³ä½¿æ²¡æœ‰é‡Šæ”¾é”ï¼Œçº¿ç¨‹Båˆšè¦è¿›å…¥ç¬¬ä¸€ä¸ªåˆ¤ç©ºæ¡ä»¶æ—¶ï¼Œå‘çŽ°æ¡ä»¶ä¸æˆç«‹ï¼Œç›´æŽ¥è¿”å›žinstanceå¼•ç”¨ï¼Œä¸ç”¨åŽ»èŽ·å–é”ã€‚å¦‚æžœå¯¹instanceè¿›è¡Œvolatileè¯­ä¹‰å£°æ˜Žï¼Œå°±å¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æŽ’åºï¼Œé¿å…è¯¥æƒ…å†µå‘ç”Ÿã€‚å¯¹äºŽæœ‰äº›åŒå­¦å¯¹CPUç¼“å­˜å’Œå†…å­˜çš„ç–‘é—®ï¼ŒCPUç¼“å­˜ä¸å­˜åœ¨äºŽå†…å­˜ä¸­çš„ï¼Œå®ƒæ˜¯ä¸€å—æ¯”å†…å­˜æ›´å°ã€è¯»å†™é€Ÿåº¦æ›´å¿«çš„èŠ¯ç‰‡ï¼Œè‡³äºŽä»€ä¹ˆæ—¶å€™æŠŠæ•°æ®ä»Žç¼“å­˜å†™åˆ°å†…å­˜ï¼Œæ²¡æœ‰å›ºå®šçš„æ—¶é—´ï¼ŒåŒæ ·åœ°ï¼Œå¯¹äºŽæœ‰volatileè¯­ä¹‰å£°æ˜Žçš„å˜é‡ï¼Œçº¿ç¨‹Aæ‰§è¡Œå®ŒåŽä¼šå¼ºåˆ¶å°†å€¼åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼Œçº¿ç¨‹Bè¿›è¡Œç›¸å…³æ“ä½œæ—¶ä¼šå¼ºåˆ¶é‡æ–°æŠŠå†…å­˜ä¸­çš„å†…å®¹å†™å…¥åˆ°è‡ªå·±çš„ç¼“å­˜ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†volatileçš„å†™å…¥å±éšœé—®é¢˜ï¼Œå½“ç„¶ä¹Ÿå°±æ˜¯æ‰€è°“happen-beforeé—®é¢˜ã€‚ @coderlongç±»åž‹64ä½ï¼Œæ‰€ä»¥åœ¨32ä½çš„æœºå™¨ä¸Šï¼Œå¯¹longç±»åž‹çš„æ•°æ®æ“ä½œé€šå¸¸éœ€è¦å¤šæ¡æŒ‡ä»¤ç»„åˆå‡ºæ¥ï¼Œæ— æ³•ä¿è¯åŽŸå­æ€§ï¼Œæ‰€ä»¥å¹¶å‘çš„æ—¶å€™ä¼šå‡ºé—®é¢˜ðŸŒðŸŒðŸŒ @å˜Žå˜Žé’ˆå¯¹é˜¿æ ¹ä¸€ä¸–çš„é—®é¢˜ï¼Œé—®é¢˜å…¶å®žå‡ºçŽ°åœ¨new Singleton()è¿™é‡Œã€‚è¿™ä¸€è¡Œåˆ†å¯¹äºŽCPUæ¥è®²ï¼Œæœ‰3ä¸ªæŒ‡ä»¤ï¼š1.åˆ†é…å†…å­˜ç©ºé—´2.åˆå§‹åŒ–å¯¹è±¡3.instanceå¼•ç”¨æŒ‡å‘å†…å­˜ç©ºé—´æ­£å¸¸æ‰§è¡Œé¡ºåº1-2-3ä½†æ˜¯CPUé‡æŽ’åºåŽæ‰§è¡Œé¡ºåºå¯èƒ½ä¸º1-3-2ï¼Œé‚£ä¹ˆé—®é¢˜å°±æ¥äº†æ­¥éª¤å¦‚ä¸‹ï¼š1.Aã€Bçº¿ç¨‹åŒæ—¶è¿›å…¥äº†ç¬¬ä¸€ä¸ªifåˆ¤æ–­2.Aé¦–å…ˆè¿›å…¥synchronizedå—ï¼Œç”±äºŽinstanceä¸ºnullï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œinstance = new Singleton();3.ç„¶åŽçº¿ç¨‹Aæ‰§è¡Œ1-&gt; JVMå…ˆç”»å‡ºäº†ä¸€äº›åˆ†é…ç»™Singletonå®žä¾‹çš„ç©ºç™½å†…å­˜ï¼Œå¹¶èµ‹å€¼ç»™instance4.åœ¨è¿˜æ²¡æœ‰è¿›è¡Œç¬¬ä¸‰æ­¥ï¼ˆå°†instanceå¼•ç”¨æŒ‡å‘å†…å­˜ç©ºé—´ï¼‰çš„æ—¶å€™ï¼Œçº¿ç¨‹Aç¦»å¼€äº†synchronizedå—5.çº¿ç¨‹Bè¿›å…¥synchronizedå—ï¼Œè¯»å–åˆ°äº†Açº¿ç¨‹è¿”å›žçš„instanceï¼Œæ­¤æ—¶è¿™ä¸ªinstanceå¹¶æœªè¿›è¡Œç‰©ç†åœ°å€æŒ‡å‘ï¼Œæ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚æœ‰äººè¯´å°†å¯¹è±¡è®¾ç½®æˆvolatileï¼Œå…¶å®žä¹Ÿä¸èƒ½å®Œå…¨è§£å†³é—®é¢˜ã€‚volatileåªæ˜¯ä¿è¯å¯è§æ€§ï¼Œå¹¶ä¸ä¿è¯åŽŸå­æ€§ã€‚ çŽ°è¡Œçš„æ¯”è¾ƒé€šç”¨çš„åšæ³•å°±æ˜¯é‡‡ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼æ¥å®žçŽ°ã€‚ 12345678910111213public class MySingleton &#123; private static class MySingletonHandler&#123; private static MySingleton instanct = new MySingleton(); &#125; private MySingleton()&#123;&#125; public static MySingleton getInstance() &#123; return MySingletonHandler.instanct; &#125;&#125; @åˆ«çš±çœ‰å‘¨æœ«äº†å¯¹ç•™è¨€é—®é¢˜æ€»ç»“ä¸€ä¸‹ â€”â€”å¯è§æ€§é—®é¢˜â€”â€”å¯¹äºŽå¯è§æ€§é‚£ä¸ªä¾‹å­æˆ‘ä»¬å…ˆçœ‹ä¸‹å®šä¹‰:å¯è§æ€§:ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„ä¿®æ”¹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ° å¹¶å‘é—®é¢˜å¾€å¾€éƒ½æ˜¯ç»¼åˆè¯ï¼Œè¿™é‡Œå³ä½¿æ˜¯å•æ ¸CPUï¼Œåªè¦å‡ºçŽ°çº¿ç¨‹åˆ‡æ¢å°±ä¼šæœ‰åŽŸå­æ€§é—®é¢˜ã€‚ä½†è€å¸ˆçš„ç›®çš„æ˜¯ä¸ºäº†è®©å¤§å®¶æ˜Žç™½ä»€ä¹ˆæ˜¯å¯è§æ€§æˆ–è®¸æˆ‘ä»¬å¯ä»¥æŠŠçº¿ç¨‹å¯¹å˜é‡çš„è¯»å¯å†™éƒ½çœ‹ä½œæ—¶åŽŸå­æ“ä½œï¼Œä¹Ÿå°±æ˜¯cpuå¯¹å˜é‡çš„æ“ä½œä¸­é—´çŠ¶æ€ä¸å¯è§ï¼Œè¿™æ ·å°±èƒ½æ›´åŠ ç†è§£ä»€ä¹ˆæ˜¯å¯è§æ€§äº†ã€‚ â€”â€”CPUç¼“å­˜åˆ·æ–°åˆ°å†…å­˜çš„æ—¶æœºâ€”â€”cpuå°†ç¼“å­˜å†™å…¥å†…å­˜çš„æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ã€‚é™¤éžä½ è°ƒç”¨cpuç›¸å…³æŒ‡ä»¤å¼ºåˆ· â€”â€”åŒé‡é”é—®é¢˜â€”â€”å¦‚æžœAçº¿ç¨‹ä¸ŽBçº¿ç¨‹å¦‚æžœåŒæ—¶è¿›å…¥ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºå°±æ²¡æœ‰é—®é¢˜ å¦‚æžœAçº¿ç¨‹å…ˆèŽ·å–é”å¹¶å‡ºçŽ°æŒ‡ä»¤é‡æŽ’åºæ—¶ï¼ŒBçº¿ç¨‹æœªè¿›å…¥ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆå°±å¯èƒ½å‡ºçŽ°ç©ºæŒ‡é’ˆé—®é¢˜ï¼Œè¿™é‡Œè¯´å¯èƒ½å‡ºçŽ°é—®é¢˜æ˜¯å› ä¸ºå½“æŠŠå†…å­˜åœ°å€èµ‹å€¼ç»™å…±äº«å˜é‡åŽï¼ŒCPUå°†æ•°æ®å†™å›žç¼“å­˜çš„æ—¶æœºæ˜¯éšæœºçš„ â€”â€” synchronizedâ€”â€”çº¿ç¨‹åœ¨synchronizedå—ä¸­ï¼Œå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œé”æ˜¯ä¸ä¼šé‡Šæ”¾çš„ â€”â€”æŒ‡ä»¤ä¼˜åŒ–â€”â€”é™¤äº†ç¼–è¯‘ä¼˜åŒ–,æœ‰ä¸€éƒ¨åˆ†å¯ä»¥é€šè¿‡çœ‹æ±‡ç¼–ä»£ç æ¥çœ‹ï¼Œä½†æ˜¯CPUå’Œè§£é‡Šå™¨åœ¨è¿è¡ŒæœŸä¹Ÿä¼šåšä¸€éƒ¨åˆ†ä¼˜åŒ–ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™éƒ½æ˜¯çœ‹ä¸åˆ°çš„ï¼Œä¹Ÿå¾ˆéš¾é‡çŽ°ã€‚ â€”â€”JMMæ¨¡åž‹å’Œç‰©ç†å†…å­˜ã€ç¼“å­˜ç­‰å…³ç³»â€”â€”å†…å­˜ã€cpuç¼“å­˜æ˜¯ç‰©ç†å­˜åœ¨ï¼Œjvmå†…å­˜æ˜¯è½¯ä»¶å­˜åœ¨çš„ã€‚å…³äºŽçº¿ç¨‹çš„å·¥ä½œå†…å­˜å’Œå¯„å­˜å™¨ã€cpuç¼“å­˜çš„å…³ç³» å¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« https://blog.csdn.net/u013851082/article/details/70314778/ â€”â€”IOæ“ä½œâ€”â€”ioæ“ä½œä¸å ç”¨cpuï¼Œè¯»æ–‡ä»¶ï¼Œæ˜¯è®¾å¤‡é©±åŠ¨å¹²çš„äº‹ï¼Œcpuåªç®¡å‘å‘½ä»¤ã€‚å‘å®Œå‘½ä»¤ï¼Œå°±å¯ä»¥å¹²åˆ«çš„äº‹æƒ…äº†ã€‚ â€”â€”å¯„å­˜å™¨åˆ‡æ¢â€”â€”å¯„å­˜å™¨æ˜¯å…±ç”¨çš„ï¼ŒAçº¿ç¨‹åˆ‡æ¢åˆ°Bçº¿ç¨‹çš„æ—¶å€™ï¼Œå¯„å­˜å™¨ä¼šæŠŠæ“ä½œAçš„ç›¸å…³å†…å®¹ä¼šä¿å­˜åˆ°å†…å­˜é‡Œï¼Œåˆ‡æ¢å›žæ¥çš„æ—¶å€™ï¼Œä¼šä»Žå†…å­˜æŠŠå†…å®¹åŠ è½½åˆ°å¯„å­˜å™¨ã€‚å¯ä»¥ç†è§£ä¸ºæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„å¯„å­˜å™¨ è¯·è€å¸ˆå¸®å¿™çœ‹çœ‹ï¼Œæœ‰æ²¡é—®é¢˜ã€‚å¸Œæœ›æˆ‘çš„æ€»ç»“èƒ½å¸®åˆ°æ›´å¤šäººðŸ˜„ðŸ˜„]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[JavaåŒ äººæ‰‹æ³•-ä¼˜é›…çš„å¤„ç†ç©ºå€¼]]></title>
      <url>%2F2020%2F03%2F04%2FJava%E5%8C%A0%E4%BA%BA%E6%89%8B%E6%B3%95-%E4%BC%98%E9%9B%85%E7%9A%84%E5%A4%84%E7%90%86%E7%A9%BA%E5%80%BC%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åäº”ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— å¯¼è¯­ åœ¨ç¬”è€…å‡ å¹´çš„å¼€å‘ç»éªŒä¸­ï¼Œç»å¸¸çœ‹åˆ°é¡¹ç›®ä¸­å­˜åœ¨åˆ°å¤„ç©ºå€¼åˆ¤æ–­çš„æƒ…å†µï¼Œè¿™äº›åˆ¤æ–­ï¼Œä¼šè®©äººè§‰å¾—æ‘¸ä¸è¿™å¤´ç»ªï¼Œå®ƒçš„å‡ºçŽ°å¾ˆæœ‰å¯èƒ½å’Œå½“å‰çš„ä¸šåŠ¡é€»è¾‘å¹¶æ²¡æœ‰å…³ç³»ã€‚ä½†å®ƒä¼šè®©ä½ å¾ˆå¤´ç–¼ã€‚æœ‰æ—¶å€™ï¼Œæ›´å¯æ€•çš„æ˜¯ç³»ç»Ÿå› ä¸ºè¿™äº›ç©ºå€¼çš„æƒ…å†µï¼Œä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿå‘ç”Ÿé—®é¢˜ã€‚æ­¤ç¯‡æ–‡ç« ï¼Œæˆ‘æ€»ç»“äº†å‡ ç§å…³äºŽç©ºå€¼çš„å¤„ç†æ‰‹æ³•ï¼Œå¸Œæœ›å¯¹è¯»è€…æœ‰å¸®åŠ©ã€‚ ä¸šåŠ¡ä¸­çš„ç©ºå€¼åœºæ™¯å­˜åœ¨ä¸€ä¸ªUserSearchServiceç”¨æ¥æä¾›ç”¨æˆ·æŸ¥è¯¢çš„åŠŸèƒ½: 12345public interface UserSearchService&#123; List&lt;User&gt; listUser(); User get(Integer id);&#125; é—®é¢˜çŽ°åœºå¯¹äºŽé¢å‘å¯¹è±¡è¯­è¨€æ¥è®²ï¼ŒæŠ½è±¡å±‚çº§ç‰¹åˆ«çš„é‡è¦ã€‚å°¤å…¶æ˜¯å¯¹æŽ¥å£çš„æŠ½è±¡ï¼Œå®ƒåœ¨è®¾è®¡å’Œå¼€å‘ä¸­å å¾ˆå¤§çš„æ¯”é‡ï¼Œæˆ‘ä»¬åœ¨å¼€å‘æ—¶å¸Œæœ›å°½é‡é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚å¯¹äºŽä»¥ä¸Šæè¿°çš„æŽ¥å£æ–¹æ³•æ¥çœ‹ï¼Œå¤§æ¦‚å¯ä»¥æŽ¨æ–­å‡ºå¯èƒ½å®ƒåŒ…å«äº†ä»¥ä¸‹ä¸¤ä¸ªå«ä¹‰: listUser(): æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ get(Integer id): æŸ¥è¯¢å•ä¸ªç”¨æˆ· åœ¨æ‰€æœ‰çš„å¼€å‘ä¸­ï¼ŒXPæŽ¨å´‡çš„TDDæ¨¡å¼å¯ä»¥å¾ˆå¥½çš„å¼•å¯¼æˆ‘ä»¬å¯¹æŽ¥å£çš„å®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†TDDä½œä¸ºå¼€å‘ä»£ç çš„â€æŽ¨åŠ¨è€…â€ã€‚å¯¹äºŽä»¥ä¸Šçš„æŽ¥å£ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨TDDè¿›è¡Œæµ‹è¯•ç”¨ä¾‹å…ˆè¡Œæ—¶ï¼Œå‘çŽ°äº†æ½œåœ¨çš„é—®é¢˜ï¼š listUser() å¦‚æžœæ²¡æœ‰æ•°æ®ï¼Œé‚£å®ƒæ˜¯è¿”å›žç©ºé›†åˆè¿˜æ˜¯nullå‘¢ï¼Ÿ get(Integer id) å¦‚æžœæ²¡æœ‰è¿™ä¸ªå¯¹è±¡ï¼Œæ˜¯æŠ›å¼‚å¸¸è¿˜æ˜¯è¿”å›žnullå‘¢ï¼Ÿ æ·±å…¥listUserç ”ç©¶æˆ‘ä»¬å…ˆæ¥è®¨è®º 1listUser() è¿™ä¸ªæŽ¥å£ï¼Œæˆ‘ç»å¸¸çœ‹åˆ°å¦‚ä¸‹å®žçŽ°: 1234567public List&lt;User&gt; listUser()&#123; List&lt;User&gt; userList = userListRepostity.selectByExample(new UserExample()); if(CollectionUtils.isEmpty(userList))&#123;//spring utilå·¥å…·ç±» return null; &#125; return userList;&#125; è¿™æ®µä»£ç è¿”å›žæ˜¯null,ä»Žæˆ‘å¤šå¹´çš„å¼€å‘ç»éªŒæ¥è®²ï¼Œå¯¹äºŽé›†åˆè¿™æ ·è¿”å›žå€¼ï¼Œæœ€å¥½ä¸è¦è¿”å›žnullï¼Œå› ä¸ºå¦‚æžœè¿”å›žäº†nullï¼Œä¼šç»™è°ƒç”¨è€…å¸¦æ¥å¾ˆå¤šéº»çƒ¦ã€‚ä½ å°†ä¼šæŠŠè¿™ç§è°ƒç”¨é£Žé™©äº¤ç»™è°ƒç”¨è€…æ¥æŽ§åˆ¶ã€‚ å¦‚æžœè°ƒç”¨è€…æ˜¯ä¸€ä¸ªè°¨æ…Žçš„äººï¼Œä»–ä¼šè¿›è¡Œæ˜¯å¦ä¸ºnullçš„æ¡ä»¶åˆ¤æ–­ã€‚å¦‚æžœä»–å¹¶éžè°¨æ…Žï¼Œæˆ–è€…ä»–æ˜¯ä¸€ä¸ªé¢å‘æŽ¥å£ç¼–ç¨‹çš„ç‹‚çƒ­åˆ†å­(å½“ç„¶ï¼Œé¢å‘æŽ¥å£ç¼–ç¨‹æ˜¯æ­£ç¡®çš„æ–¹å‘)ï¼Œä»–ä¼šæŒ‰ç…§è‡ªå·±çš„ç†è§£åŽ»è°ƒç”¨æŽ¥å£ï¼Œè€Œä¸è¿›è¡Œæ˜¯å¦ä¸ºnullçš„æ¡ä»¶åˆ¤æ–­ï¼Œå¦‚æžœè¿™æ ·çš„è¯ï¼Œæ˜¯éžå¸¸å±é™©çš„ï¼Œå®ƒå¾ˆæœ‰å¯èƒ½å‡ºçŽ°ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ æ ¹æ®å¢¨è²å®šå¾‹æ¥åˆ¤æ–­: â€œå¾ˆæœ‰å¯èƒ½å‡ºçŽ°çš„é—®é¢˜ï¼Œåœ¨å°†æ¥ä¸€å®šä¼šå‡ºçŽ°!â€ åŸºäºŽæ­¤ï¼Œæˆ‘ä»¬å°†å®ƒè¿›è¡Œä¼˜åŒ–: 1234567public List&lt;User&gt; listUser()&#123; List&lt;User&gt; userList = userListRepostity.selectByExample(new UserExample()); if(CollectionUtils.isEmpty(userList))&#123; return Lists.newArrayList();//guavaç±»åº“æä¾›çš„æ–¹å¼ &#125; return userList;&#125; å¯¹äºŽæŽ¥å£(List listUser())ï¼Œå®ƒä¸€å®šä¼šè¿”å›žListï¼Œå³ä½¿æ²¡æœ‰æ•°æ®ï¼Œå®ƒä»ç„¶ä¼šè¿”å›žListï¼ˆé›†åˆä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ ï¼‰; é€šè¿‡ä»¥ä¸Šçš„ä¿®æ”¹ï¼Œæˆ‘ä»¬æˆåŠŸçš„é¿å…äº†æœ‰å¯èƒ½å‘ç”Ÿçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè¿™æ ·çš„å†™æ³•æ›´å®‰å…¨ï¼ æ·±å…¥ç ”ç©¶getæ–¹æ³•å¯¹äºŽæŽ¥å£ 1User get(Integer id) ä½ èƒ½çœ‹åˆ°çš„çŽ°è±¡æ˜¯ï¼Œæˆ‘ç»™å‡ºidï¼Œå®ƒä¸€å®šä¼šç»™æˆ‘è¿”å›žUserã€‚ä½†äº‹å®žçœŸçš„å¾ˆæœ‰å¯èƒ½ä¸æ˜¯è¿™æ ·çš„ã€‚ æˆ‘çœ‹åˆ°è¿‡çš„å®žçŽ°: 123public User get(Integer id)&#123; return userRepository.selectByPrimaryKey(id);//ä»Žæ•°æ®åº“ä¸­é€šè¿‡idç›´æŽ¥èŽ·å–å®žä½“å¯¹è±¡&#125; ç›¸ä¿¡å¾ˆå¤šäººä¹Ÿéƒ½ä¼šè¿™æ ·å†™ã€‚ é€šè¿‡ä»£ç çš„æ—¶å€™å¾—çŸ¥å®ƒçš„è¿”å›žå€¼å¾ˆæœ‰å¯èƒ½æ˜¯null! ä½†æˆ‘ä»¬é€šè¿‡çš„æŽ¥å£æ˜¯åˆ†è¾¨ä¸å‡ºæ¥çš„!è¿™ä¸ªæ˜¯ä¸ªéžå¸¸å±é™©çš„äº‹æƒ…ã€‚å°¤å…¶å¯¹äºŽè°ƒç”¨è€…æ¥è¯´ï¼ æˆ‘ç»™å‡ºçš„å»ºè®®æ˜¯ï¼Œéœ€è¦åœ¨æŽ¥å£æ˜Žæ˜Žæ—¶è¡¥å……æ–‡æ¡£,æ¯”å¦‚å¯¹äºŽå¼‚å¸¸çš„è¯´æ˜Ž,ä½¿ç”¨æ³¨è§£@exception: 1234567891011public interface UserSearchService&#123; /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“ * @exception UserNotFoundException */ User get(Integer id);&#125; æˆ‘ä»¬æŠŠæŽ¥å£å®šä¹‰åŠ ä¸Šäº†è¯´æ˜Žä¹‹åŽï¼Œè°ƒç”¨è€…ä¼šçœ‹åˆ°ï¼Œå¦‚æžœè°ƒç”¨æ­¤æŽ¥å£ï¼Œå¾ˆæœ‰å¯èƒ½æŠ›å‡ºâ€œUserNotFoundException(æ‰¾ä¸åˆ°ç”¨æˆ·)â€è¿™æ ·çš„å¼‚å¸¸ã€‚ è¿™ç§æ–¹å¼å¯ä»¥åœ¨è°ƒç”¨è€…è°ƒç”¨æŽ¥å£çš„æ—¶å€™çœ‹åˆ°æŽ¥å£çš„å®šä¹‰ï¼Œä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼æ˜¯â€å¼±æç¤ºâ€çš„ï¼å¦‚æžœè°ƒç”¨è€…å¿½ç•¥äº†æ³¨é‡Šï¼Œæœ‰å¯èƒ½å°±å¯¹ä¸šåŠ¡ç³»ç»Ÿäº§ç”Ÿäº†é£Žé™©ï¼Œè¿™ä¸ªé£Žé™©æœ‰å¯èƒ½å¯¼è‡´ä¸€ä¸ªäº¿ï¼ é™¤äº†ä»¥ä¸Šè¿™ç§â€å¼±æç¤ºâ€çš„æ–¹å¼ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ï¼Œè¿”å›žå€¼æ˜¯æœ‰å¯èƒ½ä¸ºç©ºçš„ã€‚é‚£è¦æ€Žä¹ˆåŠžå‘¢ï¼Ÿ æˆ‘è®¤ä¸ºæˆ‘ä»¬éœ€è¦å¢žåŠ ä¸€ä¸ªæŽ¥å£ï¼Œç”¨æ¥æè¿°è¿™ç§åœºæ™¯ã€‚å¼•å…¥jdk8çš„Optional,æˆ–è€…ä½¿ç”¨guavaçš„Optional.çœ‹å¦‚ä¸‹å®šä¹‰: 123456789public interface UserSearchService&#123; /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“,æ­¤å®žä½“æœ‰å¯èƒ½æ˜¯ç¼ºçœå€¼ */ Optional&lt;User&gt; getOptional(Integer id);&#125; Optionalæœ‰ä¸¤ä¸ªå«ä¹‰: å­˜åœ¨ or ç¼ºçœã€‚ é‚£ä¹ˆé€šè¿‡é˜…è¯»æŽ¥å£getOptional()ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„äº†è§£è¿”å›žå€¼çš„æ„å›¾ï¼Œè¿™ä¸ªå…¶å®žæ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ï¼Œå®ƒåŽ»é™¤äº†äºŒä¹‰æ€§ã€‚ å®ƒçš„å®žçŽ°å¯ä»¥å†™æˆ: 123public Optional&lt;User&gt; getOptional(Integer id)&#123; return Optional.ofNullable(userRepository.selectByPrimaryKey(id));&#125; æ·±å…¥å…¥å‚é€šè¿‡ä¸Šè¿°çš„æ‰€æœ‰æŽ¥å£çš„æè¿°ï¼Œä½ èƒ½ç¡®å®šå…¥å‚idä¸€å®šæ˜¯å¿…ä¼ çš„å—ï¼Ÿ æˆ‘è§‰å¾—ç­”æ¡ˆåº”è¯¥æ˜¯ï¼šä¸èƒ½ç¡®å®šã€‚é™¤éžæŽ¥å£çš„æ–‡æ¡£æ³¨é‡Šä¸ŠåŠ ä»¥è¯´æ˜Žã€‚ é‚£å¦‚ä½•çº¦æŸå…¥å‚å‘¢? æˆ‘ç»™å¤§å®¶æŽ¨èä¸¤ç§æ–¹å¼ï¼š å¼ºåˆ¶çº¦æŸ æ–‡æ¡£æ€§çº¦æŸï¼ˆå¼±æç¤ºï¼‰ 1.å¼ºåˆ¶çº¦æŸï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡jsr 303è¿›è¡Œä¸¥æ ¼çš„çº¦æŸå£°æ˜Ž: 12345678910111213141516public interface UserSearchService&#123; /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“ * @exception UserNotFoundException */ User get(@NotNull Integer id); /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“,æ­¤å®žä½“æœ‰å¯èƒ½æ˜¯ç¼ºçœå€¼ */ Optional&lt;User&gt; getOptional(@NotNull Integer id);&#125; å½“ç„¶ï¼Œè¿™æ ·å†™ï¼Œè¦é…åˆAOPçš„æ“ä½œè¿›è¡ŒéªŒè¯ï¼Œä½†è®©springå·²ç»æä¾›äº†å¾ˆå¥½çš„é›†æˆæ–¹æ¡ˆï¼Œåœ¨æ­¤æˆ‘å°±ä¸åœ¨èµ˜è¿°äº†ã€‚ 2.æ–‡æ¡£æ€§çº¦æŸ åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°é—ç•™ä»£ç ï¼Œå¯¹äºŽé—ç•™ä»£ç ï¼Œæ•´ä½“æ€§æ”¹é€ çš„å¯èƒ½æ€§å¾ˆå°ã€‚æˆ‘ä»¬æ›´å¸Œæœ›é€šè¿‡é˜…è¯»æŽ¥å£çš„å®žçŽ°ï¼Œæ¥è¿›è¡ŒæŽ¥å£çš„è¯´æ˜Žã€‚ jsr 305è§„èŒƒï¼Œç»™äº†æˆ‘ä»¬ä¸€ä¸ªæè¿°æŽ¥å£å…¥å‚çš„ä¸€ä¸ªæ–¹å¼(éœ€è¦å¼•å…¥åº“ com.google.code.findbugs:jsr305): å¯ä»¥ä½¿ç”¨æ³¨è§£: @Nullable @Nonnull @CheckForNull è¿›è¡ŒæŽ¥å£è¯´æ˜Žã€‚æ¯”å¦‚: 1234567891011121314151617public interface UserSearchService&#123; /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“ * @exception UserNotFoundException */ @CheckForNull User get(@NonNull Integer id); /** * æ ¹æ®ç”¨æˆ·idèŽ·å–ç”¨æˆ·ä¿¡æ¯ * @param id ç”¨æˆ·id * @return ç”¨æˆ·å®žä½“,æ­¤å®žä½“æœ‰å¯èƒ½æ˜¯ç¼ºçœå€¼ */ Optional&lt;User&gt; getOptional(@NonNull Integer id);&#125; å°ç»“é€šè¿‡ ç©ºé›†åˆè¿”å›žå€¼ï¼ŒOptionalï¼Œjsr 303ï¼Œjsr 305è¿™å‡ ç§æ–¹å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç å¯è¯»æ€§æ›´å¼ºï¼Œå‡ºé”™çŽ‡æ›´ä½Žï¼ ç©ºé›†åˆè¿”å›žå€¼ ï¼š å¦‚æžœæœ‰é›†åˆè¿™æ ·è¿”å›žå€¼æ—¶ï¼Œé™¤éžçœŸçš„æœ‰è¯´æœè‡ªå·±çš„ç†ç”±ï¼Œå¦åˆ™ï¼Œä¸€å®šè¦è¿”å›žç©ºé›†åˆï¼Œè€Œä¸æ˜¯null Optional: å¦‚æžœä½ çš„ä»£ç æ˜¯jdk8ï¼Œå°±å¼•å…¥å®ƒï¼ å¦‚æžœä¸æ˜¯ï¼Œåˆ™ä½¿ç”¨Guavaçš„Optional,æˆ–è€…å‡çº§jdkç‰ˆæœ¬ï¼ å®ƒå¾ˆå¤§ç¨‹åº¦çš„èƒ½å¢žåŠ äº†æŽ¥å£çš„å¯è¯»æ€§ï¼ jsr 303: å¦‚æžœæ–°çš„é¡¹ç›®æ­£åœ¨å¼€å‘ï¼Œä¸é˜²åŠ ä¸Šè¿™ä¸ªè¯•è¯•ï¼ ä¸€å®šæœ‰ä¸€ç§ç‰¹åˆ«çˆ½çš„æ„Ÿè§‰! jsr 305: å¦‚æžœè€çš„é¡¹ç›®åœ¨ä½ çš„æ‰‹ä¸Šï¼Œä½ å¯ä»¥å°è¯•çš„åŠ ä¸Šè¿™ç§æ–‡æ¡£åž‹æ³¨è§£ï¼Œæœ‰åŠ©äºŽä½ åŽæœŸçš„é‡æž„ï¼Œæˆ–è€…æ–°åŠŸèƒ½å¢žåŠ äº†ï¼Œå¯¹äºŽè€æŽ¥å£çš„ç†è§£! ç©ºå¯¹è±¡æ¨¡å¼åœºæ™¯æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªDTOè½¬åŒ–çš„åœºæ™¯ï¼Œå¯¹è±¡: 1234567891011@Datastatic class PersonDTO&#123; private String dtoName; private String dtoAge;&#125;@Datastatic class Person&#123; private String name; private String age;&#125; éœ€æ±‚æ˜¯å°†Personå¯¹è±¡è½¬åŒ–æˆPersonDTOï¼Œç„¶åŽè¿›è¡Œè¿”å›žã€‚ å½“ç„¶å¯¹äºŽå®žé™…æ“ä½œæ¥è®²ï¼Œè¿”å›žå¦‚æžœPersonä¸ºç©ºï¼Œå°†è¿”å›žnull,ä½†æ˜¯PersonDTOæ˜¯ä¸èƒ½è¿”å›žnullçš„ï¼ˆå°¤å…¶RestæŽ¥å£è¿”å›žçš„è¿™ç§DTOï¼‰ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå…³æ³¨è½¬åŒ–æ“ä½œï¼Œçœ‹å¦‚ä¸‹ä»£ç : 1234567891011121314@Testpublic void shouldConvertDTO()&#123; PersonDTO personDTO = new PersonDTO(); Person person = new Person(); if(!Objects.isNull(person))&#123; personDTO.setDtoAge(person.getAge()); personDTO.setDtoName(person.getName()); &#125;else&#123; personDTO.setDtoAge(""); personDTO.setDtoName(""); &#125;&#125; ä¼˜åŒ–ä¿®æ”¹è¿™æ ·çš„æ•°æ®è½¬åŒ–ï¼Œæˆ‘ä»¬è®¤è¯†å¯è¯»æ€§éžå¸¸å·®ï¼Œæ¯ä¸ªå­—æ®µçš„åˆ¤æ–­ï¼Œå¦‚æžœæ˜¯ç©ºå°±è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²(â€œâ€) æ¢ä¸€ç§æ€ç»´æ–¹å¼è¿›è¡Œæ€è€ƒï¼Œæˆ‘ä»¬æ˜¯æ‹¿åˆ°Personè¿™ä¸ªç±»çš„æ•°æ®ï¼Œç„¶åŽè¿›è¡Œèµ‹å€¼æ“ä½œ(setXXX),å…¶å®žæ˜¯ä¸å…³ç³»Personçš„å…·ä½“å®žçŽ°æ˜¯è°çš„ã€‚ é‚£æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªPersonå­ç±»: 1234567891011static class NullPerson extends Person&#123; @Override public String getAge() &#123; return ""; &#125; @Override public String getName() &#123; return ""; &#125;&#125; å®ƒä½œä¸ºPersonçš„ä¸€ç§ç‰¹ä¾‹è€Œå­˜åœ¨ï¼Œå¦‚æžœå½“Personä¸ºç©ºçš„æ—¶å€™ï¼Œåˆ™è¿”å›žä¸€äº›getçš„é»˜è®¤è¡Œä¸º. æ‰€ä»¥ä»£ç å¯ä»¥ä¿®æ”¹ä¸º: 12345678910111213@Test public void shouldConvertDTO()&#123; PersonDTO personDTO = new PersonDTO(); Person person = getPerson(); personDTO.setDtoAge(person.getAge()); personDTO.setDtoName(person.getName()); &#125; private Person getPerson()&#123; return new NullPerson();//å¦‚æžœPersonæ˜¯null ,åˆ™è¿”å›žç©ºå¯¹è±¡ &#125; å…¶ä¸­getPerson()æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æ ¹æ®ä¸šåŠ¡é€»è¾‘èŽ·å–Personæœ‰å¯èƒ½çš„å¯¹è±¡ï¼ˆå¯¹å½“å‰ä¾‹å­æ¥è®²ï¼Œå¦‚æžœPersonä¸å­˜åœ¨ï¼Œè¿”å›žPersonçš„çš„ç‰¹ä¾‹NUllPersonï¼‰ï¼Œå¦‚æžœä¿®æ”¹æˆè¿™æ ·ï¼Œä»£ç çš„å¯è¯»æ€§å°±ä¼šå˜çš„å¾ˆå¼ºäº†ã€‚ ä½¿ç”¨Optionalå¯ä»¥è¿›è¡Œä¼˜åŒ–ç©ºå¯¹è±¡æ¨¡å¼ï¼Œå®ƒçš„å¼Šç«¯åœ¨äºŽéœ€è¦åˆ›å»ºä¸€ä¸ªç‰¹ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯å¦‚æžœç‰¹ä¾‹çš„æƒ…å†µæ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦åˆ›å»ºå¤šä¸ªç‰¹ä¾‹å¯¹è±¡å‘¢ï¼Œè™½ç„¶æˆ‘ä»¬ä¹Ÿä½¿ç”¨äº†é¢å‘å¯¹è±¡çš„å¤šæ€ç‰¹æ€§ï¼Œä½†æ˜¯ï¼Œä¸šåŠ¡çš„å¤æ‚æ€§å¦‚æžœçœŸçš„è®©æˆ‘ä»¬åˆ›å»ºå¤šä¸ªç‰¹ä¾‹å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å†ä¸‰è€ƒè™‘ä¸€ä¸‹è¿™ç§æ¨¡å¼ï¼Œå®ƒå¯èƒ½ä¼šå¸¦æ¥ä»£ç çš„å¤æ‚æ€§ã€‚ å¯¹äºŽä¸Šè¿°ä»£ç ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Optionalè¿›è¡Œä¼˜åŒ–ã€‚ 1234567891011121314@Test public void shouldConvertDTO()&#123; PersonDTO personDTO = new PersonDTO(); Optional.ofNullable(getPerson()).ifPresent(person -&gt; &#123; personDTO.setDtoAge(person.getAge()); personDTO.setDtoName(person.getName()); &#125;); &#125; private Person getPerson()&#123; return null; &#125; Optionalå¯¹ç©ºå€¼çš„ä½¿ç”¨ï¼Œæˆ‘è§‰å¾—æ›´ä¸ºè´´åˆ‡ï¼Œå®ƒåªé€‚ç”¨äºŽâ€æ˜¯å¦å­˜åœ¨â€çš„åœºæ™¯ã€‚ å¦‚æžœåªå¯¹æŽ§åˆ¶çš„å­˜åœ¨åˆ¤æ–­ï¼Œæˆ‘å»ºè®®ä½¿ç”¨Optional. Optioanlçš„æ­£ç¡®ä½¿ç”¨Optionalå¦‚æ­¤å¼ºå¤§ï¼Œå®ƒè¡¨è¾¾äº†è®¡ç®—æœºæœ€åŽŸå§‹çš„ç‰¹æ€§(0 or 1),é‚£å®ƒå¦‚ä½•æ­£ç¡®çš„è¢«ä½¿ç”¨å‘¢! Optionalä¸è¦ä½œä¸ºå‚æ•°å¦‚æžœä½ å†™äº†ä¸€ä¸ªpublicæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è§„å®šäº†ä¸€äº›è¾“å…¥å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¸­æœ‰ä¸€äº›æ˜¯å¯ä»¥ä¼ å…¥nullçš„ï¼Œé‚£è¿™æ—¶å€™æ˜¯å¦å¯ä»¥ä½¿ç”¨Optionalå‘¢ï¼Ÿ æˆ‘ç»™çš„å»ºè®®æ˜¯: ä¸€å®šä¸è¦è¿™æ ·ä½¿ç”¨! ä¸¾ä¸ªä¾‹å­: 123public interface UserService&#123; List&lt;User&gt; listUser(Optional&lt;String&gt; username);&#125; è¿™ä¸ªä¾‹å­çš„æ–¹æ³• listUser,å¯èƒ½åœ¨å‘Šè¯‰æˆ‘ä»¬éœ€è¦æ ¹æ®usernameæŸ¥è¯¢æ‰€æœ‰æ•°æ®é›†åˆï¼Œå¦‚æžœusernameæ˜¯ç©ºï¼Œä¹Ÿè¦è¿”å›žæ‰€æœ‰çš„ç”¨æˆ·é›†åˆ. å½“æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè§‰å¾—æœ‰ä¸€äº›æ­§ä¹‰: â€œå¦‚æžœusernameæ˜¯absent,æ˜¯è¿”å›žç©ºé›†åˆå—ï¼Ÿè¿˜æ˜¯è¿”å›žå…¨éƒ¨çš„ç”¨æˆ·æ•°æ®é›†åˆï¼Ÿâ€ Optioanlæ˜¯ä¸€ç§åˆ†æ”¯çš„åˆ¤æ–­ï¼Œé‚£æˆ‘ä»¬ç©¶ç«Ÿæ˜¯å…³æ³¨ Optionalè¿˜æ˜¯Optional.get()å‘¢ï¼Ÿ æˆ‘ç»™å¤§å®¶çš„å»ºè®®æ˜¯ï¼Œå¦‚æžœä¸æƒ³è¦è¿™æ ·çš„æ­§ä¹‰ï¼Œå°±ä¸è¦ä½¿ç”¨å®ƒï¼ å¦‚æžœä½ çœŸçš„æƒ³è¡¨è¾¾ä¸¤ä¸ªå«ä¹‰ï¼Œå°±çµ¦å®ƒæ‹†åˆ†å‡ºä¸¤ä¸ªæŽ¥å£: 1234public interface UserService&#123; List&lt;User&gt; listUser(String username); List&lt;User&gt; listUser();&#125; æˆ‘è§‰å¾—è¿™æ ·çš„è¯­ä¹‰æ›´å¼ºï¼Œå¹¶ä¸”æ›´èƒ½æ»¡è¶³ è½¯ä»¶è®¾è®¡åŽŸåˆ™ä¸­çš„ â€œå•ä¸€èŒè´£â€ã€‚ å¦‚æžœä½ è§‰å¾—ä½ çš„å…¥å‚çœŸçš„æœ‰å¿…è¦å¯èƒ½ä¼ null,é‚£è¯·ä½¿ç”¨jsr 303æˆ–è€…jsr 305è¿›è¡Œè¯´æ˜Žå’ŒéªŒè¯! è¯·è®°ä½! Optionalä¸èƒ½ä½œä¸ºå…¥å‚çš„å‚æ•°! Optionalä½œä¸ºè¿”å›žå€¼å½“ä¸ªå®žä½“çš„è¿”å›žé‚£Optioanlå¯ä»¥åšä¸ºè¿”å›žå€¼å—ï¼Ÿ å…¶å®žå®ƒæ˜¯éžå¸¸æ»¡è¶³æ˜¯å¦å­˜åœ¨è¿™ä¸ªè¯­ä¹‰çš„ã€‚ ä½ å¦‚è¯´ï¼Œä½ è¦æ ¹æ®idèŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™ä¸ªç”¨æˆ·æœ‰å¯èƒ½å­˜åœ¨æˆ–è€…ä¸å­˜åœ¨ã€‚ ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨: 123public interface UserService&#123; Optional&lt;User&gt; get(Integer id);&#125; å½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œè°ƒç”¨è€…å¾ˆæ¸…æ¥šgetæ–¹æ³•è¿”å›žçš„æ•°æ®ï¼Œæœ‰å¯èƒ½ä¸å­˜åœ¨ï¼Œè¿™æ ·å¯ä»¥åšä¸€äº›æ›´åˆç†çš„åˆ¤æ–­ï¼Œæ›´å¥½çš„é˜²æ­¢ç©ºæŒ‡é’ˆçš„é”™è¯¯ï¼ å½“ç„¶ï¼Œå¦‚æžœä¸šåŠ¡æ–¹çœŸçš„éœ€è¦æ ¹æ®idå¿…é¡»æŸ¥è¯¢å‡ºUserçš„è¯ï¼Œå°±ä¸è¦è¿™æ ·ä½¿ç”¨äº†ï¼Œè¯·è¯´æ˜Žï¼Œä½ è¦æŠ›å‡ºçš„å¼‚å¸¸. åªæœ‰å½“è€ƒè™‘å®ƒè¿”å›žnullæ˜¯åˆç†çš„æƒ…å†µä¸‹ï¼Œæ‰è¿›è¡ŒOptionalçš„è¿”å›ž é›†åˆå®žä½“çš„è¿”å›žä¸æ˜¯æ‰€æœ‰çš„è¿”å›žå€¼éƒ½å¯ä»¥è¿™æ ·ç”¨çš„ï¼ å¦‚æžœä½ è¿”å›žçš„æ˜¯é›†åˆï¼š 123public interface UserService&#123; Optional&lt;List&lt;User&gt;&gt; listUser();&#125; è¿™æ ·çš„è¿”å›žç»“æžœï¼Œä¼šè®©è°ƒç”¨è€…ä¸çŸ¥æ‰€æŽªï¼Œæ˜¯å¦æˆ‘åˆ¤æ–­Optionalä¹‹åŽï¼Œè¿˜ç”¨è¿›è¡ŒisEmptyçš„åˆ¤æ–­å‘¢ï¼Ÿ è¿™æ ·å¸¦æ¥çš„è¿”å›žå€¼æ­§ä¹‰ï¼ æˆ‘è®¤ä¸ºæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ æˆ‘ä»¬è¦çº¦å®šï¼Œå¯¹äºŽListè¿™ç§é›†åˆè¿”å›žå€¼ï¼Œå¦‚æžœé›†åˆçœŸçš„æ˜¯nullçš„ï¼Œè¯·è¿”å›žç©ºé›†åˆ(Lists.newArrayList); ä½¿ç”¨Optionalå˜é‡1Optional&lt;User&gt; userOpt = ... å¦‚æžœæœ‰è¿™æ ·çš„å˜é‡userOpt,è¯·è®°ä½ ï¼š ä¸€å®šä¸èƒ½ç›´æŽ¥ä½¿ç”¨get ï¼Œå¦‚æžœè¿™æ ·ç”¨ï¼Œå°±ä¸§å¤±äº†Optionalæœ¬èº«çš„å«ä¹‰ ï¼ˆ æ¯”å¦‚userOp.get() ï¼‰ ä¸è¦ç›´æŽ¥ä½¿ç”¨getOrThrow ,å¦‚æžœä½ æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šèŽ·å–ä¸åˆ°å°±æŠ›å¼‚å¸¸ã€‚ é‚£å°±è¦è€ƒè™‘ï¼Œæ˜¯å¦æ˜¯è°ƒç”¨çš„æŽ¥å£è®¾è®¡çš„æ˜¯å¦åˆç† getterä¸­çš„ä½¿ç”¨å¯¹äºŽä¸€ä¸ªjava bean,æ‰€æœ‰çš„å±žæ€§éƒ½æœ‰å¯èƒ½è¿”å›žnull,é‚£æ˜¯å¦éœ€è¦æ”¹å†™æ‰€æœ‰çš„getteræˆä¸ºOptionalç±»åž‹å‘¢ï¼Ÿ æˆ‘ç»™å¤§å®¶çš„å»ºè®®æ˜¯ï¼Œä¸è¦è¿™æ ·æ»¥ç”¨Optional. å³ä¾¿ æˆ‘java beanä¸­çš„getteræ˜¯ç¬¦åˆOptionalçš„ï¼Œä½†æ˜¯å› ä¸ºjava bean å¤ªå¤šäº†ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä½ çš„ä»£ç æœ‰50%ä»¥ä¸Šè¿›è¡ŒOptinalçš„åˆ¤æ–­ï¼Œè¿™æ ·ä¾¿æ±¡æŸ“äº†ä»£ç ã€‚(æˆ‘æƒ³è¯´ï¼Œå…¶å®žä½ çš„å®žä½“ä¸­çš„å­—æ®µåº”è¯¥éƒ½æ˜¯ç”±ä¸šåŠ¡å«ä¹‰çš„ï¼Œä¼šè®¤çœŸçš„æ€è€ƒè¿‡å®ƒå­˜åœ¨çš„ä»·å€¼çš„ï¼Œä¸èƒ½å› ä¸ºOptionalçš„å­˜åœ¨è€Œæ»¥ç”¨) æˆ‘ä»¬åº”è¯¥æ›´å…³æ³¨äºŽä¸šåŠ¡ï¼Œè€Œä¸åªæ˜¯ç©ºå€¼çš„åˆ¤æ–­ã€‚ è¯·ä¸è¦åœ¨getterä¸­æ»¥ç”¨Optional. å°ç»“å¯ä»¥è¿™æ ·æ€»ç»“Optionalçš„ä½¿ç”¨ï¼š å½“ä½¿ç”¨å€¼ä¸ºç©ºçš„æƒ…å†µï¼Œå¹¶éžæºäºŽé”™è¯¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Optional! Optionalä¸è¦ç”¨äºŽé›†åˆæ“ä½œ! ä¸è¦æ»¥ç”¨Optional,æ¯”å¦‚åœ¨java beançš„getterä¸­!]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode-136-åªå‡ºçŽ°ä¸€æ¬¡çš„æ•°å­—]]></title>
      <url>%2F2020%2F02%2F23%2FLeetcode-136-%E5%8F%AA%E5%87%BA%E7%8E%B0%E4%B8%80%E6%AC%A1%E7%9A%84%E6%95%B0%E5%AD%97%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åå››ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªéžç©ºæ•´æ•°æ•°ç»„ï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºçŽ°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºçŽ°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºçŽ°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚ è¯´æ˜Žï¼š ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®žçŽ°å—ï¼Ÿ ç¤ºä¾‹ 1: è¾“å…¥: [2,2,1]è¾“å‡º: 1ç¤ºä¾‹ 2: è¾“å…¥: [4,1,2,1,2]è¾“å‡º: 4 æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æŽ¥ï¼šhttps://leetcode-cn.com/problems/single-number è§£é¢˜æ€è·¯ç²—æš´è§£æ³•ä½¿ç”¨mapä¿å­˜æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­å‡ºçŽ°çš„æ¬¡æ•°ï¼Œkeyæ˜¯å…ƒç´ ï¼Œvalueæ˜¯å‡ºçŽ°æ¬¡æ•°ã€‚ è¿™ç§æ–¹æ³•æ˜¾ç„¶ä¸ç¬¦åˆé¢˜ç›®éœ€æ±‚ï¼Œä¸ä½¿ç”¨é¢å¤–ç©ºé—´ã€‚ ä½è¿ç®—æŒ‰ä½å¼‚æˆ–ï¼šå‚ä¸Žè¿ç®—çš„ä¸¤ä¸ªå€¼ï¼Œå¦‚æžœä¸¤ä¸ªç›¸åº”bitä½ç›¸åŒï¼Œåˆ™ç»“æžœä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚ å¦‚ï¼š 12340^0 = 0ï¼Œ1^0 = 1ï¼Œ0^1 = 1ï¼Œ1^1 = 0 å¼‚æˆ–è¿ç®—çš„ç¬¦å·æ˜¯^ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 1a xor b = (a &amp; ^b) | (^a &amp; b) çœŸå€¼è¡¨ï¼š a b a xor b 0 0 0 0 1 1 1 0 1 1 1 0 å› ä¸ºæœ‰å®šå¾‹a ^ b ^ a = bï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨å¼‚æˆ–æ¥åšã€‚ 12345def single_number(numbers): tmp = 0 for n in numbers: tmp ^= n return tmp 1234567public int singleNumber(int[] nums) &#123; int result = 0; for (int num : nums) &#123; result ^= num; &#125; return result;&#125; å¯ä»¥çœ‹åˆ°éžå¸¸ç®€å•ã€‚ è¿™äº›å…¨éƒ½æ˜¯è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œä½†æ˜¯è‡ªå·±ä¸çŸ¥é“ï¼Œåªèƒ½è¯´æ˜Žè‡ªå·±åŸºç¡€å·®ï¼Œä»¥åŽè¡¥å¾—èµ·æ¥å—ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Kafka æ¶ˆè´¹è€… Java å®žçŽ°]]></title>
      <url>%2F2020%2F01%2F09%2FKafka-%E6%B6%88%E8%B4%B9%E8%80%85-Java-%E5%AE%9E%E7%8E%B0%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— (à¹‘â€¢ . â€¢à¹‘) åº”ç”¨ç¨‹åºä½¿ç”¨ KafkaConsumerå‘ Kafka è®¢é˜… Topic æŽ¥æ”¶æ¶ˆæ¯ï¼Œé¦–å…ˆç†è§£ Kafka ä¸­æ¶ˆè´¹è€…ï¼ˆconsumerï¼‰å’Œæ¶ˆè´¹è€…ç»„ï¼ˆconsumer groupï¼‰çš„æ¦‚å¿µå’Œç‰¹æ€§ã€‚ KafkaConsumeræ¶ˆè´¹è€…å’Œæ¶ˆè´¹è€…ç»„å½“ç”Ÿäº§è€…å‘ Topic å†™å…¥æ¶ˆæ¯çš„é€Ÿåº¦è¶…è¿‡äº†æ¶ˆè´¹è€…ï¼ˆconsumerï¼‰çš„å¤„ç†é€Ÿåº¦ï¼Œå¯¼è‡´å¤§é‡çš„æ¶ˆæ¯åœ¨ Kafka ä¸­æ·¤ç§¯ï¼Œæ­¤æ—¶éœ€è¦å¯¹æ¶ˆè´¹è€…è¿›è¡Œæ¨ªå‘ä¼¸ç¼©ï¼Œç”¨å¤šä¸ªæ¶ˆè´¹è€…ä»ŽåŒä¸€ä¸ªä¸»é¢˜è¯»å–æ¶ˆæ¯ï¼Œå¯¹æ¶ˆæ¯è¿›è¡Œåˆ†æµã€‚ Kafka çš„æ¶ˆè´¹è€…éƒ½å±žäºŽæ¶ˆè´¹è€…ç»„ï¼ˆconsumer groupï¼‰ã€‚ä¸€ä¸ªç»„ä¸­çš„ consumer è®¢é˜…åŒæ ·çš„ topicï¼Œæ¯ä¸ª consumer æŽ¥æ”¶ topic ä¸€äº›åˆ†åŒºï¼ˆpartitionï¼‰ä¸­çš„æ¶ˆæ¯ã€‚åŒä¸€ä¸ªåˆ†åŒºä¸èƒ½è¢«ä¸€ä¸ªç»„ä¸­çš„å¤šä¸ª consumer æ¶ˆè´¹ã€‚ å‡è®¾çŽ°åœ¨æœ‰ä¸€ä¸ª Topic æœ‰4ä¸ªåˆ†åŒºï¼Œæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ç»„è®¢é˜…äº†è¿™ä¸ª Topicï¼Œéšç€ç»„ä¸­çš„æ¶ˆè´¹è€…æ•°é‡ä»Ž1ä¸ªå¢žåŠ åˆ°5ä¸ªæ—¶ï¼ŒTopic ä¸­åˆ†åŒºè¢«è¯»å–çš„æƒ…å†µï¼š å¦‚æžœç»„ä¸­ consumer çš„æ•°é‡è¶…è¿‡åˆ†åŒºæ•°ï¼Œå¤šå‡ºçš„ consumer ä¼šè¢«é—²ç½®ã€‚å› æ­¤ï¼Œå¦‚æžœæƒ³æé«˜æ¶ˆè´¹è€…çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œéœ€è¦è®¾ç½®è¶³å¤Ÿå¤šçš„ partition æ•°é‡ã€‚ é™¤äº†é€šè¿‡å¢žåŠ  consumer æ¥æ¨ªå‘ä¼¸ç¼©å•ä¸ªåº”ç”¨ç¨‹åºå¤–ï¼Œè¿˜ä¼šå‡ºçŽ°å¤šä¸ªåº”ç”¨ç¨‹åºä»ŽåŒä¸€ä¸ª Topic è¯»å–æ•°æ®çš„æƒ…å†µã€‚è¿™ä¹Ÿæ˜¯ Kafka è®¾è®¡çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€ï¼šè®© Topic ä¸­çš„æ•°æ®èƒ½å¤Ÿæ»¡è¶³å„ç§åº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚ å¦‚æžœè¦æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¯ä»¥èŽ·å–åˆ°æ‰€æœ‰çš„æ¶ˆæ¯ï¼Œè€Œä¸åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåªè¦ä¿è¯æ¯ä¸ªåº”ç”¨ç¨‹åºæœ‰è‡ªå·±çš„ consumer groupï¼Œå°±å¯ä»¥èŽ·å–åˆ° Topic æ‰€æœ‰çš„æ¶ˆæ¯ï¼š æ¨ªå‘ä¼¸ç¼© Kafka æ¶ˆè´¹è€…å’Œæ¶ˆè´¹è€…ç¾¤ç»„å¹¶ä¸ä¼šå¯¹æ€§èƒ½é€ æˆè´Ÿé¢å½±å“ã€‚ åˆ†åŒºå†å‡è¡¡ä¸€ä¸ªæ¶ˆè´¹è€…ç»„å†…çš„ consumer å…±åŒè¯»å– Topic çš„åˆ†åŒºã€‚ å½“ä¸€ä¸ª consumer åŠ å…¥ç»„æ—¶ï¼Œè¯»å–çš„æ˜¯åŽŸæœ¬ç”±å…¶ä»– consumer è¯»å–çš„åˆ†åŒºã€‚ å½“ä¸€ä¸ª consumer ç¦»å¼€ç»„æ—¶ï¼ˆè¢«å…³é—­æˆ–å‘ç”Ÿå´©æºƒï¼‰ï¼ŒåŽŸæœ¬ç”±å®ƒè¯»å–çš„åˆ†åŒºå°†ç”±ç»„é‡Œçš„å…¶ä»– consumer æ¥è¯»å–ã€‚ å½“ Topic å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ¯”å¦‚æ·»åŠ äº†æ–°çš„åˆ†åŒºï¼Œä¼šå‘ç”Ÿåˆ†åŒºé‡åˆ†é…ã€‚ åˆ†åŒºçš„æ‰€æœ‰æƒä»Žä¸€ä¸ªæ¶ˆè´¹è€…è½¬ç§»åˆ°å¦ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œè¿™æ ·çš„è¡Œä¸ºè¢«ç§°ä¸ºå†å‡è¡¡ï¼ˆrebalanceï¼‰ã€‚å†å‡è¡¡éžå¸¸é‡è¦ï¼Œä¸ºæ¶ˆè´¹è€…ç»„å¸¦æ¥äº†é«˜å¯ç”¨æ€§å’Œä¼¸ç¼©æ€§ï¼Œå¯ä»¥æ”¾å¿ƒçš„å¢žåŠ æˆ–ç§»é™¤æ¶ˆè´¹è€…ã€‚ å†å‡è¡¡æœŸé—´ï¼Œæ¶ˆè´¹è€…æ— æ³•è¯»å–æ¶ˆæ¯ï¼Œé€ æˆæ•´ä¸ª consumer group ä¸€å°æ®µæ—¶é—´çš„ä¸å¯ç”¨ã€‚å¦å¤–ï¼Œå½“åˆ†åŒºè¢«é‡æ–°åˆ†é…ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…æ—¶ï¼Œå½“å‰çš„è¯»å–çŠ¶æ€ä¼šä¸¢å¤±ã€‚ æ¶ˆè´¹è€…é€šè¿‡å‘ä½œä¸ºç»„åè°ƒå™¨ï¼ˆGroupCoordinatorï¼‰çš„ brokerï¼ˆä¸åŒçš„ç»„å¯ä»¥æœ‰ä¸åŒçš„åè°ƒå™¨ï¼‰å‘é€å¿ƒè·³æ¥ç»´æŒå’Œç¾¤ç»„ä»¥åŠåˆ†åŒºçš„å…³ç³»ã€‚å¿ƒè·³è¡¨æ˜Žæ¶ˆè´¹è€…åœ¨è¯»å–åˆ†åŒºé‡Œçš„æ¶ˆæ¯ã€‚æ¶ˆè´¹è€…ä¼šåœ¨è½®è¯¢æ¶ˆæ¯æˆ–æäº¤åç§»é‡ï¼ˆoffsetï¼‰æ—¶å‘é€å¿ƒè·³ã€‚å¦‚æžœæ¶ˆè´¹è€…åœæ­¢å‘é€å¿ƒè·³çš„æ—¶é—´è¶³å¤Ÿé•¿ï¼Œä¼šè¯å°±ä¼šè¿‡æœŸï¼Œç»„åè°ƒå™¨è®¤ä¸ºæ¶ˆè´¹è€…å·²ç»æ­»äº¡ï¼Œä¼šè§¦å‘ä¸€æ¬¡å†å‡è¡¡ã€‚ åœ¨ Kafka 0.10.1 çš„ç‰ˆæœ¬ä¸­ï¼Œå¯¹å¿ƒè·³è¡Œä¸ºè¿›è¡Œäº†ä¿®æ”¹ï¼Œç”±ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹è´Ÿè´£å¿ƒè·³ã€‚ æ¶ˆè´¹ Kafkaåˆ›å»º Kafka æ¶ˆè´¹è€…åœ¨è¯»å–æ¶ˆæ¯ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ª KafkaConsumer å¯¹è±¡ã€‚åˆ›å»º KafkaConsumer å¯¹è±¡ä¸Žåˆ›å»º KafkaProducer éžå¸¸ç›¸ä¼¼ï¼Œåˆ›å»º KafkaConsumer ç¤ºä¾‹ï¼š 12345678Properties props = new Properties();props.put("bootstrap.servers", "broker1:9092, broker2:9092");// group.idï¼ŒæŒ‡å®šäº†æ¶ˆè´¹è€…æ‰€å±žç¾¤ç»„props.put("group.id", "CountryCounter");props.put("key.deserializer", "org.apache.kafka.common.serializaiton.StrignDeserializer");props.put("value.deserializer", "org.apache.kafka.common.serializaiton.StrignDeserializer");KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;String, String&gt;(props); è®¢é˜…ä¸»é¢˜åˆ›å»ºäº†æ¶ˆè´¹è€…ä¹‹åŽï¼Œéœ€è¦è®¢é˜… Topicï¼Œsubscribe() æ–¹æ³•æŽ¥å—ä¸€ä¸ªä¸»é¢˜åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼š 12// topic name is â€œcustomerCountriesâ€consumer.subscribe(Collections.singletonList("customerCountries")); subscribe() ä¹Ÿå¯ä»¥æŽ¥æ”¶ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…å¤šä¸ªä¸»é¢˜ï¼ˆå¦‚æžœæœ‰æ–°çš„åç§°åŒ¹é…çš„ä¸»é¢˜åˆ›å»ºï¼Œä¼šç«‹å³è§¦å‘ä¸€æ¬¡å†å‡è¡¡ï¼Œæ¶ˆè´¹è€…å°±å¯ä»¥è¯»å–æ–°æ·»åŠ çš„ä¸»é¢˜ï¼‰ã€‚åœ¨ Kafka å’Œå…¶ä»–ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ•°æ®æ—¶ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼è®¢é˜…å¤šä¸ªä¸»é¢˜æ˜¯å¾ˆå¸¸è§çš„åšæ³•ã€‚ 12// è®¢é˜…æ‰€æœ‰ test å‰ç¼€çš„ Topicï¼šconsumer.subscribe("test.*"); æ¶ˆæ¯è½®è¯¢æ¶ˆæ¯è½®è¯¢æ˜¯æ¶ˆè´¹è€…çš„æ ¸å¿ƒï¼Œé€šè¿‡è½®è¯¢å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚æ¶ˆæ¯è½®è¯¢ API ä¼šå¤„ç†æ‰€æœ‰çš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬ç¾¤ç»„åè°ƒã€åˆ†åŒºå†å‡è¡¡ã€å‘é€å¿ƒè·³å’ŒèŽ·å–æ•°æ®ï¼Œå¼€å‘è€…åªéœ€è¦å¤„ç†ä»Žåˆ†åŒºè¿”å›žçš„æ•°æ®ã€‚æ¶ˆè´¹è€…ä»£ç çš„ä¸»è¦éƒ¨åˆ†å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516try &#123; while (true) &#123; // 100 æ˜¯è¶…æ—¶æ—¶é—´ï¼ˆmsï¼‰ï¼Œåœ¨è¯¥æ—¶é—´å†… poll ä¼šç­‰å¾…æœåŠ¡å™¨è¿”å›žæ•°æ® ConsumerReccords&lt;String, String&gt; records = consumer.poll(100); // poll è¿”å›žä¸€ä¸ªè®°å½•åˆ—è¡¨ã€‚ // æ¯æ¡è®°å½•éƒ½åŒ…å«äº†è®°å½•æ‰€å±žä¸»é¢˜çš„ä¿¡æ¯ã€è®°å½•æ‰€åœ¨åˆ†åŒºçš„ä¿¡æ¯ã€è®°å½•åœ¨åˆ†åŒºé‡Œçš„åç§»é‡ï¼Œä»¥åŠè®°å½•çš„é”®å€¼å¯¹ã€‚ for (ConsumerReccord&lt;String, String&gt; record : records) &#123; log.debug("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); &#125;&#125; finally &#123; // å…³é—­æ¶ˆè´¹è€…,ç½‘ç»œè¿žæŽ¥å’Œ socket ä¹Ÿä¼šéšä¹‹å…³é—­ï¼Œå¹¶ç«‹å³è§¦å‘ä¸€æ¬¡å†å‡è¡¡ consumer.close();&#125; åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ–°æ¶ˆè´¹è€…çš„ poll() æ–¹æ³•æ—¶ï¼Œä¼šè´Ÿè´£æŸ¥æ‰¾ GroupCoordinatorï¼Œç„¶åŽåŠ å…¥ç¾¤ç»„ï¼ŒæŽ¥å—åˆ†é…çš„åˆ†åŒºã€‚å¦‚æžœå‘ç”Ÿäº†å†å‡è¡¡ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯åœ¨è½®è¯¢æœŸé—´è¿›è¡Œçš„ã€‚å¿ƒè·³ä¹Ÿæ˜¯ä»Žè½®è¯¢é‡Œå‘é€å‡ºåŽ»çš„ã€‚ æ¶ˆè´¹è€…é…ç½®Kafka ä¸Žæ¶ˆè´¹è€…ç›¸å…³çš„é…ç½®å¤§éƒ¨åˆ†å‚æ•°éƒ½æœ‰åˆç†çš„é»˜è®¤å€¼ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œä¸è¿‡æœ‰ä¸€äº›å‚æ•°ä¸Žæ¶ˆè´¹è€…çš„æ€§èƒ½å’Œå¯ç”¨æ€§æœ‰å¾ˆå¤§å…³ç³»ã€‚æŽ¥ä¸‹æ¥ä»‹ç»è¿™äº›é‡è¦çš„å±žæ€§ã€‚ fetch.min.bytesæŒ‡å®šæ¶ˆè´¹è€…ä»ŽæœåŠ¡å™¨èŽ·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ã€‚æœåŠ¡å™¨åœ¨æ”¶åˆ°æ¶ˆè´¹è€…çš„æ•°æ®è¯·æ±‚æ—¶ï¼Œå¦‚æžœå¯ç”¨çš„æ•°æ®é‡å°äºŽ fetch.min.bytesï¼Œé‚£ä¹ˆä¼šç­‰åˆ°æœ‰è¶³å¤Ÿçš„å¯ç”¨æ•°æ®æ—¶æ‰è¿”å›žç»™æ¶ˆè´¹è€…ã€‚ åˆç†çš„è®¾ç½®å¯ä»¥é™ä½Žæ¶ˆè´¹è€…å’Œ broker çš„å·¥ä½œè´Ÿè½½ï¼Œåœ¨ Topic æ¶ˆæ¯ç”Ÿäº§ä¸æ´»è·ƒæ—¶ï¼Œå‡å°‘å¤„ç†æ¶ˆæ¯æ¬¡æ•°ã€‚å¦‚æžœæ²¡æœ‰å¾ˆå¤šå¯ç”¨æ•°æ®ï¼Œä½†æ¶ˆè´¹è€…çš„ CPU ä½¿ç”¨çŽ‡å´å¾ˆé«˜ï¼Œéœ€è¦è°ƒé«˜è¯¥å±žæ€§çš„å€¼ã€‚å¦‚æžœæ¶ˆè´¹è€…çš„æ•°é‡æ¯”è¾ƒå¤šï¼Œè°ƒé«˜è¯¥å±žæ€§çš„å€¼ä¹Ÿå¯ä»¥é™ä½Ž broker çš„å·¥ä½œè´Ÿè½½ã€‚ fetch.max.wait.msæŒ‡å®šåœ¨ broker ä¸­çš„ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤æ˜¯500msã€‚å¦‚æžœæ²¡æœ‰è¶³å¤Ÿçš„æ•°æ®æµå…¥ Kafkaï¼Œæ¶ˆè´¹è€…èŽ·å–çš„æ•°æ®é‡çš„ä¹Ÿæ²¡æœ‰è¾¾åˆ° fetch.min.bytesï¼Œæœ€ç»ˆå¯¼è‡´500msçš„å»¶è¿Ÿã€‚ å¦‚æžœè¦é™ä½Žæ½œåœ¨çš„å»¶è¿Ÿï¼ˆæé«˜ SLAï¼‰ï¼Œå¯ä»¥è°ƒä½Žè¯¥å±žæ€§çš„å€¼ã€‚fetch.max.wait.ms å’Œ fetch.min.bytes æœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶å°±ä¼šè¿”å›žæ•°æ®ã€‚ max.parition.fetch.bytesæŒ‡å®šäº†æœåŠ¡å™¨ä»Žæ¯ä¸ªåˆ†åŒºé‡Œè¿”å›žç»™æ¶ˆè´¹è€…çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯1MBã€‚ä¹Ÿå°±æ˜¯è¯´ KafkaConsumer#poll() æ–¹æ³•ä»Žæ¯ä¸ªåˆ†åŒºé‡Œè¿”å›žçš„è®°å½•æœ€å¤šä¸è¶…è¿‡ max.parition.fetch.bytes æŒ‡å®šçš„å­—èŠ‚ã€‚ å¦‚æžœä¸€ä¸ªä¸»é¢˜æœ‰20ä¸ªåˆ†åŒºå’Œ5ä¸ªæ¶ˆè´¹è€…ï¼ˆåŒä¸€ä¸ªç»„å†…ï¼‰ï¼Œé‚£ä¹ˆæ¯ä¸ªæ¶ˆè´¹è€…éœ€è¦è‡³å°‘4MB çš„å¯ç”¨å†…å­˜ï¼ˆæ¯ä¸ªæ¶ˆè´¹è€…è¯»å–4ä¸ªåˆ†åŒºï¼‰æ¥æŽ¥æ”¶è®°å½•ã€‚å¦‚æžœç»„å†…æœ‰æ¶ˆè´¹è€…å‘ç”Ÿå´©æºƒï¼Œå‰©ä¸‹çš„æ¶ˆè´¹è€…éœ€è¦å¤„ç†æ›´å¤šçš„åˆ†åŒºã€‚ max.parition.fetch.bytes å¿…é¡»æ¯” broker èƒ½å¤ŸæŽ¥æ”¶çš„æœ€å¤§æ¶ˆæ¯çš„å­—èŠ‚æ•°ï¼ˆmax.message.sizeï¼‰å¤§ï¼Œå¦åˆ™æ¶ˆè´¹è€…å¯èƒ½æ— æ³•è¯»å–è¿™äº›æ¶ˆæ¯ï¼Œå¯¼è‡´æ¶ˆè´¹è€…ä¸€ç›´é‡è¯•ã€‚ å¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„å› ç´ æ˜¯æ¶ˆè´¹è€…å¤„ç†æ•°æ®çš„æ—¶é—´ã€‚æ¶ˆè´¹è€…éœ€è¦é¢‘ç¹è°ƒç”¨ poll() æ–¹æ³•æ¥é¿å…ä¼šè¯è¿‡æœŸå’Œå‘ç”Ÿåˆ†åŒºå†å‡è¡¡ï¼Œå¦‚æžœå•æ¬¡è°ƒç”¨ poll() è¿”å›žçš„æ•°æ®å¤ªå¤šï¼Œæ¶ˆè´¹è€…éœ€è¦æ›´å¤šçš„æ—¶é—´æ¥å¤„ç†ï¼Œå¯èƒ½æ— æ³•åŠæ—¶è¿›è¡Œä¸‹ä¸€ä¸ªè½®è¯¢æ¥é¿å…ä¼šè¯è¿‡æœŸã€‚å¦‚æžœå‡ºçŽ°è¿™ç§æƒ…å†µï¼Œå¯ä»¥æŠŠ max.parition.fetch.bytes å€¼æ”¹å°æˆ–è€…å»¶é•¿ä¼šè¯è¿‡æœŸæ—¶é—´ã€‚ session.timeout.msæŒ‡å®šäº†æ¶ˆè´¹è€…ä¸ŽæœåŠ¡å™¨æ–­å¼€è¿žæŽ¥çš„æœ€å¤§æ—¶é—´ï¼Œé»˜è®¤æ˜¯3sã€‚å¦‚æžœæ¶ˆè´¹è€…æ²¡æœ‰åœ¨æŒ‡å®šçš„æ—¶é—´å†…å‘é€å¿ƒè·³ç»™ GroupCoordinatorï¼Œå°±è¢«è®¤ä¸ºå·²ç»æ­»äº¡ï¼Œä¼šè§¦å‘å†å‡è¡¡ï¼ŒæŠŠå®ƒçš„åˆ†åŒºåˆ†é…ç»™å…¶ä»–æ¶ˆè´¹è€…ã€‚ è¯¥å±žæ€§ä¸Ž heartbeat.interval.ms ç´§å¯†ç›¸å…³ï¼Œheartbeat.interval.ms æŒ‡å®šäº† poll() æ–¹æ³•å‘åè°ƒå™¨å‘é€å¿ƒè·³çš„é¢‘çŽ‡ï¼Œsession.timeout.ms æŒ‡å®šäº†æ¶ˆè´¹è€…æœ€é•¿å¤šä¹…ä¸å‘é€å¿ƒè·³ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬éœ€è¦åŒæ—¶ä¿®æ”¹è¿™ä¸¤ä¸ªå±žæ€§ï¼Œheartbeat.interval.ms å¿…é¡»æ¯” session.timeout.ms å°ï¼Œä¸€èˆ¬æ˜¯ session.timeout.ms çš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œå¦‚æžœ session.timeout.ms æ˜¯ 3sï¼Œé‚£ä¹ˆ heartbeat.interval.ms åº”è¯¥æ˜¯ 1sã€‚ è°ƒä½Žå±žæ€§çš„å€¼å¯ä»¥æ›´å¿«åœ°æ£€æµ‹å’Œæ¢å¤å´©æºƒçš„èŠ‚ç‚¹ï¼Œä¸è¿‡é•¿æ—¶é—´çš„è½®è¯¢æˆ–åžƒåœ¾æ”¶é›†å¯èƒ½å¯¼è‡´éžé¢„æœŸçš„å†å‡è¡¡ã€‚è°ƒé«˜å±žæ€§çš„å€¼ï¼Œå¯ä»¥å‡å°‘æ„å¤–çš„å†å‡è¡¡ï¼Œä¸è¿‡æ£€æµ‹èŠ‚ç‚¹å´©æºƒéœ€è¦æ›´é•¿çš„æ—¶é—´ã€‚ auto.offset.resetæŒ‡å®šäº†æ¶ˆè´¹è€…åœ¨è¯»å–ä¸€ä¸ªæ²¡æœ‰åç§»é‡ï¼ˆoffsetï¼‰çš„åˆ†åŒºæˆ–è€…åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼ˆå› æ¶ˆè´¹è€…é•¿æ—¶é—´å¤±æ•ˆï¼ŒåŒ…å«åç§»é‡çš„è®°å½•å·²ç»è¿‡æ—¶äº•è¢«åˆ é™¤ï¼‰è¯¥ä½œä½•å¤„ç†ï¼Œé»˜è®¤å€¼æ˜¯ latestï¼Œè¡¨ç¤ºåœ¨ offset æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»Žæœ€æ–°çš„è®°å½•å¼€å§‹è¯»å–æ•°æ®ï¼ˆåœ¨æ¶ˆè´¹è€…å¯åŠ¨ä¹‹åŽç”Ÿæˆçš„è®°å½•ï¼‰ã€‚ å¦ä¸€ä¸ªå€¼æ˜¯ earliestï¼Œæ¶ˆè´¹è€…å°†ä»Žèµ·å§‹ä½ç½®è¯»å–åˆ†åŒºçš„è®°å½•ã€‚ enable.auto.commitæŒ‡å®šäº†æ¶ˆè´¹è€…æ˜¯å¦è‡ªåŠ¨æäº¤åç§»é‡ï¼Œé»˜è®¤å€¼æ˜¯ trueï¼Œè‡ªåŠ¨æäº¤ã€‚ è®¾ä¸º false å¯ä»¥ç¨‹åºè‡ªå·±æŽ§åˆ¶ä½•æ—¶æäº¤åç§»é‡ã€‚å¦‚æžœè®¾ä¸º trueï¼Œéœ€è¦é€šè¿‡é…ç½® auto.commit.interval.ms å±žæ€§æ¥æŽ§åˆ¶æäº¤çš„é¢‘çŽ‡ã€‚ partition.assignment.strategyåˆ†åŒºåˆ†é…ç»™ç»„å†…æ¶ˆè´¹è€…çš„ç­–ç•¥ï¼Œæ ¹æ®ç»™å®šçš„æ¶ˆè´¹è€…å’Œ Topicï¼Œå†³å®šå“ªäº›åˆ†åŒºåº”è¯¥è¢«åˆ†é…ç»™å“ªä¸ªæ¶ˆè´¹è€…ã€‚Kafka æœ‰ä¸¤ä¸ªé»˜è®¤çš„åˆ†é…ç­–ç•¥ï¼š Rangeï¼ŒæŠŠ Topic çš„è‹¥å¹²ä¸ªè¿žç»­çš„åˆ†åŒºåˆ†é…ç»™æ¶ˆè´¹è€…ã€‚å‡è®¾ consumer1 å’Œ consumer2ï¼ˆc1ã€c2 ä»£æ›¿ï¼‰è®¢é˜…äº† topic1 å’Œ topic2ï¼ˆt1ã€t2 ä»£æ›¿ï¼‰ï¼Œæ¯ä¸ª Topic éƒ½æœ‰3ä¸ªåˆ†åŒºã€‚é‚£ä¹ˆ c1 å¯èƒ½åˆ†é…åˆ° t1-part-0ã€t1-part-1ã€t2-part-0 å’Œ t2-part1ï¼Œè€Œ c2 å¯èƒ½åˆ†é…åˆ° t1-part-2 å’Œ t2-part-2ã€‚åªè¦ä½¿ç”¨äº† Range ç­–ç•¥ï¼Œè€Œä¸”åˆ†åŒºæ•°é‡æ— æ³•è¢«æ¶ˆè´¹è€…æ•°é‡æ•´é™¤ï¼Œå°±ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µã€‚ RoundRobinï¼ŒæŠŠæ‰€æœ‰åˆ†åŒºé€ä¸ªåˆ†é…ç»™æ¶ˆè´¹è€…ã€‚ä¸Šé¢çš„ä¾‹å­å¦‚æžœä½¿ç”¨ RoundRobin ç­–ç•¥ï¼Œé‚£ä¹ˆ c1 å¯èƒ½åˆ†é…åˆ° t1-part-0ã€t1-part-2 å’Œ t2-part-1ï¼Œc2 å¯èƒ½åˆ†é…åˆ° t1-part-1ã€t2-part-0 å’Œ t2-part-2ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒRoundRobin ç­–ç•¥ä¼šç»™æ‰€æœ‰æ¶ˆè´¹è€…åˆ†é…å¤§è‡´ç›¸åŒçš„åˆ†åŒºæ•°ã€‚ é»˜è®¤å€¼æ˜¯ org.apache.kafka.clients.consumer.RangeAssignorï¼Œè¿™ä¸ªç±»å®žçŽ°äº† Range ç­–ç•¥ï¼Œorg.apache.kafka.clients.consumer.RoundRobinAssignor æ˜¯ RoundRobin ç­–ç•¥çš„å®žçŽ°ç±»ã€‚è¿˜å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰ç­–ç•¥ï¼Œå±žæ€§å€¼è®¾ä¸ºè‡ªå®šä¹‰ç±»çš„åå­—ã€‚ client.idbroker ç”¨æ¥æ ‡è¯†ä»Žå®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œé€šå¸¸è¢«ç”¨åœ¨æ—¥å¿—ã€åº¦é‡æŒ‡æ ‡å’Œé…é¢ä¸­ã€‚ max.poll.recordsç”¨äºŽæŽ§åˆ¶å•æ¬¡è°ƒç”¨ call() æ–¹æ³•èƒ½å¤Ÿè¿”å›žçš„è®°å½•æ•°é‡ï¼Œå¸®åŠ©æŽ§åˆ¶åœ¨è½®è¯¢é‡Œéœ€è¦å¤„ç†çš„æ•°æ®é‡ã€‚ receive.buffer.bytes å’Œ send.buffer.bytesåˆ†åˆ«æŒ‡å®šäº† TCP socket æŽ¥æ”¶å’Œå‘é€æ•°æ®åŒ…çš„ç¼“å†²åŒºå¤§å°ã€‚å¦‚æžœè®¾ä¸º-1å°±ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤å€¼ã€‚å¦‚æžœç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ä¸Ž broker å¤„äºŽä¸åŒçš„æ•°æ®ä¸­å¿ƒï¼Œé‚£ä¹ˆå¯ä»¥é€‚å½“å¢žå¤§è¿™äº›å€¼ï¼Œå› ä¸ºè·¨æ•°æ®ä¸­å¿ƒçš„ç½‘ç»œä¸€èˆ¬éƒ½æœ‰æ¯”è¾ƒé«˜çš„å»¶è¿Ÿå’Œæ¯”è¾ƒä½Žçš„å¸¦å®½ã€‚ æ¶ˆè´¹ä¸Žæäº¤æäº¤å’Œåç§»é‡æ¯æ¬¡è°ƒç”¨ poll() æ–¹æ³•ï¼Œæ€»æ˜¯è¿”å›ž Kafka ä¸­è¿˜æ²¡æœ‰è¢«æ¶ˆè´¹è€…è¯»å–è¿‡çš„è®°å½•ï¼Œä½¿ç”¨åç§»é‡ï¼ˆoffsetï¼‰æ¥è®°å½•æ¶ˆè´¹è€…è¯»å–çš„åˆ†åŒºçš„ä½ç½®ã€‚ æ›´æ–°åˆ†åŒºå½“å‰ä½ç½®çš„æ“ä½œå«åšâ€œæäº¤ï¼ˆcommitï¼‰â€ï¼Œæ¶ˆè´¹è€…æ˜¯å¦‚ä½•æäº¤åç§»é‡çš„å‘¢ï¼Ÿ æ¶ˆè´¹è€…å‘ä¸€ä¸ªç‰¹æ®Šçš„ Topicï¼š_consumer_offset å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯åŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ã€‚åç§»é‡åªæœ‰åœ¨æ¶ˆè´¹è€…å‘ç”Ÿå´©æºƒæˆ–è€…æœ‰æ–°çš„æ¶ˆè´¹è€…åŠ å…¥ç¾¤ç»„è§¦å‘å†å‡è¡¡æ—¶æœ‰ç”¨ã€‚å®Œæˆå†å‡è¡¡ä¹‹åŽï¼Œæ¶ˆè´¹è€…å¯èƒ½åˆ†é…åˆ°æ–°çš„åˆ†åŒºï¼Œä¸ºäº†èƒ½å¤Ÿç»§ç»­ä¹‹å‰çš„å·¥ä½œï¼Œæ¶ˆè´¹è€…éœ€è¦è¯»å–æ¯ä¸ªåˆ†åŒºæœ€åŽä¸€æ¬¡æäº¤çš„ offsetï¼Œç„¶åŽä»Ž offset æŒ‡å®šçš„åœ°æ–¹ç»§ç»­å¤„ç†ã€‚å¦‚æžœæäº¤çš„ offset å¤§äºŽå®¢æˆ·ç«¯å¤„ç†çš„æœ€åŽä¸€ä¸ªæ¶ˆæ¯åç§»é‡ï¼Œé‚£ä¹ˆå¤„äºŽä¸¤ä¸ªåç§»é‡ä¹‹é—´çš„æ¶ˆæ¯ä¼šä¸¢å¤±ã€‚åä¹‹åˆ™ä¼šæ¶ˆæ¯é‡å¤ã€‚ æ‰€ä»¥ï¼Œå¤„ç†åç§»é‡çš„æ–¹å¼å¯¹åº”ç”¨ç¨‹åºä¼šæœ‰å¾ˆå¤§çš„å½±å“ã€‚KafkaConsumer API æä¾›äº†å¤šç§æ–¹å¼æ¥æäº¤åç§»é‡ã€‚ è‡ªåŠ¨æäº¤æœ€ç®€å•çš„æ–¹å¼æ˜¯æ¶ˆè´¹è€…è‡ªåŠ¨æäº¤åç§»é‡ã€‚å¦‚æžœ enable.auto.commit è®¾ä¸º trueï¼Œé‚£ ä¹ˆæ¯è¿‡ä¸€å®šæ—¶é—´é—´éš”ï¼Œæ¶ˆè´¹è€…ä¼šè‡ªåŠ¨æŠŠä»Ž poll() æ–¹æ³•æŽ¥æ”¶åˆ°çš„æœ€å¤§åç§»é‡æäº¤ä¸ŠåŽ»ã€‚æäº¤æ—¶é—´é—´éš”ç”± auto.commit.interval.ms æŽ§åˆ¶ï¼Œé»˜è®¤æ˜¯5sã€‚ è‡ªåŠ¨æäº¤æ˜¯åœ¨è½®è¯¢é‡Œè¿›è¡Œçš„ã€‚æ¶ˆè´¹è€…æ¯æ¬¡åœ¨è¿›è¡Œè½®è¯¢æ—¶ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦æäº¤åç§»é‡ï¼Œå¦‚æžœæ˜¯ï¼Œé‚£ä¹ˆä¼šæäº¤ä»Žä¸Šä¸€æ¬¡è½®è¯¢è¿”å›žçš„åç§»é‡ã€‚ å‡è®¾æˆ‘ä»¬ä½¿ç”¨é»˜è®¤çš„5sæäº¤æ—¶é—´é—´éš”ï¼Œåœ¨æœ€è¿‘ä¸€æ¬¡æäº¤ä¹‹åŽçš„3så‘ç”Ÿäº†å†å‡è¡¡ï¼Œå† å‡è¡¡ä¹‹åŽï¼Œæ¶ˆè´¹è€…ä»Žæœ€åŽä¸€æ¬¡æäº¤çš„åç§»é‡ä½ç½®å¼€å§‹è¯»å–æ¶ˆæ¯ã€‚è¿™ä¸ªæ—¶å€™åç§»é‡å·²ç»è½åŽäº†3sï¼Œè¿™3så†…çš„æ•°æ®å·²ç»å¤„ç†è¿‡ï¼Œå†æ¬¡æ¶ˆè´¹æ˜¯è¿˜ä¼šèŽ·å–åˆ°ã€‚é€šè¿‡è°ƒä½Žæäº¤æ—¶é—´é—´éš”æ¥æ›´é¢‘ç¹åœ°æäº¤åç§»é‡ï¼Œå‡å°å¯èƒ½å‡ºçŽ°é‡å¤æ¶ˆè´¹çš„æ—¶é—´çª—ï¼Œä¸è¿‡è¿™ç§æƒ…å†µæ˜¯æ— æ³•å®Œå…¨é¿å…çš„ã€‚ åœ¨ä½¿ç”¨è‡ªåŠ¨æäº¤æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨è½®è¯¢æ–¹æ³•éƒ½ä¼šæŠŠä¸Šä¸€æ¬¡è°ƒç”¨è¿”å›žçš„åç§»é‡æäº¤ä¸ŠåŽ»ï¼Œå¹¶ä¸ çŸ¥é“å…·ä½“å“ªäº›æ¶ˆæ¯å·²ç»è¢«å¤„ç†äº†ï¼Œæ‰€ä»¥åœ¨å†æ¬¡è°ƒç”¨ä¹‹å‰æœ€å¥½ç¡®ä¿æ‰€æœ‰å½“å‰è°ƒç”¨è¿”å›žçš„æ¶ˆæ¯éƒ½å·²ç»å¤„ç†å®Œæ¯•ï¼ˆåœ¨è°ƒç”¨ close() æ–¹æ³•å‰ä¹Ÿä¼šè¿›è¡Œè‡ªåŠ¨æäº¤ï¼‰ã€‚ åœ¨å¤„ç†å¼‚å¸¸æˆ–æå‰é€€å‡ºè½®è¯¢æ—¶è¦æ ¼å¤–å°å¿ƒã€‚è‡ªåŠ¨æäº¤è™½ç„¶æ–¹ä¾¿ï¼Œä¸è¿‡å¹¶æ²¡æœ‰ä¸ºå¼€å‘è€…ç•™æœ‰ä½™åœ°æ¥é¿å…é‡å¤å¤„ç†æ¶ˆæ¯ã€‚ æäº¤å½“å‰åç§»é‡KafkaConsumer API æä¾›çš„å¦ä¸€ç§æäº¤åç§»é‡çš„æ–¹å¼ï¼Œç¨‹åºä¸»åŠ¨è§¦å‘æäº¤å½“å‰åç§»é‡ï¼Œè€Œä¸æ˜¯åŸºäºŽæ—¶é—´é—´éš”è‡ªåŠ¨æäº¤ã€‚ æŠŠ auto.commit.offset è®¾ä¸º falseï¼Œä½¿ç”¨ commitSync() æ–¹æ³•æäº¤åç§»é‡æœ€ç®€å•ä¹Ÿæœ€å¯é ï¼Œè¯¥æ–¹æ³•ä¼šæäº¤ç”± poll() æ–¹æ³•è¿”å›žçš„æœ€æ–°åç§»é‡ï¼Œæäº¤æˆåŠŸåŽé©¬ä¸Šè¿”å›žï¼Œå¦‚æžœæäº¤å¤±è´¥å°±æŠ›å‡ºå¼‚å¸¸ã€‚ éœ€è¦æ³¨æ„ï¼ŒcommitSync() å°†ä¼šæäº¤ poll() è¿”å›žçš„æœ€æ–°åç§»é‡ï¼Œåœ¨å¤„ç†å®Œæ‰€æœ‰è®°å½•åŽè°ƒç”¨ commitSync()ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šæœ‰ä¸¢å¤±æ¶ˆæ¯çš„é£Žé™©ã€‚ commitSync() æäº¤åç§»é‡çš„ä¾‹å­ï¼š 12345678910111213141516while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; System.out.printf("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); // å¤„ç†æ¶ˆæ¯çš„é€»è¾‘çœç•¥ &#125; try &#123; // poll çš„æ•°æ®å…¨éƒ¨å¤„ç†å®Œæäº¤ consumer.commitSync(); &#125; catch (CommitFailedException e) &#123; log.error("commit failed", e) &#125;&#125; åªè¦æ²¡æœ‰å‘ç”Ÿä¸å¯æ¢å¤çš„é”™è¯¯ï¼ŒcommitSync() ä¼šä¸€ç›´å°è¯•ç›´è‡³æäº¤æˆåŠŸã€‚å¦‚æžœæäº¤ å¤±è´¥ä¼šæŠ›å‡º CommitFailedException å¼‚å¸¸ã€‚ å¼‚æ­¥æäº¤æ‰‹åŠ¨æäº¤æœ‰ä¸€ä¸ªä¸è¶³ä¹‹å¤„ï¼Œåœ¨ broker å¯¹æäº¤è¯·æ±‚ä½œå‡ºå›žåº”ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºä¼šé˜»å¡žï¼Œè¿™ä¼šå½±å“åº”ç”¨ç¨‹åºçš„åžåé‡ã€‚å¯ä»¥ä½¿ç”¨å¼‚æ­¥æäº¤çš„æ–¹å¼ï¼Œä¸ç­‰å¾… broker çš„å“åº”ã€‚ 1234567891011while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; System.out.printf("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); &#125; // å¼‚æ­¥æäº¤ consumer.commitAsync();&#125; åœ¨æˆåŠŸæäº¤æˆ–å‘ç”Ÿæ— æ³•æ¢å¤çš„é”™è¯¯ä¹‹å‰ï¼ŒcommitSync() ä¼šä¸€ç›´å°è¯•ç›´è‡³æäº¤æˆåŠŸï¼Œä½†æ˜¯ commitAsync() ä¸ä¼šï¼Œè¿™ä¹Ÿæ˜¯è¯¥æ–¹æ³•çš„ä¸€ä¸ªé—®é¢˜ã€‚ä¹‹æ‰€ä»¥ä¸è¿›è¡Œé‡è¯•ï¼Œæ˜¯å› ä¸ºåœ¨æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰ï¼Œå¯èƒ½æœ‰ä¸€ä¸ªæ›´å¤§çš„åç§»é‡å·²ç»æäº¤æˆåŠŸã€‚ å‡è®¾æˆ‘ä»¬å‘å‡ºä¸€ä¸ªè¯·æ±‚æäº¤åç§»é‡2000ï¼Œè¿™ä¸ªæ—¶å€™å‘ç”Ÿäº†çŸ­æš‚çš„é€šä¿¡é—®é¢˜ï¼ŒæœåŠ¡å™¨æ”¶ä¸åˆ°è¯·æ±‚ï¼Œä¸Žæ­¤åŒæ—¶ï¼Œç¨‹åºå¤„ç†äº†å¦å¤–ä¸€æ‰¹æ¶ˆæ¯ï¼Œå¹¶æˆåŠŸæäº¤äº†åç§»é‡3000ã€‚å¦‚æžœ commitAsync() é‡æ–°å°è¯•æäº¤åç§»é‡2000ï¼Œæœ‰å¯èƒ½å°†åç§»é‡3000æ”¹ä¸º2000ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æžœå‘ç”Ÿå†å‡è¡¡ï¼Œå°±ä¼šå‡ºçŽ°é‡å¤æ¶ˆæ¯ã€‚ commitAsync() æ”¯æŒå›žè°ƒï¼Œåœ¨ broker ä½œå‡ºå“åº”æ—¶ä¼šæ‰§è¡Œå›žè°ƒã€‚å›žè°ƒç»å¸¸è¢«ç”¨äºŽè®°å½•æäº¤é”™è¯¯æˆ–ç”Ÿæˆåº¦é‡æŒ‡æ ‡ï¼Œå¦‚æžœè¦ç”¨å®ƒæ¥è¿›è¡Œé‡è¯•ï¼Œä¸€å®šè¦æ³¨æ„æäº¤çš„é¡ºåºã€‚ commitAsync() æ”¯æŒå›žè°ƒï¼Œåœ¨ broker ä½œå‡ºå“åº”æ—¶ä¼šæ‰§è¡Œå›žè°ƒã€‚å›žè°ƒç»å¸¸è¢«ç”¨äºŽè®°å½•æäº¤é”™è¯¯æˆ–ç”Ÿæˆåº¦é‡æŒ‡æ ‡ï¼Œå¦‚æžœè¦ç”¨å®ƒæ¥è¿›è¡Œé‡è¯•ï¼Œä¸€å®šè¦æ³¨æ„æäº¤çš„é¡ºåºã€‚ 1234567891011121314151617while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; System.out.printf("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); &#125; consumer.commitAsync(new OffsetCommitCallback() &#123; // æäº¤å®Œæˆæ—¶å›žå›žè°ƒæ­¤å‡½æ•° public void onComplete(Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets, Exception exception) &#123; if (e != null) log.error("Commit failed for offsets &#123;&#125;", offsets, e); &#125; &#125;);&#125; é‡è¯•å¼‚æ­¥æäº¤ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•è°ƒé€’å¢žçš„åºåˆ—å·æ¥ç»´æŠ¤å¼‚æ­¥æäº¤çš„é¡ºåºã€‚åœ¨æ¯æ¬¡æäº¤åç§»é‡ä¹‹åŽæˆ–åœ¨å›žè°ƒé‡Œæäº¤åç§»é‡æ—¶é€’å¢žåºåˆ—å·ã€‚åœ¨è¿›è¡Œé‡è¯•å‰ï¼Œå…ˆæ£€æŸ¥å›žè°ƒçš„åºåˆ—å·å’Œå³å°†æäº¤çš„åç§»é‡æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æžœç›¸ç­‰ï¼Œè¯´æ˜Žæ²¡æœ‰æ–°çš„æäº¤ï¼Œé‚£ä¹ˆå¯ä»¥å®‰å…¨åœ°è¿›è¡Œé‡è¯•ã€‚å¦‚æžœåºåˆ—å·æ¯”è¾ƒå¤§ï¼Œè¯´æ˜Žæœ‰ä¸€ä¸ªæ–°çš„æäº¤å·²ç»å‘é€å‡ºåŽ»äº†ï¼Œæ”¾å¼ƒé‡è¯•ã€‚ åŒæ­¥ä¸Žå¼‚æ­¥æ··åˆæäº¤ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé’ˆå¯¹å¶å°”å‡ºçŽ°çš„æäº¤å¤±è´¥ï¼Œä¸è¿›è¡Œé‡è¯•ä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ï¼Œå¦‚æžœå› ä¸ºä¸´æ—¶ç½‘ç»œé—®é¢˜å¯¼è‡´çš„ï¼Œé‚£ä¹ˆåŽç»­çš„æäº¤æ€»ä¼šæœ‰æˆåŠŸçš„ã€‚ä½†å¦‚æžœè¿™æ˜¯å‘ç”Ÿåœ¨å…³é—­æ¶ˆè´¹è€…æˆ–å†å‡è¡¡å‰çš„æœ€åŽä¸€æ¬¡æäº¤ï¼Œå°±è¦ç¡®ä¿èƒ½å¤Ÿæäº¤æˆåŠŸã€‚ åœ¨æ¶ˆè´¹è€…å…³é—­å‰ä¸€èˆ¬ä¼šç»„åˆä½¿ç”¨ commitAsync() å’Œ commitSync()ï¼š 12345678910111213141516171819202122try &#123; while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; System.out.printf("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); &#125; // å¼‚æ­¥æäº¤ consumer.commitAsync(); &#125;&#125; catch (Exception e) &#123; log.error("Unexpected error", e);&#125; finally &#123; try &#123; // åŒæ­¥æäº¤ consumer.commitSync(); &#125; finally &#123; consumer.close(); &#125;&#125; åœ¨æ­£å¸¸å¤„ç†æµç¨‹ä¸­ï¼Œä½¿ç”¨å¼‚æ­¥æäº¤æ¥æé«˜æ€§èƒ½ï¼Œæœ€åŽä½¿ç”¨åŒæ­¥æäº¤æ¥ä¿è¯ä½ç§»æäº¤æˆåŠŸã€‚ æäº¤ç‰¹å®šçš„åç§»é‡ä¸€èˆ¬æäº¤åç§»é‡çš„é¢‘çŽ‡ä¸Žå¤„ç†æ¶ˆæ¯æ‰¹æ¬¡çš„é¢‘çŽ‡æ˜¯ä¸€æ ·çš„ã€‚å¦‚æžœæƒ³è¦æ›´é¢‘ç¹åœ°æäº¤æ€Žä¹ˆåŠžï¼Ÿå¦‚æžœ poll() æ–¹æ³•è¿”å›žä¸€å¤§æ‰¹æ•°æ®ï¼Œä¸ºäº†é¿å…å› å†å‡è¡¡å¼•èµ·çš„é‡å¤å¤„ç†æ•´æ‰¹æ¶ˆæ¯ï¼Œæƒ³è¦åœ¨æ‰¹æ¬¡ä¸­é—´æäº¤åç§»é‡è¯¥æ€Žä¹ˆåŠžï¼Ÿ è¿™ç§æƒ…å†µæ— æ³•é€šè¿‡è°ƒç”¨ commitSync() æˆ– commitAsync() æ¥å®žçŽ°ï¼Œåªä¼šæäº¤æœ€åŽä¸€ä¸ªåç§»é‡ï¼Œè€Œæ­¤æ—¶è¯¥æ‰¹æ¬¡é‡Œçš„æ¶ˆæ¯è¿˜æ²¡æœ‰å¤„ç†å®Œã€‚ KafkaConsumer API å…è®¸åœ¨è°ƒç”¨ commitSync() å’Œ commitAsync() æ–¹æ³•æ—¶ä¼ è¿›åŽ»å¸Œæœ›æäº¤çš„åˆ†åŒºå’Œåç§»é‡çš„ mapã€‚å› ä¸ºæ¶ˆè´¹è€…å¯èƒ½ä¸åªè¯»å–ä¸€ä¸ªåˆ†åŒºï¼Œéœ€è¦è·Ÿè¸ªæ‰€æœ‰åˆ†åŒºçš„åç§»é‡ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªå±‚é¢ä¸ŠæŽ§åˆ¶åç§»é‡çš„æäº¤ä¼šè®©ä»£ç å˜å¤æ‚ã€‚ 1234567891011121314151617181920212223242526// è®°å½•åˆ†åŒºçš„ offset ä¿¡æ¯Map&lt;TopicPartition, OffsetAndMetadata&gt; currentOffsets = new HashMap&lt;&gt;();int count = 0;while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; System.out.printf("topic=%s, partition=%s, offset=%d, customer=%s, country=%s", record.topic(), record.partition(), record.offset(), record.key(), record.value()); // çœç•¥æ¶ˆæ¯å¤„ç†é€»è¾‘ ... // è®°å½•åˆ†åŒºçš„ offset currentOffsets.put( new TopicPartition(record.topic(), record.partition()), new OffsetAndMetadata(record.offset() + 1, "no metadata") ); // æœ€å¤šæ¯å¤„ç† 1000 æ¡è®°å½•å°±æäº¤ä¸€æ¬¡åç§»é‡ if (count % 1000 == 0) consumer.commitAsync(currentOffsets, null); count++; &#125; &#125; å†å‡è¡¡ç›‘å¬å™¨æ¶ˆè´¹è€…åœ¨é€€å‡ºå’Œè¿›è¡Œåˆ†åŒºå†å‡è¡¡ä¹‹å‰ï¼Œå¦‚æžœæ¶ˆè´¹è€…çŸ¥é“è¦å¤±åŽ»å¯¹ä¸€ä¸ªåˆ†åŒºçš„æ‰€æœ‰æƒï¼Œå®ƒå¯èƒ½éœ€è¦æäº¤æœ€åŽä¸€ä¸ªå·²å¤„ç†è®°å½•çš„åç§»é‡ã€‚KafakConsumer API å¯ä»¥åœ¨æ¶ˆè´¹è€…æ–°å¢žåˆ†åŒºæˆ–è€…å¤±åŽ»åˆ†åŒºæ—¶è¿›è¡Œå¤„ç†ï¼Œåœ¨è°ƒç”¨ subscribe() æ–¹æ³•æ—¶ä¼ å…¥ ConsumerRebalanceListener å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š public void onPartitionRevoked(Collection partitions): åœ¨æ¶ˆè´¹è€…åœæ­¢æ¶ˆè´¹æ¶ˆè´¹åŽï¼Œåœ¨å†å‡è¡¡å¼€å§‹å‰è°ƒç”¨ã€‚ public void onPartitionAssigned(Collection partitions): åœ¨åˆ†åŒºåˆ†é…ç»™æ¶ˆè´¹è€…åŽï¼Œåœ¨æ¶ˆè´¹è€…å¼€å§‹è¯»å–æ¶ˆæ¯å‰è°ƒç”¨ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸ªçš„ä¾‹å­ï¼Œåœ¨æ¶ˆè´¹è€…å¤±åŽ»æŸä¸ªåˆ†åŒºæ—¶æäº¤ offsetï¼Œä»¥ä¾¿å…¶ä»–æ¶ˆè´¹è€…å¯ä»¥æŽ¥ç€æ¶ˆè´¹æ¶ˆæ¯å¹¶å¤„ç†ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445// è®°å½•åˆ†åŒºçš„ offset ä¿¡æ¯Map&lt;TopicPartition, OffsetAndMetadata&gt; currentOffsets = new HashMap&lt;&gt;();class HandleRebalance implements ConsumerRebalanceListener &#123; public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) &#123; &#125; // å¦‚æžœå‘ç”Ÿå†å‡è¡¡ï¼Œå³å°†å¤±åŽ»åˆ†åŒºæ‰€æœ‰æƒæ—¶æäº¤åç§»é‡ã€‚ // æäº¤çš„æ˜¯æœ€è¿‘å¤„ç†è¿‡çš„åç§»é‡ï¼Œè€Œä¸æ˜¯æ‰¹æ¬¡ä¸­è¿˜åœ¨å¤„ç†çš„æœ€åŽä¸€ä¸ªåç§»é‡ã€‚ public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) &#123; System.out.println("Lost partitions in rebalance. Committing current offsets:" + currentOffsets); consumer.commitSync(currentOffsets); &#125;&#125;// ...try &#123; // æŠŠ ConsumerRebalanceListener å¯¹è±¡ä¼ ç»™ subscribe() æ–¹æ³• consumer.subscribe(topics, new HandleRebalance()); while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; currentOffsets.put( new TopicPartition(record.topic(), record.partition()), new OffsetAndMetadata(record.offset()+1, "no metadata") ); &#125; consumer.commitAsync(currentOffsets, null); &#125;&#125; catch (WakeupException e) &#123; // ignore&#125; catch (Exception e) &#123; log.error("Unexpected error", e);&#125; finally &#123; try &#123; consumer.commitSync(currentOffsets); &#125; finally &#123; consumer.close(); &#125;&#125; ä»ŽæŒ‡å®šä½ç§»å¼€å§‹æ¶ˆè´¹é™¤äº†è¯»å–æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä½ç½®å¼€å§‹æ¶ˆè´¹æ•°æ®ï¼Œæœ‰æ—¶å€™ä¹Ÿéœ€è¦ä»Žç‰¹å®šçš„åç§»é‡å¤„å¼€å§‹è¯»å–æ¶ˆæ¯ã€‚ å¦‚æžœæƒ³ä»Žåˆ†åŒºèµ·å§‹ä½ç½®å¼€å§‹æ¶ˆè´¹ï¼Œå¯ä»¥ä½¿ç”¨ seekToBeginning(TopicPartition tp)ï¼›å¦‚æžœæƒ³ä»Žåˆ†åŒºçš„æœ€æœ«ç«¯æ¶ˆè´¹æœ€æ–°çš„æ¶ˆæ¯ï¼Œå¯ä»¥ä½¿ç”¨ seekToEnd(TopicPartition tp)ã€‚Kafka è¿˜æ”¯æŒä»ŽæŒ‡å®š offset å¤„å¼€å§‹æ¶ˆè´¹ã€‚æœ€å…¸åž‹çš„ä¸€ä¸ªæ˜¯ï¼šoffset ç»´æŠ¤åœ¨å…¶ä»–ç³»ç»Ÿï¼ˆä¾‹å¦‚æ•°æ®åº“ï¼‰ä¸­ï¼Œå¹¶ä¸”ä»¥å…¶ä»–ç³»ç»Ÿçš„å€¼ä¸ºå‡†ã€‚ è€ƒè™‘ä¸‹é¢çš„åœºæ™¯ï¼šä»Ž Kafka ä¸­è¯»å–æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œæœ€åŽæŠŠç»“æžœå†™å…¥æ•°æ®åº“ï¼Œå¯èƒ½ä¼šæŒ‰å¦‚ä¸‹é€»è¾‘å¤„ç†ï¼š 12345678910while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; currentOffsets.put(new TopicPartition(record.topic(), record.partition()), record.offset()); processRecord(record); storeRecordInDB(record); consumer.commitAsync(currentOffsets); &#125;&#125; çœ‹ä¼¼æ­£ç¡®çš„é€»è¾‘è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŒä¹…åŒ–åˆ°æ•°æ®åº“æˆåŠŸåŽï¼Œæäº¤ä½ç§»åˆ° Kafka å¯èƒ½ä¼šå¤±è´¥ï¼Œå‡ºçŽ°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé‚£ä¹ˆè¿™å¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯ä¼šé‡å¤å¤„ç†ã€‚å¯¹äºŽè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°†æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸Žæäº¤ offset å®žçŽ°ä¸ºåŽŸå­æ€§æ“ä½œï¼Œæœ€ç®€å•çš„åšæ³•ï¼Œåœ¨ä¿å­˜è®°å½•åˆ°æ•°æ®åº“çš„åŒæ—¶ä¿å­˜ offset ä¿¡æ¯ï¼Œåœ¨æ¶ˆè´¹è€…å¼€å§‹æ¶ˆè´¹æ—¶æŒ‡å®šæ•°æ®åº“çš„ offset å¼€å§‹æ¶ˆè´¹ã€‚ åªéœ€è¦é€šè¿‡ seek() æ¥æŒ‡å®šåˆ†åŒºä½ç§»å¼€å§‹æ¶ˆè´¹å³å¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839class SaveOffsetsOnRebalance implements ConsumerRebalanceListener &#123; public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) &#123; // åœ¨åˆ†åŒºè¢«å›žæ”¶å‰æäº¤æ•°æ®åº“äº‹åŠ¡ï¼Œä¿å­˜æ¶ˆè´¹çš„è®°å½•å’Œä½ç§» commitDBTransaction(); &#125; public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) &#123; // åœ¨å¼€å§‹æ¶ˆè´¹å‰ï¼Œä»Žæ•°æ®åº“ä¸­èŽ·å–åˆ†åŒºçš„ä½ç§»ï¼Œä½¿ç”¨ seek() æŒ‡å®šå¼€å§‹æ¶ˆè´¹çš„åç§»é‡ for(TopicPartition partition: partitions) consumer.seek(partition, getOffsetFromDB(partition)); &#125;&#125;// ...consumer.subscribe(topics, new SaveOffsetOnRebalance(consumer));// è°ƒç”¨ä¸€æ¬¡ poll() æ–¹æ€¯ï¼Œè®©æ¶ˆè´¹è€…åŠ å…¥åˆ°æ¶ˆè´¹è€…ç¾¤ç»„é‡Œï¼Œå¹¶èŽ·å–åˆ†é…åˆ°çš„åˆ†åŒºconsumer.poll(0);// ç„¶åŽé©¬ä¸Šè°ƒç”¨ seek() æ–¹æ³•å®šä½åˆ†åŒºçš„åç§»é‡ã€‚ // seek() æ–¹æ³•åªæ›´æ–°æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„ä½ç½®ï¼Œåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨ poll() æ—¶å°±å¯ä»¥èŽ·å¾—æ­£ç¡®çš„æ¶ˆæ¯ã€‚// å¦‚æžœ seek() å‘ç”Ÿé”™è¯¯, poll() å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚for (TopicPartition partition: consumer.assignment()) consumer.seek(partition, getOffsetFromDB(partition));while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(100); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; processRecord(record); // ä¿å­˜è®°å½•ç»“æžœ storeRecordInDB(record); // ä¿å­˜ä½ç§»ä¿¡æ¯ storeOffsetInDB(record.topic(), record.partition(), record.offset()); &#125; // æäº¤æ•°æ®åº“äº‹åŠ¡ commitDBTransaction();&#125; ä¼˜é›…é€€å‡ºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­å¾ªçŽ¯ poll() æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†ã€‚å½“éœ€è¦é€€å‡ºå¾ªçŽ¯æ—¶ï¼Œä½¿ç”¨å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ consumer.wakeup()ï¼Œä¼šä½¿å¾— poll() æŠ›å‡º WakeupExceptionã€‚å¦‚æžœä¸»çº¿ç¨‹æ­£åœ¨å¤„ç†æ¶ˆæ¯ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡ä¸»çº¿ç¨‹è°ƒç”¨ poll() æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æ ·ä¾‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132// æ³¨å†Œ JVM å…³é—­æ—¶çš„å›žè°ƒï¼Œå½“ JVM å…³é—­æ—¶è°ƒç”¨Runtime.getRuntime().addShutdownHook(new Thread() &#123; public void run() &#123; System.out.println("Starting exit..."); // è°ƒç”¨æ¶ˆè´¹è€…çš„ wakeup æ–¹æ³•é€šçŸ¥ä¸»çº¿ç¨‹é€€å‡º consumer.wakeup(); try &#123; // ç­‰å¾…ä¸»çº¿ç¨‹é€€å‡º mainThread.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125;); ...// æ¶ˆè´¹ä¸»çº¿ç¨‹try &#123; while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(1000); for (ConsumerRecord&lt;String, String&gt; record : records) &#123; // ... &#125; consumer.commitSync(); &#125;&#125; catch (WakeupException e) &#123; // ignore&#125; finally &#123; consumer.close();&#125; æ¶ˆæ¯åºåˆ—åŒ–Kafka ç”Ÿäº§è€…å°†å¯¹è±¡åºåˆ—åŒ–æˆå­—èŠ‚æ•°ç»„å¹¶å‘é€åˆ°æœåŠ¡å™¨ï¼Œæ¶ˆè´¹è€…éœ€è¦å°†å­—èŠ‚æ•°ç»„è½¬æ¢æˆå¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰ã€‚åºåˆ—åŒ–ä¸Žååºåˆ—åŒ–éœ€è¦åŒ¹é…ï¼Œä¸Žç”Ÿäº§è€…ç±»ä¼¼ï¼ŒæŽ¨èä½¿ç”¨ Avro åºåˆ—åŒ–æ–¹å¼ã€‚ ä½¿ç”¨ Avro ååºåˆ—åŒ–æ ·ä¾‹ä»£ç å¦‚ä¸‹ï¼ˆä¸Žç”Ÿäº§è€…å®žçŽ°ç±»ä¼¼ï¼‰ï¼š 12345678910111213141516171819202122Properties props = new Properties();props.put("bootstrap.servers", "broker1:9092,broker2:9092");props.put("group.id", "CountryCounter");props.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");props.put("value.deserializer", "io.confluent.kafka.serializers.KafkaAvroDeserializer");props.put("schema.registry.url", schemaUrl);String topic = "customerContacts"KafkaConsumer consumer = new KafkaConsumer(createConsumerConfig(brokers, groupId, url));consumer.subscribe(Collections.singletonList(topic));System.out.println("Reading topic:" + topic);while (true) &#123; // è¿™é‡Œä½¿ç”¨ä¹‹å‰ç”Ÿäº§è€…ä½¿ç”¨çš„Avroç”Ÿæˆçš„Customerç±» ConsumerRecords&lt;String, Customer&gt; records = consumer.poll(1000); for (ConsumerRecord&lt;String, Customer&gt; record: records) &#123; System.out.println("Current customer name is: " + record.value().getName()); &#125; consumer.commitSync();&#125; ç‹¬ç«‹æ¶ˆè´¹è€…ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ä½¿ç”¨æ¶ˆè´¹è€…ç»„ï¼ˆå³ä½¿åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ï¼‰æ¥æ¶ˆè´¹æ¶ˆæ¯çš„ï¼Œè¿™æ ·å¯ä»¥åœ¨å¢žåŠ æˆ–å‡å°‘æ¶ˆè´¹è€…æ—¶è‡ªåŠ¨è¿›è¡Œåˆ†åŒºé‡å¹³è¡¡ï¼Œè¿™ç§æ–¹å¼æ˜¯æŽ¨èçš„ã€‚ åœ¨çŸ¥é“ä¸»é¢˜å’Œåˆ†åŒºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å•ä¸ªæ¶ˆè´¹è€…æ¥è¿›è¡Œæ¶ˆè´¹ï¼Œéœ€è¦å®žçŽ°ç»™æ¶ˆè´¹è€…åˆ†é…åˆ†åŒºï¼Œè€Œä¸æ˜¯è®©æ¶ˆè´¹è€…è®¢é˜…ä¸»é¢˜ã€‚ä»£ç æ ·ä¾‹ï¼š 123456789101112131415161718// èŽ·å–ä¸»é¢˜ä¸‹æ‰€æœ‰çš„åˆ†åŒºList&lt;PartitionInfo&gt; partitionInfos = consumer.partitionsFor("topic");if (partitionInfos != null) &#123; for (PartitionInfo partition : partitionInfos) partitions.add(new TopicPartition(partition.topic(), partition.partition())); // ä¸ºæ¶ˆè´¹è€…æŒ‡å®šåˆ†åŒº consumer.assign(partitions); while (true) &#123; ConsumerRecords&lt;String, String&gt; records = consumer.poll(1000); for (ConsumerRecord&lt;String, String&gt; record: records) &#123; // ... &#125; consumer.commitSync(); &#125;&#125; é™¤äº†éœ€è¦ä¸»åŠ¨èŽ·å–åˆ†åŒºä»¥åŠæ²¡æœ‰åˆ†åŒºé‡å¹³è¡¡ï¼Œå…¶ä»–çš„å¤„ç†é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœæ·»åŠ äº†æ–°çš„åˆ†åŒºï¼Œè¿™ä¸ªæ¶ˆè´¹è€…æ˜¯æ„ŸçŸ¥ä¸åˆ°çš„ï¼Œéœ€è¦é€šè¿‡ consumer.partitionsFor() æ¥é‡æ–°èŽ·å–åˆ†åŒºã€‚ ã€ŠKafkaæƒå¨æŒ‡å—ã€‹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»Žå°¾åˆ°å¤´æ‰“å°é“¾è¡¨]]></title>
      <url>%2F2020%2F01%2F05%2F%E4%BB%8E%E5%B0%BE%E5%88%B0%E5%A4%B4%E6%89%93%E5%8D%B0%E9%93%BE%E8%A1%A8%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åäºŒç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— (à¹‘â€¢ . â€¢à¹‘) ä»Žå°¾åˆ°å¤´æ‰“å°é“¾è¡¨é¢˜ç›®æè¿°è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼ŒæŒ‰é“¾è¡¨å€¼ä»Žå°¾åˆ°å¤´çš„é¡ºåºè¿”å›žä¸€ä¸ª ArrayListã€‚ æ€è·¯é“¾è¡¨ä»Žå¤´åˆ°å°¾è¾“å‡ºä¼šæ¯”è¾ƒç®€å•ï¼ŒäºŽæ˜¯æˆ‘ä»¬å¾ˆè‡ªç„¶çš„æƒ³åˆ°æŠŠé“¾è¡¨ä¸­é“¾æŽ¥èŠ‚ç‚¹çš„æŒ‡æ­£ç¿»è½¬è¿‡æ¥ï¼Œæ”¹å˜é“¾è¡¨çš„æ–¹å‘ï¼Œç„¶åŽå°±å¯ä»¥ä»Žå¤´åˆ°å°¾çš„è¾“å‡ºäº†ã€‚ä½†æ˜¯è¯¥æ–¹æ³•ä¼šä¿®æ”¹åŽŸæ¥é“¾è¡¨çš„ç»“æž„ï¼Œè¿™åº”è¯¥ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚ åœ¨é¢è¯•ä¸­ï¼Œå¦‚æžœæˆ‘ä»¬æ‰“ç®—ä¿®æ”¹è¾“å…¥çš„æ•°æ®ï¼Œæœ€å¥½å…ˆé—®é¢è¯•å®˜æ˜¯å¦å…è®¸ä¿®æ”¹ã€‚ è¿™é“é¢˜è‚¯å®šéœ€è¦éåŽ†é“¾è¡¨çš„ï¼Œä½†æ˜¯éåŽ†è‚¯å®šæ˜¯é¡ºåºï¼Œå¯æ˜¯æœ€ç»ˆéœ€è¦çš„æ˜¯ä»Žå°¾åˆ°å¤´ï¼Œè¿™å°±æ˜¯å…¸åž‹çš„â€å…ˆè¿›å…ˆå‡ºâ€œï¼Œå¯ä»¥ä½¿ç”¨æ ˆå®žçŽ°ã€‚éåŽ†è¯¥é“¾è¡¨æ—¶ï¼Œæ²¡ç»è¿‡ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¾¿æŠŠè¯¥èŠ‚ç‚¹æ”¾å…¥æ ˆä¸­ã€‚éåŽ†ç»“æŸä¹‹åŽï¼Œå†ä»Žæ ˆé¡¶è¾“å‡ºæ‰€æœ‰å€¼ã€‚ è§£æ³•è§£æ³•ä¸€ã€æŽ¨èã€‘éåŽ†é“¾è¡¨ï¼Œæ¯ä¸ªé“¾è¡¨ç»“ç‚¹å€¼ push è¿›æ ˆï¼Œæœ€åŽå°†æ ˆä¸­å…ƒç´ ä¾æ¬¡ pop åˆ° list ä¸­ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738class ListNode &#123; int val; ListNode next = null; ListNode(int val) &#123; this.val = val; &#125;&#125;public class Solution &#123; public ArrayList&lt;Integer&gt; printListFromTailToHead(ListNode listNode) &#123; ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if (listNode == null) &#123; return res; &#125; Stack&lt;Integer&gt; stack = new Stack&lt;&gt;(); while (listNode != null) &#123; stack.push(listNode.val); listNode = listNode.next; &#125; while (!stack.isEmpty()) &#123; res.add(stack.pop()); &#125; return res; &#125; public static void main(String[] args) &#123; ListNode listNode = new ListNode(1); listNode.next = new ListNode(2); listNode.next.next = new ListNode(3); listNode.next.next.next = new ListNode(4); listNode.next.next.next.next = new ListNode(5); System.out.println(new Solution().printListFromTailToHead(listNode)); &#125;&#125; é¢è¯•å®˜çœ‹åˆ°ä½¿ç”¨äº†æ ˆï¼Œä¼šä¸ä¼šæ‰‹åŠ¨è®©ä½ å®Œæˆæ ˆçš„å®žçŽ°å‘¢ã€‚ä¸‹é¢æœ‰æ ˆçš„å®žçŽ°ã€‚ è§£æ³•äºŒã€ä¸æŽ¨èã€‘åˆ©ç”¨é€’å½’æ–¹å¼ï¼š è‹¥ä¸æ˜¯é“¾è¡¨å°¾ç»“ç‚¹ï¼Œç»§ç»­é€’å½’ï¼› è‹¥æ˜¯ï¼Œæ·»åŠ åˆ° list ä¸­ã€‚ è¿™ç§æ–¹å¼ä¸æŽ¨èï¼Œå½“é€’å½’å±‚æ•°è¿‡å¤šæ—¶ï¼Œå®¹æ˜“å‘ç”Ÿ Stack Overflowã€‚ 123456789101112131415161718192021222324252627public class Solution &#123; public ArrayList&lt;Integer&gt; printListFromTailToHead(ListNode listNode) &#123; ArrayList&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if (listNode == null) &#123; return res; &#125; addElement(listNode, res); return res; &#125; private void addElement(ListNode listNode, ArrayList&lt;Integer&gt; res) &#123; if (listNode.next != null) &#123; addElement(listNode.next, res); &#125; res.add(listNode.val); &#125; public static void main(String[] args) &#123; ListNode listNode = new ListNode(1); listNode.next = new ListNode(2); listNode.next.next = new ListNode(3); listNode.next.next.next = new ListNode(4); listNode.next.next.next.next = new ListNode(5); System.out.println(new Solution().printListFromTailToHead(listNode)); &#125;&#125; è§£æ³•ä¸‰é€šè¿‡éåŽ†å®žçŽ° 1234567891011121314151617181920212223242526public class Solution &#123; public void printListFromTailToHead(ListNode listNode) &#123; ListNode pre = null; ListNode next = null; while (listNode != null) &#123; next = listNode.next; listNode.next = pre; pre = listNode; listNode = next; &#125; while (pre != null) &#123; System.out.println(pre.val); pre = pre.next; &#125; &#125; public static void main(String[] args) &#123; ListNode listNode = new ListNode(1); listNode.next = new ListNode(2); listNode.next.next = new ListNode(3); listNode.next.next.next = new ListNode(4); listNode.next.next.next.next = new ListNode(5); new Solution().printListFromTailToHead(listNode); &#125;&#125; æ ˆç ”ç©¶äº†ä¸‹æºç ï¼Œç®€å•å®žçŽ°äº†ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119import java.util.Arrays;import java.util.EmptyStackException;/** * @author zhujian on 2020/1/5. */public class Stack&lt;E&gt; &#123; /** * å…ƒç´ æ•°é‡ */ private int elementCount; /** * å‚¨å­˜æ•°æ®çš„æ•°ç»„ */ private Object[] elementData; /** * è‡ªå®šä¹‰æœ€å¤§æ•°ç»„å®¹é‡ */ private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8; /** * æž„é€ æ–¹æ³•ï¼Œé»˜è®¤å¤§å°ä¸º10 */ public Stack() &#123; this(10); &#125; public Stack(int initialCapacity) &#123; if (initialCapacity &lt; 0) &#123; throw new IllegalArgumentException("Illegal Capacity: " + initialCapacity); &#125; this.elementData = new Object[initialCapacity]; &#125; /** * å…¥æ ˆ * * @param item * @return */ public E push(E item) &#123; if (elementCount + 1 - elementData.length &gt; 0) &#123; grow(elementCount + 1); &#125; elementData[elementCount++] = item; return item; &#125; /** * å‡ºæ ˆ * * @return */ public E pop() &#123; E item; item = peek(); removeElementAt(elementCount - 1); return item; &#125; public boolean isEmpty() &#123; return elementCount == 0; &#125; /** * å–å‡ºæ•°ç»„æœ€å³è¾¹å…ƒç´  * * @return */ public E peek() &#123; int len = elementCount; if (len == 0) &#123; throw new EmptyStackException(); &#125; return (E) elementData[len - 1]; &#125; /** * ç§»é™¤æ•°ç»„æœ€å³è¾¹å…ƒç´  * * @param index */ public void removeElementAt(int index) &#123; if (index &gt;= elementCount) &#123; throw new ArrayIndexOutOfBoundsException(index + " &gt;= " + elementCount); &#125; else if (index &lt; 0) &#123; throw new ArrayIndexOutOfBoundsException(index); &#125; int j = elementCount - index - 1; if (j &gt; 0) &#123; System.arraycopy(elementData, index + 1, elementData, index, j); &#125; elementCount--; elementData[elementCount] = null; &#125; /** * æ•°ç»„é•¿åº¦ä¸å¤Ÿæ—¶ï¼Œä¸ºæ•°ç»„æ‰©å¤§ç©ºé—´ * * @param minCapacity */ private void grow(int minCapacity) &#123; int oldCapacity = elementData.length; int newCapacity = oldCapacity * 2; if (newCapacity &lt; minCapacity) &#123; newCapacity = minCapacity; &#125; if (newCapacity &gt; MAX_ARRAY_SIZE) &#123; if (minCapacity &lt; 0) &#123; throw new OutOfMemoryError(); &#125; newCapacity = (minCapacity &gt; MAX_ARRAY_SIZE) ? Integer.MAX_VALUE : MAX_ARRAY_SIZE; &#125; elementData = Arrays.copyOf(elementData, newCapacity); &#125;&#125; JDKæºç ä¸­æ˜¯è¿™æ ·çš„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package java.util;publicclass Stack&lt;E&gt; extends Vector&lt;E&gt; &#123; public Stack() &#123; &#125; public E push(E item) &#123; addElement(item); return item; &#125; public synchronized E pop() &#123; E obj; int len = size(); obj = peek(); removeElementAt(len - 1); return obj; &#125; public synchronized E peek() &#123; int len = size(); if (len == 0) throw new EmptyStackException(); return elementAt(len - 1); &#125; public boolean empty() &#123; return size() == 0; &#125; public synchronized int search(Object o) &#123; int i = lastIndexOf(o); if (i &gt;= 0) &#123; return size() - i; &#125; return -1; &#125; private static final long serialVersionUID = 1224463164541339165L;&#125; ç»†èŠ‚æ»¡æ»¡ï¼Œæƒ³è¦çœ‹æ›´å¤šå®žçŽ°å°±éœ€è¦åŽ»çœ‹Vectorçš„æºç äº†ã€‚Vectoræ—¥å¸¸ä½¿ç”¨çš„å¤ªå°‘äº†ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å®žçŽ°åŒæ­¥éœ€è¦å¾ˆé«˜çš„èŠ±è´¹ï¼Œå› æ­¤è®¿é—®æ¯”ArrayListæ…¢ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ›¿æ¢ç©ºæ ¼]]></title>
      <url>%2F2020%2F01%2F03%2F%E6%9B%BF%E6%8D%A2%E7%A9%BA%E6%A0%BC%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— (à¹‘â€¢ . â€¢à¹‘) æ›¿æ¢ç©ºæ ¼é¢˜ç›®æè¿°è¯·å®žçŽ°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ %20ã€‚ä¾‹å¦‚ï¼Œå½“å­—ç¬¦ä¸²ä¸º We Are Happyï¼Œåˆ™ç»è¿‡æ›¿æ¢ä¹‹åŽçš„å­—ç¬¦ä¸²ä¸º We%20Are%20Happyã€‚ æ€è·¯è§£æ³•ä¸€å…¶å®žçœ‹åˆ°è¿™é“é¢˜ï¼Œæˆ‘æœ€å¼€å§‹æƒ³åˆ°çš„å°±æ˜¯å­—ç¬¦ä¸²çš„replaceæ–¹æ³•ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯é¢è¯•å®˜æƒ³è¦çš„ç­”æ¡ˆï¼Œæˆ‘å°±åŽ»çœ‹äº†ä¸‹å®žçŽ°æºç ã€‚ 1234public String replace(CharSequence target, CharSequence replacement) &#123; return Pattern.compile(target.toString(), Pattern.LITERAL).matcher( this).replaceAll(Matcher.quoteReplacement(replacement.toString()));&#125; åŽŸæ¥æ˜¯ç”¨æ­£åˆ™åŽ»åŒ¹é…å†æ›¿æ¢çš„ï¼Œå†åŽ»çœ‹çœ‹æ­£åˆ™æ›¿æ¢çš„æ–¹æ³• 1234567891011121314public String replaceAll(String replacement) &#123; reset(); boolean result = find(); if (result) &#123; StringBuffer sb = new StringBuffer(); do &#123; appendReplacement(sb, replacement); result = find(); &#125; while (result); appendTail(sb); return sb.toString(); &#125; return text.toString();&#125; å‘çŽ°ç”¨çš„æ˜¯StringBufferï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ è§£æ³•äºŒå¥½äº†ï¼Œä¸‹é¢æ­¥å…¥æ­£é¢˜ï¼Œåˆ›å»º StringBuilderï¼ŒéåŽ†åŽŸå­—ç¬¦ä¸²ï¼Œé‡åˆ°éžç©ºæ ¼ï¼Œç›´æŽ¥ append åˆ° StringBuilder ä¸­ï¼Œé‡åˆ°ç©ºæ ¼åˆ™å°† %20 append åˆ° StringBuilder ä¸­ã€‚ 123456789101112131415161718192021public class Solution &#123; public String replaceSpace(String str) &#123; if (str == None || str.length() == 0) &#123; return str; &#125; StringBuilder sb = new StringBuilder(); int len = str.length(); for (int i = 0; i &lt; len; ++i) &#123; char ch = str.charAt(i); sb.append(ch == ' ' ? "%20" : ch); &#125; return sb.toString(); &#125; public static void main(String[] args) &#123; String s = "We Are Happy"; System.out.println(new Solution().replaceSpace(s)); &#125;&#125; è§£æ³•ä¸‰ï¼ˆæŽ¨èï¼‰å…ˆéåŽ†åŽŸå­—ç¬¦ä¸²ï¼Œé‡åˆ°ç©ºæ ¼ï¼Œåˆ™åœ¨åŽŸå­—ç¬¦ä¸²æœ«å°¾ append ä»»æ„ä¸¤ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸¤ä¸ªç©ºæ ¼ã€‚ ç”¨æŒ‡é’ˆ p æŒ‡å‘åŽŸå­—ç¬¦ä¸²æœ«å°¾ï¼Œq æŒ‡å‘çŽ°å­—ç¬¦ä¸²æœ«å°¾ï¼Œp, q ä»ŽåŽå¾€å‰éåŽ†ï¼Œå½“ p é‡åˆ°ç©ºæ ¼ï¼Œq ä½ç½®ä¾æ¬¡è¦ append â€˜02%â€™ï¼Œè‹¥ä¸æ˜¯ç©ºæ ¼ï¼Œç›´æŽ¥ append p æŒ‡å‘çš„å­—ç¬¦ã€‚ ðŸ¤”æ€è·¯æ‰©å±•åœ¨åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼ˆåŒ…æ‹¬å­—ç¬¦ä¸²ï¼‰æ—¶ï¼Œå¦‚æžœä»Žå‰å¾€åŽå¤åˆ¶æ¯ä¸ªæ•°å­—ï¼ˆæˆ–å­—ç¬¦ï¼‰éœ€è¦é‡å¤ç§»åŠ¨æ•°å­—ï¼ˆæˆ–å­—ç¬¦ï¼‰å¤šæ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»ŽåŽå¾€å‰å¤åˆ¶ï¼Œè¿™æ ·å°±èƒ½å‡å°‘ç§»åŠ¨çš„æ¬¡æ•°ï¼Œä»Žè€Œæé«˜æ•ˆçŽ‡ã€‚ 12345678910111213141516171819202122232425262728293031323334public class Solution &#123; public String replaceSpace(String str) &#123; if (str == null || str.length() == 0) &#123; return null; &#125; StringBuilder stringBuilder = new StringBuilder(str); int len = stringBuilder.length(); StringBuilder strBuilder = new StringBuilder(stringBuilder); for (int i = 0; i &lt; len; i++) &#123; if (strBuilder.charAt(i) == ' ') &#123; strBuilder.append(" "); &#125; &#125; int p = len - 1; int q = strBuilder.length() - 1; while (p &gt; 0) &#123; char ch = stringBuilder.charAt(p--); if (ch == ' ') &#123; strBuilder.setCharAt(q--, '0'); strBuilder.setCharAt(q--, '2'); strBuilder.setCharAt(q--, '%'); &#125; else &#123; strBuilder.setCharAt(q--, ch); &#125; &#125; return strBuilder.toString(); &#125; public static void main(String[] args) &#123; String s = "We Are Happy"; System.out.println(new Solution().replaceSpace(s)); &#125;&#125; Python123456789101112131415161718192021222324252627class Solution(object): def replace_space(self, s): if not isinstance(s, str) or len(s) &lt;= 0 or s is None: return '' space_num = 0 for i in s: if i == ' ': space_num += 1 new_str_len = len(s) + space_num * 2 new_str = new_str_len * [None] index_of_origin, index_of_new = len(s) - 1, new_str_len - 1 while index_of_new &gt;= 0 and index_of_origin &lt;= index_of_new: if s[index_of_origin] == ' ': new_str[index_of_new - 2: index_of_new + 1] = ['%', '2', '0'] index_of_new -= 3 else: new_str[index_of_new] = s[index_of_origin] index_of_new -= 1 index_of_origin -= 1 return ''.join(new_str)if __name__ == '__main__': s = Solution().replace_space('We Are Happy') print(s) çœ‹ç€éƒ½å¤´å¤§]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MapReduceä¾‹å­]]></title>
      <url>%2F2019%2F12%2F30%2FMapReduce%E4%BE%8B%E5%AD%90%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ä¸€åç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— æœ€è¿‘åœ¨å­¦ä¹ ã€ŠHiveç¼–ç¨‹æŒ‡å—ã€‹ï¼Œå°è¯•åŠ¨æ‰‹äº†ç¬¬ä¸€ä¸ªMapReduceæ¡ˆä¾‹ï¼Œè®°å½•ä¸‹ã€‚ JAVA12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.Mapper;import org.apache.hadoop.mapreduce.Reducer;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;import java.io.IOException;import java.util.StringTokenizer;/** * @author zhujian on 2019/12/29. */public class WorldCount &#123; public static class Map extends Mapper&lt;LongWritable, Text, Text, IntWritable&gt; &#123; private final static IntWritable ONE = new IntWritable(1); private Text word = new Text(); @Override public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException &#123; String line = value.toString(); StringTokenizer tokenizer = new StringTokenizer(line); while (tokenizer.hasMoreTokens()) &#123; word.set(tokenizer.nextToken()); context.write(value, ONE); &#125; &#125; &#125; public static class Reduce extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt; &#123; @Override public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123; int sum = 0; for (IntWritable val : values) &#123; sum += val.get(); &#125; context.write(key, new IntWritable(sum)); &#125; &#125; public static void main(String[] args) throws Exception &#123; Configuration conf = new Configuration(); Job job = new Job(conf, "world count"); job.setOutputKeyClass(Text.class); job.setOutputValueClass(IntWritable.class); job.setMapperClass(Map.class); job.setReducerClass(Reduce.class); FileInputFormat.addInputPath(job, new Path(args[0])); FileOutputFormat.setOutputPath(job, new Path(args[1])); job.waitForCompletion(true); &#125;&#125; åˆ†åˆ«ç»§æ‰¿Mapperå’ŒReducerè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œé‡å†™è‡ªå·±çš„å¤„ç†é€»è¾‘ï¼Œæœ€åŽè®¾ç½®mapå’Œreduceã€‚ HQLåŒæ ·çš„åŠŸèƒ½ç”¨HQLæ¥å†™ä¼šç®€å•å¾ˆå¤šï¼š 123456789101112CREATE TABLE docs (line STRING);LOAD DATA INPATH 'docs' OVERWRITE INTO TABLE docs;CREATE TABLE world_counts ASSELECT world, count(1) AS countFROM ( SELECT explode(split(line, '\s')) AS word FROM docs) wGROUP BY wordORDER BY word; so simple]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾]]></title>
      <url>%2F2019%2F12%2F29%2F%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9F%A5%E6%89%BE%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶ä¹ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— (à¹‘â€¢ . â€¢à¹‘) äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼ˆæ¯ä¸ªä¸€ç»´æ•°ç»„çš„é•¿åº¦ç›¸åŒï¼‰ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»Žå·¦åˆ°å³é€’å¢žçš„é¡ºåºæŽ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»Žä¸Šåˆ°ä¸‹é€’å¢žçš„é¡ºåºæŽ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚ ä¾‹å¦‚ä¸‹é¢çš„äºŒç»´æ•°ç»„ï¼Œå¦‚æžœæŸ¥æ‰¾7ï¼Œè¿”å›žtrueï¼ŒæŸ¥æ‰¾5ï¼Œè¿”å›žfalseã€‚ 1 2 8 9 2 4 9 12 4 7 10 13 6 8 11 15 åˆ†æžå¯»æ‰¾ç›®æ ‡æ•°å­—bï¼Œä»Žæ•°ç»„ä¸­é€‰ä¸€ä¸ªæ•°å­—aï¼Œå¦‚æžœa=bï¼Œç»“æŸæŸ¥æ‰¾ï¼›å¦‚æžœa&gt;bï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥æŸ¥æ‰¾çš„èŒƒå›´å°±æ˜¯açš„å·¦è¾¹æˆ–ä¸Šè¾¹ï¼›å¦‚æžœa&lt;bï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥æœç´¢èŒƒå›´å°±æ˜¯å³è¾¹æˆ–ä¸‹è¾¹ã€‚ å½“æˆ‘ä»¬éœ€è¦è§£å†³ä¸€ä¸ªå¤æ‚çš„é—®é¢˜æ—¶ï¼Œä¸€ä¸ªå¾ˆæœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯ä»Žä¸€ä¸ªå…·ä½“çš„é—®é¢˜å…¥æ‰‹ã€‚æœ¬é¢˜å¯ä»¥ä»ŽæŸ¥æ‰¾æ•°å­—7å…¥æ‰‹ï¼Œä¸€æ­¥æ­¥åˆ†æžè¿‡ç¨‹ã€‚å¦‚æžœæˆ‘ä»¬åœ¨äºŒç»´æ•°ç»„ä¸­é—´éšæœºé€‰ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆä¸‹æ¬¡æœç´¢èŒƒå›´å°±æ˜¯ä¸¤ä¸ªåŒºåŸŸï¼Œè€Œä¸”æœ‰é‡å ã€‚å¦‚æžœä»Žæ•°ç»„çš„æŸä¸€ä¸ªè§’ä¸Šå¼€å§‹æœç´¢ï¼Œå°±ä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ æ¯”å¦‚ä»Žæ•°ç»„å³ä¸Šæ–¹å¼€å§‹ï¼Œ a=9ï¼Œb=7ï¼Œa&gt;bï¼ŒæŽ¥ç€æŸ¥æ‰¾å·¦è¾¹å’Œä¸Šè¾¹ï¼Œç”±äºŽæ²¡æœ‰ä¸Šè¾¹ï¼Œæ‰€ä»¥åªèƒ½æŸ¥æ‰¾å·¦è¾¹ï¼Œä¹Ÿå°±æ˜¯1ã€2ã€8è¿™ä¸‰åˆ— a=8ï¼Œa&gt;bï¼ŒæŽ¥ç€æŸ¥æ‰¾å·¦è¾¹å’Œä¸Šè¾¹ï¼Œå› ä¸ºæ²¡æœ‰ä¸Šè¾¹ï¼Œåªèƒ½æŽ¥ç€æ‰¾å·¦è¾¹ï¼Œä¹Ÿå°±æ˜¯1ï¼Œ2è¿™ä¸¤åˆ— a=2ï¼Œa&lt;bï¼ŒæŽ¥ç€å°±æ˜¯å³è¾¹å’Œä¸‹è¾¹ï¼Œå³è¾¹å·²ç»æŸ¥æ‰¾è¿‡ï¼Œæ‰€ä»¥æŽ¥ä¸‹æ¥å°±æ˜¯ä¸€ç›´å¾€ä¸‹æŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯1ã€2è¿™ä¸¤åˆ—çš„ä¸‹æ–¹ a=4ï¼Œa&lt;bï¼ŒæŽ¥ç€æŸ¥æ‰¾1ã€2è¿™ä¸¤åˆ—çš„ä¸‹é¢ä¸¤è¡Œ a=7ï¼Œa=bï¼Œç»“æŸæŸ¥æ‰¾ã€‚ è§£æ³•ä»ŽäºŒç»´æ•°ç»„çš„å³ä¸Šæ–¹å¼€å§‹æŸ¥æ‰¾ï¼š è‹¥å…ƒç´ å€¼ç­‰äºŽ targetï¼Œè¿”å›ž trueï¼› è‹¥å…ƒç´ å€¼å¤§äºŽ targetï¼Œç æŽ‰è¿™ä¸€åˆ—ï¼Œå³ --jï¼› è‹¥å…ƒç´ å€¼å°äºŽ targetï¼Œç æŽ‰è¿™ä¸€è¡Œï¼Œå³ ++iã€‚ ä¹Ÿå¯ä»¥ä»ŽäºŒç»´æ•°ç»„çš„å·¦ä¸‹æ–¹å¼€å§‹æŸ¥æ‰¾ï¼Œä»¥ä¸‹ä»£ç ä½¿ç”¨å·¦ä¸‹æ–¹ä½œä¸ºæŸ¥æ‰¾çš„èµ·ç‚¹ã€‚ æ³¨æ„ï¼Œä¸èƒ½é€‰æ‹©å·¦ä¸Šæ–¹æˆ–è€…å³ä¸‹æ–¹çš„æ•°å­—ï¼Œå› ä¸ºè¿™æ ·æ— æ³•ç¼©å°æŸ¥æ‰¾çš„èŒƒå›´ã€‚ 123456789101112131415161718192021222324252627282930313233public class Solution &#123; public boolean find(int target, int[][] array) &#123; if (array == null) &#123; return false; &#125; int rows = array.length; int columns = array[0].length; int i = rows - 1; int j = 0; while (i &gt;= 0 &amp;&amp; j &lt; columns) &#123; if (array[i][j] == target) &#123; return true; &#125; if (array[i][j] &lt; target) &#123; ++j; &#125; else &#123; --i; &#125; &#125; return false; &#125; public static void main(String[] args) &#123; int[][] arr = new int[][]&#123; &#123;1, 2, 8, 9&#125;, &#123;2, 4, 9, 12&#125;, &#123;4, 7, 10, 13&#125;, &#123;6, 8, 11, 15&#125; &#125;; boolean res = new Solution().find(7, arr); System.out.println(res); &#125;&#125; å¦‚æžœæ˜¯æˆ‘è‡ªå·±åŽ»å†™è¿™é“é¢˜çš„è¯ï¼Œè‚¯å®šæƒ³ä¸å‡ºè¿™æ ·çš„æ–¹æ³•ï¼Œå¯èƒ½å°±æ˜¯éåŽ†æ‰€æœ‰æ•°å­—ï¼Œè¿™è‚¯å®šä¸æ˜¯é¢è¯•å®˜è¦é—®çš„ã€‚çœ‹äº†ä¹¦ä¸­ä»‹ç»çš„æ–¹æ³•ï¼Œåˆ†æžè¿‡ç¨‹ç¡®å®žå¾ˆé‡è¦ï¼Œä¸€æ­¥æ­¥åŽ»å¯»æ‰¾è§„å¾‹ã€‚æˆ‘æƒ³èµ·äº†é«˜ä¸­æ•°å­¦çš„æ•°åˆ—ï¼Œè€å¸ˆå¸¸è¯´â€œæ•°åˆ—å°±æ˜¯åˆ—æ•°ï¼Œå¦‚æžœä¸çŸ¥é“è§„å¾‹ï¼Œå°±å¤šå†™å‡ ä¸ªä¾‹å­â€ã€‚å¯¹äºŽçŽ°åœ¨çš„è¿™ç§ç®—æ³•é¢˜ï¼Œä¸€å®šè¦å¤šè¯•å‡ ä¸ªä¾‹å­ï¼Œä»Žä¸­æ‰¾åˆ°è§„å¾‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—]]></title>
      <url>%2F2019%2F12%2F26%2F%E6%89%BE%E5%87%BA%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E5%AD%97%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶å…«ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— (à¹‘â€¢ . â€¢à¹‘) æ‰¾å‡ºæ•°ç»„ä¸­é‡å¤çš„æ•°å­—é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0 åˆ° n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè¾“å…¥é•¿åº¦ä¸º 7 çš„æ•°ç»„ {2, 3, 1, 0, 2, 5, 3}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯é‡å¤çš„æ•°å­— 2 æˆ–è€… 3ã€‚ è§£æ³•è§£æ³•ä¸€æŽ’åºåŽï¼Œé¡ºåºæ‰«æï¼Œåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(nÂ²)ã€‚ è§£æ³•äºŒåˆ©ç”¨å“ˆå¸Œè¡¨ï¼ŒéåŽ†æ•°ç»„ï¼Œå¦‚æžœå“ˆå¸Œè¡¨ä¸­æ²¡æœ‰è¯¥å…ƒç´ ï¼Œåˆ™å­˜å…¥å“ˆå¸Œè¡¨ä¸­ï¼Œå¦åˆ™è¿”å›žé‡å¤çš„å…ƒç´ ã€‚æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚ è§£æ³•ä¸‰é•¿åº¦ä¸º nï¼Œå…ƒç´ çš„æ•°å€¼èŒƒå›´ä¹Ÿä¸º nï¼Œå¦‚æžœæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œé‚£ä¹ˆæ•°ç»„æ¯ä¸ªä¸‹æ ‡å¯¹åº”çš„å€¼ä¸Žä¸‹æ ‡ç›¸ç­‰ã€‚ ä»Žå¤´åˆ°å°¾éåŽ†æ•°ç»„ï¼Œå½“æ‰«æåˆ°ä¸‹æ ‡ i çš„æ•°å­— nums[i]ï¼š å¦‚æžœç­‰äºŽ iï¼Œç»§ç»­å‘ä¸‹æ‰«æï¼› å¦‚æžœä¸ç­‰äºŽ iï¼Œæ‹¿å®ƒä¸Žç¬¬ nums[i] ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœç›¸ç­‰ï¼Œè¯´æ˜Žæœ‰é‡å¤å€¼ï¼Œè¿”å›ž nums[i]ã€‚å¦‚æžœä¸ç›¸ç­‰ï¼Œå°±æŠŠç¬¬ i ä¸ªæ•° å’Œç¬¬ nums[i] ä¸ªæ•°äº¤æ¢ã€‚é‡å¤è¿™ä¸ªæ¯”è¾ƒäº¤æ¢çš„è¿‡ç¨‹ã€‚ æ­¤ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ æœ€å¤šåªè¦ä¸¤æ¬¡äº¤æ¢ï¼Œå°±èƒ½ç¡®å®šä½ç½®ã€‚ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚ 12345678910111213141516171819202122232425262728293031323334/** * @author zhujian on 2019/12/26. */public class Solution &#123; public int findDuplicate(int[] array) &#123; if (array.length == 0) &#123; return -1; &#125; for (int i = 0; i &lt; array.length; i++) &#123; while (array[i] != i) &#123; if (array[i] == array[array[i]]) &#123; return array[i]; &#125; swap(array, i, array[i]); System.out.println(Arrays.toString(array)); &#125; &#125; return -1; &#125; private void swap(int[] array, int i, int j) &#123; int t = array[i]; array[i] = array[j]; array[j] = t; &#125; public static void main(String[] args) &#123; int[] arr = new int[]&#123;2, 3, 1, 0, 2, 5, 3&#125;; int res = new Solution().findDuplicate(arr); System.out.println(res); &#125;&#125; ä»£ç ä¸­æœ‰ä¸€ä¸ªä¸¤é‡å¾ªçŽ¯ï¼Œä½†æ¯ä¸ªæ•°å­—æœ€å¤šåªè¦äº¤æ¢ä¸¤æ¬¡å°±å¯ä»¥æ‰¾åˆ°å±žäºŽè‡ªå·±çš„ä½ç½®ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚ä¸éœ€è¦é¢å¤–åˆ†é…å†…å­˜ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚ Output1234[1, 3, 2, 0, 2, 5, 3][3, 1, 2, 0, 2, 5, 3][0, 1, 2, 3, 2, 5, 3]2 ä»¥æ•°ç»„[2, 3, 1, 0, 2, 5, 3]ä¸ºä¾‹æ¥åˆ†æžæ‰¾åˆ°é‡å¤æ•°å­—çš„æ­¥éª¤ï¼š æ•°ç»„çš„ç¬¬ 0 ä¸ªæ•°å­—ï¼ˆä»Ž 0 å¼€å§‹è®¡æ•°ï¼Œå’Œæ•°ç»„çš„ä¸‹æ ‡ä¿æŒä¸€è‡´ï¼‰æ˜¯ 2ï¼Œä¸Žå®ƒçš„ä¸‹æ ‡ä¸ç›¸ç­‰ï¼ŒäºŽæ˜¯æŠŠå®ƒå’Œä¸‹æ ‡ä¸º 2 çš„æ•°å­— 1 äº¤æ¢ã€‚äº¤æ¢ä¹‹åŽçš„æ•°ç»„æ˜¯[1, 3, 2, 0, 2, 5, 3]ã€‚ æ­¤æ—¶ç¬¬ 0 ä¸ªæ•°å­—æ˜¯ 1ï¼Œä»ç„¶ä¸Žå®ƒçš„ä¸‹æ ‡ä¸ç›¸ç­‰ï¼Œç»§ç»­æŠŠå®ƒå’Œä¸‹æ ‡ä¸º 1 çš„æ•°å­— 3 äº¤æ¢ï¼Œå¾—åˆ°æ•°ç»„[3, 1, 2, 0, 2, 5, 3] æŽ¥ä¸‹æ¥ç»§ç»­äº¤æ¢ç¬¬ 0 ä¸ªæ•°å­— 3 å’Œç¬¬ 3 ä¸ªæ•°å­— 0ï¼Œå¾—åˆ°æ•°ç»„[0, 1, 2, 3, 2, 5, 3]ã€‚ æ­¤æ—¶ç¬¬ 0 ä¸ªæ•°å­—çš„æ•°å€¼ä¸º 0ï¼ŒæŽ¥ç€æ‰«æä¸‹ä¸€ä¸ªæ•°å­—ã€‚åœ¨æŽ¥ä¸‹æ¥çš„å‡ ä¸ªæ•°å­—ä¸­ï¼Œä¸‹æ ‡ä¸º 1ï¼Œ2ï¼Œ3 çš„ä¸‰ä¸ªæ•°å­—åˆ†åˆ«ä¸º 1ï¼Œ2ï¼Œ3 å®ƒä»¬çš„ä¸‹æ ‡å’Œæ•°å€¼éƒ½åˆ†åˆ«ç›¸ç­‰ï¼Œå› æ­¤ä¸éœ€è¦åšä»»ä½•æ“ä½œã€‚ æŽ¥ä¸‹æ¥æ‰«æåˆ°ä¸‹æ ‡ä¸º 4 çš„æ•°å­— 2ã€‚ç”±äºŽå®ƒçš„æ•°å€¼ä¸Žå®ƒçš„ä¸‹æ ‡ä¸ç›¸ç­‰ï¼Œå†æ¯”è¾ƒå®ƒå’Œä¸‹æ ‡ä¸º 2 çš„æ•°å­—ã€‚æ³¨æ„åˆ°æ­¤æ—¶æ•°ç»„ä¸­ä¸‹æ ‡ä¸º 2 çš„æ•°å­—ä¹Ÿæ˜¯ 2ï¼Œä¹Ÿå°±æ˜¯æ•°å­—åœ¨ä¸‹æ ‡ä¸º 2 å’Œä¸‹æ ‡ä¸º 4 çš„ä¸¤ä¸ªä½ç½®éƒ½å‡ºçŽ°äº†ï¼Œå› æ­¤æ‰¾åˆ°ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚ æœ¬é¢˜å…³é”®æ˜¯ï¼šåœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0 åˆ° n-1 çš„èŒƒå›´å†…å¹¶ä¸”æœ‰é‡å¤ï¼Œè¿™è¯´æ˜Žæ•°ç»„æ˜¯å¯ä»¥æŽ’åºçš„ï¼ŒæŠŠæ¯ä¸ªæ•°å­—äº¤æ¢åˆ°è‡ªå·±åº”è¯¥åœ¨çš„ä½ç½®ï¼ŒæŽ’åºæ—¶å°±èƒ½æ‰¾åˆ°é‡å¤å­—æ®µã€‚ç†æƒ³çŠ¶æ€ä¸‹çš„æƒ…å†µï¼š[0, 1, 2, 3, 4, x, x, x] Pythonè§£æ³•æ›´ç®€å• 12345678910111213def solution(arr): if len(arr) == 0: return -1 for i in range(len(arr)): while arr[i] != i: tmp = arr[i] if tmp == arr[tmp]: return tmp arr[i], arr[tmp] = arr[tmp], arr[i] print(arr)print(solution([3, 1, 2, 0, 2, 5, 3])) ä¸ä¿®æ”¹æ•°ç»„æ‰¾å‡ºé‡å¤çš„æ•°å­—é¢˜ç›®æè¿°åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n+1 çš„æ•°ç»„é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 1 åˆ° n çš„èŒƒå›´å†…ï¼Œæ•°ç»„ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­—æ˜¯é‡å¤çš„ï¼Œè¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œä½†ä¸èƒ½ä¿®æ”¹è¾“å…¥çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè¾“å…¥é•¿åº¦ä¸º 8 çš„æ•°ç»„ {2, 3, 5, 4, 3, 2, 6, 7}ï¼Œé‚£ä¹ˆå¯¹åº”çš„è¾“å‡ºæ˜¯é‡å¤çš„æ•°å­— 2 æˆ–è€… 3ã€‚ è§£æ³•è§£æ³•ä¸€åˆ›å»ºé•¿åº¦ä¸º n+1 çš„è¾…åŠ©æ•°ç»„ï¼ŒæŠŠåŽŸæ•°ç»„çš„å…ƒç´ å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„ä¸­ã€‚å¦‚æžœåŽŸæ•°ç»„è¢«å¤åˆ¶çš„æ•°æ˜¯ mï¼Œåˆ™æ”¾åˆ°è¾…åŠ©æ•°ç»„ç¬¬ m ä¸ªä½ç½®ã€‚è¿™æ ·å¾ˆå®¹æ˜“æ‰¾å‡ºé‡å¤å…ƒç´ ã€‚ç©ºé—´å¤æ‚åº¦ä¸º O(n)ã€‚ è§£æ³•äºŒæ•°ç»„å…ƒç´ çš„å–å€¼èŒƒå›´æ˜¯ [1, n]ï¼Œå¯¹è¯¥èŒƒå›´å¯¹åŠåˆ’åˆ†ï¼Œåˆ†æˆ [1, middle], [middle+1, n]ã€‚è®¡ç®—æ•°ç»„ä¸­æœ‰å¤šå°‘ä¸ª(count)å…ƒç´ è½åœ¨ [1, middle] åŒºé—´å†…ï¼Œå¦‚æžœ count å¤§äºŽ middleï¼Œé‚£ä¹ˆè¯´æ˜Žè¿™ä¸ªèŒƒå›´å†…æœ‰é‡å¤å…ƒç´ ï¼Œå¦åˆ™åœ¨å¦ä¸€ä¸ªèŒƒå›´å†…ã€‚ç»§ç»­å¯¹è¿™ä¸ªèŒƒå›´å¯¹åŠåˆ’åˆ†ï¼Œç»§ç»­ç»Ÿè®¡åŒºé—´å†…å…ƒç´ æ•°é‡ã€‚ æ—¶é—´å¤æ‚åº¦ O(n * log n)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚ æ³¨æ„ï¼Œæ­¤æ–¹æ³•æ— æ³•æ‰¾å‡ºæ‰€æœ‰é‡å¤çš„å…ƒç´ ã€‚å¦‚æžœå·¦å³åŠåŒºåŒæ—¶å­˜åœ¨é‡å¤å€¼ï¼Œå…ˆç®—å“ªä¸ªåŠåŒºå°±ä¼šå…ˆå¾—åˆ°å“ªè¾¹çš„é‡å¤å€¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * @author zhujian on 2019/12/26. */public class Solution &#123; public int findDuplicate(int[] array) &#123; if (array.length == 0) &#123; return -1; &#125; int start = 1; int end = array.length - 1; while (start &lt;= end) &#123; int middle = start + ((end - start) &gt;&gt; 1); int count = countRange(array, start, middle); if (end == start) &#123; if (count &gt; 1) &#123; return start; &#125; else &#123; break; &#125; &#125; else &#123; if (count &gt; (middle - start) + 1) &#123; end = middle; &#125; else &#123; start = middle + 1; &#125; &#125; &#125; return -1; &#125; private int countRange(int[] array, int start, int end) &#123; if (array.length == 0) &#123; return -1; &#125; int count = 0; for (int i : array) &#123; if (i &gt;= start &amp;&amp; i &lt;= end) &#123; count++; &#125; &#125; return count; &#125; public static void main(String[] args) &#123; int[] arr = new int[]&#123;2, 3, 5, 4, 3, 2, 6, 7&#125;; int res = new Solution().findDuplicate(arr); System.out.println(res); &#125;&#125; æŒ‰ç…§äºŒåˆ†æ³•æŸ¥æ‰¾çš„æ€è·¯ï¼Œå¦‚æžœè¾“å‡ºé•¿åº¦ä¸ºnçš„æ•°ç»„ï¼Œé‚£ä¹ˆå‡½æ•°countRangeå°†è¢«è°ƒç”¨O(log n)æ¬¡ï¼Œæ¯æ¬¡éœ€è¦O(n)æ—¶é—´ï¼Œå› æ­¤æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nlog n) ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¤§æ•°æ®å­¦ä¹ è·¯çº¿]]></title>
      <url>%2F2019%2F12%2F06%2F%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶ä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— å¤§æ•°æ®å¤„ç†æµç¨‹ ä¸Šå›¾æ˜¯ä¸€ä¸ªç®€åŒ–çš„å¤§æ•°æ®å¤„ç†æµç¨‹å›¾ï¼Œå¤§æ•°æ®å¤„ç†çš„ä¸»è¦æµç¨‹åŒ…æ‹¬æ•°æ®æ”¶é›†ã€æ•°æ®å­˜å‚¨ã€æ•°æ®å¤„ç†ã€æ•°æ®åº”ç”¨ç­‰ä¸»è¦çŽ¯èŠ‚ã€‚ä¸‹é¢æˆ‘ä»¬é€ä¸€å¯¹å„ä¸ªçŽ¯èŠ‚æ‰€éœ€è¦çš„æŠ€æœ¯æ ˆè¿›è¡Œè®²è§£ï¼š 1.1 æ•°æ®æ”¶é›†å¤§æ•°æ®å¤„ç†çš„ç¬¬ä¸€æ­¥æ˜¯æ•°æ®çš„æ”¶é›†ã€‚çŽ°åœ¨çš„ä¸­å¤§åž‹é¡¹ç›®é€šå¸¸é‡‡ç”¨å¾®æœåŠ¡æž¶æž„è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œæ‰€ä»¥æ•°æ®çš„é‡‡é›†éœ€è¦åœ¨å¤šå°æœåŠ¡å™¨ä¸Šè¿›è¡Œï¼Œä¸”é‡‡é›†è¿‡ç¨‹ä¸èƒ½å½±å“æ­£å¸¸ä¸šåŠ¡çš„å¼€å±•ã€‚åŸºäºŽè¿™ç§éœ€æ±‚ï¼Œå°±è¡ç”Ÿäº†å¤šç§æ—¥å¿—æ”¶é›†å·¥å…·ï¼Œå¦‚ Flume ã€Logstashã€Kibana ç­‰ï¼Œå®ƒä»¬éƒ½èƒ½é€šè¿‡ç®€å•çš„é…ç½®å®Œæˆå¤æ‚çš„æ•°æ®æ”¶é›†å’Œæ•°æ®èšåˆã€‚ 1.2 æ•°æ®å­˜å‚¨æ”¶é›†åˆ°æ•°æ®åŽï¼Œä¸‹ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šæ•°æ®è¯¥å¦‚ä½•è¿›è¡Œå­˜å‚¨ï¼Ÿé€šå¸¸å¤§å®¶æœ€ä¸ºç†ŸçŸ¥æ˜¯ MySQLã€Oracle ç­‰ä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“ï¼Œå®ƒä»¬çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿå¿«é€Ÿå­˜å‚¨ç»“æž„åŒ–çš„æ•°æ®ï¼Œå¹¶æ”¯æŒéšæœºè®¿é—®ã€‚ä½†å¤§æ•°æ®çš„æ•°æ®ç»“æž„é€šå¸¸æ˜¯åŠç»“æž„åŒ–ï¼ˆå¦‚æ—¥å¿—æ•°æ®ï¼‰ã€ç”šè‡³æ˜¯éžç»“æž„åŒ–çš„ï¼ˆå¦‚è§†é¢‘ã€éŸ³é¢‘æ•°æ®ï¼‰ï¼Œä¸ºäº†è§£å†³æµ·é‡åŠç»“æž„åŒ–å’Œéžç»“æž„åŒ–æ•°æ®çš„å­˜å‚¨ï¼Œè¡ç”Ÿäº† Hadoop HDFS ã€KFSã€GFS ç­‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿæ”¯æŒç»“æž„åŒ–ã€åŠç»“æž„å’Œéžç»“æž„åŒ–æ•°æ®çš„å­˜å‚¨ï¼Œå¹¶å¯ä»¥é€šè¿‡å¢žåŠ æœºå™¨è¿›è¡Œæ¨ªå‘æ‰©å±•ã€‚ åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå®Œç¾Žåœ°è§£å†³äº†æµ·é‡æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸€ä¸ªä¼˜ç§€çš„æ•°æ®å­˜å‚¨ç³»ç»Ÿéœ€è¦åŒæ—¶è€ƒè™‘æ•°æ®å­˜å‚¨å’Œè®¿é—®ä¸¤æ–¹é¢çš„é—®é¢˜ï¼Œæ¯”å¦‚ä½ å¸Œæœ›èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œéšæœºè®¿é—®ï¼Œè¿™æ˜¯ä¼ ç»Ÿçš„å…³ç³»åž‹æ•°æ®åº“æ‰€æ“…é•¿çš„ï¼Œä½†å´ä¸æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿæ‰€æ“…é•¿çš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§å­˜å‚¨æ–¹æ¡ˆèƒ½å¤ŸåŒæ—¶å…¼å…·åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå’Œå…³ç³»åž‹æ•°æ®åº“çš„ä¼˜ç‚¹ï¼ŒåŸºäºŽè¿™ç§éœ€æ±‚ï¼Œå°±äº§ç”Ÿäº† HBaseã€MongoDBã€‚ 1.3 æ•°æ®åˆ†æžå¤§æ•°æ®å¤„ç†æœ€é‡è¦çš„çŽ¯èŠ‚å°±æ˜¯æ•°æ®åˆ†æžï¼Œæ•°æ®åˆ†æžé€šå¸¸åˆ†ä¸ºä¸¤ç§ï¼šæ‰¹å¤„ç†å’Œæµå¤„ç†ã€‚ æ‰¹å¤„ç†ï¼šå¯¹ä¸€æ®µæ—¶é—´å†…æµ·é‡çš„ç¦»çº¿æ•°æ®è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ï¼Œå¯¹åº”çš„å¤„ç†æ¡†æž¶æœ‰ Hadoop MapReduceã€Sparkã€Flink ç­‰ï¼› æµå¤„ç†ï¼šå¯¹è¿åŠ¨ä¸­çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå³åœ¨æŽ¥æ”¶æ•°æ®çš„åŒæ—¶å°±å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå¯¹åº”çš„å¤„ç†æ¡†æž¶æœ‰ Stormã€Spark Streamingã€Flink Streaming ç­‰ã€‚ æ‰¹å¤„ç†å’Œæµå¤„ç†å„æœ‰å…¶é€‚ç”¨çš„åœºæ™¯ï¼Œæ—¶é—´ä¸æ•æ„Ÿæˆ–è€…ç¡¬ä»¶èµ„æºæœ‰é™ï¼Œå¯ä»¥é‡‡ç”¨æ‰¹å¤„ç†ï¼›æ—¶é—´æ•æ„Ÿå’ŒåŠæ—¶æ€§è¦æ±‚é«˜å°±å¯ä»¥é‡‡ç”¨æµå¤„ç†ã€‚éšç€æœåŠ¡å™¨ç¡¬ä»¶çš„ä»·æ ¼è¶Šæ¥è¶Šä½Žå’Œå¤§å®¶å¯¹åŠæ—¶æ€§çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œæµå¤„ç†è¶Šæ¥è¶Šæ™®éï¼Œå¦‚è‚¡ç¥¨ä»·æ ¼é¢„æµ‹å’Œç”µå•†è¿è¥æ•°æ®åˆ†æžç­‰ã€‚ ä¸Šé¢çš„æ¡†æž¶éƒ½æ˜¯éœ€è¦é€šè¿‡ç¼–ç¨‹æ¥è¿›è¡Œæ•°æ®åˆ†æžï¼Œé‚£ä¹ˆå¦‚æžœä½ ä¸æ˜¯ä¸€ä¸ªåŽå°å·¥ç¨‹å¸ˆï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½è¿›è¡Œæ•°æ®çš„åˆ†æžäº†ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œå¤§æ•°æ®æ˜¯ä¸€ä¸ªéžå¸¸å®Œå–„çš„ç”Ÿæ€åœˆï¼Œæœ‰éœ€æ±‚å°±æœ‰è§£å†³æ–¹æ¡ˆã€‚ä¸ºäº†èƒ½å¤Ÿè®©ç†Ÿæ‚‰ SQL çš„äººå‘˜ä¹Ÿèƒ½å¤Ÿè¿›è¡Œæ•°æ®çš„åˆ†æžï¼ŒæŸ¥è¯¢åˆ†æžæ¡†æž¶åº”è¿è€Œç”Ÿï¼Œå¸¸ç”¨çš„æœ‰ Hive ã€Spark SQL ã€Flink SQLã€ Pigã€Phoenix ç­‰ã€‚è¿™äº›æ¡†æž¶éƒ½èƒ½å¤Ÿä½¿ç”¨æ ‡å‡†çš„ SQL æˆ–è€… ç±» SQL è¯­æ³•çµæ´»åœ°è¿›è¡Œæ•°æ®çš„æŸ¥è¯¢åˆ†æžã€‚è¿™äº› SQL ç»è¿‡è§£æžä¼˜åŒ–åŽè½¬æ¢ä¸ºå¯¹åº”çš„ä½œä¸šç¨‹åºæ¥è¿è¡Œï¼Œå¦‚ Hive æœ¬è´¨ä¸Šå°±æ˜¯å°† SQL è½¬æ¢ä¸º MapReduce ä½œä¸šï¼ŒSpark SQL å°† SQL è½¬æ¢ä¸ºä¸€ç³»åˆ—çš„ RDDs å’Œè½¬æ¢å…³ç³»ï¼ˆtransformationsï¼‰ï¼ŒPhoenix å°† SQL æŸ¥è¯¢è½¬æ¢ä¸ºä¸€ä¸ªæˆ–å¤šä¸ª HBase Scanã€‚ 1.4 æ•°æ®åº”ç”¨æ•°æ®åˆ†æžå®ŒæˆåŽï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æ•°æ®åº”ç”¨çš„èŒƒç•´ï¼Œè¿™å–å†³äºŽä½ å®žé™…çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ¯”å¦‚ä½ å¯ä»¥å°†æ•°æ®è¿›è¡Œå¯è§†åŒ–å±•çŽ°ï¼Œæˆ–è€…å°†æ•°æ®ç”¨äºŽä¼˜åŒ–ä½ çš„æŽ¨èç®—æ³•ï¼Œè¿™ç§è¿ç”¨çŽ°åœ¨å¾ˆæ™®éï¼Œæ¯”å¦‚çŸ­è§†é¢‘ä¸ªæ€§åŒ–æŽ¨èã€ç”µå•†å•†å“æŽ¨èã€å¤´æ¡æ–°é—»æŽ¨èç­‰ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å°†æ•°æ®ç”¨äºŽè®­ç»ƒä½ çš„æœºå™¨å­¦ä¹ æ¨¡åž‹ï¼Œè¿™äº›éƒ½å±žäºŽå…¶ä»–é¢†åŸŸçš„èŒƒç•´ï¼Œéƒ½æœ‰ç€å¯¹åº”çš„æ¡†æž¶å’ŒæŠ€æœ¯æ ˆè¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€èµ˜è¿°ã€‚ 1.5 å…¶ä»–æ¡†æž¶ä¸Šé¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å¤§æ•°æ®å¤„ç†æµç¨‹æ‰€ç”¨åˆ°çš„æŠ€æœ¯æ¡†æž¶ã€‚ä½†æ˜¯å®žé™…çš„å¤§æ•°æ®å¤„ç†æµç¨‹æ¯”ä¸Šé¢å¤æ‚å¾ˆå¤šï¼Œé’ˆå¯¹å¤§æ•°æ®å¤„ç†ä¸­çš„å„ç§å¤æ‚é—®é¢˜åˆ†åˆ«è¡ç”Ÿäº†å„ç±»æ¡†æž¶ï¼š å•æœºçš„å¤„ç†èƒ½åŠ›éƒ½æ˜¯å­˜åœ¨ç“¶é¢ˆçš„ï¼Œæ‰€ä»¥å¤§æ•°æ®æ¡†æž¶éƒ½æ˜¯é‡‡ç”¨é›†ç¾¤æ¨¡å¼è¿›è¡Œéƒ¨ç½²ï¼Œä¸ºäº†æ›´æ–¹ä¾¿çš„è¿›è¡Œé›†ç¾¤çš„éƒ¨ç½²ã€ç›‘æŽ§å’Œç®¡ç†ï¼Œè¡ç”Ÿäº† Ambariã€Cloudera Manager ç­‰é›†ç¾¤ç®¡ç†å·¥å…·ï¼› æƒ³è¦ä¿è¯é›†ç¾¤é«˜å¯ç”¨ï¼Œéœ€è¦ç”¨åˆ° ZooKeeper ï¼ŒZooKeeper æ˜¯æœ€å¸¸ç”¨çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œå®ƒèƒ½å¤Ÿè§£å†³å¤§å¤šæ•°é›†ç¾¤é—®é¢˜ï¼ŒåŒ…æ‹¬é¦–é¢†é€‰ä¸¾ã€å¤±è´¥æ¢å¤ã€å…ƒæ•°æ®å­˜å‚¨åŠå…¶ä¸€è‡´æ€§ä¿è¯ã€‚åŒæ—¶é’ˆå¯¹é›†ç¾¤èµ„æºç®¡ç†çš„éœ€æ±‚ï¼Œåˆè¡ç”Ÿäº† Hadoop YARN ; å¤æ‚å¤§æ•°æ®å¤„ç†çš„å¦å¤–ä¸€ä¸ªæ˜¾è‘—çš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•è°ƒåº¦å¤šä¸ªå¤æ‚çš„å¹¶ä¸”å½¼æ­¤ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»çš„ä½œä¸šï¼ŸåŸºäºŽè¿™ç§éœ€æ±‚ï¼Œäº§ç”Ÿäº† Azkaban å’Œ Oozie ç­‰å·¥ä½œæµè°ƒåº¦æ¡†æž¶ï¼› å¤§æ•°æ®æµå¤„ç†ä¸­ä½¿ç”¨çš„æ¯”è¾ƒå¤šçš„å¦å¤–ä¸€ä¸ªæ¡†æž¶æ˜¯ Kafkaï¼Œå®ƒå¯ä»¥ç”¨äºŽæ¶ˆå³°ï¼Œé¿å…åœ¨ç§’æ€ç­‰åœºæ™¯ä¸‹å¹¶å‘æ•°æ®å¯¹æµå¤„ç†ç¨‹åºé€ æˆå†²å‡»ï¼› å¦ä¸€ä¸ªå¸¸ç”¨çš„æ¡†æž¶æ˜¯ Sqoop ï¼Œä¸»è¦æ˜¯è§£å†³äº†æ•°æ®è¿ç§»çš„é—®é¢˜ï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡ç®€å•çš„å‘½ä»¤å°†å…³ç³»åž‹æ•°æ®åº“ä¸­çš„æ•°æ®å¯¼å…¥åˆ° HDFS ã€Hive æˆ– HBase ä¸­ï¼Œæˆ–è€…ä»Ž HDFS ã€Hive å¯¼å‡ºåˆ°å…³ç³»åž‹æ•°æ®åº“ä¸Šã€‚ å­¦ä¹ è·¯çº¿ä»‹ç»å®Œå¤§æ•°æ®æ¡†æž¶ï¼ŒæŽ¥ç€å°±å¯ä»¥ä»‹ç»å…¶å¯¹åº”çš„å­¦ä¹ è·¯çº¿äº†ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š 2.1 è¯­è¨€åŸºç¡€1. Javaå¤§æ•°æ®æ¡†æž¶å¤§å¤šé‡‡ç”¨ Java è¯­è¨€è¿›è¡Œå¼€å‘ï¼Œå¹¶ä¸”å‡ ä¹Žå…¨éƒ¨çš„æ¡†æž¶éƒ½ä¼šæä¾› Java API ã€‚Java æ˜¯ç›®å‰æ¯”è¾ƒä¸»æµçš„åŽå°å¼€å‘è¯­è¨€ï¼Œæ‰€ä»¥ç½‘ä¸Šå…è´¹çš„å­¦ä¹ èµ„æºä¹Ÿæ¯”è¾ƒå¤šã€‚å¦‚æžœä½ ä¹ æƒ¯é€šè¿‡ä¹¦æœ¬è¿›è¡Œå­¦ä¹ ï¼Œè¿™é‡ŒæŽ¨èä»¥ä¸‹å…¥é—¨ä¹¦ç±ï¼š ã€ŠJava ç¼–ç¨‹çš„é€»è¾‘ã€‹ï¼šè¿™é‡Œä¸€æœ¬å›½äººç¼–å†™çš„ç³»ç»Ÿå…¥é—¨ Java çš„ä¹¦ç±ï¼Œæ·±å…¥æµ…å‡ºï¼Œå†…å®¹å…¨é¢ï¼› ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ã€‹ï¼šç›®å‰æœ€æ–°çš„æ˜¯ç¬¬ 10 ç‰ˆï¼Œæœ‰å·ä¸€ å’Œå·äºŒ ä¸¤å†Œï¼Œå·äºŒå¯ä»¥é€‰æ‹©æ€§é˜…è¯»ï¼Œå› ä¸ºå…¶ä¸­å¾ˆå¤šç« èŠ‚çš„å†…å®¹åœ¨å®žé™…å¼€å‘ä¸­å¾ˆå°‘ç”¨åˆ°ã€‚ ç›®å‰å¤§å¤šæ•°æ¡†æž¶è¦æ±‚ Java ç‰ˆæœ¬è‡³å°‘æ˜¯ 1.8ï¼Œè¿™æ˜¯ç”±äºŽ Java 1.8 æä¾›äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œä½¿å¾—å¯ä»¥ç”¨æ›´ç²¾ç®€çš„ä»£ç æ¥å®žçŽ°ä¹‹å‰åŒæ ·çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä½ è°ƒç”¨ Spark APIï¼Œä½¿ç”¨ 1.8 å¯èƒ½æ¯” 1.7 å°‘æ•°å€çš„ä»£ç ï¼Œæ‰€ä»¥è¿™é‡Œé¢å¤–æŽ¨èé˜…è¯» ã€ŠJava 8 å®žæˆ˜ã€‹ è¿™æœ¬ä¹¦ç±ã€‚ 2. ScalaScala æ˜¯ä¸€é—¨ç»¼åˆäº†é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹æ¦‚å¿µçš„é™æ€ç±»åž‹çš„ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒè¿è¡Œåœ¨ Java è™šæ‹Ÿæœºä¸Šï¼Œå¯ä»¥ä¸Žæ‰€æœ‰çš„ Java ç±»åº“æ— ç¼åä½œï¼Œè‘—åçš„ Kafka å°±æ˜¯é‡‡ç”¨ Scala è¯­è¨€è¿›è¡Œå¼€å‘çš„ã€‚ ä¸ºä»€ä¹ˆéœ€è¦å­¦ä¹  Scala è¯­è¨€ ï¼Ÿ è¿™æ˜¯å› ä¸ºå½“å‰æœ€ç«çš„è®¡ç®—æ¡†æž¶ Flink å’Œ Spark éƒ½æä¾›äº† Scala è¯­è¨€çš„æŽ¥å£ï¼Œä½¿ç”¨å®ƒè¿›è¡Œå¼€å‘ï¼Œæ¯”ä½¿ç”¨ Java 8 æ‰€éœ€è¦çš„ä»£ç æ›´å°‘ï¼Œä¸” Spark å°±æ˜¯ä½¿ç”¨ Scala è¯­è¨€è¿›è¡Œç¼–å†™çš„ï¼Œå­¦ä¹  Scala å¯ä»¥å¸®åŠ©ä½ æ›´æ·±å…¥çš„ç†è§£ Sparkã€‚åŒæ ·çš„ï¼Œå¯¹äºŽä¹ æƒ¯ä¹¦æœ¬å­¦ä¹ çš„å°ä¼™ä¼´ï¼Œè¿™é‡ŒæŽ¨èä¸¤æœ¬å…¥é—¨ä¹¦ç±ï¼š ã€Šå¿«å­¦ Scala(ç¬¬ 2 ç‰ˆ)ã€‹ ã€ŠScala ç¼–ç¨‹ (ç¬¬ 3 ç‰ˆ)ã€‹ è¿™é‡Œè¯´æ˜Žä¸€ä¸‹ï¼Œå¦‚æžœä½ çš„æ—¶é—´æœ‰é™ï¼Œä¸ä¸€å®šè¦å­¦å®Œ Scala æ‰åŽ»å­¦ä¹ å¤§æ•°æ®æ¡†æž¶ã€‚Scala ç¡®å®žè¶³å¤Ÿçš„ç²¾ç®€å’Œçµæ´»ï¼Œä½†å…¶åœ¨è¯­è¨€å¤æ‚åº¦ä¸Šç•¥å¤§äºŽ Javaï¼Œä¾‹å¦‚éšå¼è½¬æ¢å’Œéšå¼å‚æ•°ç­‰æ¦‚å¿µåœ¨åˆæ¬¡æ¶‰åŠæ—¶ä¼šæ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨äº†è§£ Spark åŽå†åŽ»å­¦ä¹  Scalaï¼Œå› ä¸ºç±»ä¼¼éšå¼è½¬æ¢ç­‰æ¦‚å¿µåœ¨ Spark æºç ä¸­æœ‰å¤§é‡çš„è¿ç”¨ã€‚ 2.2 Linux åŸºç¡€é€šå¸¸å¤§æ•°æ®æ¡†æž¶éƒ½éƒ¨ç½²åœ¨ Linux æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥éœ€è¦å…·å¤‡ä¸€å®šçš„ Linux çŸ¥è¯†ã€‚Linux ä¹¦ç±å½“ä¸­æ¯”è¾ƒè‘—åçš„æ˜¯ ã€Šé¸Ÿå“¥ç§æˆ¿èœã€‹ç³»åˆ—ï¼Œè¿™ä¸ªç³»åˆ—å¾ˆå…¨é¢ä¹Ÿå¾ˆç»å…¸ã€‚ä½†å¦‚æžœä½ å¸Œæœ›èƒ½å¤Ÿå¿«é€Ÿåœ°å…¥é—¨ï¼Œè¿™é‡ŒæŽ¨èã€ŠLinux å°±è¯¥è¿™ä¹ˆå­¦ã€‹ï¼Œå…¶ç½‘ç«™ä¸Šæœ‰å…è´¹çš„ç”µå­ä¹¦ç‰ˆæœ¬ã€‚ 2.3 æž„å»ºå·¥å…·è¿™é‡Œéœ€è¦æŽŒæ¡çš„è‡ªåŠ¨åŒ–æž„å»ºå·¥å…·ä¸»è¦æ˜¯ Mavenã€‚Maven åœ¨å¤§æ•°æ®åœºæ™¯ä¸­ä½¿ç”¨æ¯”è¾ƒæ™®éï¼Œä¸»è¦åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š ç®¡ç†é¡¹ç›® JAR åŒ…ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæž„å»ºå¤§æ•°æ®åº”ç”¨ç¨‹åºï¼› ä¸è®ºä½ çš„é¡¹ç›®æ˜¯ä½¿ç”¨ Java è¯­è¨€è¿˜æ˜¯ Scala è¯­è¨€è¿›è¡Œå¼€å‘ï¼Œæäº¤åˆ°é›†ç¾¤çŽ¯å¢ƒè¿è¡Œæ—¶ï¼Œéƒ½éœ€è¦ä½¿ç”¨ Maven è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼› å¤§éƒ¨åˆ†å¤§æ•°æ®æ¡†æž¶ä½¿ç”¨ Maven è¿›è¡Œæºç ç®¡ç†ï¼Œå½“ä½ éœ€è¦ä»Žå…¶æºç ç¼–è¯‘å‡ºå®‰è£…åŒ…æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ° Mavenã€‚ 2.4 æ¡†æž¶å­¦ä¹ 1. æ¡†æž¶åˆ†ç±»ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†å¾ˆå¤šå¤§æ•°æ®æ¡†æž¶ï¼Œè¿™é‡Œè¿›è¡Œä¸€ä¸‹åˆ†ç±»æ€»ç»“ï¼š æ—¥å¿—æ”¶é›†æ¡†æž¶ï¼šFlume ã€Logstashã€Kibana åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼šHadoop HDFS æ•°æ®åº“ç³»ç»Ÿï¼šMongodbã€HBase åˆ†å¸ƒå¼è®¡ç®—æ¡†æž¶ï¼š æ‰¹å¤„ç†æ¡†æž¶ï¼šHadoop MapReduce æµå¤„ç†æ¡†æž¶ï¼šStorm æ··åˆå¤„ç†æ¡†æž¶ï¼šSparkã€Flink æŸ¥è¯¢åˆ†æžæ¡†æž¶ï¼šHive ã€Spark SQL ã€Flink SQLã€ Pigã€Phoenix é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼šHadoop YARN åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼šZookeeper æ•°æ®è¿ç§»å·¥å…·ï¼šSqoop ä»»åŠ¡è°ƒåº¦æ¡†æž¶ï¼šAzkabanã€Oozie é›†ç¾¤éƒ¨ç½²å’Œç›‘æŽ§ï¼šAmbariã€Cloudera Manager ä¸Šé¢åˆ—å‡ºçš„éƒ½æ˜¯æ¯”è¾ƒä¸»æµçš„å¤§æ•°æ®æ¡†æž¶ï¼Œç¤¾åŒºéƒ½å¾ˆæ´»è·ƒï¼Œå­¦ä¹ èµ„æºä¹Ÿæ¯”è¾ƒä¸°å¯Œã€‚å»ºè®®ä»Ž Hadoop å¼€å§‹å…¥é—¨å­¦ä¹ ï¼Œå› ä¸ºå®ƒæ˜¯æ•´ä¸ªå¤§æ•°æ®ç”Ÿæ€åœˆçš„åŸºçŸ³ï¼Œå…¶å®ƒæ¡†æž¶éƒ½ç›´æŽ¥æˆ–è€…é—´æŽ¥ä¾èµ–äºŽ Hadoop ã€‚æŽ¥ç€å°±å¯ä»¥å­¦ä¹ è®¡ç®—æ¡†æž¶ï¼ŒSpark å’Œ Flink éƒ½æ˜¯æ¯”è¾ƒä¸»æµçš„æ··åˆå¤„ç†æ¡†æž¶ï¼ŒSpark å‡ºçŽ°å¾—è¾ƒæ—©ï¼Œæ‰€ä»¥å…¶åº”ç”¨ä¹Ÿæ¯”è¾ƒå¹¿æ³›ã€‚ Flink æ˜¯å½“ä¸‹æœ€ç«çƒ­çš„æ–°ä¸€ä»£çš„æ··åˆå¤„ç†æ¡†æž¶ï¼Œå…¶å‡­å€Ÿä¼—å¤šä¼˜å¼‚çš„ç‰¹æ€§å¾—åˆ°äº†ä¼—å¤šå…¬å¸çš„é’çã€‚ä¸¤è€…å¯ä»¥æŒ‰ç…§ä½ ä¸ªäººå–œå¥½æˆ–è€…å®žé™…å·¥ä½œéœ€è¦è¿›è¡Œå­¦ä¹ ã€‚ å›¾ç‰‡å¼•ç”¨è‡ª ï¼šhttps://www.edureka.co/blog/hadoop-ecosystem è‡³äºŽå…¶å®ƒæ¡†æž¶ï¼Œåœ¨å­¦ä¹ ä¸Šå¹¶æ²¡æœ‰ç‰¹å®šçš„å…ˆåŽé¡ºåºï¼Œå¦‚æžœä½ çš„å­¦ä¹ æ—¶é—´æœ‰é™ï¼Œå»ºè®®åˆæ¬¡å­¦ä¹ æ—¶å€™ï¼ŒåŒä¸€ç±»åž‹çš„æ¡†æž¶æŽŒæ¡ä¸€ç§å³å¯ï¼Œæ¯”å¦‚æ—¥å¿—æ”¶é›†æ¡†æž¶å°±æœ‰å¾ˆå¤šç§ï¼Œåˆæ¬¡å­¦ä¹ æ—¶å€™åªéœ€è¦æŽŒæ¡ä¸€ç§ï¼Œèƒ½å¤Ÿå®Œæˆæ—¥å¿—æ”¶é›†çš„ä»»åŠ¡å³å¯ï¼Œä¹‹åŽå·¥ä½œä¸Šæœ‰éœ€è¦å¯ä»¥å†è¿›è¡Œé’ˆå¯¹æ€§åœ°å­¦ä¹ ã€‚ 2. å­¦ä¹ èµ„æ–™å¤§æ•°æ®æœ€æƒå¨å’Œæœ€å…¨é¢çš„å­¦ä¹ èµ„æ–™å°±æ˜¯å®˜æ–¹æ–‡æ¡£ã€‚çƒ­é—¨çš„å¤§æ•°æ®æ¡†æž¶ç¤¾åŒºéƒ½æ¯”è¾ƒæ´»è·ƒã€ç‰ˆæœ¬æ›´æ–°è¿­ä»£ä¹Ÿæ¯”è¾ƒå¿«ï¼Œæ‰€ä»¥å…¶å‡ºç‰ˆç‰©éƒ½æ˜Žæ˜¾æ»žåŽäºŽå…¶å®žé™…ç‰ˆæœ¬ï¼ŒåŸºäºŽè¿™ä¸ªåŽŸå› é‡‡ç”¨ä¹¦æœ¬å­¦ä¹ ä¸æ˜¯ä¸€ä¸ªæœ€å¥½çš„æ–¹æ¡ˆã€‚æ¯”è¾ƒåº†å¹¸çš„æ˜¯ï¼Œå¤§æ•°æ®æ¡†æž¶çš„å®˜æ–¹æ–‡æ¡£éƒ½å†™çš„æ¯”è¾ƒå¥½ï¼Œå†…å®¹å®Œå–„ï¼Œé‡ç‚¹çªå‡ºï¼ŒåŒæ—¶éƒ½é‡‡ç”¨äº†å¤§é‡é…å›¾è¿›è¡Œè¾…åŠ©è®²è§£ã€‚å½“ç„¶ä¹Ÿæœ‰ä¸€äº›ä¼˜ç§€çš„ä¹¦ç±åŽ†ç»æ—¶é—´çš„æ£€éªŒï¼Œè‡³ä»Šä¾ç„¶å¾ˆç»å…¸ï¼Œè¿™é‡Œåˆ—å‡ºéƒ¨åˆ†ä¸ªäººé˜…è¯»è¿‡çš„ç»å…¸ä¹¦ç±ï¼š ã€Šhadoop æƒå¨æŒ‡å— (ç¬¬å››ç‰ˆ)ã€‹ 2017 å¹´ ã€ŠKafka æƒå¨æŒ‡å—ã€‹ 2017 å¹´ ã€Šä»Ž Paxos åˆ° Zookeeper åˆ†å¸ƒå¼ä¸€è‡´æ€§åŽŸç†ä¸Žå®žè·µã€‹ 2015 å¹´ ã€ŠSpark æŠ€æœ¯å†…å¹• æ·±å…¥è§£æž Spark å†…æ ¸æž¶æž„è®¾è®¡ä¸Žå®žçŽ°åŽŸç†ã€‹ 2015 å¹´ ã€ŠSpark.The.Definitive.Guideã€‹ 2018 å¹´ ã€ŠHBase æƒå¨æŒ‡å—ã€‹ 2012 å¹´ ã€ŠHive ç¼–ç¨‹æŒ‡å—ã€‹ 2013 å¹´ 3. è§†é¢‘å­¦ä¹ èµ„æ–™ä¸Šé¢æˆ‘æŽ¨èçš„éƒ½æ˜¯ä¹¦ç±å­¦ä¹ èµ„æ–™ï¼Œå¾ˆå°‘æŽ¨èè§†é¢‘å­¦ä¹ èµ„æ–™ï¼Œè¿™é‡Œè¯´æ˜Žä¸€ä¸‹åŽŸå› ï¼šå› ä¸ºä¹¦ç±åŽ†ç»æ—¶é—´çš„è€ƒéªŒï¼Œèƒ½å¤Ÿå†ç‰ˆçš„æˆ–è€…è±†ç“£ç­‰å¹³å°è¯„ä»·é«˜çš„è¯æ˜Žéƒ½æ˜¯è¢«å¤§ä¼—æ‰€è®¤å¯çš„ï¼Œä»Žæ¦‚çŽ‡çš„è§’åº¦ä¸Šæ¥è¯´ï¼Œå…¶å¿…ç„¶æ›´åŠ ä¼˜ç§€ï¼Œä¸å®¹æ˜“æµªè´¹å¤§å®¶çš„å­¦ä¹ æ—¶é—´å’Œç²¾åŠ›ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººæ›´å€¾å‘äºŽå®˜æ–¹æ–‡æ¡£æˆ–è€…ä¹¦æœ¬çš„å­¦ä¹ æ–¹å¼ï¼Œè€Œä¸æ˜¯è§†é¢‘ã€‚å› ä¸ºè§†é¢‘å­¦ä¹ èµ„æ–™ï¼Œç¼ºå°‘ä¸€ä¸ªå…¬å…±çš„è¯„ä»·å¹³å°å’Œå®Œå–„çš„è¯„ä»·æœºåˆ¶ï¼Œæ‰€ä»¥å…¶è´¨é‡è‰¯èŽ ä¸é½ã€‚ä½†æ˜¯è§†é¢‘ä»»ç„¶æœ‰å…¶ä¸å¯æ›¿ä»£çš„å¥½å¤„ï¼Œå­¦ä¹ èµ·æ¥æ›´ç›´è§‚ã€å°è±¡ä¹Ÿæ›´æ·±åˆ»ï¼Œæ‰€ä»¥å¯¹äºŽä¹ æƒ¯è§†é¢‘å­¦ä¹ çš„å°ä¼™ä¼´ï¼Œè¿™é‡Œæˆ‘å„æŽ¨èä¸€ä¸ªå…è´¹çš„å’Œä»˜è´¹çš„è§†é¢‘å­¦ä¹ èµ„æºï¼Œå¤§å®¶æŒ‰éœ€é€‰æ‹©ï¼š å…è´¹å­¦ä¹ èµ„æºï¼šå°šç¡…è°·å¤§æ•°æ®å­¦ä¹ è·¯çº¿ â€”â€” ä¸‹è½½é“¾æŽ¥ \ åœ¨çº¿è§‚çœ‹é“¾æŽ¥ ä»˜è´¹å­¦ä¹ èµ„æºï¼šæ…•è¯¾ç½‘ Michael PK çš„ç³»åˆ—è¯¾ç¨‹ å¼€å‘å·¥å…·è¿™é‡ŒæŽ¨èä¸€äº›å¤§æ•°æ®å¸¸ç”¨çš„å¼€å‘å·¥å…·ï¼š Java IDEï¼šIDEA å’Œ Eclipse éƒ½å¯ä»¥ã€‚ä»Žä¸ªäººä½¿ç”¨ä¹ æƒ¯è€Œè¨€ï¼Œæ›´å€¾å‘äºŽ IDEA ; VirtualBoxï¼šåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ç»å¸¸è¦åœ¨è™šæ‹Ÿæœºä¸Šæ­å»ºæœåŠ¡å’Œé›†ç¾¤ã€‚VirtualBox æ˜¯ä¸€æ¬¾å¼€æºã€å…è´¹çš„è™šæ‹Ÿæœºç®¡ç†è½¯ä»¶ï¼Œè™½ç„¶æ˜¯è½»é‡çº§è½¯ä»¶ï¼Œä½†åŠŸèƒ½å¾ˆä¸°å¯Œï¼ŒåŸºæœ¬èƒ½å¤Ÿæ»¡è¶³æ—¥å¸¸çš„ä½¿ç”¨éœ€æ±‚ï¼› MobaXtermï¼šå¤§æ•°æ®çš„æ¡†æž¶é€šå¸¸éƒ½éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™é‡ŒæŽ¨èä½¿ç”¨ MobaXterm è¿›è¡Œè¿žæŽ¥ã€‚åŒæ ·æ˜¯å…è´¹å¼€æºçš„ï¼Œæ”¯æŒå¤šç§è¿žæŽ¥åè®®ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ æ–‡ä»¶ï¼Œæ”¯æŒä½¿ç”¨æ’ä»¶æ‰©å±•ï¼› Translate Manï¼šä¸€æ¬¾æµè§ˆå™¨ä¸Šå…è´¹çš„ç¿»è¯‘æ’ä»¶ (è°·æ­Œå’Œç«ç‹å‡æ”¯æŒ)ã€‚å®ƒé‡‡ç”¨è°·æ­Œçš„ç¿»è¯‘æŽ¥å£ï¼Œå‡†ç¡®æ€§éžå¸¸é«˜ï¼Œæ”¯æŒåˆ’è¯ç¿»è¯‘ï¼Œå¯ä»¥è¾…åŠ©è¿›è¡Œå®˜æ–¹æ–‡æ¡£çš„é˜…è¯»ã€‚ ç»“è¯­ä»¥ä¸Šå°±æ˜¯ä¸ªäººå…³äºŽå¤§æ•°æ®çš„å­¦ä¹ å¿ƒå¾—å’Œè·¯çº¿æŽ¨èã€‚æœ¬ç‰‡æ–‡ç« å¯¹å¤§æ•°æ®æŠ€æœ¯æ ˆåšäº†æ¯”è¾ƒç‹­ä¹‰çš„é™å®šï¼Œéšç€å­¦ä¹ çš„æ·±å…¥ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æŠŠ Python è¯­è¨€ã€æŽ¨èç³»ç»Ÿã€æœºå™¨å­¦ä¹ ç­‰é€æ­¥åŠ å…¥åˆ°è‡ªå·±çš„å¤§æ•°æ®æŠ€æœ¯æ ˆä¸­ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode-394-å­—ç¬¦ä¸²è§£ç ]]></title>
      <url>%2F2019%2F11%2F28%2FLeetcode-394-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A7%A3%E7%A0%81%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶å…­ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— é—®é¢˜ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œè¿”å›žå®ƒè§£ç åŽçš„å­—ç¬¦ä¸²ã€‚ ç¼–ç è§„åˆ™ä¸º: k[encoded_string]ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ encoded_string æ­£å¥½é‡å¤ k æ¬¡ã€‚æ³¨æ„ k ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚ ä½ å¯ä»¥è®¤ä¸ºè¾“å…¥å­—ç¬¦ä¸²æ€»æ˜¯æœ‰æ•ˆçš„ï¼›è¾“å…¥å­—ç¬¦ä¸²ä¸­æ²¡æœ‰é¢å¤–çš„ç©ºæ ¼ï¼Œä¸”è¾“å…¥çš„æ–¹æ‹¬å·æ€»æ˜¯ç¬¦åˆæ ¼å¼è¦æ±‚çš„ã€‚ æ­¤å¤–ï¼Œä½ å¯ä»¥è®¤ä¸ºåŽŸå§‹æ•°æ®ä¸åŒ…å«æ•°å­—ï¼Œæ‰€æœ‰çš„æ•°å­—åªè¡¨ç¤ºé‡å¤çš„æ¬¡æ•° k ï¼Œä¾‹å¦‚ä¸ä¼šå‡ºçŽ°åƒ3aæˆ–2[4]çš„è¾“å…¥ã€‚ ç¤ºä¾‹ 123s = &quot;3[a]2[bc]&quot;, è¿”å›ž &quot;aaabcbc&quot;.s = &quot;3[a2[c]]&quot;, è¿”å›ž &quot;accaccacc&quot;.s = &quot;2[abc]3[cd]ef&quot;, è¿”å›ž &quot;abcabccdcdcdef&quot;. æ€è·¯1234567891011121314151617181920212223242526272829303132333435363738394041è¾“å…¥:'3[a2[c]]'åˆå§‹åŒ–æ ˆ: æ ˆnums å­˜è¦é‡å¤çš„æ¬¡æ•°k,æ ˆstr å­˜å­—ç¬¦ä¸²éåŽ†å­—ç¬¦ä¸²:æŒ‡é’ˆæŒ‡å‘å­—ç¬¦'3',ä¸ºæ•°å­—numæš‚å­˜æ•°å­—3ç»§ç»­éåŽ†,é‡åˆ°å­—ç¬¦'['å¾ªçŽ¯æ¬¡æ•°numå…¥æ ˆnumsï¼Œç©ºå­—ç¬¦ä¸²reså…¥æ ˆstrnums: 3 res: ''numç½®ä¸º0ï¼Œstrç½®ç©ºç»§ç»­éåŽ†,é‡åˆ°å­—ç¬¦'a',ä¸ºå­—æ¯ç©ºå­—ç¬¦ä¸²resæ‹¼æŽ¥å­—æ¯'a',res='a'ç»§ç»­éåŽ†,é‡åˆ°å­—ç¬¦'2',ä¸ºæ•°å­—numæš‚å­˜æ•°å­—2ç»§ç»­éåŽ†é‡åˆ°å­—ç¬¦'['numå…¥æ ˆnums,reså…¥æ ˆstrnums: 3 -&gt; 2 str: '' -&gt; 'a'numç½®ä¸º0ï¼Œstrç½®ç©ºç»§ç»­éåŽ†,é‡åˆ°å­—ç¬¦'c',ä¸ºå­—æ¯ç©ºå­—ç¬¦ä¸²resæ‹¼æŽ¥å­—æ¯'c',res='c'ç»§ç»­éåŽ†é‡åˆ°å­—ç¬¦']'numså¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼šå½“å‰å­—ç¬¦ä¸²é‡å¤æ¬¡æ•°2res = res*2 = 'cc'strå¼¹å‡ºæ ˆé¡¶å…ƒç´ 'a'ä¸Žresæ‹¼æŽ¥å¹¶å…¥æ ˆ:res = 'a'+'cc'='acc'str: '' -&gt; 'acc'ç»§ç»­éåŽ†é‡åˆ°å­—ç¬¦']'numså¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼šå½“å‰å­—ç¬¦ä¸²é‡å¤æ¬¡æ•°3res = res*3 = 'accaccacc'strå¼¹å‡ºæ ˆé¡¶å…ƒç´ ç©ºå­—ç¬¦ä¸²''ä¸Žresæ‹¼æŽ¥å¹¶å…¥æ ˆ:res=''+'accaccacc'='accaccacc'str: 'accaccacc'ç»“æŸè¿”å›žres æ³¨æ„ï¼š ç”±äºŽé‡å¤æ¬¡æ•°å¯èƒ½å¤§äºŽ10ï¼Œæ‰€ä»¥æš‚å­˜æ•°å­—æ—¶è¦é€‚å½“å¤„ç†ï¼Œå¦‚ num*10+å½“å‰æ•°å­— åœ¨c++é‡Œå¯ä»¥ç›´æŽ¥ä¿®æ”¹æ‹¼æŽ¥å­—ç¬¦ï¼Œä½†Javaä¸æ”¯æŒè¿ç®—ç¬¦é‡è½½ï¼Œå¯ä»¥å€ŸåŠ© StringBuilder æˆ– StringBuffer ç±»ã€‚ ç”¨æ ˆæš‚å­˜çš„é€»è¾‘ä¸Žé€’å½’åŸºæœ¬ä¸€è‡´ï¼Œå¯ä»¥ç†è§£ä¸ºç”¨é€’å½’å®žçŽ°æ ˆã€‚ pythonæ²¡æœ‰æ ˆè¿™ç§æ•°æ®ç»“æž„ï¼Œå¯ä»¥ç”¨ list() æ•°ç»„æˆ–åŒç«¯é˜Ÿåˆ— deque() pythonå¯ä»¥åªç”¨ä¸€ä¸ªæ ˆä»¥å…ƒç»„çš„å½¢å¼é‡å¤æ¬¡æ•°å’Œå­—ç¬¦ä¸²ï¼Œå¦‚(num,res) åˆ©ç”¨æ ˆJAVA1234567891011121314151617181920212223242526272829303132public class Solution &#123; public String decodeString(String s) &#123; Stack&lt;StringBuilder&gt; str = new Stack&lt;&gt;(); Stack&lt;Integer&gt; nums = new Stack&lt;&gt;(); StringBuilder res = new StringBuilder(); int num = 0; for (char c : s.toCharArray()) &#123; if (c == '[') &#123; str.push(res); nums.push(num); num = 0; res = new StringBuilder(); &#125; else if (c == ']') &#123; StringBuilder stringBuilder = new StringBuilder(); for (int i = nums.pop(); i &gt; 0; i--) &#123; stringBuilder.append(res); &#125; res = str.pop().append(stringBuilder); &#125; else if (c &gt;= '0' &amp;&amp; c &lt;= '9') &#123; num = num * 10 + (c - '0'); &#125; else &#123; res.append(c); &#125; &#125; return res.toString(); &#125; public static void main(String[] args) &#123; String s = "3[a]2[bc]"; System.out.println(new Solution().decodeString(s)); &#125;&#125; Python1234567891011121314151617181920class Solution: def decodeString(self, s: str) -&gt; str: stack, res, num = [], '', 0 for i in s: if i.isdigit(): num = num * 10 + int(i) elif i.isalpha(): res += i elif i == '[': stack.append((res, num)) res, num = '', 0 else: last_str, this_num = stack.pop() res = last_str + this_num * res return resc = Solution().decodeString('3[a2[c]]') # aaabcbcprint(c) Goå‘çŽ°ä¸€ç§è§£æ³•ï¼šå€’åºéåŽ†å­—ç¬¦ä¸²sï¼Œå¦‚æžœä¸æ˜¯[åˆ™ç›´æŽ¥å…¥æ ˆï¼›é‡åˆ°[æ—¶ï¼Œå…ˆæ‰¾å‡º[å‰è¾¹çš„æ•°å­—numsè¡¨ç¤ºä¸ºkï¼Œç„¶åŽæ‰¾å‡ºç¼–ç å­—ç¬¦ä¸²encodedStrï¼Œé‡å¤kæ¬¡å…¥æ ˆï¼Œè·³è¿‡æ•°å­—ç»§ç»­éåŽ† 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package mainimport ( "fmt" "strconv" "strings")func decodeString(s string) string &#123; stack := make([]string, 0) for i := len(s) - 1; i &gt;= 0; &#123; if s[i] == '[' &#123; nums := make([]string, 0) for j := i - 1; j &gt;= 0; j-- &#123; if s[j] &gt;= '0' &amp;&amp; s[j] &lt;= '9' &#123; nums = append(nums, string(s[j])) &#125; else &#123; break &#125; &#125; reverse(nums) k, _ := strconv.Atoi(strings.Join(nums, "")) encodedStr := make([]string, 0) for stack[len(stack)-1] != "]" &#123; encodedStr = append(encodedStr, stack[len(stack)-1]) stack = stack[:len(stack)-1] &#125; stack = stack[:len(stack)-1] reverse(encodedStr) for j := 0; j &lt; k; j++ &#123; stack = append(stack, encodedStr...) &#125; i -= len(nums) &#125; else &#123; stack = append(stack, string(s[i])) &#125; i -= 1 &#125; reverse(stack) return strings.Join(stack, "")&#125;func reverse(arr []string) &#123; length := len(arr) for i := 0; i &lt; length/2; i++ &#123; arr[i], arr[length-i-1] = arr[length-i-1], arr[i] &#125;&#125;func main() &#123; s := "3[a]2[bc]" r := decodeString(s) fmt.Println(r)&#125; æƒŠäº†æƒŠäº†ï¼Œè¿™ä¹ˆç‰›é€¼ åˆ©ç”¨é€’å½’JAVAå°† s.length() çš„å€¼ä»¥å‚æ•°ä¼ é€’ï¼Œå‡å°‘é‡å¤è°ƒç”¨ length() é€ æˆçš„æ—¶é—´æŸè€— 123456789101112131415161718192021222324252627282930313233public class Solution &#123; private int i = -1; public String decodeString(String s) &#123; return dfs(s.toCharArray(), s.length()).toString(); &#125; private StringBuilder dfs(char[] chars, int len) &#123; int num = 0; StringBuilder str = new StringBuilder(); while (++i &lt; len) &#123; if (chars[i] &gt;= '0' &amp;&amp; chars[i] &lt;= '9') &#123; num = num * 10 + (chars[i] - '0'); &#125; else if (chars[i] == '[') &#123; StringBuilder tmp = dfs(chars, len); while (--num &gt;= 0) &#123; str.append(tmp); &#125; num = 0; &#125; else if (chars[i] == ']') &#123; return str; &#125; else &#123; str.append(chars[i]); &#125; &#125; return str; &#125; public static void main(String[] args) &#123; String s = "3[a]2[bc]"; System.out.println(new Solution().decodeString(s)); &#125;&#125; Python1234567891011121314151617181920212223class Solution: i = -1 def decodeString(self, s: str) -&gt; str: res, num = '', 0 while self.i &lt; len(s) - 1: self.i += 1 if s[self.i].isdigit(): num = num * 10 + int(s[self.i]) elif s[self.i].isalpha(): res += s[self.i] elif s[self.i] == '[': res += self.decodeString(s) * num num = 0 else: return res return resif __name__ == '__main__': assert Solution().decodeString('3[a]2[bc]') == 'aaabcbc' assert Solution().decodeString('3[a2[c]]') == 'accaccacc' assert Solution().decodeString('2[abc]3[cd]ef') == 'abcabccdcdcdef']]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æŠ“åŒ…ï¼šæ·˜å®ã€æ”¯ä»˜å®]]></title>
      <url>%2F2019%2F11%2F27%2F%E6%8A%93%E5%8C%85%EF%BC%9A%E6%B7%98%E5%AE%9D%E3%80%81%E6%94%AF%E4%BB%98%E5%AE%9D%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶äº”ç¯‡åŽŸåˆ›æ–‡ç«  FridaæŠ“åŒ…æŠ€å·§ å¯¹äºŽæ·˜å®ã€æ”¯ä»˜å®ä¹‹ç±»çš„Appï¼Œæƒ³è¦ç›´æŽ¥æŠ“åŒ…æ˜¯ä¸å¯èƒ½çš„ï¼Œå¯ä»¥ä½¿ç”¨ frida å®žçŽ°æŠ“åŒ…ã€‚ Fridaä»‹ç»Fridaæ˜¯ä¸€æ¬¾åŸºäºŽpython + javascript çš„hookæ¡†æž¶ï¼Œé€šæ€android\ios\linux\win\osxç­‰å„å¹³å°ï¼Œç”±äºŽæ˜¯åŸºäºŽè„šæœ¬çš„äº¤äº’ï¼Œå› æ­¤ç›¸æ¯”xposedå’Œsubstrace cydiaæ›´åŠ ä¾¿æ·ã€‚Fridaçš„å®˜ç½‘ä¸ºï¼šhttp://www.frida.re/ é¦–å…ˆè¦ä¿è¯ä½ çš„androidæ‰‹æœºå·²ç»rootã€‚é€šè¿‡pipå®‰è£…frida: 1pip install frida adbè¿žæŽ¥æ‰‹æœºï¼Œåˆ° https://github.com/frida/frida/releases ä¸‹è½½frida-serverï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©android-arm ç‰ˆæœ¬ï¼Œå®‰å“æ‰‹æœºä¸€èˆ¬æ˜¯æ˜¯ä¸‹è½½android-armå’Œandroid-arm64è¿™ä¸¤ç§ã€‚ pushåˆ°androidæ‰‹æœºä¸Šå¹¶ä¸”è¿è¡Œï¼Œéœ€è¦å–å¾—æ‰‹æœºrootæƒé™ 123456adb push frida-server /data/local/tmp/adb shellsucd /data/local/tmp/chmod 777 frida-server./frida-server åˆ°æ­¤ä¸ºæ­¢çŽ¯å¢ƒå·²ç»æ­å»ºå®Œæ¯•ã€‚ ç¼–å†™æŠ“åŒ…è„šæœ¬12345678910111213141516171819202122232425262728293031323334import sysimport fridardev = frida.get_usb_device()# session = rdev.attach('com.taobao.etao')session = rdev.attach('com.taobao.taobao')# session = rdev.attach('com.tmall.wireless')scr = """Java.perform(function () &#123; var SwitchConfig = Java.use('mtopsdk.mtop.global.SwitchConfig'); SwitchConfig.isGlobalSpdySwitchOpen.overload().implementation = function()&#123; var ret = this.isGlobalSpdySwitchOpen.apply(this, arguments); console.log("isGlobalSpdySwitchOpenl "+ret) return false &#125; &#125;)"""script = session.create_script(scr)def on_message(message, data): if message['type'] == 'send': print("[*] &#123;0&#125;".format(message['payload'])) else: print(message)script.on("message", on_message)script.load()sys.stdin.read() è¿è¡Œè¯¥è„šæœ¬ï¼Œæ‰“å¼€æ·˜å®å°±å¯ä»¥æŠ“åŒ…äº†ã€‚è¦æ³¨å…¥çš„è¿›ç¨‹åå·²ç»å†™å¥½äº†ï¼š com.taobao.etao æ˜¯ä¸€æ·˜ com.taobao.taobaoæ˜¯æ·˜å® com.tmall.wireless æ˜¯å¤©çŒ« æƒ³è¦æŠ“æ·˜å®Appæ•°æ®è¿˜æœ‰å¾ˆå¤šæ­¥è¦èµ°ï¼Œè¿˜æœ‰x-signå’Œx-min-wuaç­‰ç€ä½ ã€‚(^o^)/~]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode-581-æœ€çŸ­æ— åºè¿žç»­å­æ•°ç»„]]></title>
      <url>%2F2019%2F11%2F26%2FLeetcode-581-%E6%9C%80%E7%9F%AD%E6%97%A0%E5%BA%8F%E8%BF%9E%E7%BB%AD%E5%AD%90%E6%95%B0%E7%BB%84%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶å››ç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— é¢˜ç›®è¯¦è¿°ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½ éœ€è¦å¯»æ‰¾ä¸€ä¸ªè¿žç»­çš„å­æ•°ç»„ï¼Œå¦‚æžœå¯¹è¿™ä¸ªå­æ•°ç»„è¿›è¡Œå‡åºæŽ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªæ•°ç»„éƒ½ä¼šå˜ä¸ºå‡åºæŽ’åºã€‚ ä½ æ‰¾åˆ°çš„å­æ•°ç»„åº”æ˜¯æœ€çŸ­çš„ï¼Œè¯·è¾“å‡ºå®ƒçš„é•¿åº¦ã€‚ ç¤ºä¾‹ 1: 123è¾“å…¥: [2, 6, 4, 8, 10, 9, 15]è¾“å‡º: 5è§£é‡Š: ä½ åªéœ€è¦å¯¹ [6, 4, 8, 10, 9] è¿›è¡Œå‡åºæŽ’åºï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨éƒ½ä¼šå˜ä¸ºå‡åºæŽ’åºã€‚ è¯´æ˜Ž : è¾“å…¥çš„æ•°ç»„é•¿åº¦èŒƒå›´åœ¨ [1, 10,000]ã€‚ è¾“å…¥çš„æ•°ç»„å¯èƒ½åŒ…å«é‡å¤å…ƒç´  ï¼Œæ‰€ä»¥å‡åºçš„æ„æ€æ˜¯&lt;=ã€‚ é¢˜ç›®è¯¦è§£æ–¹æ³•ä¸€ å°†åŽŸæ•°ç»„æ‹·è´ä¸€ä»½ï¼Œç„¶åŽå¯¹æ‹·è´åŽçš„æ•°ç»„è¿›è¡ŒæŽ’åºã€‚ å¯¹æ¯”åŽŸæ•°ç»„å’ŒæŽ’åºåŽçš„æ•°ç»„ï¼Œé™¤åŽ»å‰é¢ä¸€éƒ¨åˆ†å’ŒåŽé¢ä¸€éƒ¨åˆ†ç›¸åŒçš„å…ƒç´ ï¼Œå‰©ä½™åŒºé—´çš„é•¿åº¦å°±æ˜¯ç»“æžœã€‚ æ—¶é—´å¤æ‚åº¦ä¸º O(nlogn)ã€‚ JAVA123456789101112131415161718192021public class Solution &#123; public int findUnsortedSubarray(int[] nums) &#123; int[] sortedNums = Arrays.copyOf(nums, nums.length); Arrays.sort(sortedNums); int i = 0; int j = sortedNums.length - 1; while (i &lt;= j &amp;&amp; nums[i] == sortedNums[i]) &#123; ++i; &#125; while (i &lt;= j &amp;&amp; nums[j] == sortedNums[j]) &#123; --j; &#125; return j - i + 1; &#125; public static void main(String[] args) &#123; int[] nums = new int[]&#123;2, 6, 4, 8, 10, 9, 15&#125;; int i = new Solution().findUnsortedSubarray(nums); System.out.println(i); &#125;&#125; Go1234567891011121314151617181920212223242526272829package mainimport ( "fmt" "sort")func findUnsortedSubarray(nums []int) int &#123; sortedNum := make([]int, len(nums)) copy(sortedNum, nums) sort.Ints(sortedNum) i, j := 0, len(nums)-1 for i &lt;= j &amp;&amp; nums[i] == sortedNum[i] &#123; i++ &#125; for i &lt;= j &amp;&amp; nums[j] == sortedNum[j] &#123; j-- &#125; if i &gt;= j &#123; return 0 &#125; return j - i + 1&#125;func main() &#123; nums := []int&#123;2, 1&#125; n := findUnsortedSubarray(nums) fmt.Println(n)&#125; Python1234567891011121314class Solution: def findUnsortedSubarray(self, nums): sortedarray = sorted(nums) i, j = 0, len(nums) - 1 while i &lt;= j and nums[i] == sortedarray[i]: i += 1 while i &lt;= j and nums[j] == sortedarray[j]: j -= 1 return j - i + 1if __name__ == '__main__': s = Solution().findUnsortedSubarray([2, 1]) print(s) æ–¹æ³•äºŒ éåŽ†æ•°ç»„ï¼ŒåŒæ—¶è¿›è¡Œä»Žå¤´åˆ°å°¾ï¼Œä»Žå°¾åˆ°å¤´çš„éåŽ†ï¼Œåˆ†åˆ«æ‰¾å‡ºæ— åºè¿žç»­å­æ•°ç»„åŒºé—´çš„å³è¾¹å’Œå·¦è¾¹èŠ‚ç‚¹ï¼› å³è¾¹ç‚¹ï¼Œæ˜¯ä»Žå·¦åˆ°å³ä¸é€’å¢žçš„ç‚¹ï¼Œ å·¦è¾¹ç‚¹ï¼Œæ˜¯ä»Žå³åˆ°å·¦ä¸é€’å‡çš„ç‚¹ï¼Œ ä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»å°±æ˜¯æ‰€æ±‚å€¼ JAVA12345678910111213141516171819202122232425262728293031323334public class Solution &#123; public int findUnsortedSubarray(int[] nums) &#123; int n = nums.length; if (n == 0) &#123; return 0; &#125; int start = n - 1; int end = 0; int max = nums[0]; int min = nums[n - 1]; for (int i = 0; i &lt; n; i++) &#123; if (nums[i] &gt;= max) &#123; max = nums[i]; &#125; else &#123; end = i; &#125; if (nums[n - i - 1] &lt;= min) &#123; min = nums[n - i - 1]; &#125; else &#123; start = n - i - 1; &#125; &#125; if (start &gt;= end) &#123; return 0; &#125; return end - start + 1; &#125; public static void main(String[] args) &#123; int[] nums = new int[]&#123;2, 6, 4, 8, 10, 9, 15&#125;; int i = new Solution().findUnsortedSubarray(nums); System.out.println(i); &#125;&#125; Go12345678910111213141516171819202122232425262728293031323334package mainimport "fmt"func findUnsortedSubarray(nums []int) int &#123; n := len(nums) if n == 0 &#123; return 0 &#125; start, end := n-1, 0 max, min := nums[0], nums[n-1] for i := 0; i &lt; n; i++ &#123; if nums[i] &gt;= max &#123; max = nums[i] &#125; else &#123; end = i &#125; if nums[n-i-1] &lt;= min &#123; min = nums[n-i-1] &#125; else &#123; start = n - i - 1 &#125; &#125; if start &gt;= end &#123; return 0 &#125; return end - start + 1&#125;func main() &#123; nums := []int&#123;2, 1&#125; n := findUnsortedSubarray(nums) fmt.Println(n)&#125; Python12345678910111213141516171819202122class Solution: def findUnsortedSubarray(self, nums): n = len(nums) start, end = 0, n - 1 ma, mi = nums[start], nums[end] for i in range(n): if ma &lt;= nums[i]: ma = nums[i] else: start = i if mi &gt;= nums[n - i - 1]: mi = nums[n - i - 1] else: end = n - i - 1 if start &lt;= end: return 0 return start - end + 1if __name__ == '__main__': s = Solution().findUnsortedSubarray([2, 6, 4, 8, 10, 9, 15]) print(s) ç­‰æˆ‘æäº¤ä¹‹åŽï¼Œå‘çŽ°æŽ’åœ¨ç¬¬ä¸€çš„è§£æ³•æ¯”æˆ‘å¿«å¾ˆå¤šï¼Œæˆ‘å½“æ—¶å°±å‘µå‘µå‘¢ 123456789101112131415161718class Solution: def findUnsortedSubarray(self, nums): n = len(nums) max_num = nums[0] right = 0 for i in range(n): if nums[i] &gt;= max_num: max_num = nums[i] else: right = i left = n min_num = nums[-1] for i in range(n - 1, -1, -1): if nums[i] &lt;= min_num: min_num = nums[i] else: left = i return right - left + 1 if right - left &gt; 0 else 0]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Flinkä»‹ç»]]></title>
      <url>%2F2019%2F11%2F24%2FFlink%E4%BB%8B%E7%BB%8D%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶ä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  Flinkè¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰ æœ€è¿‘åœ¨çœ‹ä¸€æœ¬ä¹¦ï¼Œã€ŠFlinkåŽŸç†ã€å®žæˆ˜ä¸Žæ€§èƒ½ä¼˜åŒ–ã€‹ï¼Œè®°å½•ä¸‹é‡ç‚¹ã€‚ Flinkæ˜¯ä»€ä¹ˆApache Flink æ˜¯ä¸€ä¸ªæ¡†æž¶å’Œåˆ†å¸ƒå¼å¤„ç†å¼•æ“Žï¼Œç”¨äºŽåœ¨æ— è¾¹ç•Œå’Œæœ‰è¾¹ç•Œæ•°æ®æµä¸Šè¿›è¡Œæœ‰çŠ¶æ€çš„è®¡ç®—ã€‚Flink èƒ½åœ¨æ‰€æœ‰å¸¸è§é›†ç¾¤çŽ¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶èƒ½ä»¥å†…å­˜é€Ÿåº¦å’Œä»»æ„è§„æ¨¡è¿›è¡Œè®¡ç®—ã€‚ Flinkä¼˜åŠ¿ åŒæ—¶æ”¯æŒé«˜åžåã€ä½Žå»¶è¿Ÿã€é«˜æ€§èƒ½ã€‚Sparkæˆ–Stormä¸èƒ½åŒæ—¶æ”¯æŒè¿™ä¸‰ç§ã€‚ æ”¯æŒäº‹ä»¶äº‹ä»¶ï¼ˆEvent Timeï¼‰æ¦‚å¿µã€‚å¤§å¤šæ•°æ¡†æž¶ä»…æ”¯æŒç³»ç»Ÿæ—¶é—´ï¼ˆProcess Timeï¼‰ã€‚ æ”¯æŒæœ‰çŠ¶æ€çš„è®¡ç®—ã€‚åœ¨æµå¤±è®¡ç®—ä¸­ï¼Œå°†ç®—å­çš„ä¸­é—´è®¡ç®—ç»“æžœä¿å­˜åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­ã€‚ æ”¯æŒé«˜åº¦çµæ´»çš„çª—å£ï¼ˆWindowï¼‰æ“ä½œã€‚ åŸºäºŽè½»é‡åˆ†å¸ƒå¼å¿«ç…§ï¼ˆSnapShotï¼‰å®žçŽ°çš„å®¹é”™ã€‚ä»»åŠ¡å‡ºçŽ°ä»»åŠ¡é—®é¢˜éƒ½å¯ä»¥ä»ŽCheckPointsä¸­è‡ªåŠ¨æ¢å¤ã€‚ åŸºäºŽJVMå®žçŽ°ç‹¬ç«‹çš„å†…å­˜ç®¡ç†ã€‚Flinkå®žçŽ°è‡ªèº«å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œé€šè¿‡åºåˆ—åŒ–/ååºåˆ—åŒ–å°†æ‰€æœ‰æ•°æ®è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å‚¨å­˜åœ¨å†…å­˜ä¸­ã€‚ Save Pointsï¼ˆä¿å­˜ç‚¹ï¼‰ã€‚Flinkå°†ä»»åŠ¡æ‰§è¡Œçš„å¿«ç…§ä¿å­˜åœ¨å‚¨å­˜ä»‹è´¨ä¸Šã€‚ï¼ˆå’Œç¬¬5ç‚¹ç±»ä¼¼ï¼‰ã€‚ Flinkåº”ç”¨åœºæ™¯ å®žæ—¶æ™ºèƒ½æŽ¨è å¤æ‚äº‹ä»¶å¤„ç† å®žæ—¶æ¬ºè¯ˆæ£€æµ‹ å®žæ—¶æ•°ä»“ä¸ŽETL æµæ•°æ®å¤„ç† å®žæ—¶æŠ¥è¡¨åˆ†æž Flinkç»„ä»¶æ ˆFlinkä½œä¸ºä¸€ä¸ªè½¯ä»¶å †æ ˆï¼Œæ˜¯ä¸€ä¸ªåˆ†å±‚ç³»ç»Ÿã€‚å †æ ˆçš„ä¸åŒå±‚ç›¸äº’å åŠ ï¼Œå¹¶æé«˜å®ƒä»¬æŽ¥å—çš„ç¨‹åºè¡¨ç¤ºçš„æŠ½è±¡çº§åˆ«: è¿è¡Œæ—¶å±‚ä»¥JobGraphçš„å½¢å¼æŽ¥æ”¶ç¨‹åºã€‚JobGraphæ˜¯ä¸€ä¸ªé€šç”¨çš„å¹¶è¡Œæ•°æ®æµï¼Œå…¶ä¸­åŒ…å«ä½¿ç”¨å’Œç”Ÿæˆæ•°æ®æµçš„ä»»æ„ä»»åŠ¡ã€‚ DataStream APIå’ŒDataSet APIéƒ½é€šè¿‡å•ç‹¬çš„ç¼–è¯‘è¿‡ç¨‹ç”ŸæˆJobGraphsã€‚æ•°æ®é›†APIä½¿ç”¨ä¼˜åŒ–å™¨æ¥ç¡®å®šç¨‹åºçš„æœ€ä½³è®¡åˆ’ï¼Œè€ŒDataStream APIä½¿ç”¨æµæž„å»ºå™¨ã€‚ JobGraphæ˜¯æ ¹æ®Flinkä¸­å¯ç”¨çš„å„ç§éƒ¨ç½²é€‰é¡¹æ‰§è¡Œçš„(ä¾‹å¦‚ï¼Œæœ¬åœ°ã€è¿œç¨‹ã€Yarnç­‰) Connectorå±‚æ‰€èƒ½å¯¹æŽ¥çš„æŠ€æœ¯æ›´æ˜¯ä¸°å¯Œå¤šæ ·ï¼Œå°†ä¸åŒç±»åž‹ã€ä¸åŒæ¥æºçš„æ•°æ®ä»‹å…¥åˆ°Flinkç»„ä»¶æ ˆä¸­ã€‚ Flinkæž¶æž„å›¾å½“ Flink é›†ç¾¤å¯åŠ¨åŽï¼Œé¦–å…ˆä¼šå¯åŠ¨ä¸€ä¸ª JobManger å’Œä¸€ä¸ªæˆ–å¤šä¸ªçš„ TaskManagerã€‚ç”± Client æäº¤ä»»åŠ¡ç»™ JobManagerï¼ŒJobManager å†è°ƒåº¦ä»»åŠ¡åˆ°å„ä¸ª TaskManager åŽ»æ‰§è¡Œï¼Œç„¶åŽ TaskManager å°†å¿ƒè·³å’Œç»Ÿè®¡ä¿¡æ¯æ±‡æŠ¥ç»™ JobManagerã€‚TaskManager ä¹‹é—´ä»¥æµçš„å½¢å¼è¿›è¡Œæ•°æ®çš„ä¼ è¾“ã€‚ä¸Šè¿°ä¸‰è€…å‡ä¸ºç‹¬ç«‹çš„ JVM è¿›ç¨‹ã€‚ Client ä¸ºæäº¤ Job çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥æ˜¯è¿è¡Œåœ¨ä»»ä½•æœºå™¨ä¸Šï¼ˆä¸Ž JobManager çŽ¯å¢ƒè¿žé€šå³å¯ï¼‰ã€‚æäº¤ Job åŽï¼ŒClient å¯ä»¥ç»“æŸè¿›ç¨‹ï¼ˆStreamingçš„ä»»åŠ¡ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸ç»“æŸå¹¶ç­‰å¾…ç»“æžœè¿”å›žã€‚ JobManager ä¸»è¦è´Ÿè´£è°ƒåº¦ Job å¹¶åè°ƒ Task åš checkpointï¼ŒèŒè´£ä¸Šå¾ˆåƒ Storm çš„ Nimbusã€‚ä»Ž Client å¤„æŽ¥æ”¶åˆ° Job å’Œ JAR åŒ…ç­‰èµ„æºåŽï¼Œä¼šç”Ÿæˆä¼˜åŒ–åŽçš„æ‰§è¡Œè®¡åˆ’ï¼Œå¹¶ä»¥ Task çš„å•å…ƒè°ƒåº¦åˆ°å„ä¸ª TaskManager åŽ»æ‰§è¡Œã€‚ TaskManager åœ¨å¯åŠ¨çš„æ—¶å€™å°±è®¾ç½®å¥½äº†æ§½ä½æ•°ï¼ˆSlotï¼‰ï¼Œæ¯ä¸ª slot èƒ½å¯åŠ¨ä¸€ä¸ª Taskï¼ŒTask ä¸ºçº¿ç¨‹ã€‚ä»Ž JobManager å¤„æŽ¥æ”¶éœ€è¦éƒ¨ç½²çš„ Taskï¼Œéƒ¨ç½²å¯åŠ¨åŽï¼Œä¸Žè‡ªå·±çš„ä¸Šæ¸¸å»ºç«‹ Netty è¿žæŽ¥ï¼ŒæŽ¥æ”¶æ•°æ®å¹¶å¤„ç†ã€‚ å¯ä»¥çœ‹åˆ° Flink çš„ä»»åŠ¡è°ƒåº¦æ˜¯å¤šçº¿ç¨‹æ¨¡åž‹ï¼Œå¹¶ä¸”ä¸åŒJob/Taskæ··åˆåœ¨ä¸€ä¸ª TaskManager è¿›ç¨‹ä¸­ã€‚è™½ç„¶è¿™ç§æ–¹å¼å¯ä»¥æœ‰æ•ˆæé«˜ CPU åˆ©ç”¨çŽ‡ï¼Œä½†æ˜¯ä¸ªäººä¸å¤ªå–œæ¬¢è¿™ç§è®¾è®¡ï¼Œå› ä¸ºä¸ä»…ç¼ºä¹èµ„æºéš”ç¦»æœºåˆ¶ï¼ŒåŒæ—¶ä¹Ÿä¸æ–¹ä¾¿è°ƒè¯•ã€‚ç±»ä¼¼ Storm çš„è¿›ç¨‹æ¨¡åž‹ï¼Œä¸€ä¸ªJVM ä¸­åªè·‘è¯¥ Job çš„ Tasks å®žé™…åº”ç”¨ä¸­æ›´ä¸ºåˆç†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode 287. å¯»æ‰¾é‡å¤æ•°]]></title>
      <url>%2F2019%2F11%2F21%2FLeetcode-287-%E5%AF%BB%E6%89%BE%E9%87%8D%E5%A4%8D%E6%95%B0%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶äºŒç¯‡åŽŸåˆ›æ–‡ç«  åŠªåŠ›ã€å¥‹æ–— é¢˜ç›®æè¿°ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œå…¶æ•°å­—éƒ½åœ¨ 1 åˆ° n ä¹‹é—´ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚å‡è®¾åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•´æ•°ï¼Œæ‰¾å‡ºè¿™ä¸ªé‡å¤çš„æ•°ã€‚ ç¤ºä¾‹1ï¼š 12è¾“å…¥: [1,3,4,2,2]è¾“å‡º: 2 ç¤ºä¾‹2ï¼š 12è¾“å…¥: [3,1,3,4,2]è¾“å‡º: 3 è¯´æ˜Žï¼š 1234ä¸èƒ½æ›´æ”¹åŽŸæ•°ç»„ï¼ˆå‡è®¾æ•°ç»„æ˜¯åªè¯»çš„ï¼‰ã€‚åªèƒ½ä½¿ç”¨é¢å¤–çš„ O(1) çš„ç©ºé—´ã€‚æ—¶é—´å¤æ‚åº¦å°äºŽ O(n2) ã€‚æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œä½†å®ƒå¯èƒ½ä¸æ­¢é‡å¤å‡ºçŽ°ä¸€æ¬¡ã€‚ è§£é¢˜æ€è·¯äºŒåˆ†æ³•æ€è·¯æ˜¯é‡‡ç”¨äº†äºŒåˆ†æ³•+æŠ½å±‰åŽŸç†ã€‚é¦–å…ˆè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆç”¨äºŒåˆ†æ³•ï¼Œå› ä¸ºO(n2)æ—¶é—´å¤æ‚åº¦ä¸èƒ½Aï¼Œæ‰€ä»¥å¾€ä¸‹åº”è¯¥æ˜¯n*lognï¼Œå¾ˆå®¹æ˜“è”æƒ³åˆ°äºŒåˆ†æ³•ï¼Œå› ä¸ºå…¶å¤æ‚åº¦ä¸ºlognã€‚ æŠ½å±‰åŽŸç†æ˜¯è¯´å‡è®¾ä½ æœ‰11ä¸ªè‹¹æžœï¼Œè¦æ”¾è¿›10ä¸ªæŠ½å±‰ï¼Œé‚£ä¹ˆè‡³å°‘æœ‰ä¸€ä¸ªæŠ½å±‰é‡Œæ˜¯æœ‰ä¸¤ä¸ªè‹¹æžœçš„ã€‚ å¯¹åº”åˆ°è¿™é¢˜ï¼Œ1~nçš„n+1ä¸ªæ•°å­—ï¼Œæœ‰1ä¸ªæ•°å­—ä¼šè‡³å°‘é‡å¤ä¸¤æ¬¡ã€‚ æ¯”å¦‚å–æ•°ç»„ä¸ºï½›1ï¼Œ2ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï½ï¼Œä¸€å…±6ä¸ªæ•°ï¼ŒèŒƒå›´æ˜¯1~5ï¼Œå…¶ä¸­ä½æ•°åº”è¯¥æ˜¯ï¼ˆ5+1ï¼‰/2 = 3ï¼Œé‚£ä¹ˆï¼Œå¦‚æžœå°äºŽç­‰äºŽ3çš„æ•°çš„ä¸ªæ•°å¦‚æžœè¶…è¿‡äº†3ï¼Œé‚£ä¹ˆé‡å¤çš„æ•°å­—ä¸€å®šå‡ºçŽ°åœ¨[1ï¼Œ3]ä¹‹é—´ï¼Œå¦åˆ™å‡ºçŽ°åœ¨[4ï¼Œ5]ä¹‹é—´ã€‚ä»¥è¯¥æ•°ç»„ä¸ºä¾‹ï¼Œä¸­ä½æ•°ä¸º3ï¼Œå°äºŽç­‰äºŽ3çš„æ•°ä¸€å…±æœ‰4ä¸ªï¼Œå¤§äºŽ3çš„æ•°æœ‰ä¸¤ä¸ªï¼Œæ‰€ä»¥é‡å¤çš„æ•°å­—åœ¨[1,3]ä¹‹é—´ã€‚ JAVA123456789101112131415161718192021public class Solution &#123; public int findDuplicate(int[] nums) &#123; int start = 1; int end = nums.length - 1; while (start &lt; end) &#123; int mid = (end + start) / 2; int count = 0; for (int i : nums) &#123; if (i &lt;= mid) &#123; count++; &#125; &#125; if (count &gt; mid) &#123; end = mid; &#125; else &#123; start = mid + 1; &#125; &#125; return end; &#125;&#125; Python1234567891011class Solution: def findDuplicate(self, nums: List[int]) -&gt; int: left, right = 1, len(nums) - 1 while left &lt; right: mid = (left + right) // 2 count = sum(i &lt;= mid for i in nums) if count &gt; mid: right = mid else: left = mid + 1 return right Go123456789101112131415161718func findDuplicate(nums []int) int &#123; start, end := 1, len(nums)-1 for start &lt; end &#123; mid := (start + end) / 2 count := 0 for _, v := range nums &#123; if v &lt;= mid &#123; count++ &#125; &#125; if count &gt; mid &#123; end = mid &#125; else &#123; start = mid + 1 &#125; &#125; return start&#125; å¿«æ…¢æŒ‡é’ˆæ•°ç»„çš„ç´¢å¼•ä¸Žå­˜å‚¨çš„æ•°å€¼ä¹‹é—´å½¢æˆäº†ç‰¹æ®Šé“¾è¡¨ã€‚ å¦‚æžœå­˜åœ¨é‡å¤çš„æ•°ï¼Œå› ä¸ºæ•°ç»„å¤§å°æ˜¯ n+1ï¼Œæ•°å­—èŒƒå›´æ˜¯1~nï¼Œæ‰€ä»¥è¯¥é“¾è¡¨å­˜åœ¨çŽ¯ã€‚ çŽ¯çš„å…¥å£å³ä¸ºç»“æžœã€‚ 123456789101112131415161718class Solution &#123; public int findDuplicate(int[] nums) &#123; // å¿«æ…¢æŒ‡é’ˆ int fast = nums[0]; int low = nums[0]; do&#123; low = nums[low]; fast = nums[nums[fast]]; &#125;while(fast != low); int step = nums[0]; // å¯»æ‰¾çŽ¯é“¾è¡¨çš„å…¥å£ï¼Œå³ä¸ºç»“æžœ while(step != low)&#123; step = nums[step]; low = nums[low]; &#125; return low; &#125;&#125; çŽ°åœ¨è¿˜æ²¡çœ‹æ‡‚è¿™ç§æ–¹æ³•]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç®—æ³•]]></title>
      <url>%2F2019%2F11%2F12%2F%E7%AE%97%E6%B3%95%2F</url>
      <content type="text"><![CDATA[javaåŸºç¡€ (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶ä¸€ç¯‡åŽŸåˆ›æ–‡ç«  ç®—æ³• - Algorithms æŽ’åºç®—æ³•ï¼šå¿«é€ŸæŽ’åºã€å½’å¹¶æŽ’åºã€è®¡æ•°æŽ’åº æœç´¢ç®—æ³•ï¼šå›žæº¯ã€é€’å½’ã€å‰ªæžæŠ€å·§ å›¾è®ºï¼šæœ€çŸ­è·¯ã€æœ€å°ç”Ÿæˆæ ‘ã€ç½‘ç»œæµå»ºæ¨¡ åŠ¨æ€è§„åˆ’ï¼šèƒŒåŒ…é—®é¢˜ã€æœ€é•¿å­åºåˆ—ã€è®¡æ•°é—®é¢˜ åŸºç¡€æŠ€å·§ï¼šåˆ†æ²»ã€å€å¢žã€äºŒåˆ†ã€è´ªå¿ƒ æ•°æ®ç»“æž„ - Data Structures æ•°ç»„ä¸Žé“¾è¡¨ï¼šå• / åŒå‘é“¾è¡¨ã€è·³èˆžé“¾ æ ˆä¸Žé˜Ÿåˆ— æ ‘ä¸Žå›¾ï¼šæœ€è¿‘å…¬å…±ç¥–å…ˆã€å¹¶æŸ¥é›† å“ˆå¸Œè¡¨ å †ï¼šå¤§ / å°æ ¹å †ã€å¯å¹¶å † å­—ç¬¦ä¸²ï¼šå­—å…¸æ ‘ã€åŽç¼€æ ‘]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javaé›†åˆæ¡†æž¶å¸¸è§é¢è¯•é¢˜]]></title>
      <url>%2F2019%2F11%2F11%2FJava%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
      <content type="text"><![CDATA[javaåŸºç¡€çŸ¥è¯† (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾é›¶ä¸€ç¯‡åŽŸåˆ›æ–‡ç«  è¯´è¯´List,Set,Mapä¸‰è€…çš„åŒºåˆ« List(å¯¹ä»˜é¡ºåºçš„å¥½å¸®æ‰‹)ï¼š ListæŽ¥å£å­˜å‚¨ä¸€ç»„ä¸å”¯ä¸€ï¼ˆå¯ä»¥æœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼‰ï¼Œæœ‰åºçš„å¯¹è±¡ Set(æ³¨é‡ç‹¬ä¸€æ— äºŒçš„æ€§è´¨): ä¸å…è®¸é‡å¤çš„é›†åˆã€‚ä¸ä¼šæœ‰å¤šä¸ªå…ƒç´ å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚ Map(ç”¨Keyæ¥æœç´¢çš„ä¸“å®¶): ä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨ã€‚Mapä¼šç»´æŠ¤ä¸ŽKeyæœ‰å…³è”çš„å€¼ã€‚ä¸¤ä¸ªKeyå¯ä»¥å¼•ç”¨ç›¸åŒçš„å¯¹è±¡ï¼Œä½†Keyä¸èƒ½é‡å¤ï¼Œå…¸åž‹çš„Keyæ˜¯Stringç±»åž‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ã€‚ Arraylist ä¸Ž LinkedList åŒºåˆ« 1. æ˜¯å¦ä¿è¯çº¿ç¨‹å®‰å…¨ï¼š ArrayList å’Œ LinkedList éƒ½æ˜¯ä¸åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ï¼› 2. åº•å±‚æ•°æ®ç»“æž„ï¼š Arraylist åº•å±‚ä½¿ç”¨çš„æ˜¯ Object æ•°ç»„ï¼›LinkedList åº•å±‚ä½¿ç”¨çš„æ˜¯ åŒå‘é“¾è¡¨ æ•°æ®ç»“æž„ï¼ˆJDK1.6ä¹‹å‰ä¸ºå¾ªçŽ¯é“¾è¡¨ï¼ŒJDK1.7å–æ¶ˆäº†å¾ªçŽ¯ã€‚æ³¨æ„åŒå‘é“¾è¡¨å’ŒåŒå‘å¾ªçŽ¯é“¾è¡¨çš„åŒºåˆ«ï¼Œä¸‹é¢æœ‰ä»‹ç»åˆ°ï¼ï¼‰ 3. æ’å…¥å’Œåˆ é™¤æ˜¯å¦å—å…ƒç´ ä½ç½®çš„å½±å“ï¼š â‘  ArrayList é‡‡ç”¨æ•°ç»„å­˜å‚¨ï¼Œæ‰€ä»¥æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦å—å…ƒç´ ä½ç½®çš„å½±å“ã€‚ æ¯”å¦‚ï¼šæ‰§è¡Œadd(E e)æ–¹æ³•çš„æ—¶å€™ï¼Œ ArrayList ä¼šé»˜è®¤åœ¨å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ï¼Œè¿™ç§æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯O(1)ã€‚ä½†æ˜¯å¦‚æžœè¦åœ¨æŒ‡å®šä½ç½® i æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„è¯ï¼ˆadd(int index, E element)ï¼‰æ—¶é—´å¤æ‚åº¦å°±ä¸º O(n-i)ã€‚å› ä¸ºåœ¨è¿›è¡Œä¸Šè¿°æ“ä½œçš„æ—¶å€™é›†åˆä¸­ç¬¬ i å’Œç¬¬ i ä¸ªå…ƒç´ ä¹‹åŽçš„(n-i)ä¸ªå…ƒç´ éƒ½è¦æ‰§è¡Œå‘åŽä½/å‘å‰ç§»ä¸€ä½çš„æ“ä½œã€‚ â‘¡ LinkedList é‡‡ç”¨é“¾è¡¨å­˜å‚¨ï¼Œæ‰€ä»¥å¯¹äºŽadd(E e)æ–¹æ³•çš„æ’å…¥ï¼Œåˆ é™¤å…ƒç´ æ—¶é—´å¤æ‚åº¦ä¸å—å…ƒç´ ä½ç½®çš„å½±å“ï¼Œè¿‘ä¼¼ Oï¼ˆ1ï¼‰ï¼Œå¦‚æžœæ˜¯è¦åœ¨æŒ‡å®šä½ç½®iæ’å…¥å’Œåˆ é™¤å…ƒç´ çš„è¯ï¼ˆ(add(int index, E element)ï¼‰ æ—¶é—´å¤æ‚åº¦åº”ä¸ºo(n))å› ä¸ºéœ€è¦æ–°åˆ›ç«‹ä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œå¤åˆ¶å‰i-1ä¸ªå…ƒç´ å¹¶åœ¨ç¬¬iä½åŠ å…¥æ–°çš„å…ƒç´ ï¼Œæœ€åŽé™„ä¸Šn-iä¸ªå…ƒç´ ã€‚ 4. æ˜¯å¦æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼š LinkedList ä¸æ”¯æŒé«˜æ•ˆçš„éšæœºå…ƒç´ è®¿é—®ï¼Œè€Œ ArrayList æ”¯æŒã€‚å¿«é€Ÿéšæœºè®¿é—®å°±æ˜¯é€šè¿‡å…ƒç´ çš„åºå·å¿«é€ŸèŽ·å–å…ƒç´ å¯¹è±¡(å¯¹åº”äºŽget(int index)æ–¹æ³•)ã€‚ 5. å†…å­˜ç©ºé—´å ç”¨ï¼š ArrayListçš„ç©ºé—´æµªè´¹ä¸»è¦ä½“çŽ°åœ¨åœ¨liståˆ—è¡¨çš„ç»“å°¾ä¼šé¢„ç•™ä¸€å®šçš„å®¹é‡ç©ºé—´ï¼Œè€ŒLinkedListçš„ç©ºé—´èŠ±è´¹åˆ™ä½“çŽ°åœ¨å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½éœ€è¦æ¶ˆè€—æ¯”ArrayListæ›´å¤šçš„ç©ºé—´ï¼ˆå› ä¸ºè¦å­˜æ”¾ç›´æŽ¥åŽç»§å’Œç›´æŽ¥å‰é©±ä»¥åŠæ•°æ®ï¼‰ã€‚ è¡¥å……å†…å®¹:RandomAccessæŽ¥å£12public interface RandomAccess &#123;&#125; æŸ¥çœ‹æºç æˆ‘ä»¬å‘çŽ°å®žé™…ä¸Š RandomAccess æŽ¥å£ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰å®šä¹‰ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘çœ‹æ¥ RandomAccess æŽ¥å£ä¸è¿‡æ˜¯ä¸€ä¸ªæ ‡è¯†ç½¢äº†ã€‚æ ‡è¯†ä»€ä¹ˆï¼Ÿ æ ‡è¯†å®žçŽ°è¿™ä¸ªæŽ¥å£çš„ç±»å…·æœ‰éšæœºè®¿é—®åŠŸèƒ½ã€‚ åœ¨ binarySearchï¼ˆï¼‰æ–¹æ³•ä¸­ï¼Œå®ƒè¦åˆ¤æ–­ä¼ å…¥çš„list æ˜¯å¦ RamdomAccess çš„å®žä¾‹ï¼Œå¦‚æžœæ˜¯ï¼Œè°ƒç”¨indexedBinarySearchï¼ˆï¼‰æ–¹æ³•ï¼Œå¦‚æžœä¸æ˜¯ï¼Œé‚£ä¹ˆè°ƒç”¨iteratorBinarySearchï¼ˆï¼‰æ–¹æ³• 1234567public static &lt;T&gt;int binarySearch(List&lt;? extends Comparable&lt;? super T&gt;&gt; list, T key) &#123; if (list instanceof RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD) return Collections.indexedBinarySearch(list, key); else return Collections.iteratorBinarySearch(list, key);&#125; ArrayList å®žçŽ°äº† RandomAccess æŽ¥å£ï¼Œ è€Œ LinkedList æ²¡æœ‰å®žçŽ°ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘è§‰å¾—è¿˜æ˜¯å’Œåº•å±‚æ•°æ®ç»“æž„æœ‰å…³ï¼ArrayList åº•å±‚æ˜¯æ•°ç»„ï¼Œè€Œ LinkedList åº•å±‚æ˜¯é“¾è¡¨ã€‚æ•°ç»„å¤©ç„¶æ”¯æŒéšæœºè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆ1ï¼‰ï¼Œæ‰€ä»¥ç§°ä¸ºå¿«é€Ÿéšæœºè®¿é—®ã€‚é“¾è¡¨éœ€è¦éåŽ†åˆ°ç‰¹å®šä½ç½®æ‰èƒ½è®¿é—®ç‰¹å®šä½ç½®çš„å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º Oï¼ˆnï¼‰ï¼Œæ‰€ä»¥ä¸æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚ï¼ŒArrayList å®žçŽ°äº† RandomAccess æŽ¥å£ï¼Œå°±è¡¨æ˜Žäº†ä»–å…·æœ‰å¿«é€Ÿéšæœºè®¿é—®åŠŸèƒ½ã€‚ RandomAccess æŽ¥å£åªæ˜¯æ ‡è¯†ï¼Œå¹¶ä¸æ˜¯è¯´ ArrayList å®žçŽ° RandomAccess æŽ¥å£æ‰å…·æœ‰å¿«é€Ÿéšæœºè®¿é—®åŠŸèƒ½çš„ï¼ ä¸‹é¢å†æ€»ç»“ä¸€ä¸‹ list çš„éåŽ†æ–¹å¼é€‰æ‹©ï¼š å®žçŽ°äº† RandomAccess æŽ¥å£çš„listï¼Œä¼˜å…ˆé€‰æ‹©æ™®é€š for å¾ªçŽ¯ ï¼Œå…¶æ¬¡ foreach, æœªå®žçŽ° RandomAccessæŽ¥å£çš„listï¼Œä¼˜å…ˆé€‰æ‹©iteratoréåŽ†ï¼ˆforeachéåŽ†åº•å±‚ä¹Ÿæ˜¯é€šè¿‡iteratorå®žçŽ°çš„,ï¼‰ï¼Œå¤§sizeçš„æ•°æ®ï¼Œåƒä¸‡ä¸è¦ä½¿ç”¨æ™®é€šforå¾ªçŽ¯ åŒå‘é“¾è¡¨å’ŒåŒå‘å¾ªçŽ¯é“¾è¡¨åŒå‘é“¾è¡¨ï¼š åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªprevæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªnextæŒ‡å‘åŽä¸€ä¸ªèŠ‚ç‚¹ã€‚ åŒå‘å¾ªçŽ¯é“¾è¡¨ï¼š æœ€åŽä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡å‘headï¼Œè€Œ head çš„prevæŒ‡å‘æœ€åŽä¸€ä¸ªèŠ‚ç‚¹ï¼Œæž„æˆä¸€ä¸ªçŽ¯ã€‚ ArrayList ä¸Ž Vector åŒºåˆ«Vectorç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ã€‚å¯ä»¥ç”±ä¸¤ä¸ªçº¿ç¨‹å®‰å…¨åœ°è®¿é—®ä¸€ä¸ªVectorå¯¹è±¡ã€ä½†æ˜¯ä¸€ä¸ªçº¿ç¨‹è®¿é—®Vectorçš„è¯ä»£ç è¦åœ¨åŒæ­¥æ“ä½œä¸Šè€—è´¹å¤§é‡çš„æ—¶é—´ã€‚ Arraylistä¸æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥åœ¨ä¸éœ€è¦ä¿è¯çº¿ç¨‹å®‰å…¨æ—¶å»ºè®®ä½¿ç”¨Arraylistã€‚ ArrayList çš„æ‰©å®¹æœºåˆ¶è¯¦è§ç¬”ä¸»çš„è¿™ç¯‡æ–‡ç« :é€šè¿‡æºç ä¸€æ­¥ä¸€æ­¥åˆ†æžArrayList æ‰©å®¹æœºåˆ¶ #HashMap å’Œ Hashtable çš„åŒºåˆ« çº¿ç¨‹æ˜¯å¦å®‰å…¨ï¼š HashMap æ˜¯éžçº¿ç¨‹å®‰å…¨çš„ï¼ŒHashTable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›HashTable å†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡synchronized ä¿®é¥°ã€‚ï¼ˆå¦‚æžœä½ è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„è¯å°±ä½¿ç”¨ ConcurrentHashMap å§ï¼ï¼‰ï¼› æ•ˆçŽ‡ï¼š å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼ŒHashMap è¦æ¯” HashTable æ•ˆçŽ‡é«˜ä¸€ç‚¹ã€‚å¦å¤–ï¼ŒHashTable åŸºæœ¬è¢«æ·˜æ±°ï¼Œä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒï¼› å¯¹Null key å’ŒNull valueçš„æ”¯æŒï¼š HashMap ä¸­ï¼Œnull å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º nullã€‚ã€‚ä½†æ˜¯åœ¨ HashTable ä¸­ put è¿›çš„é”®å€¼åªè¦æœ‰ä¸€ä¸ª nullï¼Œç›´æŽ¥æŠ›å‡º NullPointerExceptionã€‚ åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒ ï¼š â‘ åˆ›å»ºæ—¶å¦‚æžœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼ŒHashtable é»˜è®¤çš„åˆå§‹å¤§å°ä¸º11ï¼Œä¹‹åŽæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŽŸæ¥çš„2n+1ã€‚HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º16ã€‚ä¹‹åŽæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŽŸæ¥çš„2å€ã€‚â‘¡åˆ›å»ºæ—¶å¦‚æžœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ Hashtable ä¼šç›´æŽ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ HashMap ä¼šå°†å…¶æ‰©å……ä¸º2çš„å¹‚æ¬¡æ–¹å¤§å°ï¼ˆHashMap ä¸­çš„tableSizeFor()æ–¹æ³•ä¿è¯ï¼Œä¸‹é¢ç»™å‡ºäº†æºä»£ç ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°,åŽé¢ä¼šä»‹ç»åˆ°ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚ åº•å±‚æ•°æ®ç»“æž„ï¼š JDK1.8 ä»¥åŽçš„ HashMap åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºŽé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚Hashtable æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚ HashMap ä¸­å¸¦æœ‰åˆå§‹å®¹é‡çš„æž„é€ å‡½æ•°ï¼š 123456789101112131415public HashMap(int initialCapacity, float loadFactor) &#123; if (initialCapacity &lt; 0) throw new IllegalArgumentException("Illegal initial capacity: " + initialCapacity); if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException("Illegal load factor: " + loadFactor); this.loadFactor = loadFactor; this.threshold = tableSizeFor(initialCapacity);&#125; public HashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR);&#125; ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¿è¯äº† HashMap æ€»æ˜¯ä½¿ç”¨2çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ã€‚ 123456789101112/** * Returns a power of two size for the given target capacity. */static final int tableSizeFor(int cap) &#123; int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;&#125; HashMap å’Œ HashSetåŒºåˆ«å¦‚æžœä½ çœ‹è¿‡ HashSet æºç çš„è¯å°±åº”è¯¥çŸ¥é“ï¼šHashSet åº•å±‚å°±æ˜¯åŸºäºŽ HashMap å®žçŽ°çš„ã€‚ï¼ˆHashSet çš„æºç éžå¸¸éžå¸¸å°‘ï¼Œå› ä¸ºé™¤äº† clone()ã€writeObject()ã€readObject()æ˜¯ HashSet è‡ªå·±ä¸å¾—ä¸å®žçŽ°ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯ç›´æŽ¥è°ƒç”¨ HashMap ä¸­çš„æ–¹æ³•ã€‚ HashMap HashSet å®žçŽ°äº†MapæŽ¥å£ å®žçŽ°SetæŽ¥å£ å­˜å‚¨é”®å€¼å¯¹ ä»…å­˜å‚¨å¯¹è±¡ è°ƒç”¨ putï¼ˆï¼‰å‘mapä¸­æ·»åŠ å…ƒç´  è°ƒç”¨ addï¼ˆï¼‰æ–¹æ³•å‘Setä¸­æ·»åŠ å…ƒç´  HashMapä½¿ç”¨é”®ï¼ˆKeyï¼‰è®¡ç®—Hashcode HashSetä½¿ç”¨æˆå‘˜å¯¹è±¡æ¥è®¡ç®—hashcodeå€¼ï¼Œå¯¹äºŽä¸¤ä¸ªå¯¹è±¡æ¥è¯´hashcodeå¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥equals()æ–¹æ³•ç”¨æ¥åˆ¤æ–­å¯¹è±¡çš„ç›¸ç­‰æ€§ï¼Œ HashSetå¦‚ä½•æ£€æŸ¥é‡å¤å½“ä½ æŠŠå¯¹è±¡åŠ å…¥HashSetæ—¶ï¼ŒHashSetä¼šå…ˆè®¡ç®—å¯¹è±¡çš„hashcodeå€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸Žå…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„hashcodeå€¼ä½œæ¯”è¾ƒï¼Œå¦‚æžœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºçŽ°ã€‚ä½†æ˜¯å¦‚æžœå‘çŽ°æœ‰ç›¸åŒhashcodeå€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨equalsï¼ˆï¼‰æ–¹æ³•æ¥æ£€æŸ¥hashcodeç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æžœä¸¤è€…ç›¸åŒï¼ŒHashSetå°±ä¸ä¼šè®©åŠ å…¥æ“ä½œæˆåŠŸã€‚ï¼ˆæ‘˜è‡ªæˆ‘çš„Javaå¯è’™ä¹¦ã€ŠHead fist javaã€‹ç¬¬äºŒç‰ˆï¼‰ hashCodeï¼ˆï¼‰ä¸Žequalsï¼ˆï¼‰çš„ç›¸å…³è§„å®šï¼š å¦‚æžœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„ ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªequalsæ–¹æ³•è¿”å›žtrue ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ ç»¼ä¸Šï¼Œequalsæ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™hashCodeæ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›– hashCode()çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æžœæ²¡æœ‰é‡å†™hashCode()ï¼Œåˆ™è¯¥classçš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ã€‚ ==ä¸Žequalsçš„åŒºåˆ« ==æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®žä¾‹æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ equalsæ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®žä¾‹æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´çš„å€¼æ˜¯ä¸æ˜¯ç›¸åŒ ==æ˜¯æŒ‡å¯¹å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒ equals()æ˜¯å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒ ==æŒ‡å¼•ç”¨æ˜¯å¦ç›¸åŒ equals()æŒ‡çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ HashMapçš„åº•å±‚å®žçŽ°JDK1.8ä¹‹å‰JDK1.8 ä¹‹å‰ HashMap åº•å±‚æ˜¯ æ•°ç»„å’Œé“¾è¡¨ ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ä¹Ÿå°±æ˜¯ é“¾è¡¨æ•£åˆ—ã€‚HashMap é€šè¿‡ key çš„ hashCode ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†è¿‡åŽå¾—åˆ° hash å€¼ï¼Œç„¶åŽé€šè¿‡ (n - 1) &amp; hash åˆ¤æ–­å½“å‰å…ƒç´ å­˜æ”¾çš„ä½ç½®ï¼ˆè¿™é‡Œçš„ n æŒ‡çš„æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ï¼Œå¦‚æžœå½“å‰ä½ç½®å­˜åœ¨å…ƒç´ çš„è¯ï¼Œå°±åˆ¤æ–­è¯¥å…ƒç´ ä¸Žè¦å­˜å…¥çš„å…ƒç´ çš„ hash å€¼ä»¥åŠ key æ˜¯å¦ç›¸åŒï¼Œå¦‚æžœç›¸åŒçš„è¯ï¼Œç›´æŽ¥è¦†ç›–ï¼Œä¸ç›¸åŒå°±é€šè¿‡æ‹‰é“¾æ³•è§£å†³å†²çªã€‚ æ‰€è°“æ‰°åŠ¨å‡½æ•°æŒ‡çš„å°±æ˜¯ HashMap çš„ hash æ–¹æ³•ã€‚ä½¿ç”¨ hash æ–¹æ³•ä¹Ÿå°±æ˜¯æ‰°åŠ¨å‡½æ•°æ˜¯ä¸ºäº†é˜²æ­¢ä¸€äº›å®žçŽ°æ¯”è¾ƒå·®çš„ hashCode() æ–¹æ³• æ¢å¥è¯è¯´ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ä¹‹åŽå¯ä»¥å‡å°‘ç¢°æ’žã€‚ JDK 1.8 HashMap çš„ hash æ–¹æ³•æºç : JDK 1.8 çš„ hashæ–¹æ³• ç›¸æ¯”äºŽ JDK 1.7 hash æ–¹æ³•æ›´åŠ ç®€åŒ–ï¼Œä½†æ˜¯åŽŸç†ä¸å˜ã€‚ 1234567 static final int hash(Object key) &#123; int h; // key.hashCode()ï¼šè¿”å›žæ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode // ^ ï¼šæŒ‰ä½å¼‚æˆ– // &gt;&gt;&gt;:æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½ return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);&#125; å¯¹æ¯”ä¸€ä¸‹ JDK1.7çš„ HashMap çš„ hash æ–¹æ³•æºç . 12345678static int hash(int h) &#123; // This function ensures that hashCodes that differ only by // constant multiples at each bit position have a bounded // number of collisions (approximately 8 at default load factor). h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12); return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);&#125; ç›¸æ¯”äºŽ JDK1.8 çš„ hash æ–¹æ³• ï¼ŒJDK 1.7 çš„ hash æ–¹æ³•çš„æ€§èƒ½ä¼šç¨å·®ä¸€ç‚¹ç‚¹ï¼Œå› ä¸ºæ¯•ç«Ÿæ‰°åŠ¨äº† 4 æ¬¡ã€‚ æ‰€è°“ â€œæ‹‰é“¾æ³•â€ å°±æ˜¯ï¼šå°†é“¾è¡¨å’Œæ•°ç»„ç›¸ç»“åˆã€‚ä¹Ÿå°±æ˜¯è¯´åˆ›å»ºä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸€æ ¼å°±æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚è‹¥é‡åˆ°å“ˆå¸Œå†²çªï¼Œåˆ™å°†å†²çªçš„å€¼åŠ åˆ°é“¾è¡¨ä¸­å³å¯ã€‚ JDK1.8ä¹‹åŽç›¸æ¯”äºŽä¹‹å‰çš„ç‰ˆæœ¬ï¼Œ JDK1.8ä¹‹åŽåœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºŽé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚ TreeMapã€TreeSetä»¥åŠJDK1.8ä¹‹åŽçš„HashMapåº•å±‚éƒ½ç”¨åˆ°äº†çº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼Œå› ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘åœ¨æŸäº›æƒ…å†µä¸‹ä¼šé€€åŒ–æˆä¸€ä¸ªçº¿æ€§ç»“æž„ã€‚ æŽ¨èé˜…è¯»ï¼š ã€ŠJava 8ç³»åˆ—ä¹‹é‡æ–°è®¤è¯†HashMapã€‹ ï¼šhttps://zhuanlan.zhihu.com/p/21673805 HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ä¸ºäº†èƒ½è®© HashMap å­˜å–é«˜æ•ˆï¼Œå°½é‡è¾ƒå°‘ç¢°æ’žï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ã€‚æˆ‘ä»¬ä¸Šé¢ä¹Ÿè®²åˆ°äº†è¿‡äº†ï¼ŒHash å€¼çš„èŒƒå›´å€¼-2147483648åˆ°2147483647ï¼Œå‰åŽåŠ èµ·æ¥å¤§æ¦‚40äº¿çš„æ˜ å°„ç©ºé—´ï¼Œåªè¦å“ˆå¸Œå‡½æ•°æ˜ å°„å¾—æ¯”è¾ƒå‡åŒ€æ¾æ•£ï¼Œä¸€èˆ¬åº”ç”¨æ˜¯å¾ˆéš¾å‡ºçŽ°ç¢°æ’žçš„ã€‚ä½†é—®é¢˜æ˜¯ä¸€ä¸ª40äº¿é•¿åº¦çš„æ•°ç»„ï¼Œå†…å­˜æ˜¯æ”¾ä¸ä¸‹çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ•£åˆ—å€¼æ˜¯ä¸èƒ½ç›´æŽ¥æ‹¿æ¥ç”¨çš„ã€‚ç”¨ä¹‹å‰è¿˜è¦å…ˆåšå¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½ç”¨æ¥è¦å­˜æ”¾çš„ä½ç½®ä¹Ÿå°±æ˜¯å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ã€‚è¿™ä¸ªæ•°ç»„ä¸‹æ ‡çš„è®¡ç®—æ–¹æ³•æ˜¯â€œ (n - 1) &amp; hashâ€ã€‚ï¼ˆnä»£è¡¨æ•°ç»„é•¿åº¦ï¼‰ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚ è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿ æˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡ç”¨%å–ä½™çš„æ“ä½œæ¥å®žçŽ°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼šâ€œå–ä½™(%)æ“ä½œä¸­å¦‚æžœé™¤æ•°æ˜¯2çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºŽä¸Žå…¶é™¤æ•°å‡ä¸€çš„ä¸Ž(&amp;)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ hash%length==hash&amp;(length-1)çš„å‰ææ˜¯ length æ˜¯2çš„ n æ¬¡æ–¹ï¼›ï¼‰ã€‚â€ å¹¶ä¸” é‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &amp;ï¼Œç›¸å¯¹äºŽ%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆçŽ‡ï¼Œè¿™å°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ã€‚ HashMap å¤šçº¿ç¨‹æ“ä½œå¯¼è‡´æ­»å¾ªçŽ¯é—®é¢˜ä¸»è¦åŽŸå› åœ¨äºŽ å¹¶å‘ä¸‹çš„Rehash ä¼šé€ æˆå…ƒç´ ä¹‹é—´ä¼šå½¢æˆä¸€ä¸ªå¾ªçŽ¯é“¾è¡¨ã€‚ä¸è¿‡ï¼Œjdk 1.8 åŽè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å»ºè®®åœ¨å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ HashMap,å› ä¸ºå¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ HashMap è¿˜æ˜¯ä¼šå­˜åœ¨å…¶ä»–é—®é¢˜æ¯”å¦‚æ•°æ®ä¸¢å¤±ã€‚å¹¶å‘çŽ¯å¢ƒä¸‹æŽ¨èä½¿ç”¨ ConcurrentHashMap ã€‚ è¯¦æƒ…è¯·æŸ¥çœ‹ï¼šhttps://coolshell.cn/articles/9606.html]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javaç–‘éš¾ç‚¹]]></title>
      <url>%2F2019%2F11%2F11%2FJava%E7%96%91%E9%9A%BE%E7%82%B9%2F</url>
      <content type="text"><![CDATA[javaåŸºç¡€çŸ¥è¯† (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç™¾ç¯‡åŽŸåˆ›æ–‡ç«  æ­£ç¡®ä½¿ç”¨ equals æ–¹æ³•Objectçš„equalsæ–¹æ³•å®¹æ˜“æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œåº”ä½¿ç”¨å¸¸é‡æˆ–ç¡®å®šæœ‰å€¼çš„å¯¹è±¡æ¥è°ƒç”¨ equalsã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1234567// ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºnullçš„å¼•ç”¨ç±»åž‹å˜é‡æ¥è°ƒç”¨éžé™æ€æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸String str = null;if (str.equals("SnailClimb")) &#123; ...&#125; else &#123; ..&#125; è¿è¡Œä¸Šé¢çš„ç¨‹åºä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬æŠŠç¬¬äºŒè¡Œçš„æ¡ä»¶åˆ¤æ–­è¯­å¥æ”¹ä¸ºä¸‹é¢è¿™æ ·çš„è¯ï¼Œå°±ä¸ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œelse è¯­å¥å—å¾—åˆ°æ‰§è¡Œã€‚ï¼š 1"SnailClimb".equals(str); // false ä¸è¿‡æ›´æŽ¨èä½¿ç”¨ java.util.Objects#equals(JDK7 å¼•å…¥çš„å·¥å…·ç±»)ã€‚ 1Objects.equals(null,"SnailClimb");// false æˆ‘ä»¬çœ‹ä¸€ä¸‹java.util.Objects#equalsçš„æºç å°±çŸ¥é“åŽŸå› äº†ã€‚ 1234public static boolean equals(Object a, Object b) &#123; // å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å¦‚æžœa==nullçš„è¯æ­¤æ—¶a.equals(b)å°±ä¸ä¼šå¾—åˆ°æ‰§è¡Œï¼Œé¿å…å‡ºçŽ°ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ return (a == b) || (a != null &amp;&amp; a.equals(b)); &#125; æ³¨æ„ï¼š Reference:Javaä¸­equalsæ–¹æ³•é€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸çš„åŽŸå› åŠè§£å†³æ–¹æ¡ˆ æ¯ç§åŽŸå§‹ç±»åž‹éƒ½æœ‰é»˜è®¤å€¼ä¸€æ ·ï¼Œå¦‚inté»˜è®¤å€¼ä¸º 0ï¼Œboolean çš„é»˜è®¤å€¼ä¸º falseï¼Œnull æ˜¯ä»»ä½•å¼•ç”¨ç±»åž‹çš„é»˜è®¤å€¼ï¼Œä¸ä¸¥æ ¼çš„è¯´æ˜¯æ‰€æœ‰ Object ç±»åž‹çš„é»˜è®¤å€¼ã€‚ å¯ä»¥ä½¿ç”¨ == æˆ–è€… != æ“ä½œæ¥æ¯”è¾ƒnullå€¼ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨å…¶ä»–ç®—æ³•æˆ–è€…é€»è¾‘æ“ä½œã€‚åœ¨Javaä¸­null == nullå°†è¿”å›žtrueã€‚ ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºnullçš„å¼•ç”¨ç±»åž‹å˜é‡æ¥è°ƒç”¨éžé™æ€æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ æ•´åž‹åŒ…è£…ç±»å€¼çš„æ¯”è¾ƒæ‰€æœ‰æ•´åž‹åŒ…è£…ç±»å¯¹è±¡å€¼çš„æ¯”è¾ƒå¿…é¡»ä½¿ç”¨equalsæ–¹æ³•ã€‚ å…ˆçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š 1234567Integer x = 3;Integer y = 3;System.out.println(x == y);// trueInteger a = new Integer(3);Integer b = new Integer(3);System.out.println(a == b);//falseSystem.out.println(a.equals(b));//true å½“ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ–¹å¼åˆ›å»ºä¸€ä¸ªIntegerå¯¹è±¡æ—¶ï¼Œå½“æ•°å€¼åœ¨-128 ~127æ—¶ï¼Œä¼šå°†åˆ›å»ºçš„ Integer å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œå½“ä¸‹æ¬¡å†å‡ºçŽ°è¯¥æ•°å€¼æ—¶ï¼Œç›´æŽ¥ä»Žç¼“å­˜ä¸­å–å‡ºå¯¹åº”çš„Integerå¯¹è±¡ã€‚æ‰€ä»¥ä¸Šè¿°ä»£ç ä¸­ï¼Œxå’Œyå¼•ç”¨çš„æ˜¯ç›¸åŒçš„Integerå¯¹è±¡ã€‚ BigDecimal çš„ç”¨å¤„ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ä¸­æåˆ°ï¼šæµ®ç‚¹æ•°ä¹‹é—´çš„ç­‰å€¼åˆ¤æ–­ï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹ä¸èƒ½ç”¨==æ¥æ¯”è¾ƒï¼ŒåŒ…è£…æ•°æ®ç±»åž‹ä¸èƒ½ç”¨ equals æ¥åˆ¤æ–­ã€‚ å…·ä½“åŽŸç†å’Œæµ®ç‚¹æ•°çš„ç¼–ç æ–¹å¼æœ‰å…³ï¼Œè¿™é‡Œå°±ä¸å¤šæäº†ï¼Œæˆ‘ä»¬ä¸‹é¢ç›´æŽ¥ä¸Šå®žä¾‹ï¼š 12345float a = 1.0f - 0.9f;float b = 0.9f - 0.8f;System.out.println(a);// 0.100000024System.out.println(b);// 0.099999964System.out.println(a == b);// false å…·æœ‰åŸºæœ¬æ•°å­¦çŸ¥è¯†çš„æˆ‘ä»¬å¾ˆæ¸…æ¥šçš„çŸ¥é“è¾“å‡ºå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æžœï¼ˆç²¾åº¦ä¸¢å¤±ï¼‰ï¼Œæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸€ç§å¾ˆå¸¸ç”¨çš„æ–¹æ³•æ˜¯ï¼šä½¿ç”¨ä½¿ç”¨ BigDecimal æ¥å®šä¹‰æµ®ç‚¹æ•°çš„å€¼ï¼Œå†è¿›è¡Œæµ®ç‚¹æ•°çš„è¿ç®—æ“ä½œã€‚ 123456BigDecimal a = new BigDecimal("1.0");BigDecimal b = new BigDecimal("0.9");BigDecimal c = new BigDecimal("0.8");BigDecimal x = a.subtract(b);// 0.1BigDecimal y = b.subtract(c);// 0.1System.out.println(x.equals(y));// true BigDecimal çš„å¤§å°æ¯”è¾ƒa.compareTo(b) : è¿”å›ž -1 è¡¨ç¤ºå°äºŽï¼Œ0 è¡¨ç¤º ç­‰äºŽï¼Œ 1è¡¨ç¤º å¤§äºŽã€‚ 123BigDecimal a = new BigDecimal("1.0");BigDecimal b = new BigDecimal("0.9");System.out.println(a.compareTo(b));// 1 BigDecimal ä¿ç•™å‡ ä½å°æ•°é€šè¿‡ setScaleæ–¹æ³•è®¾ç½®ä¿ç•™å‡ ä½å°æ•°ä»¥åŠä¿ç•™è§„åˆ™ã€‚ä¿ç•™è§„åˆ™æœ‰æŒºå¤šç§ï¼Œä¸éœ€è¦è®°ï¼ŒIDEAä¼šæç¤ºã€‚ 123BigDecimal m = new BigDecimal("1.255433");BigDecimal n = m.setScale(3,BigDecimal.ROUND_HALF_DOWN);System.out.println(n);// 1.255 BigDecimal çš„ä½¿ç”¨æ³¨æ„äº‹é¡¹æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ä½¿ç”¨BigDecimalæ—¶ï¼Œä¸ºäº†é˜²æ­¢ç²¾åº¦ä¸¢å¤±ï¼ŒæŽ¨èä½¿ç”¨å®ƒçš„ BigDecimal(String) æž„é€ æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹å¯¹è¿™éƒ¨åˆ†å†…å®¹ä¹Ÿæœ‰æåˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ€»ç»“BigDecimal ä¸»è¦ç”¨æ¥æ“ä½œï¼ˆå¤§ï¼‰æµ®ç‚¹æ•°ï¼ŒBigInteger ä¸»è¦ç”¨æ¥æ“ä½œå¤§æ•´æ•°ï¼ˆè¶…è¿‡ long ç±»åž‹ï¼‰ã€‚ BigDecimal çš„å®žçŽ°åˆ©ç”¨åˆ°äº† BigInteger, æ‰€ä¸åŒçš„æ˜¯ BigDecimal åŠ å…¥äº†å°æ•°ä½çš„æ¦‚å¿µ åŸºæœ¬æ•°æ®ç±»åž‹ä¸ŽåŒ…è£…æ•°æ®ç±»åž‹çš„ä½¿ç”¨æ ‡å‡†Reference:ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹ ã€å¼ºåˆ¶ã€‘æ‰€æœ‰çš„ POJO ç±»å±žæ€§å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»åž‹ã€‚ ã€å¼ºåˆ¶ã€‘RPC æ–¹æ³•çš„è¿”å›žå€¼å’Œå‚æ•°å¿…é¡»ä½¿ç”¨åŒ…è£…æ•°æ®ç±»åž‹ã€‚ ã€æŽ¨èã€‘æ‰€æœ‰çš„å±€éƒ¨å˜é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»åž‹ã€‚ æ¯”å¦‚æˆ‘ä»¬å¦‚æžœè‡ªå®šä¹‰äº†ä¸€ä¸ªStudentç±»,å…¶ä¸­æœ‰ä¸€ä¸ªå±žæ€§æ˜¯æˆç»©score,å¦‚æžœç”¨Integerè€Œä¸ç”¨intå®šä¹‰,ä¸€æ¬¡è€ƒè¯•,å­¦ç”Ÿå¯èƒ½æ²¡è€ƒ,å€¼æ˜¯null,ä¹Ÿå¯èƒ½è€ƒäº†,ä½†è€ƒäº†0åˆ†,å€¼æ˜¯0,è¿™ä¸¤ä¸ªè¡¨è¾¾çš„çŠ¶æ€æ˜Žæ˜¾ä¸ä¸€æ ·. è¯´æ˜Ž :POJO ç±»å±žæ€§æ²¡æœ‰åˆå€¼æ˜¯æé†’ä½¿ç”¨è€…åœ¨éœ€è¦ä½¿ç”¨æ—¶ï¼Œå¿…é¡»è‡ªå·±æ˜¾å¼åœ°è¿›è¡Œèµ‹å€¼ï¼Œä»»ä½• NPE é—®é¢˜ï¼Œæˆ–è€…å…¥åº“æ£€æŸ¥ï¼Œéƒ½ç”±ä½¿ç”¨è€…æ¥ä¿è¯ã€‚ æ­£ä¾‹ : æ•°æ®åº“çš„æŸ¥è¯¢ç»“æžœå¯èƒ½æ˜¯ nullï¼Œå› ä¸ºè‡ªåŠ¨æ‹†ç®±ï¼Œç”¨åŸºæœ¬æ•°æ®ç±»åž‹æŽ¥æ”¶æœ‰ NPE é£Žé™©ã€‚ åä¾‹ : æ¯”å¦‚æ˜¾ç¤ºæˆäº¤æ€»é¢æ¶¨è·Œæƒ…å†µï¼Œå³æ­£è´Ÿ x%ï¼Œx ä¸ºåŸºæœ¬æ•°æ®ç±»åž‹ï¼Œè°ƒç”¨çš„ RPC æœåŠ¡ï¼Œè°ƒç”¨ä¸æˆåŠŸæ—¶ï¼Œè¿”å›žçš„æ˜¯é»˜è®¤å€¼ï¼Œé¡µé¢æ˜¾ç¤ºä¸º 0%ï¼Œè¿™æ˜¯ä¸åˆç†çš„ï¼Œåº”è¯¥æ˜¾ç¤ºæˆä¸­åˆ’çº¿ã€‚æ‰€ä»¥åŒ…è£…æ•°æ®ç±»åž‹çš„ null å€¼ï¼Œèƒ½å¤Ÿè¡¨ç¤ºé¢å¤–çš„ä¿¡æ¯ï¼Œå¦‚:è¿œç¨‹è°ƒç”¨å¤±è´¥ï¼Œå¼‚å¸¸é€€å‡ºã€‚ Arrays.asList()ä½¿ç”¨æŒ‡å—æœ€è¿‘ä½¿ç”¨Arrays.asList()é‡åˆ°äº†ä¸€äº›å‘ï¼Œç„¶åŽåœ¨ç½‘ä¸Šçœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼šJava Array to List Examples æ„Ÿè§‰æŒºä¸é”™çš„ï¼Œä½†æ˜¯è¿˜ä¸æ˜¯ç‰¹åˆ«å…¨é¢ã€‚æ‰€ä»¥ï¼Œè‡ªå·±å¯¹äºŽè¿™å—å°çŸ¥è¯†ç‚¹è¿›è¡Œäº†ç®€å•çš„æ€»ç»“ã€‚ ç®€ä»‹Arrays.asList()åœ¨å¹³æ—¶å¼€å‘ä¸­è¿˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒå°†ä¸€ä¸ªæ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªListé›†åˆã€‚ 1234String[] myArray = &#123; "Apple", "Banana", "Orange" &#125;ï¼› List&lt;String&gt; myList = Arrays.asList(myArray);//ä¸Šé¢ä¸¤ä¸ªè¯­å¥ç­‰ä»·äºŽä¸‹é¢ä¸€æ¡è¯­å¥List&lt;String&gt; myList = Arrays.asList("Apple","Banana", "Orange"); JDK æºç å¯¹äºŽè¿™ä¸ªæ–¹æ³•çš„è¯´æ˜Žï¼š 123456/** *è¿”å›žç”±æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚æ­¤æ–¹æ³•ä½œä¸ºåŸºäºŽæ•°ç»„å’ŒåŸºäºŽé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ï¼Œä¸Ž Collection.toArray()ç»“åˆä½¿ç”¨ã€‚è¿”å›žçš„Listæ˜¯å¯åºåˆ—åŒ–å¹¶å®žçŽ°RandomAccessæŽ¥å£ã€‚ */ public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123; return new ArrayList&lt;&gt;(a);&#125; é˜¿é‡Œå·´å·´Java å¼€å‘æ‰‹å†Œã€‹å¯¹å…¶çš„æè¿°Arrays.asList()å°†æ•°ç»„è½¬æ¢ä¸ºé›†åˆåŽ,åº•å±‚å…¶å®žè¿˜æ˜¯æ•°ç»„ï¼Œã€Šé˜¿é‡Œå·´å·´Java å¼€å‘æ‰‹å†Œã€‹å¯¹äºŽè¿™ä¸ªæ–¹æ³•æœ‰å¦‚ä¸‹æè¿°ï¼š ä½¿ç”¨æ—¶çš„æ³¨æ„äº‹é¡¹æ€»ç»“ä¼ é€’çš„æ•°ç»„å¿…é¡»æ˜¯å¯¹è±¡æ•°ç»„ï¼Œè€Œä¸æ˜¯åŸºæœ¬ç±»åž‹ã€‚ Arrays.asList()æ˜¯æ³›åž‹æ–¹æ³•ï¼Œä¼ å…¥çš„å¯¹è±¡å¿…é¡»æ˜¯å¯¹è±¡æ•°ç»„ã€‚ 1234567int[] myArray = &#123; 1, 2, 3 &#125;;List myList = Arrays.asList(myArray);System.out.println(myList.size());//1System.out.println(myList.get(0));//æ•°ç»„åœ°å€å€¼System.out.println(myList.get(1));//æŠ¥é”™ï¼šArrayIndexOutOfBoundsExceptionint [] array=(int[]) myList.get(0);System.out.println(array[0]);//1 å½“ä¼ å…¥ä¸€ä¸ªåŽŸç”Ÿæ•°æ®ç±»åž‹æ•°ç»„æ—¶ï¼ŒArrays.asList() çš„çœŸæ­£å¾—åˆ°çš„å‚æ•°å°±ä¸æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œè€Œæ˜¯æ•°ç»„å¯¹è±¡æœ¬èº«ï¼æ­¤æ—¶List çš„å”¯ä¸€å…ƒç´ å°±æ˜¯è¿™ä¸ªæ•°ç»„ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸Šé¢çš„ä»£ç ã€‚ æˆ‘ä»¬ä½¿ç”¨åŒ…è£…ç±»åž‹æ•°ç»„å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 1Integer[] myArray = &#123; 1, 2, 3 &#125;; ä½¿ç”¨é›†åˆçš„ä¿®æ”¹æ–¹æ³•:add()ã€remove()ã€clear()ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ 1234List myList = Arrays.asList(1, 2, 3);myList.add(4);//è¿è¡Œæ—¶æŠ¥é”™ï¼šUnsupportedOperationExceptionmyList.remove(1);//è¿è¡Œæ—¶æŠ¥é”™ï¼šUnsupportedOperationExceptionmyList.clear();//è¿è¡Œæ—¶æŠ¥é”™ï¼šUnsupportedOperationException Arrays.asList() æ–¹æ³•è¿”å›žçš„å¹¶ä¸æ˜¯ java.util.ArrayList ï¼Œè€Œæ˜¯ java.util.Arrays çš„ä¸€ä¸ªå†…éƒ¨ç±»,è¿™ä¸ªå†…éƒ¨ç±»å¹¶æ²¡æœ‰å®žçŽ°é›†åˆçš„ä¿®æ”¹æ–¹æ³•æˆ–è€…è¯´å¹¶æ²¡æœ‰é‡å†™è¿™äº›æ–¹æ³•ã€‚ 12List myList = Arrays.asList(1, 2, 3);System.out.println(myList.getClass());//class java.util.Arrays$ArrayList ä¸‹å›¾æ˜¯java.util.Arrays$ArrayListçš„ç®€æ˜“æºç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»é‡å†™çš„æ–¹æ³•æœ‰å“ªäº›ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess, java.io.Serializable &#123; ... @Override public E get(int index) &#123; ... &#125; @Override public E set(int index, E element) &#123; ... &#125; @Override public int indexOf(Object o) &#123; ... &#125; @Override public boolean contains(Object o) &#123; ... &#125; @Override public void forEach(Consumer&lt;? super E&gt; action) &#123; ... &#125; @Override public void replaceAll(UnaryOperator&lt;E&gt; operator) &#123; ... &#125; @Override public void sort(Comparator&lt;? super E&gt; c) &#123; ... &#125; &#125; æˆ‘ä»¬å†çœ‹ä¸€ä¸‹java.util.AbstractListçš„remove()æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ˜Žç™½ä¸ºå•¥ä¼šæŠ›å‡ºUnsupportedOperationExceptionã€‚ 123public E remove(int index) &#123; throw new UnsupportedOperationException();&#125; å¦‚ä½•æ­£ç¡®çš„å°†æ•°ç»„è½¬æ¢ä¸ºArrayListstackoverflowï¼šhttps://dwz.cn/vcBkTiTW 1. è‡ªå·±åŠ¨æ‰‹å®žçŽ°ï¼ˆæ•™è‚²ç›®çš„ï¼‰ 1234567891011//JDK1.5+static &lt;T&gt; List&lt;T&gt; arrayToList(final T[] array) &#123; final List&lt;T&gt; l = new ArrayList&lt;T&gt;(array.length); for (final T s : array) &#123; l.add(s); &#125; return (l);&#125;Integer [] myArray = &#123; 1, 2, 3 &#125;;System.out.println(arrayToList(myArray).getClass());//class java.util.ArrayList 2. æœ€ç®€ä¾¿çš„æ–¹æ³•(æŽ¨è) 1List list = new ArrayList&lt;&gt;(Arrays.asList("a", "b", "c")) 3. ä½¿ç”¨ Java8 çš„Stream(æŽ¨è) 12345Integer [] myArray = &#123; 1, 2, 3 &#125;;List myList = Arrays.stream(myArray).collect(Collectors.toList());//åŸºæœ¬ç±»åž‹ä¹Ÿå¯ä»¥å®žçŽ°è½¬æ¢ï¼ˆä¾èµ–boxedçš„è£…ç®±æ“ä½œï¼‰int [] myArray2 = &#123; 1, 2, 3 &#125;;List myList = Arrays.stream(myArray2).boxed().collect(Collectors.toList()); 4. ä½¿ç”¨ Guava(æŽ¨è) å¯¹äºŽä¸å¯å˜é›†åˆï¼Œä½ å¯ä»¥ä½¿ç”¨ImmutableListç±»åŠå…¶of()ä¸ŽcopyOf()å·¥åŽ‚æ–¹æ³•ï¼šï¼ˆå‚æ•°ä¸èƒ½ä¸ºç©ºï¼‰ 12List&lt;String&gt; il = ImmutableList.of("string", "elements"); // from varargsList&lt;String&gt; il = ImmutableList.copyOf(aStringArray); // from array å¯¹äºŽå¯å˜é›†åˆï¼Œä½ å¯ä»¥ä½¿ç”¨Listsç±»åŠå…¶newArrayList()å·¥åŽ‚æ–¹æ³•ï¼š 123List&lt;String&gt; l1 = Lists.newArrayList(anotherListOrCollection); // from collectionList&lt;String&gt; l2 = Lists.newArrayList(aStringArray); // from arrayList&lt;String&gt; l3 = Lists.newArrayList("or", "string", "elements"); // from varargs 5. ä½¿ç”¨ Apache Commons Collections 12List&lt;String&gt; list = new ArrayList&lt;String&gt;();CollectionUtils.addAll(list, str); Collection.toArray()æ–¹æ³•ä½¿ç”¨çš„å‘&amp;å¦‚ä½•åè½¬æ•°ç»„è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªæ³›åž‹æ–¹æ³•ï¼š&lt;T&gt; T[] toArray(T[] a); å¦‚æžœtoArrayæ–¹æ³•ä¸­æ²¡æœ‰ä¼ é€’ä»»ä½•å‚æ•°çš„è¯è¿”å›žçš„æ˜¯Objectç±»åž‹æ•°ç»„ã€‚ 123456String[] s = new String[]&#123; "dog", "lazy", "a", "over", "jumps", "fox", "brown", "quick", "A"&#125;;List&lt;String&gt; list = Arrays.asList(s);Collections.reverse(list);s=list.toArray(new String[0]);//æ²¡æœ‰æŒ‡å®šç±»åž‹çš„è¯ä¼šæŠ¥é”™ ç”±äºŽJVMä¼˜åŒ–ï¼Œnew String[0]ä½œä¸ºCollection.toArray()æ–¹æ³•çš„å‚æ•°çŽ°åœ¨ä½¿ç”¨æ›´å¥½ï¼Œnew String[0]å°±æ˜¯èµ·ä¸€ä¸ªæ¨¡æ¿çš„ä½œç”¨ï¼ŒæŒ‡å®šäº†è¿”å›žæ•°ç»„çš„ç±»åž‹ï¼Œ0æ˜¯ä¸ºäº†èŠ‚çœç©ºé—´ï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸ºäº†è¯´æ˜Žè¿”å›žçš„ç±»åž‹ã€‚è¯¦è§ï¼šhttps://shipilev.net/blog/2016/arrays-wisdom-ancients/ ä¸è¦åœ¨ foreach å¾ªçŽ¯é‡Œè¿›è¡Œå…ƒç´ çš„ remove/add æ“ä½œå¦‚æžœè¦è¿›è¡Œremoveæ“ä½œï¼Œå¯ä»¥è°ƒç”¨è¿­ä»£å™¨çš„ removeæ–¹æ³•è€Œä¸æ˜¯é›†åˆç±»çš„ remove æ–¹æ³•ã€‚å› ä¸ºå¦‚æžœåˆ—è¡¨åœ¨ä»»ä½•æ—¶é—´ä»Žç»“æž„ä¸Šä¿®æ”¹åˆ›å»ºè¿­ä»£å™¨ä¹‹åŽï¼Œä»¥ä»»ä½•æ–¹å¼é™¤éžé€šè¿‡è¿­ä»£å™¨è‡ªèº«remove/addæ–¹æ³•ï¼Œè¿­ä»£å™¨éƒ½å°†æŠ›å‡ºä¸€ä¸ªConcurrentModificationException,è¿™å°±æ˜¯å•çº¿ç¨‹çŠ¶æ€ä¸‹äº§ç”Ÿçš„ fail-fast æœºåˆ¶ã€‚ fail-fast æœºåˆ¶ ï¼šå¤šä¸ªçº¿ç¨‹å¯¹ fail-fast é›†åˆè¿›è¡Œä¿®æ”¹çš„æ—¶ï¼Œå¯èƒ½ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œå•çº¿ç¨‹ä¸‹ä¹Ÿä¼šå‡ºçŽ°è¿™ç§æƒ…å†µï¼Œä¸Šé¢å·²ç»æåˆ°è¿‡ã€‚ java.utilåŒ…ä¸‹é¢çš„æ‰€æœ‰çš„é›†åˆç±»éƒ½æ˜¯fail-fastçš„ï¼Œè€Œjava.util.concurrentåŒ…ä¸‹é¢çš„æ‰€æœ‰çš„ç±»éƒ½æ˜¯fail-safeçš„ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[JavaåŸºç¡€çŸ¥è¯†]]></title>
      <url>%2F2019%2F11%2F04%2FJava%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%2F</url>
      <content type="text"><![CDATA[javaåŸºç¡€çŸ¥è¯† (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åä¹ç¯‡åŽŸåˆ›æ–‡ç«  é¢å‘å¯¹è±¡(oop)ä¸Žé¢å‘è¿‡ç¨‹(opp)çš„åŒºåˆ« é¢å‘è¿‡ç¨‹ ï¼šé¢å‘è¿‡ç¨‹æ€§èƒ½æ¯”é¢å‘å¯¹è±¡é«˜ã€‚ å› ä¸ºç±»è°ƒç”¨æ—¶éœ€è¦å®žä¾‹åŒ–ï¼Œå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ¯”è¾ƒæ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥å½“æ€§èƒ½æ˜¯æœ€é‡è¦çš„è€ƒé‡å› ç´ çš„æ—¶å€™ï¼Œæ¯”å¦‚å•ç‰‡æœºã€åµŒå…¥å¼å¼€å‘ã€Linux/Unixç­‰ä¸€èˆ¬é‡‡ç”¨é¢å‘è¿‡ç¨‹å¼€å‘ã€‚ä½†æ˜¯ï¼Œé¢å‘è¿‡ç¨‹æ²¡æœ‰é¢å‘å¯¹è±¡æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚ é¢å‘å¯¹è±¡ ï¼šé¢å‘å¯¹è±¡æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚ å› ä¸ºé¢å‘å¯¹è±¡æœ‰å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ€§çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å¯ä»¥è®¾è®¡å‡ºä½Žè€¦åˆçš„ç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ã€æ›´åŠ æ˜“äºŽç»´æŠ¤ã€‚ä½†æ˜¯ï¼Œé¢å‘å¯¹è±¡æ€§èƒ½æ¯”é¢å‘è¿‡ç¨‹ä½Žã€‚ Pythonä¹Ÿæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ Java è¯­è¨€æœ‰å“ªäº›ç‰¹ç‚¹ ç®€å•æ˜“å­¦ï¼› é¢å‘å¯¹è±¡ï¼ˆå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼‰ï¼› å¹³å°æ— å…³æ€§ï¼ˆ Java è™šæ‹Ÿæœºå®žçŽ°å¹³å°æ— å…³æ€§ï¼‰ï¼› å¯é æ€§ï¼› å®‰å…¨æ€§ï¼› æ”¯æŒå¤šçº¿ç¨‹ï¼ˆ C++ è¯­è¨€æ²¡æœ‰å†…ç½®çš„å¤šçº¿ç¨‹æœºåˆ¶ï¼Œå› æ­¤å¿…é¡»è°ƒç”¨æ“ä½œç³»ç»Ÿçš„å¤šçº¿ç¨‹åŠŸèƒ½æ¥è¿›è¡Œå¤šçº¿ç¨‹ç¨‹åºè®¾è®¡ï¼Œè€Œ Java è¯­è¨€å´æä¾›äº†å¤šçº¿ç¨‹æ”¯æŒï¼‰ï¼› æ”¯æŒç½‘ç»œç¼–ç¨‹å¹¶ä¸”å¾ˆæ–¹ä¾¿ï¼ˆ Java è¯­è¨€è¯žç”Ÿæœ¬èº«å°±æ˜¯ä¸ºç®€åŒ–ç½‘ç»œç¼–ç¨‹è®¾è®¡çš„ï¼Œå› æ­¤ Java è¯­è¨€ä¸ä»…æ”¯æŒç½‘ç»œç¼–ç¨‹è€Œä¸”å¾ˆæ–¹ä¾¿ï¼‰ï¼› ç¼–è¯‘ä¸Žè§£é‡Šå¹¶å­˜ï¼› å…³äºŽ JVM JDK å’Œ JRE æœ€è¯¦ç»†é€šä¿—çš„è§£ç­”JVMJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰æ˜¯è¿è¡Œ Java å­—èŠ‚ç çš„è™šæ‹Ÿæœºã€‚JVMæœ‰é’ˆå¯¹ä¸åŒç³»ç»Ÿçš„ç‰¹å®šå®žçŽ°ï¼ˆWindowsï¼ŒLinuxï¼ŒmacOSï¼‰ï¼Œç›®çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„å­—èŠ‚ç ï¼Œå®ƒä»¬éƒ½ä¼šç»™å‡ºç›¸åŒçš„ç»“æžœã€‚ ä»€ä¹ˆæ˜¯å­—èŠ‚ç ?é‡‡ç”¨å­—èŠ‚ç çš„å¥½å¤„æ˜¯ä»€ä¹ˆ? åœ¨ Java ä¸­ï¼ŒJVMå¯ä»¥ç†è§£çš„ä»£ç å°±å«åšå­—èŠ‚ç ï¼ˆå³æ‰©å±•åä¸º .class çš„æ–‡ä»¶ï¼‰ï¼Œå®ƒä¸é¢å‘ä»»ä½•ç‰¹å®šçš„å¤„ç†å™¨ï¼Œåªé¢å‘è™šæ‹Ÿæœºã€‚Java è¯­è¨€é€šè¿‡å­—èŠ‚ç çš„æ–¹å¼ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†ä¼ ç»Ÿè§£é‡Šåž‹è¯­è¨€æ‰§è¡Œæ•ˆçŽ‡ä½Žçš„é—®é¢˜ï¼ŒåŒæ—¶åˆä¿ç•™äº†è§£é‡Šåž‹è¯­è¨€å¯ç§»æ¤çš„ç‰¹ç‚¹ã€‚æ‰€ä»¥ Java ç¨‹åºè¿è¡Œæ—¶æ¯”è¾ƒé«˜æ•ˆï¼Œè€Œä¸”ï¼Œç”±äºŽå­—èŠ‚ç å¹¶ä¸é’ˆå¯¹ä¸€ç§ç‰¹å®šçš„æœºå™¨ï¼Œå› æ­¤ï¼ŒJavaç¨‹åºæ— é¡»é‡æ–°ç¼–è¯‘ä¾¿å¯åœ¨å¤šç§ä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºä¸Šè¿è¡Œã€‚ Java ç¨‹åºä»Žæºä»£ç åˆ°è¿è¡Œä¸€èˆ¬æœ‰ä¸‹é¢3æ­¥ï¼š æˆ‘ä»¬éœ€è¦æ ¼å¤–æ³¨æ„çš„æ˜¯ .class-&gt;æœºå™¨ç  è¿™ä¸€æ­¥ã€‚åœ¨è¿™ä¸€æ­¥ JVM ç±»åŠ è½½å™¨é¦–å…ˆåŠ è½½å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åŽé€šè¿‡è§£é‡Šå™¨é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œè¿™ç§æ–¹å¼çš„æ‰§è¡Œé€Ÿåº¦ä¼šç›¸å¯¹æ¯”è¾ƒæ…¢ã€‚è€Œä¸”ï¼Œæœ‰äº›æ–¹æ³•å’Œä»£ç å—æ˜¯ç»å¸¸éœ€è¦è¢«è°ƒç”¨çš„(ä¹Ÿå°±æ˜¯æ‰€è°“çš„çƒ­ç‚¹ä»£ç )ï¼Œæ‰€ä»¥åŽé¢å¼•è¿›äº† JIT ç¼–è¯‘å™¨ï¼Œè€ŒJIT å±žäºŽè¿è¡Œæ—¶ç¼–è¯‘ã€‚å½“ JIT ç¼–è¯‘å™¨å®Œæˆç¬¬ä¸€æ¬¡ç¼–è¯‘åŽï¼Œå…¶ä¼šå°†å­—èŠ‚ç å¯¹åº”çš„æœºå™¨ç ä¿å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼Œæœºå™¨ç çš„è¿è¡Œæ•ˆçŽ‡è‚¯å®šæ˜¯é«˜äºŽ Java è§£é‡Šå™¨çš„ã€‚è¿™ä¹Ÿè§£é‡Šäº†æˆ‘ä»¬ä¸ºä»€ä¹ˆç»å¸¸ä¼šè¯´ Java æ˜¯ç¼–è¯‘ä¸Žè§£é‡Šå…±å­˜çš„è¯­è¨€ã€‚ HotSpoté‡‡ç”¨äº†æƒ°æ€§è¯„ä¼°(Lazy Evaluation)çš„åšæ³•ï¼Œæ ¹æ®äºŒå…«å®šå¾‹ï¼Œæ¶ˆè€—å¤§éƒ¨åˆ†ç³»ç»Ÿèµ„æºçš„åªæœ‰é‚£ä¸€å°éƒ¨åˆ†çš„ä»£ç ï¼ˆçƒ­ç‚¹ä»£ç ï¼‰ï¼Œè€Œè¿™ä¹Ÿå°±æ˜¯JITæ‰€éœ€è¦ç¼–è¯‘çš„éƒ¨åˆ†ã€‚JVMä¼šæ ¹æ®ä»£ç æ¯æ¬¡è¢«æ‰§è¡Œçš„æƒ…å†µæ”¶é›†ä¿¡æ¯å¹¶ç›¸åº”åœ°åšå‡ºä¸€äº›ä¼˜åŒ–ï¼Œå› æ­¤æ‰§è¡Œçš„æ¬¡æ•°è¶Šå¤šï¼Œå®ƒçš„é€Ÿåº¦å°±è¶Šå¿«ã€‚JDK 9å¼•å…¥äº†ä¸€ç§æ–°çš„ç¼–è¯‘æ¨¡å¼AOT(Ahead of Time Compilation)ï¼Œå®ƒæ˜¯ç›´æŽ¥å°†å­—èŠ‚ç ç¼–è¯‘æˆæœºå™¨ç ï¼Œè¿™æ ·å°±é¿å…äº†JITé¢„çƒ­ç­‰å„æ–¹é¢çš„å¼€é”€ã€‚JDKæ”¯æŒåˆ†å±‚ç¼–è¯‘å’ŒAOTåä½œä½¿ç”¨ã€‚ä½†æ˜¯ ï¼ŒAOT ç¼–è¯‘å™¨çš„ç¼–è¯‘è´¨é‡æ˜¯è‚¯å®šæ¯”ä¸ä¸Š JIT ç¼–è¯‘å™¨çš„ã€‚ æ€»ç»“ï¼š Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰æ˜¯è¿è¡Œ Java å­—èŠ‚ç çš„è™šæ‹Ÿæœºã€‚JVMæœ‰é’ˆå¯¹ä¸åŒç³»ç»Ÿçš„ç‰¹å®šå®žçŽ°ï¼ˆWindowsï¼ŒLinuxï¼ŒmacOSï¼‰ï¼Œç›®çš„æ˜¯ä½¿ç”¨ç›¸åŒçš„å­—èŠ‚ç ï¼Œå®ƒä»¬éƒ½ä¼šç»™å‡ºç›¸åŒçš„ç»“æžœã€‚å­—èŠ‚ç å’Œä¸åŒç³»ç»Ÿçš„ JVM å®žçŽ°æ˜¯ Java è¯­è¨€â€œä¸€æ¬¡ç¼–è¯‘ï¼Œéšå¤„å¯ä»¥è¿è¡Œâ€çš„å…³é”®æ‰€åœ¨ã€‚ JDK å’Œ JREJDKæ˜¯Java Development Kitï¼Œå®ƒæ˜¯åŠŸèƒ½é½å…¨çš„Java SDKã€‚å®ƒæ‹¥æœ‰JREæ‰€æ‹¥æœ‰çš„ä¸€åˆ‡ï¼Œè¿˜æœ‰ç¼–è¯‘å™¨ï¼ˆjavacï¼‰å’Œå·¥å…·ï¼ˆå¦‚javadocå’Œjdbï¼‰ã€‚å®ƒèƒ½å¤Ÿåˆ›å»ºå’Œç¼–è¯‘ç¨‹åºã€‚ JRE æ˜¯ Javaè¿è¡Œæ—¶çŽ¯å¢ƒã€‚å®ƒæ˜¯è¿è¡Œå·²ç¼–è¯‘ Java ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰å†…å®¹çš„é›†åˆï¼ŒåŒ…æ‹¬ Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ï¼ŒJavaç±»åº“ï¼Œjavaå‘½ä»¤å’Œå…¶ä»–çš„ä¸€äº›åŸºç¡€æž„ä»¶ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½ç”¨äºŽåˆ›å»ºæ–°ç¨‹åºã€‚ å¦‚æžœä½ åªæ˜¯ä¸ºäº†è¿è¡Œä¸€ä¸‹ Java ç¨‹åºçš„è¯ï¼Œé‚£ä¹ˆä½ åªéœ€è¦å®‰è£… JRE å°±å¯ä»¥äº†ã€‚å¦‚æžœä½ éœ€è¦è¿›è¡Œä¸€äº› Java ç¼–ç¨‹æ–¹é¢çš„å·¥ä½œï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å®‰è£…JDKäº†ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æ˜¯ç»å¯¹çš„ã€‚æœ‰æ—¶ï¼Œå³ä½¿æ‚¨ä¸æ‰“ç®—åœ¨è®¡ç®—æœºä¸Šè¿›è¡Œä»»ä½•Javaå¼€å‘ï¼Œä»ç„¶éœ€è¦å®‰è£…JDKã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè¦ä½¿ç”¨JSPéƒ¨ç½²Webåº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆä»ŽæŠ€æœ¯ä¸Šè®²ï¼Œæ‚¨åªæ˜¯åœ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¸­è¿è¡ŒJavaç¨‹åºã€‚é‚£ä½ ä¸ºä»€ä¹ˆéœ€è¦JDKå‘¢ï¼Ÿå› ä¸ºåº”ç”¨ç¨‹åºæœåŠ¡å™¨ä¼šå°† JSP è½¬æ¢ä¸º Java servletï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨ JDK æ¥ç¼–è¯‘ servletã€‚ Javaå’ŒC++çš„åŒºåˆ«?æˆ‘çŸ¥é“å¾ˆå¤šäººæ²¡å­¦è¿‡ C++ï¼Œä½†æ˜¯é¢è¯•å®˜å°±æ˜¯æ²¡äº‹å–œæ¬¢æ‹¿å’±ä»¬ Java å’Œ C++ æ¯”å‘€ï¼æ²¡åŠžæ³•ï¼ï¼ï¼å°±ç®—æ²¡å­¦è¿‡C++ï¼Œä¹Ÿè¦è®°ä¸‹æ¥ï¼ éƒ½æ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œéƒ½æ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ Java ä¸æä¾›æŒ‡é’ˆæ¥ç›´æŽ¥è®¿é—®å†…å­˜ï¼Œç¨‹åºå†…å­˜æ›´åŠ å®‰å…¨ Java çš„ç±»æ˜¯å•ç»§æ‰¿çš„ï¼ŒC++ æ”¯æŒå¤šé‡ç»§æ‰¿ï¼›è™½ç„¶ Java çš„ç±»ä¸å¯ä»¥å¤šç»§æ‰¿ï¼Œä½†æ˜¯æŽ¥å£å¯ä»¥å¤šç»§æ‰¿ã€‚ Java æœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œä¸éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨é‡Šæ”¾æ— ç”¨å†…å­˜ è¡¥å……ä¸€ä¸‹JAVAå’ŒPythonçš„åŒºåˆ«ï¼š pythonè™šæ‹Ÿæœºæ²¡æœ‰javaå¼ºï¼Œjavaè™šæ‹Ÿæœºæ˜¯javaçš„æ ¸å¿ƒï¼Œpythonçš„æ ¸å¿ƒæ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨cè¯­è¨€å‡½æ•°æˆ–c++åº“ Pythonæ˜¯åŠ¨æ€è¯­è¨€ï¼ŒJAVAæ˜¯é™æ€è¯­è¨€ã€‚JAVAåœ¨ç¼–å†™æ—¶å¯ä»¥æ£€æµ‹å˜é‡ç±»åž‹ Pythonå…¥é—¨æ¯”JAVAç®€å• Pythonæ›´å¤šç”¨æ¥å†™ä¸€äº›ç®€å•è„šæœ¬ï¼ŒJAVAç”¨æ¥åšwebã€å¤§æ•°æ®æ–¹é¢å¾ˆå¤š é‡è½½å’Œé‡å†™çš„åŒºåˆ« é‡è½½ï¼š å‘ç”Ÿåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åå¿…é¡»ç›¸åŒï¼Œå‚æ•°ç±»åž‹ä¸åŒã€ä¸ªæ•°ä¸åŒã€é¡ºåºä¸åŒï¼Œæ–¹æ³•è¿”å›žå€¼å’Œè®¿é—®ä¿®é¥°ç¬¦å¯ä»¥ä¸åŒï¼Œå‘ç”Ÿåœ¨ç¼–è¯‘æ—¶ã€‚ é‡å†™ï¼š å‘ç”Ÿåœ¨çˆ¶å­ç±»ä¸­ï¼Œæ–¹æ³•åã€å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒï¼Œè¿”å›žå€¼èŒƒå›´å°äºŽç­‰äºŽçˆ¶ç±»ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸èŒƒå›´å°äºŽç­‰äºŽçˆ¶ç±»ï¼Œè®¿é—®ä¿®é¥°ç¬¦èŒƒå›´å¤§äºŽç­‰äºŽçˆ¶ç±»ï¼›å¦‚æžœçˆ¶ç±»æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦ä¸º private åˆ™å­ç±»å°±ä¸èƒ½é‡å†™è¯¥æ–¹æ³•ã€‚ Java é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸‰å¤§ç‰¹æ€§: å°è£… ç»§æ‰¿ å¤šæ€å°è£…å°è£…æŠŠä¸€ä¸ªå¯¹è±¡çš„å±žæ€§ç§æœ‰åŒ–ï¼ŒåŒæ—¶æä¾›ä¸€äº›å¯ä»¥è¢«å¤–ç•Œè®¿é—®çš„å±žæ€§çš„æ–¹æ³•ï¼Œå¦‚æžœå±žæ€§ä¸æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œæˆ‘ä»¬å¤§å¯ä¸å¿…æä¾›æ–¹æ³•ç»™å¤–ç•Œè®¿é—®ã€‚ä½†æ˜¯å¦‚æžœä¸€ä¸ªç±»æ²¡æœ‰æä¾›ç»™å¤–ç•Œè®¿é—®çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰äº†ã€‚ ç»§æ‰¿ç»§æ‰¿æ˜¯ä½¿ç”¨å·²å­˜åœ¨çš„ç±»çš„å®šä¹‰ä½œä¸ºåŸºç¡€å»ºç«‹æ–°ç±»çš„æŠ€æœ¯ï¼Œæ–°ç±»çš„å®šä¹‰å¯ä»¥å¢žåŠ æ–°çš„æ•°æ®æˆ–æ–°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½é€‰æ‹©æ€§åœ°ç»§æ‰¿çˆ¶ç±»ã€‚é€šè¿‡ä½¿ç”¨ç»§æ‰¿æˆ‘ä»¬èƒ½å¤Ÿéžå¸¸æ–¹ä¾¿åœ°å¤ç”¨ä»¥å‰çš„ä»£ç ã€‚ å…³äºŽç»§æ‰¿å¦‚ä¸‹ 3 ç‚¹è¯·è®°ä½ï¼š å­ç±»æ‹¥æœ‰çˆ¶ç±»å¯¹è±¡æ‰€æœ‰çš„å±žæ€§å’Œæ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰å±žæ€§å’Œç§æœ‰æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯çˆ¶ç±»ä¸­çš„ç§æœ‰å±žæ€§å’Œæ–¹æ³•å­ç±»æ˜¯æ— æ³•è®¿é—®ï¼Œåªæ˜¯æ‹¥æœ‰ã€‚ å­ç±»å¯ä»¥æ‹¥æœ‰è‡ªå·±å±žæ€§å’Œæ–¹æ³•ï¼Œå³å­ç±»å¯ä»¥å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•ã€‚ å­ç±»å¯ä»¥ç”¨è‡ªå·±çš„æ–¹å¼å®žçŽ°çˆ¶ç±»çš„æ–¹æ³•ã€‚ï¼ˆä»¥åŽä»‹ç»ï¼‰ã€‚ å¤šæ€æ‰€è°“å¤šæ€å°±æ˜¯æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“ç±»åž‹å’Œé€šè¿‡è¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åœ¨ç¼–ç¨‹æ—¶å¹¶ä¸ç¡®å®šï¼Œè€Œæ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ‰ç¡®å®šï¼Œå³ä¸€ä¸ªå¼•ç”¨å˜é‡åˆ°åº•ä¼šæŒ‡å‘å“ªä¸ªç±»çš„å®žä¾‹å¯¹è±¡ï¼Œè¯¥å¼•ç”¨å˜é‡å‘å‡ºçš„æ–¹æ³•è°ƒç”¨åˆ°åº•æ˜¯å“ªä¸ªç±»ä¸­å®žçŽ°çš„æ–¹æ³•ï¼Œå¿…é¡»åœ¨ç”±ç¨‹åºè¿è¡ŒæœŸé—´æ‰èƒ½å†³å®šã€‚ åœ¨Javaä¸­æœ‰ä¸¤ç§å½¢å¼å¯ä»¥å®žçŽ°å¤šæ€ï¼šç»§æ‰¿ï¼ˆå¤šä¸ªå­ç±»å¯¹åŒä¸€æ–¹æ³•çš„é‡å†™ï¼‰å’ŒæŽ¥å£ï¼ˆå®žçŽ°æŽ¥å£å¹¶è¦†ç›–æŽ¥å£ä¸­åŒä¸€æ–¹æ³•ï¼‰ã€‚ String StringBuffer å’Œ StringBuilder çš„åŒºåˆ«å¯å˜æ€§ ç®€å•çš„æ¥è¯´ï¼šString ç±»ä¸­ä½¿ç”¨ final å…³é”®å­—ä¿®é¥°å­—ç¬¦æ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œprivate final char value[]ï¼Œæ‰€ä»¥ String å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚ è€ŒStringBuilder ä¸Ž StringBuffer éƒ½ç»§æ‰¿è‡ª AbstractStringBuilder ç±»ï¼Œåœ¨ AbstractStringBuilder ä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²char[]value ä½†æ˜¯æ²¡æœ‰ç”¨ final å…³é”®å­—ä¿®é¥°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚ StringBuilder ä¸Ž StringBuffer çš„æž„é€ æ–¹æ³•éƒ½æ˜¯è°ƒç”¨çˆ¶ç±»æž„é€ æ–¹æ³•ä¹Ÿå°±æ˜¯ AbstractStringBuilder å®žçŽ°çš„ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…æºç ã€‚ StringBuilder.java 12345678910public final class StringBuilder extends AbstractStringBuilder implements java.io.Serializable, CharSequence&#123; public StringBuilder() &#123; super(16); &#125; public StringBuilder(int capacity) &#123; super(capacity); &#125;&#125; AbstractStringBuilder.java 123456789abstract class AbstractStringBuilder implements Appendable, CharSequence &#123; char[] value; int count; AbstractStringBuilder() &#123; &#125; AbstractStringBuilder(int capacity) &#123; value = new char[capacity]; &#125;&#125; çº¿ç¨‹å®‰å…¨æ€§ String ä¸­çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå°±å¯ä»¥ç†è§£ä¸ºå¸¸é‡ï¼Œçº¿ç¨‹å®‰å…¨ã€‚AbstractStringBuilder æ˜¯ StringBuilder ä¸Ž StringBuffer çš„å…¬å…±çˆ¶ç±»ï¼Œå®šä¹‰äº†ä¸€äº›å­—ç¬¦ä¸²çš„åŸºæœ¬æ“ä½œï¼Œå¦‚ expandCapacityã€appendã€insertã€indexOf ç­‰å…¬å…±æ–¹æ³•ã€‚ StringBuffer å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚StringBuilder å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éžçº¿ç¨‹å®‰å…¨çš„ã€‚ StringBuffer.java 123456789101112@Overridepublic synchronized StringBuffer insert(int offset, String str) &#123; toStringCache = null; super.insert(offset, str); return this;&#125;@Overridepublic synchronized void setLength(int newLength) &#123; toStringCache = null; super.setLength(newLength);&#125; æ€§èƒ½ æ¯æ¬¡å¯¹ String ç±»åž‹è¿›è¡Œæ”¹å˜çš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼Œç„¶åŽå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„ String å¯¹è±¡ã€‚StringBuffer æ¯æ¬¡éƒ½ä¼šå¯¹ StringBuffer å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡å¹¶æ”¹å˜å¯¹è±¡å¼•ç”¨ã€‚ç›¸åŒæƒ…å†µä¸‹ä½¿ç”¨ StringBuilder ç›¸æ¯”ä½¿ç”¨ StringBuffer ä»…èƒ½èŽ·å¾— 10%~15% å·¦å³çš„æ€§èƒ½æå‡ï¼Œä½†å´è¦å†’å¤šçº¿ç¨‹ä¸å®‰å…¨çš„é£Žé™©ã€‚ å¯¹äºŽä¸‰è€…ä½¿ç”¨çš„æ€»ç»“ï¼š æ“ä½œå°‘é‡çš„æ•°æ®: é€‚ç”¨String å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨StringBuilder å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨StringBuffer #è‡ªåŠ¨è£…ç®±ä¸Žæ‹†ç®± è£…ç®±ï¼šå°†åŸºæœ¬ç±»åž‹ç”¨å®ƒä»¬å¯¹åº”çš„å¼•ç”¨ç±»åž‹åŒ…è£…èµ·æ¥ï¼› æ‹†ç®±ï¼šå°†åŒ…è£…ç±»åž‹è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»åž‹ï¼› åœ¨ä¸€ä¸ªé™æ€æ–¹æ³•å†…è°ƒç”¨ä¸€ä¸ªéžé™æ€æˆå‘˜ä¸ºä»€ä¹ˆæ˜¯éžæ³•çš„?ç”±äºŽé™æ€æ–¹æ³•å¯ä»¥ä¸é€šè¿‡å¯¹è±¡è¿›è¡Œè°ƒç”¨ï¼Œå› æ­¤åœ¨é™æ€æ–¹æ³•é‡Œï¼Œä¸èƒ½è°ƒç”¨å…¶ä»–éžé™æ€å˜é‡ï¼Œä¹Ÿä¸å¯ä»¥è®¿é—®éžé™æ€å˜é‡æˆå‘˜ã€‚ åœ¨ Java ä¸­å®šä¹‰ä¸€ä¸ªä¸åšäº‹ä¸”æ²¡æœ‰å‚æ•°çš„æž„é€ æ–¹æ³•çš„ä½œç”¨Java ç¨‹åºåœ¨æ‰§è¡Œå­ç±»çš„æž„é€ æ–¹æ³•ä¹‹å‰ï¼Œå¦‚æžœæ²¡æœ‰ç”¨ super()æ¥è°ƒç”¨çˆ¶ç±»ç‰¹å®šçš„æž„é€ æ–¹æ³•ï¼Œåˆ™ä¼šè°ƒç”¨çˆ¶ç±»ä¸­â€œæ²¡æœ‰å‚æ•°çš„æž„é€ æ–¹æ³•â€ã€‚ å› æ­¤ï¼Œå¦‚æžœçˆ¶ç±»ä¸­åªå®šä¹‰äº†æœ‰å‚æ•°çš„æž„é€ æ–¹æ³•ï¼Œè€Œåœ¨å­ç±»çš„æž„é€ æ–¹æ³•ä¸­åˆæ²¡æœ‰ç”¨ super()æ¥è°ƒç”¨çˆ¶ç±»ä¸­ç‰¹å®šçš„æž„é€ æ–¹æ³•ï¼Œåˆ™ç¼–è¯‘æ—¶å°†å‘ç”Ÿé”™è¯¯ï¼Œå› ä¸º Java ç¨‹åºåœ¨çˆ¶ç±»ä¸­æ‰¾ä¸åˆ°æ²¡æœ‰å‚æ•°çš„æž„é€ æ–¹æ³•å¯ä¾›æ‰§è¡Œã€‚è§£å†³åŠžæ³•æ˜¯åœ¨çˆ¶ç±»é‡ŒåŠ ä¸Šä¸€ä¸ªä¸åšäº‹ä¸”æ²¡æœ‰å‚æ•°çš„æž„é€ æ–¹æ³•ã€‚ æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ æŽ¥å£çš„æ–¹æ³•é»˜è®¤æ˜¯ publicï¼Œæ‰€æœ‰æ–¹æ³•åœ¨æŽ¥å£ä¸­ä¸èƒ½æœ‰å®žçŽ°(Java 8 å¼€å§‹æŽ¥å£æ–¹æ³•å¯ä»¥æœ‰é»˜è®¤å®žçŽ°ï¼‰ï¼Œè€ŒæŠ½è±¡ç±»å¯ä»¥æœ‰éžæŠ½è±¡çš„æ–¹æ³•ã€‚ æŽ¥å£ä¸­é™¤äº†staticã€finalå˜é‡ï¼Œä¸èƒ½æœ‰å…¶ä»–å˜é‡ï¼Œè€ŒæŠ½è±¡ç±»ä¸­åˆ™ä¸ä¸€å®šã€‚ ä¸€ä¸ªç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼Œä½†åªèƒ½å®žçŽ°ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æŽ¥å£è‡ªå·±æœ¬èº«å¯ä»¥é€šè¿‡extendså…³é”®å­—æ‰©å±•å¤šä¸ªæŽ¥å£ã€‚ æŽ¥å£æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æ˜¯publicï¼ŒæŠ½è±¡æ–¹æ³•å¯ä»¥æœ‰publicã€protectedå’Œdefaultè¿™äº›ä¿®é¥°ç¬¦ï¼ˆæŠ½è±¡æ–¹æ³•å°±æ˜¯ä¸ºäº†è¢«é‡å†™æ‰€ä»¥ä¸èƒ½ä½¿ç”¨privateå…³é”®å­—ä¿®é¥°ï¼ï¼‰ã€‚ ä»Žè®¾è®¡å±‚é¢æ¥è¯´ï¼ŒæŠ½è±¡æ˜¯å¯¹ç±»çš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§æ¨¡æ¿è®¾è®¡ï¼Œè€ŒæŽ¥å£æ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œæ˜¯ä¸€ç§è¡Œä¸ºçš„è§„èŒƒã€‚ å¤‡æ³¨ï¼šåœ¨JDK8ä¸­ï¼ŒæŽ¥å£ä¹Ÿå¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œå¯ä»¥ç›´æŽ¥ç”¨æŽ¥å£åè°ƒç”¨ã€‚å®žçŽ°ç±»å’Œå®žçŽ°æ˜¯ä¸å¯ä»¥è°ƒç”¨çš„ã€‚å¦‚æžœåŒæ—¶å®žçŽ°ä¸¤ä¸ªæŽ¥å£ï¼ŒæŽ¥å£ä¸­å®šä¹‰äº†ä¸€æ ·çš„é»˜è®¤æ–¹æ³•ï¼Œåˆ™å¿…é¡»é‡å†™ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚ æˆå‘˜å˜é‡ä¸Žå±€éƒ¨å˜é‡çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ ä»Žè¯­æ³•å½¢å¼ä¸Šçœ‹ï¼šæˆå‘˜å˜é‡æ˜¯å±žäºŽç±»çš„ï¼Œè€Œå±€éƒ¨å˜é‡æ˜¯åœ¨æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡æˆ–æ˜¯æ–¹æ³•çš„å‚æ•°ï¼›æˆå‘˜å˜é‡å¯ä»¥è¢« public,private,static ç­‰ä¿®é¥°ç¬¦æ‰€ä¿®é¥°ï¼Œè€Œå±€éƒ¨å˜é‡ä¸èƒ½è¢«è®¿é—®æŽ§åˆ¶ä¿®é¥°ç¬¦åŠ static æ‰€ä¿®é¥°ï¼›ä½†æ˜¯ï¼Œæˆå‘˜å˜é‡å’Œå±€éƒ¨å˜é‡éƒ½èƒ½è¢« final æ‰€ä¿®é¥°ã€‚ ä»Žå˜é‡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ¥çœ‹:å¦‚æžœæˆå‘˜å˜é‡æ˜¯ä½¿ç”¨staticä¿®é¥°çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯å±žäºŽç±»çš„ï¼Œå¦‚æžœæ²¡æœ‰ä½¿ç”¨staticä¿®é¥°ï¼Œè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯å±žäºŽå®žä¾‹çš„ã€‚è€Œå¯¹è±¡å­˜åœ¨äºŽå †å†…å­˜ï¼Œå±€éƒ¨å˜é‡åˆ™å­˜åœ¨äºŽæ ˆå†…å­˜ã€‚ ä»Žå˜é‡åœ¨å†…å­˜ä¸­çš„ç”Ÿå­˜æ—¶é—´ä¸Šçœ‹:æˆå‘˜å˜é‡æ˜¯å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒéšç€å¯¹è±¡çš„åˆ›å»ºè€Œå­˜åœ¨ï¼Œè€Œå±€éƒ¨å˜é‡éšç€æ–¹æ³•çš„è°ƒç”¨è€Œè‡ªåŠ¨æ¶ˆå¤±ã€‚ æˆå‘˜å˜é‡å¦‚æžœæ²¡æœ‰è¢«èµ‹åˆå€¼:åˆ™ä¼šè‡ªåŠ¨ä»¥ç±»åž‹çš„é»˜è®¤å€¼è€Œèµ‹å€¼ï¼ˆä¸€ç§æƒ…å†µä¾‹å¤–:è¢« final ä¿®é¥°çš„æˆå‘˜å˜é‡ä¹Ÿå¿…é¡»æ˜¾å¼åœ°èµ‹å€¼ï¼‰ï¼Œè€Œå±€éƒ¨å˜é‡åˆ™ä¸ä¼šè‡ªåŠ¨èµ‹å€¼ã€‚ æž„é€ æ–¹æ³•æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ åå­—ä¸Žç±»åç›¸åŒã€‚ æ²¡æœ‰è¿”å›žå€¼ï¼Œä½†ä¸èƒ½ç”¨voidå£°æ˜Žæž„é€ å‡½æ•°ã€‚ ç”Ÿæˆç±»çš„å¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œï¼Œæ— éœ€è°ƒç”¨ã€‚ é™æ€æ–¹æ³•å’Œå®žä¾‹æ–¹æ³•æœ‰ä½•ä¸åŒ åœ¨å¤–éƒ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨â€ç±»å.æ–¹æ³•åâ€çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€å¯¹è±¡å.æ–¹æ³•åâ€çš„æ–¹å¼ã€‚è€Œå®žä¾‹æ–¹æ³•åªæœ‰åŽé¢è¿™ç§æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥æ— éœ€åˆ›å»ºå¯¹è±¡ã€‚ é™æ€æ–¹æ³•åœ¨è®¿é—®æœ¬ç±»çš„æˆå‘˜æ—¶ï¼Œåªå…è®¸è®¿é—®é™æ€æˆå‘˜ï¼ˆå³é™æ€æˆå‘˜å˜é‡å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œè€Œä¸å…è®¸è®¿é—®å®žä¾‹æˆå‘˜å˜é‡å’Œå®žä¾‹æ–¹æ³•ï¼›å®žä¾‹æ–¹æ³•åˆ™æ— æ­¤é™åˆ¶ã€‚ == ä¸Ž equals== : å®ƒçš„ä½œç”¨æ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä¸æ˜¯ç›¸ç­‰ã€‚å³ï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡(åŸºæœ¬æ•°æ®ç±»åž‹==æ¯”è¾ƒçš„æ˜¯å€¼ï¼Œå¼•ç”¨æ•°æ®ç±»åž‹==æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€)ã€‚åŸºæœ¬æ•°æ®ç±»åž‹ï¼šbyteã€shortã€intã€longã€floatã€doubleã€charã€booleanå¼•ç”¨ç±»åž‹ï¼šç±»(class)ã€æŽ¥å£(interface)ã€æ•°ç»„(array) equals() : å®ƒçš„ä½œç”¨ä¹Ÿæ˜¯åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚ä½†å®ƒä¸€èˆ¬æœ‰ä¸¤ç§ä½¿ç”¨æƒ…å†µï¼š æƒ…å†µ1ï¼šç±»æ²¡æœ‰è¦†ç›– equals() æ–¹æ³•ã€‚åˆ™é€šè¿‡ equals() æ¯”è¾ƒè¯¥ç±»çš„ä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œç­‰ä»·äºŽé€šè¿‡â€œ==â€æ¯”è¾ƒè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚ æƒ…å†µ2ï¼šç±»è¦†ç›–äº† equals() æ–¹æ³•ã€‚ä¸€èˆ¬ï¼Œæˆ‘ä»¬éƒ½è¦†ç›– equals() æ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼›è‹¥å®ƒä»¬çš„å†…å®¹ç›¸ç­‰ï¼Œåˆ™è¿”å›ž true (å³ï¼Œè®¤ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰)ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011121314151617public class test1 &#123; public static void main(String[] args) &#123; String a = new String("ab"); // a ä¸ºä¸€ä¸ªå¼•ç”¨ String b = new String("ab"); // bä¸ºå¦ä¸€ä¸ªå¼•ç”¨,å¯¹è±¡çš„å†…å®¹ä¸€æ · String aa = "ab"; // æ”¾åœ¨å¸¸é‡æ± ä¸­ String bb = "ab"; // ä»Žå¸¸é‡æ± ä¸­æŸ¥æ‰¾ if (aa == bb) // true System.out.println("aa==bb"); if (a == b) // falseï¼ŒéžåŒä¸€å¯¹è±¡ System.out.println("a==b"); if (a.equals(b)) // true System.out.println("aEQb"); if (42 == 42.0) &#123; // true System.out.println("true"); &#125; &#125;&#125; è¯´æ˜Žï¼š String ä¸­çš„ equals æ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œå› ä¸º object çš„ equals æ–¹æ³•æ˜¯æ¯”è¾ƒçš„å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œè€Œ String çš„ equals æ–¹æ³•æ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å€¼ã€‚ å½“åˆ›å»º String ç±»åž‹çš„å¯¹è±¡æ—¶ï¼Œè™šæ‹Ÿæœºä¼šåœ¨å¸¸é‡æ± ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å·²ç»å­˜åœ¨çš„å€¼å’Œè¦åˆ›å»ºçš„å€¼ç›¸åŒçš„å¯¹è±¡ï¼Œå¦‚æžœæœ‰å°±æŠŠå®ƒèµ‹ç»™å½“å‰å¼•ç”¨ã€‚å¦‚æžœæ²¡æœ‰å°±åœ¨å¸¸é‡æ± ä¸­é‡æ–°åˆ›å»ºä¸€ä¸ª String å¯¹è±¡ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ç”¨equalsï¼Œè‚¯å®šä¸ä¼šé”™ hashCode ä¸Ž equalsé¢è¯•å®˜å¯èƒ½ä¼šé—®ä½ ï¼šâ€œä½ é‡å†™è¿‡ hashcode å’Œ equals ä¹ˆï¼Œä¸ºä»€ä¹ˆé‡å†™equalsæ—¶å¿…é¡»é‡å†™hashCodeæ–¹æ³•ï¼Ÿâ€ hashCodeï¼ˆï¼‰ä»‹ç»hashCode() çš„ä½œç”¨æ˜¯èŽ·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®žé™…ä¸Šæ˜¯è¿”å›žä¸€ä¸ªintæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚hashCode() å®šä¹‰åœ¨JDKçš„Object.javaä¸­ï¼Œè¿™å°±æ„å‘³ç€Javaä¸­çš„ä»»ä½•ç±»éƒ½åŒ…å«æœ‰hashCode() å‡½æ•°ã€‚ æ•£åˆ—è¡¨å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹(key-value)ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼šèƒ½æ ¹æ®â€œé”®â€å¿«é€Ÿçš„æ£€ç´¢å‡ºå¯¹åº”çš„â€œå€¼â€ã€‚è¿™å…¶ä¸­å°±åˆ©ç”¨åˆ°äº†æ•£åˆ—ç ï¼ï¼ˆå¯ä»¥å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€è¦çš„å¯¹è±¡ï¼‰ hashCodeå¯èƒ½ä¼šè¿”å›žè´Ÿæ•° ä¸ºä»€ä¹ˆè¦æœ‰ hashCodeæˆ‘ä»¬å…ˆä»¥â€œHashSet å¦‚ä½•æ£€æŸ¥é‡å¤â€ä¸ºä¾‹å­æ¥è¯´æ˜Žä¸ºä»€ä¹ˆè¦æœ‰ hashCodeï¼š å½“ä½ æŠŠå¯¹è±¡åŠ å…¥ HashSet æ—¶ï¼ŒHashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸Žå…¶ä»–å·²ç»åŠ å…¥çš„å¯¹è±¡çš„ hashcode å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æžœæ²¡æœ‰ç›¸ç¬¦çš„hashcodeï¼ŒHashSetä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºçŽ°ã€‚ä½†æ˜¯å¦‚æžœå‘çŽ°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨ equalsï¼ˆï¼‰æ–¹æ³•æ¥æ£€æŸ¥ hashcode ç›¸ç­‰çš„å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒã€‚å¦‚æžœä¸¤è€…ç›¸åŒï¼ŒHashSet å°±ä¸ä¼šè®©å…¶åŠ å…¥æ“ä½œæˆåŠŸã€‚å¦‚æžœä¸åŒçš„è¯ï¼Œå°±ä¼šé‡æ–°æ•£åˆ—åˆ°å…¶ä»–ä½ç½®ã€‚ï¼ˆæ‘˜è‡ªæˆ‘çš„Javaå¯è’™ä¹¦ã€ŠHead first javaã€‹ç¬¬äºŒç‰ˆï¼‰ã€‚è¿™æ ·æˆ‘ä»¬å°±å¤§å¤§å‡å°‘äº† equals çš„æ¬¡æ•°ï¼Œç›¸åº”å°±å¤§å¤§æé«˜äº†æ‰§è¡Œé€Ÿåº¦ã€‚ é€šè¿‡æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼šhashCode() çš„ä½œç”¨å°±æ˜¯èŽ·å–å“ˆå¸Œç ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—ç ï¼›å®ƒå®žé™…ä¸Šæ˜¯è¿”å›žä¸€ä¸ªintæ•´æ•°ã€‚è¿™ä¸ªå“ˆå¸Œç çš„ä½œç”¨æ˜¯ç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ç´¢å¼•ä½ç½®ã€‚hashCode()åœ¨æ•£åˆ—è¡¨ä¸­æ‰æœ‰ç”¨ï¼Œåœ¨å…¶å®ƒæƒ…å†µä¸‹æ²¡ç”¨ã€‚åœ¨æ•£åˆ—è¡¨ä¸­hashCode() çš„ä½œç”¨æ˜¯èŽ·å–å¯¹è±¡çš„æ•£åˆ—ç ï¼Œè¿›è€Œç¡®å®šè¯¥å¯¹è±¡åœ¨æ•£åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚ hashCodeï¼ˆï¼‰ä¸Žequalsï¼ˆï¼‰çš„ç›¸å…³è§„å®š å¦‚æžœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œåˆ™hashcodeä¸€å®šä¹Ÿæ˜¯ç›¸åŒçš„ ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰,å¯¹ä¸¤ä¸ªå¯¹è±¡åˆ†åˆ«è°ƒç”¨equalsæ–¹æ³•éƒ½è¿”å›žtrue ä¸¤ä¸ªå¯¹è±¡æœ‰ç›¸åŒçš„hashcodeå€¼ï¼Œå®ƒä»¬ä¹Ÿä¸ä¸€å®šæ˜¯ç›¸ç­‰çš„ å› æ­¤ï¼Œequals æ–¹æ³•è¢«è¦†ç›–è¿‡ï¼Œåˆ™ hashCode æ–¹æ³•ä¹Ÿå¿…é¡»è¢«è¦†ç›– hashCode() çš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡äº§ç”Ÿç‹¬ç‰¹å€¼ã€‚å¦‚æžœæ²¡æœ‰é‡å†™ hashCode()ï¼Œåˆ™è¯¥ class çš„ä¸¤ä¸ªå¯¹è±¡æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šç›¸ç­‰ï¼ˆå³ä½¿è¿™ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ç›¸åŒçš„æ•°æ®ï¼‰ æŽ¨èé˜…è¯»ï¼šJava hashCode() å’Œ equals()çš„è‹¥å¹²é—®é¢˜è§£ç­” ä¸ºä»€ä¹ˆJavaä¸­åªæœ‰å€¼ä¼ é€’æœ‰æ—¶é—´å¥½å¥½çœ‹çœ‹è¿™ä¸ªï¼šè¿™ä¸€æ¬¡ï¼Œå½»åº•è§£å†³Javaçš„å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ ç®€è¿°çº¿ç¨‹ã€ç¨‹åºã€è¿›ç¨‹çš„åŸºæœ¬æ¦‚å¿µã€‚ä»¥åŠä»–ä»¬ä¹‹é—´å…³ç³»æ˜¯ä»€ä¹ˆ?çº¿ç¨‹ä¸Žè¿›ç¨‹ç›¸ä¼¼ï¼Œä½†çº¿ç¨‹æ˜¯ä¸€ä¸ªæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹åœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥äº§ç”Ÿå¤šä¸ªçº¿ç¨‹ã€‚ä¸Žè¿›ç¨‹ä¸åŒçš„æ˜¯åŒç±»çš„å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´å’Œä¸€ç»„ç³»ç»Ÿèµ„æºï¼Œæ‰€ä»¥ç³»ç»Ÿåœ¨äº§ç”Ÿä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ–æ˜¯åœ¨å„ä¸ªçº¿ç¨‹ä¹‹é—´ä½œåˆ‡æ¢å·¥ä½œæ—¶ï¼Œè´Ÿæ‹…è¦æ¯”è¿›ç¨‹å°å¾—å¤šï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œçº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ã€‚ ç¨‹åºæ˜¯å«æœ‰æŒ‡ä»¤å’Œæ•°æ®çš„æ–‡ä»¶ï¼Œè¢«å­˜å‚¨åœ¨ç£ç›˜æˆ–å…¶ä»–çš„æ•°æ®å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ç¨‹åºæ˜¯é™æ€çš„ä»£ç ã€‚ è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•ä½ï¼Œå› æ­¤è¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³æ˜¯ä¸€ä¸ªè¿›ç¨‹ä»Žåˆ›å»ºï¼Œè¿è¡Œåˆ°æ¶ˆäº¡çš„è¿‡ç¨‹ã€‚ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ‰§è¡Œä¸­çš„ç¨‹åºï¼Œå®ƒåœ¨è®¡ç®—æœºä¸­ä¸€ä¸ªæŒ‡ä»¤æŽ¥ç€ä¸€ä¸ªæŒ‡ä»¤åœ°æ‰§è¡Œç€ï¼ŒåŒæ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹è¿˜å æœ‰æŸäº›ç³»ç»Ÿèµ„æºå¦‚CPUæ—¶é—´ï¼Œå†…å­˜ç©ºé—´ï¼Œæ–‡ä»¶ï¼Œè¾“å…¥è¾“å‡ºè®¾å¤‡çš„ä½¿ç”¨æƒç­‰ç­‰ã€‚æ¢å¥è¯è¯´ï¼Œå½“ç¨‹åºåœ¨æ‰§è¡Œæ—¶ï¼Œå°†ä¼šè¢«æ“ä½œç³»ç»Ÿè½½å…¥å†…å­˜ä¸­ã€‚ çº¿ç¨‹æ˜¯è¿›ç¨‹åˆ’åˆ†æˆçš„æ›´å°çš„è¿è¡Œå•ä½ã€‚çº¿ç¨‹å’Œè¿›ç¨‹æœ€å¤§çš„ä¸åŒåœ¨äºŽåŸºæœ¬ä¸Šå„è¿›ç¨‹æ˜¯ç‹¬ç«‹çš„ï¼Œè€Œå„çº¿ç¨‹åˆ™ä¸ä¸€å®šï¼Œå› ä¸ºåŒä¸€è¿›ç¨‹ä¸­çš„çº¿ç¨‹æžæœ‰å¯èƒ½ä¼šç›¸äº’å½±å“ã€‚ä»Žå¦ä¸€è§’åº¦æ¥è¯´ï¼Œè¿›ç¨‹å±žäºŽæ“ä½œç³»ç»Ÿçš„èŒƒç•´ï¼Œä¸»è¦æ˜¯åŒä¸€æ®µæ—¶é—´å†…ï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºï¼Œè€Œçº¿ç¨‹åˆ™æ˜¯åœ¨åŒä¸€ç¨‹åºå†…å‡ ä¹ŽåŒæ—¶æ‰§è¡Œä¸€ä¸ªä»¥ä¸Šçš„ç¨‹åºæ®µã€‚ çº¿ç¨‹æœ‰å“ªäº›åŸºæœ¬çŠ¶æ€Java çº¿ç¨‹åœ¨è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­çš„æŒ‡å®šæ—¶åˆ»åªå¯èƒ½å¤„äºŽä¸‹é¢6ç§ä¸åŒçŠ¶æ€çš„å…¶ä¸­ä¸€ä¸ªçŠ¶æ€ï¼ˆå›¾æºã€ŠJava å¹¶å‘ç¼–ç¨‹è‰ºæœ¯ã€‹4.1.4èŠ‚ï¼‰ã€‚ çº¿ç¨‹åœ¨ç”Ÿå‘½å‘¨æœŸä¸­å¹¶ä¸æ˜¯å›ºå®šå¤„äºŽæŸä¸€ä¸ªçŠ¶æ€è€Œæ˜¯éšç€ä»£ç çš„æ‰§è¡Œåœ¨ä¸åŒçŠ¶æ€ä¹‹é—´åˆ‡æ¢ã€‚Java çº¿ç¨‹çŠ¶æ€å˜è¿å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå›¾æºã€ŠJava å¹¶å‘ç¼–ç¨‹è‰ºæœ¯ã€‹4.1.4èŠ‚ï¼‰ï¼š ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š çº¿ç¨‹åˆ›å»ºä¹‹åŽå®ƒå°†å¤„äºŽ NEWï¼ˆæ–°å»ºï¼‰ çŠ¶æ€ï¼Œè°ƒç”¨ start() æ–¹æ³•åŽå¼€å§‹è¿è¡Œï¼Œçº¿ç¨‹è¿™æ—¶å€™å¤„äºŽ READYï¼ˆå¯è¿è¡Œï¼‰ çŠ¶æ€ã€‚å¯è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹èŽ·å¾—äº† cpu æ—¶é—´ç‰‡ï¼ˆtimesliceï¼‰åŽå°±å¤„äºŽ RUNNINGï¼ˆè¿è¡Œï¼‰ çŠ¶æ€ã€‚ æ“ä½œç³»ç»Ÿéšè— Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸­çš„ READY å’Œ RUNNING çŠ¶æ€ï¼Œå®ƒåªèƒ½çœ‹åˆ° RUNNABLE çŠ¶æ€ï¼ˆå›¾æºï¼šHowToDoInJavaï¼šJava Thread Life Cycle and Thread Statesï¼‰ï¼Œæ‰€ä»¥ Java ç³»ç»Ÿä¸€èˆ¬å°†è¿™ä¸¤ä¸ªçŠ¶æ€ç»Ÿç§°ä¸º RUNNABLEï¼ˆè¿è¡Œä¸­ï¼‰ çŠ¶æ€ ã€‚ å½“çº¿ç¨‹æ‰§è¡Œ wait()æ–¹æ³•ä¹‹åŽï¼Œçº¿ç¨‹è¿›å…¥ WAITINGï¼ˆç­‰å¾…ï¼‰çŠ¶æ€ã€‚è¿›å…¥ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹éœ€è¦ä¾é å…¶ä»–çº¿ç¨‹çš„é€šçŸ¥æ‰èƒ½å¤Ÿè¿”å›žåˆ°è¿è¡ŒçŠ¶æ€ï¼Œè€Œ TIME_WAITING(è¶…æ—¶ç­‰å¾…) çŠ¶æ€ç›¸å½“äºŽåœ¨ç­‰å¾…çŠ¶æ€çš„åŸºç¡€ä¸Šå¢žåŠ äº†è¶…æ—¶é™åˆ¶ï¼Œæ¯”å¦‚é€šè¿‡ sleepï¼ˆlong millisï¼‰æ–¹æ³•æˆ– waitï¼ˆlong millisï¼‰æ–¹æ³•å¯ä»¥å°† Java çº¿ç¨‹ç½®äºŽ TIMED WAITING çŠ¶æ€ã€‚å½“è¶…æ—¶æ—¶é—´åˆ°è¾¾åŽ Java çº¿ç¨‹å°†ä¼šè¿”å›žåˆ° RUNNABLE çŠ¶æ€ã€‚å½“çº¿ç¨‹è°ƒç”¨åŒæ­¥æ–¹æ³•æ—¶ï¼Œåœ¨æ²¡æœ‰èŽ·å–åˆ°é”çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹å°†ä¼šè¿›å…¥åˆ° BLOCKEDï¼ˆé˜»å¡žï¼‰ çŠ¶æ€ã€‚çº¿ç¨‹åœ¨æ‰§è¡Œ Runnable çš„run()æ–¹æ³•ä¹‹åŽå°†ä¼šè¿›å…¥åˆ° TERMINATEDï¼ˆç»ˆæ­¢ï¼‰ çŠ¶æ€ã€‚ å…³äºŽ final å…³é”®å­—çš„ä¸€äº›æ€»ç»“finalå…³é”®å­—ä¸»è¦ç”¨åœ¨ä¸‰ä¸ªåœ°æ–¹ï¼šå˜é‡ã€æ–¹æ³•ã€ç±»ã€‚ å¯¹äºŽä¸€ä¸ªfinalå˜é‡ï¼Œå¦‚æžœæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹çš„å˜é‡ï¼Œåˆ™å…¶æ•°å€¼ä¸€æ—¦åœ¨åˆå§‹åŒ–ä¹‹åŽä¾¿ä¸èƒ½æ›´æ”¹ï¼›å¦‚æžœæ˜¯å¼•ç”¨ç±»åž‹çš„å˜é‡ï¼Œåˆ™åœ¨å¯¹å…¶åˆå§‹åŒ–ä¹‹åŽä¾¿ä¸èƒ½å†è®©å…¶æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚ å½“ç”¨finalä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¡¨æ˜Žè¿™ä¸ªç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚finalç±»ä¸­çš„æ‰€æœ‰æˆå‘˜æ–¹æ³•éƒ½ä¼šè¢«éšå¼åœ°æŒ‡å®šä¸ºfinalæ–¹æ³•ã€‚ ä½¿ç”¨finalæ–¹æ³•çš„åŽŸå› æœ‰ä¸¤ä¸ªã€‚ç¬¬ä¸€ä¸ªåŽŸå› æ˜¯æŠŠæ–¹æ³•é”å®šï¼Œä»¥é˜²ä»»ä½•ç»§æ‰¿ç±»ä¿®æ”¹å®ƒçš„å«ä¹‰ï¼›ç¬¬äºŒä¸ªåŽŸå› æ˜¯æ•ˆçŽ‡ã€‚åœ¨æ—©æœŸçš„Javaå®žçŽ°ç‰ˆæœ¬ä¸­ï¼Œä¼šå°†finalæ–¹æ³•è½¬ä¸ºå†…åµŒè°ƒç”¨ã€‚ä½†æ˜¯å¦‚æžœæ–¹æ³•è¿‡äºŽåºžå¤§ï¼Œå¯èƒ½çœ‹ä¸åˆ°å†…åµŒè°ƒç”¨å¸¦æ¥çš„ä»»ä½•æ€§èƒ½æå‡ï¼ˆçŽ°åœ¨çš„Javaç‰ˆæœ¬å·²ç»ä¸éœ€è¦ä½¿ç”¨finalæ–¹æ³•è¿›è¡Œè¿™äº›ä¼˜åŒ–äº†ï¼‰ã€‚ç±»ä¸­æ‰€æœ‰çš„privateæ–¹æ³•éƒ½éšå¼åœ°æŒ‡å®šä¸ºfinalã€‚ Java ä¸­çš„å¼‚å¸¸å¤„ç†Javaå¼‚å¸¸ç±»å±‚æ¬¡ç»“æž„å›¾ åœ¨ Java ä¸­ï¼Œæ‰€æœ‰çš„å¼‚å¸¸éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç¥–å…ˆjava.langåŒ…ä¸­çš„ Throwableç±»ã€‚Throwableï¼š æœ‰ä¸¤ä¸ªé‡è¦çš„å­ç±»ï¼šExceptionï¼ˆå¼‚å¸¸ï¼‰ å’Œ Errorï¼ˆé”™è¯¯ï¼‰ ï¼ŒäºŒè€…éƒ½æ˜¯ Java å¼‚å¸¸å¤„ç†çš„é‡è¦å­ç±»ï¼Œå„è‡ªéƒ½åŒ…å«å¤§é‡å­ç±»ã€‚ Errorï¼ˆé”™è¯¯ï¼‰:æ˜¯ç¨‹åºæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œè¡¨ç¤ºè¿è¡Œåº”ç”¨ç¨‹åºä¸­è¾ƒä¸¥é‡é—®é¢˜ã€‚å¤§å¤šæ•°é”™è¯¯ä¸Žä»£ç ç¼–å†™è€…æ‰§è¡Œçš„æ“ä½œæ— å…³ï¼Œè€Œè¡¨ç¤ºä»£ç è¿è¡Œæ—¶ JVMï¼ˆJava è™šæ‹Ÿæœºï¼‰å‡ºçŽ°çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒJavaè™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆVirtual MachineErrorï¼‰ï¼Œå½“ JVM ä¸å†æœ‰ç»§ç»­æ‰§è¡Œæ“ä½œæ‰€éœ€çš„å†…å­˜èµ„æºæ—¶ï¼Œå°†å‡ºçŽ° OutOfMemoryErrorã€‚è¿™äº›å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒJavaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸€èˆ¬ä¼šé€‰æ‹©çº¿ç¨‹ç»ˆæ­¢ã€‚ è¿™äº›é”™è¯¯è¡¨ç¤ºæ•…éšœå‘ç”ŸäºŽè™šæ‹Ÿæœºè‡ªèº«ã€æˆ–è€…å‘ç”Ÿåœ¨è™šæ‹Ÿæœºè¯•å›¾æ‰§è¡Œåº”ç”¨æ—¶ï¼Œå¦‚Javaè™šæ‹Ÿæœºè¿è¡Œé”™è¯¯ï¼ˆVirtual MachineErrorï¼‰ã€ç±»å®šä¹‰é”™è¯¯ï¼ˆNoClassDefFoundErrorï¼‰ç­‰ã€‚è¿™äº›é”™è¯¯æ˜¯ä¸å¯æŸ¥çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨åº”ç”¨ç¨‹åºçš„æŽ§åˆ¶å’Œå¤„ç†èƒ½åŠ›ä¹‹ å¤–ï¼Œè€Œä¸”ç»å¤§å¤šæ•°æ˜¯ç¨‹åºè¿è¡Œæ—¶ä¸å…è®¸å‡ºçŽ°çš„çŠ¶å†µã€‚å¯¹äºŽè®¾è®¡åˆç†çš„åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œå³ä½¿ç¡®å®žå‘ç”Ÿäº†é”™è¯¯ï¼Œæœ¬è´¨ä¸Šä¹Ÿä¸åº”è¯¥è¯•å›¾åŽ»å¤„ç†å®ƒæ‰€å¼•èµ·çš„å¼‚å¸¸çŠ¶å†µã€‚åœ¨ Javaä¸­ï¼Œé”™è¯¯é€šè¿‡Errorçš„å­ç±»æè¿°ã€‚ Exceptionï¼ˆå¼‚å¸¸ï¼‰:æ˜¯ç¨‹åºæœ¬èº«å¯ä»¥å¤„ç†çš„å¼‚å¸¸ã€‚Exception ç±»æœ‰ä¸€ä¸ªé‡è¦çš„å­ç±» RuntimeExceptionã€‚RuntimeException å¼‚å¸¸ç”±Javaè™šæ‹ŸæœºæŠ›å‡ºã€‚NullPointerExceptionï¼ˆè¦è®¿é—®çš„å˜é‡æ²¡æœ‰å¼•ç”¨ä»»ä½•å¯¹è±¡æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ï¼‰ã€ArithmeticExceptionï¼ˆç®—æœ¯è¿ç®—å¼‚å¸¸ï¼Œä¸€ä¸ªæ•´æ•°é™¤ä»¥0æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ï¼‰å’Œ ArrayIndexOutOfBoundsException ï¼ˆä¸‹æ ‡è¶Šç•Œå¼‚å¸¸ï¼‰ã€‚ æ³¨æ„ï¼šå¼‚å¸¸å’Œé”™è¯¯çš„åŒºåˆ«ï¼šå¼‚å¸¸èƒ½è¢«ç¨‹åºæœ¬èº«å¤„ç†ï¼Œé”™è¯¯æ˜¯æ— æ³•å¤„ç†ã€‚ Throwableç±»å¸¸ç”¨æ–¹æ³• public string getMessage():è¿”å›žå¼‚å¸¸å‘ç”Ÿæ—¶çš„ç®€è¦æè¿° public string toString():è¿”å›žå¼‚å¸¸å‘ç”Ÿæ—¶çš„è¯¦ç»†ä¿¡æ¯ public string getLocalizedMessage():è¿”å›žå¼‚å¸¸å¯¹è±¡çš„æœ¬åœ°åŒ–ä¿¡æ¯ã€‚ä½¿ç”¨Throwableçš„å­ç±»è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”Ÿæˆæœ¬åœ°åŒ–ä¿¡æ¯ã€‚å¦‚æžœå­ç±»æ²¡æœ‰è¦†ç›–è¯¥æ–¹æ³•ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›žçš„ä¿¡æ¯ä¸ŽgetMessageï¼ˆï¼‰è¿”å›žçš„ç»“æžœç›¸åŒ public void printStackTrace():åœ¨æŽ§åˆ¶å°ä¸Šæ‰“å°Throwableå¯¹è±¡å°è£…çš„å¼‚å¸¸ä¿¡æ¯ å¼‚å¸¸å¤„ç†æ€»ç»“ try å—ï¼š ç”¨äºŽæ•èŽ·å¼‚å¸¸ã€‚å…¶åŽå¯æŽ¥é›¶ä¸ªæˆ–å¤šä¸ªcatchå—ï¼Œå¦‚æžœæ²¡æœ‰catchå—ï¼Œåˆ™å¿…é¡»è·Ÿä¸€ä¸ªfinallyå—ã€‚ catch å—ï¼š ç”¨äºŽå¤„ç†tryæ•èŽ·åˆ°çš„å¼‚å¸¸ã€‚ finally å—ï¼š æ— è®ºæ˜¯å¦æ•èŽ·æˆ–å¤„ç†å¼‚å¸¸ï¼Œfinallyå—é‡Œçš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚å½“åœ¨tryå—æˆ–catchå—ä¸­é‡åˆ°return è¯­å¥æ—¶ï¼Œfinallyè¯­å¥å—å°†åœ¨æ–¹æ³•è¿”å›žä¹‹å‰è¢«æ‰§è¡Œã€‚ åœ¨ä»¥ä¸‹4ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œfinallyå—ä¸ä¼šè¢«æ‰§è¡Œï¼š åœ¨finallyè¯­å¥å—ç¬¬ä¸€è¡Œå‘ç”Ÿäº†å¼‚å¸¸ã€‚ å› ä¸ºåœ¨å…¶ä»–è¡Œï¼Œfinallyå—è¿˜æ˜¯ä¼šå¾—åˆ°æ‰§è¡Œ åœ¨å‰é¢çš„ä»£ç ä¸­ç”¨äº†System.exit(int)å·²é€€å‡ºç¨‹åºã€‚ exitæ˜¯å¸¦å‚å‡½æ•° ï¼›è‹¥è¯¥è¯­å¥åœ¨å¼‚å¸¸è¯­å¥ä¹‹åŽï¼Œfinallyä¼šæ‰§è¡Œ ç¨‹åºæ‰€åœ¨çš„çº¿ç¨‹æ­»äº¡ã€‚ å…³é—­CPUã€‚ ä¸‹é¢è¿™éƒ¨åˆ†å†…å®¹æ¥è‡ªissue:https://github.com/Snailclimb/JavaGuide/issues/190ã€‚ æ³¨æ„ï¼š å½“tryè¯­å¥å’Œfinallyè¯­å¥ä¸­éƒ½æœ‰returnè¯­å¥æ—¶ï¼Œåœ¨æ–¹æ³•è¿”å›žä¹‹å‰ï¼Œfinallyè¯­å¥çš„å†…å®¹å°†è¢«æ‰§è¡Œï¼Œå¹¶ä¸”finallyè¯­å¥çš„è¿”å›žå€¼å°†ä¼šè¦†ç›–åŽŸå§‹çš„è¿”å›žå€¼ã€‚å¦‚ä¸‹ï¼š 123456789public static int f(int value) &#123; try &#123; return value * value; &#125; finally &#123; if (value == 2) &#123; return 0; &#125; &#125;&#125; å¦‚æžœè°ƒç”¨ f(2)ï¼Œè¿”å›žå€¼å°†æ˜¯0ï¼Œå› ä¸ºfinallyè¯­å¥çš„è¿”å›žå€¼è¦†ç›–äº†tryè¯­å¥å—çš„è¿”å›žå€¼ã€‚ Javaåºåˆ—åŒ–ä¸­å¦‚æžœæœ‰äº›å­—æ®µä¸æƒ³è¿›è¡Œåºåˆ—åŒ–ï¼Œæ€Žä¹ˆåŠžå¯¹äºŽä¸æƒ³è¿›è¡Œåºåˆ—åŒ–çš„å˜é‡ï¼Œä½¿ç”¨transientå…³é”®å­—ä¿®é¥°ã€‚ transientå…³é”®å­—çš„ä½œç”¨æ˜¯ï¼šé˜»æ­¢å®žä¾‹ä¸­é‚£äº›ç”¨æ­¤å…³é”®å­—ä¿®é¥°çš„çš„å˜é‡åºåˆ—åŒ–ï¼›å½“å¯¹è±¡è¢«ååºåˆ—åŒ–æ—¶ï¼Œè¢«transientä¿®é¥°çš„å˜é‡å€¼ä¸ä¼šè¢«æŒä¹…åŒ–å’Œæ¢å¤ã€‚transientåªèƒ½ä¿®é¥°å˜é‡ï¼Œä¸èƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ã€‚ Java ä¸­ IO æµJava ä¸­ IO æµåˆ†ä¸ºå‡ ç§? æŒ‰ç…§æµçš„æµå‘åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼› æŒ‰ç…§æ“ä½œå•å…ƒåˆ’åˆ†ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼› æŒ‰ç…§æµçš„è§’è‰²åˆ’åˆ†ä¸ºèŠ‚ç‚¹æµå’Œå¤„ç†æµã€‚ Java Ioæµå…±æ¶‰åŠ40å¤šä¸ªç±»ï¼Œè¿™äº›ç±»çœ‹ä¸ŠåŽ»å¾ˆæ‚ä¹±ï¼Œä½†å®žé™…ä¸Šå¾ˆæœ‰è§„åˆ™ï¼Œè€Œä¸”å½¼æ­¤ä¹‹é—´å­˜åœ¨éžå¸¸ç´§å¯†çš„è”ç³»ï¼Œ Java I0æµçš„40å¤šä¸ªç±»éƒ½æ˜¯ä»Žå¦‚ä¸‹4ä¸ªæŠ½è±¡ç±»åŸºç±»ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ã€‚ InputStream/Reader: æ‰€æœ‰çš„è¾“å…¥æµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å…¥æµï¼ŒåŽè€…æ˜¯å­—ç¬¦è¾“å…¥æµã€‚ OutputStream/Writer: æ‰€æœ‰è¾“å‡ºæµçš„åŸºç±»ï¼Œå‰è€…æ˜¯å­—èŠ‚è¾“å‡ºæµï¼ŒåŽè€…æ˜¯å­—ç¬¦è¾“å‡ºæµã€‚ æŒ‰æ“ä½œæ–¹å¼åˆ†ç±»ç»“æž„å›¾ï¼š æŒ‰æ“ä½œå¯¹è±¡åˆ†ç±»ç»“æž„å›¾ï¼š æ—¢ç„¶æœ‰äº†å­—èŠ‚æµ,ä¸ºä»€ä¹ˆè¿˜è¦æœ‰å­—ç¬¦æµ?é—®é¢˜æœ¬è´¨æƒ³é—®ï¼šä¸ç®¡æ˜¯æ–‡ä»¶è¯»å†™è¿˜æ˜¯ç½‘ç»œå‘é€æŽ¥æ”¶ï¼Œä¿¡æ¯çš„æœ€å°å­˜å‚¨å•å…ƒéƒ½æ˜¯å­—èŠ‚ï¼Œé‚£ä¸ºä»€ä¹ˆ I/O æµæ“ä½œè¦åˆ†ä¸ºå­—èŠ‚æµæ“ä½œå’Œå­—ç¬¦æµæ“ä½œå‘¢ï¼Ÿ å›žç­”ï¼šå­—ç¬¦æµæ˜¯ç”± Java è™šæ‹Ÿæœºå°†å­—èŠ‚è½¬æ¢å¾—åˆ°çš„ï¼Œé—®é¢˜å°±å‡ºåœ¨è¿™ä¸ªè¿‡ç¨‹è¿˜ç®—æ˜¯éžå¸¸è€—æ—¶ï¼Œå¹¶ä¸”ï¼Œå¦‚æžœæˆ‘ä»¬ä¸çŸ¥é“ç¼–ç ç±»åž‹å°±å¾ˆå®¹æ˜“å‡ºçŽ°ä¹±ç é—®é¢˜ã€‚æ‰€ä»¥ï¼Œ I/O æµå°±å¹²è„†æä¾›äº†ä¸€ä¸ªç›´æŽ¥æ“ä½œå­—ç¬¦çš„æŽ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¹³æ—¶å¯¹å­—ç¬¦è¿›è¡Œæµæ“ä½œã€‚å¦‚æžœéŸ³é¢‘æ–‡ä»¶ã€å›¾ç‰‡ç­‰åª’ä½“æ–‡ä»¶ç”¨å­—èŠ‚æµæ¯”è¾ƒå¥½ï¼Œå¦‚æžœæ¶‰åŠåˆ°å­—ç¬¦çš„è¯ä½¿ç”¨å­—ç¬¦æµæ¯”è¾ƒå¥½ã€‚ BIO,NIO,AIO æœ‰ä»€ä¹ˆåŒºåˆ«? BIO (Blocking I/O): åŒæ­¥é˜»å¡žI/Oæ¨¡å¼ï¼Œæ•°æ®çš„è¯»å–å†™å…¥å¿…é¡»é˜»å¡žåœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆã€‚åœ¨æ´»åŠ¨è¿žæŽ¥æ•°ä¸æ˜¯ç‰¹åˆ«é«˜ï¼ˆå°äºŽå•æœº1000ï¼‰çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ¨¡åž‹æ˜¯æ¯”è¾ƒä¸é”™çš„ï¼Œå¯ä»¥è®©æ¯ä¸€ä¸ªè¿žæŽ¥ä¸“æ³¨äºŽè‡ªå·±çš„ I/O å¹¶ä¸”ç¼–ç¨‹æ¨¡åž‹ç®€å•ï¼Œä¹Ÿä¸ç”¨è¿‡å¤šè€ƒè™‘ç³»ç»Ÿçš„è¿‡è½½ã€é™æµç­‰é—®é¢˜ã€‚çº¿ç¨‹æ± æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤©ç„¶çš„æ¼æ–—ï¼Œå¯ä»¥ç¼“å†²ä¸€äº›ç³»ç»Ÿå¤„ç†ä¸äº†çš„è¿žæŽ¥æˆ–è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œå½“é¢å¯¹åä¸‡ç”šè‡³ç™¾ä¸‡çº§è¿žæŽ¥çš„æ—¶å€™ï¼Œä¼ ç»Ÿçš„ BIO æ¨¡åž‹æ˜¯æ— èƒ½ä¸ºåŠ›çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´é«˜æ•ˆçš„ I/O å¤„ç†æ¨¡åž‹æ¥åº”å¯¹æ›´é«˜çš„å¹¶å‘é‡ã€‚ NIO (New I/O): NIOæ˜¯ä¸€ç§åŒæ­¥éžé˜»å¡žçš„I/Oæ¨¡åž‹ï¼Œåœ¨Java 1.4 ä¸­å¼•å…¥äº†NIOæ¡†æž¶ï¼Œå¯¹åº” java.nio åŒ…ï¼Œæä¾›äº† Channel , Selectorï¼ŒBufferç­‰æŠ½è±¡ã€‚NIOä¸­çš„Nå¯ä»¥ç†è§£ä¸ºNon-blockingï¼Œä¸å•çº¯æ˜¯Newã€‚å®ƒæ”¯æŒé¢å‘ç¼“å†²çš„ï¼ŒåŸºäºŽé€šé“çš„I/Oæ“ä½œæ–¹æ³•ã€‚ NIOæä¾›äº†ä¸Žä¼ ç»ŸBIOæ¨¡åž‹ä¸­çš„ Socket å’Œ ServerSocket ç›¸å¯¹åº”çš„ SocketChannel å’Œ ServerSocketChannel ä¸¤ç§ä¸åŒçš„å¥—æŽ¥å­—é€šé“å®žçŽ°,ä¸¤ç§é€šé“éƒ½æ”¯æŒé˜»å¡žå’Œéžé˜»å¡žä¸¤ç§æ¨¡å¼ã€‚é˜»å¡žæ¨¡å¼ä½¿ç”¨å°±åƒä¼ ç»Ÿä¸­çš„æ”¯æŒä¸€æ ·ï¼Œæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æ€§èƒ½å’Œå¯é æ€§éƒ½ä¸å¥½ï¼›éžé˜»å¡žæ¨¡å¼æ­£å¥½ä¸Žä¹‹ç›¸åã€‚å¯¹äºŽä½Žè´Ÿè½½ã€ä½Žå¹¶å‘çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥é˜»å¡žI/Oæ¥æå‡å¼€å‘é€ŸçŽ‡å’Œæ›´å¥½çš„ç»´æŠ¤æ€§ï¼›å¯¹äºŽé«˜è´Ÿè½½ã€é«˜å¹¶å‘çš„ï¼ˆç½‘ç»œï¼‰åº”ç”¨ï¼Œåº”ä½¿ç”¨ NIO çš„éžé˜»å¡žæ¨¡å¼æ¥å¼€å‘ AIO (Asynchronous I/O): AIO ä¹Ÿå°±æ˜¯ NIO 2ã€‚åœ¨ Java 7 ä¸­å¼•å…¥äº† NIO çš„æ”¹è¿›ç‰ˆ NIO 2,å®ƒæ˜¯å¼‚æ­¥éžé˜»å¡žçš„IOæ¨¡åž‹ã€‚å¼‚æ­¥ IO æ˜¯åŸºäºŽäº‹ä»¶å’Œå›žè°ƒæœºåˆ¶å®žçŽ°çš„ï¼Œä¹Ÿå°±æ˜¯åº”ç”¨æ“ä½œä¹‹åŽä¼šç›´æŽ¥è¿”å›žï¼Œä¸ä¼šå µå¡žåœ¨é‚£é‡Œï¼Œå½“åŽå°å¤„ç†å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¼šé€šçŸ¥ç›¸åº”çš„çº¿ç¨‹è¿›è¡ŒåŽç»­çš„æ“ä½œã€‚AIO æ˜¯å¼‚æ­¥IOçš„ç¼©å†™ï¼Œè™½ç„¶ NIO åœ¨ç½‘ç»œæ“ä½œä¸­ï¼Œæä¾›äº†éžé˜»å¡žçš„æ–¹æ³•ï¼Œä½†æ˜¯ NIO çš„ IO è¡Œä¸ºè¿˜æ˜¯åŒæ­¥çš„ã€‚å¯¹äºŽ NIO æ¥è¯´ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡çº¿ç¨‹æ˜¯åœ¨ IO æ“ä½œå‡†å¤‡å¥½æ—¶ï¼Œå¾—åˆ°é€šçŸ¥ï¼ŒæŽ¥ç€å°±ç”±è¿™ä¸ªçº¿ç¨‹è‡ªè¡Œè¿›è¡Œ IO æ“ä½œï¼ŒIOæ“ä½œæœ¬èº«æ˜¯åŒæ­¥çš„ã€‚æŸ¥é˜…ç½‘ä¸Šç›¸å…³èµ„æ–™ï¼Œæˆ‘å‘çŽ°å°±ç›®å‰æ¥è¯´ AIO çš„åº”ç”¨è¿˜ä¸æ˜¯å¾ˆå¹¿æ³›ï¼ŒNetty ä¹‹å‰ä¹Ÿå°è¯•ä½¿ç”¨è¿‡ AIOï¼Œä¸è¿‡åˆæ”¾å¼ƒäº†ã€‚ å¸¸è§å…³é”®å­—æ€»ç»“:static,final,this,superè¯¦è§ç¬”ä¸»çš„è¿™ç¯‡æ–‡ç« : final,static,this,super å…³é”®å­—æ€»ç»“ Collections å·¥å…·ç±»å’Œ Arrays å·¥å…·ç±»å¸¸è§æ–¹æ³•æ€»ç»“ Collections å·¥å…·ç±»å’Œ Arrays å·¥å…·ç±»å¸¸è§æ–¹æ³•]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç§»åŠ¨ç«¯çœŸæœºè°ƒè¯•æŒ‡å—]]></title>
      <url>%2F2019%2F10%2F29%2F%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95%E6%8C%87%E5%8D%97%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åå…«ç¯‡åŽŸåˆ›æ–‡ç«  å„ç§æŠ“åŒ…æ–¹æ³• (à¹‘â€¢ . â€¢à¹‘) ç³»ç»Ÿè‡ªå¸¦è°ƒè¯•åŠŸèƒ½iOS ç³»ç»Ÿè¿è¡ŒçŽ¯å¢ƒè¦æ±‚ Mac + Safari æµè§ˆå™¨ iPhoneï¼ˆiOS 6 +ï¼‰ + Safari æµè§ˆå™¨ è°ƒè¯•æ­¥éª¤ 1ã€ä½¿ç”¨ Lightning æ•°æ®çº¿å°† iPhone ä¸Ž Mac ç›¸è¿ž 2ã€iPhone å¼€å¯ Web æ£€æŸ¥å™¨ï¼ˆè®¾ç½® -&gt; Safari -&gt; é«˜çº§ -&gt; å¼€å¯ Web æ£€æŸ¥å™¨ï¼‰ 3ã€iPhone ä½¿ç”¨ Safari æµè§ˆå™¨æ‰“å¼€è¦è°ƒè¯•çš„é¡µé¢ 4ã€Mac æ‰“å¼€ Safari æµè§ˆå™¨è°ƒè¯•ï¼ˆèœå•æ  â€”&gt; å¼€å‘ -&gt; iPhone è®¾å¤‡å -&gt; é€‰æ‹©è°ƒè¯•é¡µé¢ï¼‰ å¦‚æžœä½ çš„èœå•æ æ²¡æœ‰â€œå¼€å‘â€é€‰é¡¹ï¼Œå¯ä»¥åˆ°å·¦ä¸Šè§’ Safari -&gt; åå¥½è®¾ç½® -&gt; é«˜çº§ -&gt; åœ¨èœå•æ ä¸­æ˜¾ç¤ºâ€œå¼€å‘â€èœå•ã€‚ 5ã€åœ¨å¼¹å‡ºçš„ Safari Developer Tools ä¸­è°ƒè¯• ç»è¿‡å¦‚ä¸Šæ­¥éª¤å°±å¯åœ¨ Mac ç«¯è°ƒè¯• iPhone ä¸Š Safari è¿è¡Œçš„é¡µé¢äº†ï¼Œä½†å¯¹äºŽ WebView é¡µé¢å°±ä¸é€‚ç”¨äº†ï¼Œå¦å¤– Windows ç³»ç»Ÿä¸é€‚ç”¨æ­¤æ–¹æ¡ˆã€‚ å½“å‰æµ‹è¯•çŽ¯å¢ƒï¼š Safari ç‰ˆæœ¬ 10.0.2 iPhone 7ï¼ˆiOS 10.1.1ï¼‰ æ²¡æœ‰ iPhone è®¾å¤‡å¯ä»¥åœ¨ App Store å®‰è£… Xcode ä½¿ç”¨å…¶å†…ç½®çš„ iOS æ¨¡æ‹Ÿå™¨ï¼Œå®‰è£…å®ŒæˆåŽé€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¼€å¯ï¼š å³é”® Xcode å›¾æ ‡ -&gt; Open Developer Tool -&gt; Simulator å³é”® Finder å›¾æ ‡ -&gt; å‰å¾€æ–‡ä»¶å¤¹ -&gt; /åº”ç”¨ç¨‹åº/Xcode.app/Contents/Developer/Applications/ -&gt; è¿è¡Œ Simulator.app è¿è¡Œ iOS æ¨¡æ‹Ÿå™¨åŽï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€è°ƒè¯•é¡µé¢ï¼Œå†é€šè¿‡ Mac Safari å¼€å‘åŠŸèƒ½å°±å¯ä»¥è°ƒè¯•åˆ°ã€‚ å¦‚æžœæˆ‘éœ€è¦è°ƒè¯•æ›´ä½Žç‰ˆæœ¬çš„ iOS æ€Žä¹ˆåŠžï¼Ÿå®žé™…ä½¿ç”¨çš„ iPhone ä¸å¯èƒ½åŽ»é™ç‰ˆæœ¬ï¼Œä¸å¿…æ‹…å¿ƒï¼ŒSimulator æœ‰ã€‚ ç‚¹å‡»å·¦ä¸Šè§’ Xcode -&gt; Preferences -&gt; Downloads å°±å¯ä»¥çœ‹åˆ°æä¾›äº†å¦‚ä¸‹ç‰ˆæœ¬ï¼š Android ç³»ç»Ÿè¿è¡ŒçŽ¯å¢ƒè¦æ±‚ Chrome ç‰ˆæœ¬ &gt;= 32 Android ç‰ˆæœ¬ 4.0 + è°ƒè¯•æ­¥éª¤ ä½¿ç”¨ USB æ•°æ®çº¿å°†æ‰‹æœºä¸Žç”µè„‘ç›¸è¿ž æ‰‹æœºè¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œå‹¾é€‰ USB è°ƒè¯•ï¼Œå¹¶å…è®¸è°ƒè¯• å¦‚ä½•å¼€å¯ USB è°ƒè¯•ï¼šç´¢å°¼ Z5ï¼šè®¾ç½® -&gt; å…³äºŽå…³æœº -&gt; å¤šæ¬¡ç‚¹å‡»è½¯ä»¶ç‰ˆæœ¬å¼€å¯ -&gt; è¿”å›žä¸Šä¸€çº§ -&gt; å¼€å‘è€…é€‰é¡¹ -&gt; USB è°ƒè¯• é­…è“ Noteï¼šè®¾ç½® -&gt; è¾…åŠ©åŠŸèƒ½ -&gt; å¼€å‘è€…é€‰é¡¹ -&gt; USB è°ƒè¯• ä¸åŒ Android è®¾å¤‡è¿›å…¥å¼€å‘è€…æ¨¡å¼çš„æ–¹å¼æœ‰ç¨ç¨ä¸åŒï¼ŒçžŽæ£é¼“ä¸€ä¸‹å³å¯å¼€å¯ã€‚ ç”µè„‘æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ï¼šchrome://inspect/#devices å¹¶å‹¾é€‰ Discover USB devices é€‰é¡¹ æ‰‹æœºå…è®¸è¿œç¨‹è°ƒè¯•ï¼Œå¹¶è®¿é—®è°ƒè¯•é¡µé¢ å®˜æ–¹çš„æ•™ç¨‹æ˜¯æƒ³è®©ä½ ä½¿ç”¨æ‰‹æœº Chrome å¼€å¯è°ƒè¯•é¡µé¢çš„ï¼Œä½†å®žé™…éœ€æ±‚æ›´å¤šçš„æ˜¯è°ƒè¯•ä¸€äº› WebView é¡µé¢ï¼Œåœ¨å®˜æ–¹çš„ Remote Debugging WebViews æœ‰è¯´æ˜Žæ˜¯å¯ä»¥è°ƒè¯• WebView é¡µé¢çš„ï¼ŒAndroid ç‰ˆæœ¬éœ€è¦åœ¨ 4.4 ä»¥ä¸Šï¼Œå¹¶ä¸” APP éœ€è¦æœ‰é…ç½®ç›¸åº”çš„å¯åŠ¨è°ƒè¯•ä»£ç ã€‚ WebView debugging must be enabled from within your application. To enable WebView debugging, call the static method setWebContentsDebuggingEnabled on the WebView class. å¿…é¡»åœ¨ APP å†…å¯åŠ¨ WebView è°ƒè¯•ã€‚è¦å¯åŠ¨ WebView è°ƒè¯•ï¼Œéœ€è¦è°ƒç”¨ WebView ç±»ä¸Šçš„é™æ€æ–¹æ³• setWebContentsDebuggingEnabledã€‚ 123if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123; WebView.setWebContentsDebuggingEnabled(true);&#125; This setting applies to all of the applicationâ€™s WebViews. æ­¤è®¾ç½®é€‚ç”¨äºŽæ‰€æœ‰ APP çš„ WebViewã€‚ Tip: WebView debugging is not affected by the state of the debuggable flag in the applicationâ€™s manifest. If you want to enable WebView debugging only when debuggable is true, test the flag at runtime. æç¤ºï¼šWebView æ˜¯å¦å¯è°ƒè¯•çŠ¶æ€ä¸å— mainfest æ ‡å¿—å˜é‡ debuggable çš„å½±å“ï¼Œå¦‚æžœä½ æƒ³åœ¨ debuggable ä¸º true çš„æ—¶å€™å¯åŠ¨ WebView è°ƒè¯•ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š 12345if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123; if (0 != (getApplicationInfo().flags &amp; ApplicationInfo.FLAG_DEBUGGABLE)) &#123; WebView.setWebContentsDebuggingEnabled(true); &#125;&#125; ç”µè„‘ç‚¹å‡» inspect æŒ‰é’® å¦‚æžœä½ å‡ºçŽ°æ— æ³•è¯†åˆ«åˆ°è®¾å¤‡çš„æƒ…å†µï¼Œå»ºè®®å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š ä½¿ç”¨åŽŸè£…æ•°æ®çº¿ï¼Œä¸è¦ä½¿ç”¨å±±å¯¨æ•°æ®çº¿æˆ–ä¸€çº¿å¤šå¤´çš„æ•°æ®çº¿ é‡æ–°æ’æ‹” USB æ•°æ®çº¿ï¼Œè®©æ‰‹æœºå¤„äºŽå……ç”µçŠ¶æ€ å…³é—­ç”µè„‘ç›¸å…³çš„åº”ç”¨åŠ©æ‰‹ é‡å¯æ‰‹æœº Windows ç³»ç»Ÿä¸‹è‡ªåŠ¨å®‰è£…é©±åŠ¨å¤±è´¥ï¼Œåˆ° Android Studio æ‰‹åŠ¨ä¸‹è½½ æ³¨æ„ï¼šä½¿ç”¨ Chrome Inspect æŸ¥çœ‹é¡µé¢æ—¶ï¼ŒChrome éœ€è¦ä»Ž https://chrome-devtools-frontend.appspot.com åŠ è½½èµ„æºï¼Œå¦‚æžœä½ å¾—åˆ°çš„è°ƒè¯•ç•Œé¢æ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œé‚£ä½ å¯èƒ½éœ€è¦ç§‘å­¦ä¸Šç½‘ã€‚ è¿›å…¥è°ƒè¯•ç•Œé¢ å½“å‰æµ‹è¯•çŽ¯å¢ƒï¼š Chrome ç‰ˆæœ¬ 55.0.2883.95 ç´¢å°¼ Z5ï¼ˆAndroid 5.1.1ï¼‰ é­…è“ Noteï¼ˆAndroid 5.1ï¼‰ ä¸‰æ˜Ÿ Galaxy S7ï¼ˆAndroid 6.0.1ï¼‰ è¿™é‡Œé¡ºå¸¦æä¸€ä¸‹ TBS Studio è°ƒè¯•å·¥å…·ï¼Œå®ƒåœ¨ Chrome DevTools è°ƒè¯•åŠŸèƒ½çš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¸€äº›åŠŸèƒ½æ‰©å±•ï¼Œç‰¹æ€§å¦‚ä¸‹ï¼š 1.3 TBS Studio åŠŸèƒ½ç‰¹æ€§ è‡ªåŠ¨æ£€æµ‹æ‰‹æœºä¸Ž PC çš„è¿žæŽ¥ï¼› è‡ªåŠ¨æ£€æµ‹ç½‘é¡µæ˜¯å¦å¯è¿›è¡Œ Inspect è°ƒè¯•ï¼› è‡ªåŠ¨å¼•å¯¼å¼€å‘è€…æ‰“å¼€ Inspector è°ƒè¯•å¼€å…³ï¼› ä¸€é”®å¼€å¯ Inspector è°ƒè¯•ï¼Œæ— éœ€æ‰“å¼€æµè§ˆå™¨è¾“å…¥ URLï¼Œæ–¹ä¾¿å¿«æ·ï¼› æ‰©å±• X5 å†…æ ¸ç‹¬æœ‰ Inspect é€‰é¡¹ï¼Œæ–¹ä¾¿é¡µé¢åˆ†æžå’Œä¼˜åŒ–ï¼› çœŸæœºè¿œç¨‹ Inspector è°ƒè¯•ã€‚ è¯¦ç»†ä»‹ç»å’Œä½¿ç”¨æ­¥éª¤å¯åˆ°å¼€å‘è€…è®ºå›æŸ¥çœ‹ï¼Œéƒ¨åˆ† Android æœºåž‹é€šè¿‡ USB å¯èƒ½ä¾æ—§æ— æ³•è¯†åˆ«åˆ°è®¾å¤‡ï¼Œå¯ä½¿ç”¨åŽé¢ä¼šè®²åˆ°çš„å…¶ä»–æ–¹æ¡ˆã€‚ å…³äºŽ Android è™šæ‹Ÿæœºä¹Ÿæ˜¯æœ‰çš„ï¼Œè¿™é‡ŒæŽ¨èä½¿ç”¨ Genymotion è½¯ä»¶ï¼Œä½¿ç”¨ Genymotion å‰éœ€è¦å®‰è£… VirtuaBoxï¼Œå¹¶ä¸”æ³¨å†Œç™»é™†åŽæ‰èƒ½æ˜¾ç¤ºæ‰€æœ‰çš„è™šæ‹Ÿè®¾å¤‡ã€‚ ä½¿ç”¨ä»£ç†å·¥å…·è°ƒè¯•å¼€å‘çŽ¯å¢ƒé¡µé¢å¯¹äºŽéœ€è¦é… Hosts æ‰èƒ½è®¿é—®çš„å¼€å‘çŽ¯å¢ƒé¡µé¢ï¼Œæ‰‹æœºåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æƒé™ä¿®æ”¹ Hosts æ–‡ä»¶çš„ï¼Œé™¤éžæ˜¯ iOS è®¾å¤‡è¶Šç‹±åŽå’Œ Android è®¾å¤‡ root åŽï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æ‰‹æœºæ˜¯æ— æ³•è®¿é—®å¼€å‘çŽ¯å¢ƒé¡µé¢ï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨åˆ° Mac ç³»ç»Ÿçš„ Charles ä»£ç†å·¥å…·ï¼ŒWindows ç³»ç»Ÿå¯ä½¿ç”¨ Fiddler ä»£ç†å·¥å…·ã€‚ å®žçŽ°æ€è·¯ Mac ä½œä¸ºä»£ç†æœåŠ¡å™¨ æ‰‹æœºé€šè¿‡ HTTP ä»£ç†è¿žæŽ¥åˆ° Mac ç”µè„‘ æ‰‹æœºä¸Šçš„è¯·æ±‚éƒ½ç»è¿‡ä»£ç†æœåŠ¡å™¨ é€šè¿‡ç»™ Mac é… Hosts å®žçŽ°ç›®çš„ è°ƒè¯•æ­¥éª¤ æŸ¥çœ‹ç”µè„‘ IPï¼ˆèœå• -&gt; Help -&gt; Local IP Addressesï¼‰ æŸ¥çœ‹ç«¯å£ï¼ˆèœå• -&gt; Settings -&gt; Proxy Settings -&gt; Proxiesï¼‰ é»˜è®¤ç«¯å£ä¸ºï¼š8888ï¼Œå‹¾é€‰ Enable transparent HTTP proxying å°† IPã€ç«¯å£å·å¡«å…¥æ‰‹æœº HTTP ä»£ç† iOS ç³»ç»Ÿï¼šè®¾ç½® -&gt; æ— çº¿å±€åŸŸç½‘ -&gt; ç‚¹å‡»å¹å· -&gt; HTTP ä»£ç† -&gt; æ‰‹åŠ¨ Android ç³»ç»Ÿï¼šè®¾ç½® -&gt; é•¿æŒ‰å½“å‰ç½‘ç»œ -&gt; ä¿®æ”¹ç½‘ç»œ -&gt; é«˜çº§é€‰é¡¹ -&gt; æ‰‹åŠ¨ Charles å…è®¸æŽˆæƒ æ¯æ¬¡æœ‰æ–°è®¾å¤‡é¦–æ¬¡è¿žæŽ¥éƒ½ä¼šæç¤ºæ˜¯å¦æŽˆæƒï¼Œå¯ä»¥é€šè¿‡ Proxy -&gt; Access Control Settings é…ç½®ä»¥ä¸‹å‚æ•° 0.0.0.0/0 æ¥å…³é—­ã€‚ ä½¿ç”¨ SwitchHosts! è½¯ä»¶ç»™ Mac ç”µè„‘é… Hosts æ‰‹æœºè®¿é—®å¼€å‘çŽ¯å¢ƒé¡µé¢ åˆ°è¿™ä¸€æ­¥æ‰‹æœºå°±å¯ä»¥è®¿é—®åˆ°å¼€å‘çŽ¯å¢ƒä¸‹çš„é¡µé¢äº†ï¼Œå†ç»“åˆå‰é¢æ‰€è®²çš„æ–¹æ¡ˆæ¥è°ƒè¯•é¡µé¢ã€‚ Charles çš„è°ƒè¯•åŠŸèƒ½ 7.1 ç½‘ç»œæ˜ å°„ä¿®æ”¹æ–‡ä»¶ é™¤äº†ç»“åˆå‰é¢çš„æ–¹æ¡ˆè°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨ Map Local ç½‘ç»œæ˜ å°„åŠŸèƒ½æ¥å®žçŽ°å¯¹æ–‡ä»¶çš„ä¿®æ”¹ï¼Œåœ¨èœå• -&gt; Proxy -&gt; Start Recording å¼€å¯æŠ“åŒ…åŽè®¿é—®é¡µé¢ï¼Œæ‰¾åˆ°æŠ“å–åˆ°çš„æ ·å¼æ–‡ä»¶ï¼Œç‚¹å‡»å³é”® Map Localï¼Œåœ¨ Local path ä¸­è®¾ç½®æœ¬åœ°æ˜ å°„æ–‡ä»¶çš„è·¯å¾„ï¼Œä¿®æ”¹åŽåˆ·æ–°é¡µé¢å¯ä»¥çœ‹åˆ°æ•ˆæžœã€‚ 7.2 æ¨¡æ‹Ÿç½‘ç»œé€Ÿåº¦ èœå• -&gt; Proxy -&gt; Throttle Settings -&gt; å‹¾é€‰ Enable Throttlingï¼Œåœ¨ Throttling preset ä¸­å¯ä»¥é€‰æ‹©éœ€è¦æ¨¡æ‹Ÿçš„ç½‘ç»œé€Ÿåº¦ã€‚ 7.3 æŠ“å– HTTPS è¯·æ±‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒCharles æ— æ³•æŠ“å–åˆ° HTTPS çš„è¯·æ±‚ï¼Œè§£å†³æ­¥éª¤å¦‚ä¸‹ï¼š Mac ç«¯å®‰è£…è¯ä¹¦ï¼šèœå• -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate ç„¶åŽå¯¼å‡º Charles SSL è¯ä¹¦å®‰è£…åˆ°æ‰‹æœºï¼Œèœå• -&gt; Help -&gt; SSL Proxying -&gt; Save Charles Root Certificate Android è®¾å¤‡å¯¼å‡ºçš„ Charles SSL è¯ä¹¦å­˜å‚¨åˆ°æ‰‹æœºä¸­å¹¶å®‰è£…ã€‚ iOS è®¾å¤‡ç”¨ Safari æ‰“å¼€ http://www.charlesproxy.com/getssl/ é¡µé¢ï¼Œä¸‹è½½ Charles SSL è¯ä¹¦å¹¶å®‰è£…ã€‚ è¯ä¹¦å®‰è£…å®ŒæˆåŽï¼Œè¿˜éœ€è¦ç»™ Charles SSL ä»£ç†é…ç½®åŸŸåå’Œç«¯å£å·ï¼Œèœå• -&gt; Proxy -&gt; SSL Proxying Settings å‹¾é€‰ Enable SSL Proxying ç‚¹å‡» Add å¡«å…¥åŸŸåå’Œç«¯å£å·ï¼Œç»è¿‡ä»¥ä¸Šæ­¥éª¤å°±å¯ä»¥æŠ“å–åˆ° HTTPS çš„è¯·æ±‚äº†ã€‚ 7.4 æ–­ç‚¹è°ƒè¯•è¯·æ±‚å’Œå“åº”å†…å®¹ å¼€å¯ Charles æ–­ç‚¹ Proxy -&gt; Breakpoints Settings -&gt; Enable Breakpointsç‚¹å‡» Add å¯è®¾ç½®æ–­ç‚¹æ¡ä»¶æˆ–è€…å•ç‹¬å¯¹éœ€è¦çš„æ–‡ä»¶å³é”® Breakpoints è®¾ç½®æ–­ç‚¹ã€‚ è®¿é—®é¡µé¢åŽï¼Œå³å¯ç¼–è¾‘è¯·æ±‚å’Œå“åº”çš„å†…å®¹ï¼Œç‚¹å‡» Execute æŒ‰é’®å®Œæˆã€‚ Weinre è°ƒè¯•å·¥å…·Weinre æ˜¯ä¸€æ¬¾è¾ƒè€çš„è¿œç¨‹è°ƒè¯•å·¥å…·ï¼ŒåŠŸèƒ½ä¸Ž Chrome DevTools ç›¸ä¼¼ï¼Œéœ€è¦åœ¨é¡µé¢ä¸­æ’å…¥ä¸€æ®µ JS è„šæœ¬æ¥å®žæ—¶è°ƒè¯•é¡µé¢ DOM ç»“æž„ã€æ ·å¼ã€JS ç­‰ï¼Œå¦å¤–å®ƒä½¿ç”¨çš„æ˜¯ä»£ç†çš„æ–¹å¼ï¼Œæ‰€ä»¥å…¼å®¹æ€§å¾ˆå¥½ï¼Œæ— è®ºæ˜¯æ–°è€è®¾å¤‡ç³»ç»Ÿé€šåƒï¼Œä½†å¯¹äºŽæ ·å¼è°ƒè¯•ä¸å‹å–„ï¼Œç¼ºå°‘æ–­ç‚¹è°ƒè¯•åŠ Profiles ç­‰å¸¸ç”¨åŠŸèƒ½ã€‚ è°ƒè¯•æ­¥éª¤ï¼š 1ã€å®‰è£… Weinre ä½¿ç”¨ NPM å…¨å±€å®‰è£… Weinre 1$ sudo npm -g install weinre 2ã€å¯åŠ¨ Weinre ç›‘å¬æœåŠ¡ 12$ ipconfig getifaddr en0 // æŸ¥çœ‹æœ¬æœº IP$ weinre --boundHost 10.14.217.14 --httpPort 8090 --boundHost åŽå¡«å…¥ä½ æœ¬æœº IP åœ°å€ï¼Œ--httpPort åŽå¡«å…¥ç«¯å£å·ï¼Œé»˜è®¤ä¸º 8080 3ã€è¿›å…¥ Weinre ç®¡ç†é¡µé¢ ä½¿ç”¨ Chrome æµè§ˆå™¨è®¿é—® http://10.14.217.14:8090ï¼Œåœ¨ç®¡ç†é¡µé¢ä½ å¯ä»¥çœ‹åˆ°ä½¿ç”¨ç›¸å…³çš„è¯´æ˜Žï¼Œæœ‰è¿›å…¥å®¢æˆ·ç«¯è°ƒè¯•ç•Œé¢çš„åœ°å€ã€ä½¿ç”¨çš„æ–‡æ¡£ã€DEMO é¡µé¢ç­‰ç­‰ï¼Œè¯´æ˜Žä¸­è¦æ±‚å°†ä¸€æ®µ JS è„šæœ¬ &lt;script src=&quot;http://10.14.217.14:8090/target/target-script-min.js#anonymous&quot;&gt;&lt;/script&gt; æ’å…¥åˆ°éœ€è¦è°ƒè¯•çš„é¡µé¢ä¸­ï¼Œæ’å…¥ä»£ç åŽæ‰‹æœºè®¿é—®è°ƒè¯•é¡µé¢ã€‚ 4ã€è¿›å…¥å®¢æˆ·ç«¯è°ƒè¯•ç•Œé¢ ç‚¹å‡» debug client user interfaceï¼šhttp://10.14.217.14:8090/client/#anonymous çš„é“¾æŽ¥ã€‚ 5ã€JS è„šæœ¬æ³¨å…¥ æ‰‹åŠ¨åŠ å…¥ JS è„šæœ¬ä¸ä¼˜é›…ï¼Œè¿™é‡Œå¯ä»¥ç»“åˆæˆ‘ä»¬å‰é¢æåˆ°çš„ Charles ä»£ç†å·¥å…·å®žçŽ°åŠ¨æ€ HTTP Script æ³¨å…¥ã€‚ æ‰“å¼€èœå• -&gt; Rewrite -&gt; å‹¾é€‰ Enable Rewrite è¾“å…¥ Rewrite çš„åå­—å¹¶ä¸”åœ¨ Rules ä¸€é¡¹æ·»åŠ åŒ¹é…çš„è§„åˆ™ï¼ŒLocation ä¸€é¡¹æ˜¯ç”¨äºŽæŒ‡å®šçš„åŸŸåå’Œç«¯å£æ·»åŠ è§„åˆ™ç”¨çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å¡«é»˜è®¤åŒ¹é…æ‰€æœ‰è¯·æ±‚ã€‚ Type å…è®¸å¯¹éœ€è¦åŒ¹é…çš„è¯·æ±‚è¿›è¡Œ Rewriteï¼Œä¸€å…±æä¾›äº† 11 ç§ï¼š Add Header Modify Header Remove Header Host Path URL Add Query Param Modify Query Param Remove Query Param Response Status Body è¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°çš„æ˜¯ Bodyï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹è¯·æ±‚æˆ–å“åº”å†…å®¹è¿›è¡ŒåŒ¹é…æ›¿æ¢ï¼ŒæŒ‰ç…§ä¸‹å›¾çš„é…ç½®ï¼Œé€šè¿‡å°†åŒ¹é…åˆ°çš„å“åº”å†…å®¹ &lt;/body&gt; æ ‡ç­¾æ›¿æ¢æˆéœ€è¦æ’å…¥åˆ°é¡µé¢ä¸­çš„ JS è„šæœ¬ï¼Œä»Žè€Œå®žçŽ°åŠ¨æ€æ’å…¥ã€‚ å¦å¤–ï¼Œä¹Ÿæœ‰åŸºäºŽ Weinre è¿›è¡ŒåŠŸèƒ½æ‰©å±•çš„å·¥å…·ï¼Œæ¯”å¦‚æ—©æœŸç‰ˆæœ¬çš„ å¾®ä¿¡ Web å¼€å‘è€…å·¥å…· v0.7.0 å’Œ spy-debuggerï¼Œéƒ½åœ¨ Weinre çš„åŸºç¡€ä¸Šç®€åŒ–äº†è¦ç»™æ¯ä¸ªè°ƒè¯•é¡µé¢æ·»åŠ  JS è„šæœ¬çš„æ­¥éª¤ï¼Œspy-debugger è¿˜å¢žåŠ äº†å¯¹ HTTPS çš„æ”¯æŒã€‚ æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œå¦‚æžœä½ è¿˜æœ‰å…¶ä»–æ›´ä¸ºå®žç”¨çš„è°ƒè¯•æ–¹æ¡ˆï¼Œæ¬¢è¿Žä¸‹æ–¹ç•™è¨€äº¤æµã€‚ å‚è€ƒèµ„æ–™ Safari Web Inspector Guide Get Started with Remote Debugging Android Devices Remote Debugging WebViews weinre - Running Charles Web Debugging Proxy wuchangming/spy-debugger TBS å¼€å‘è°ƒè¯•åˆ©å™¨ â€”â€” TBS Studio - QQ æµè§ˆå™¨ç§»åŠ¨äº§å“è®ºå› å¾®ä¿¡ web å¼€å‘è€…å·¥å…·]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Redis SCANçš„ä½¿ç”¨]]></title>
      <url>%2F2019%2F09%2F25%2FRedis-SCAN%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åå…«ç¯‡åŽŸåˆ›æ–‡ç«  äº†è§£ä¸‹redisçš„æ›´å¤šç”¨æ³• SCANæœ‰æ—¶å€™éœ€è¦ä»Ž Redis å®žä¾‹æˆåƒä¸Šä¸‡çš„ key ä¸­æ‰¾å‡ºç‰¹å®šå‰ç¼€çš„ key åˆ—è¡¨æ¥æ‰‹åŠ¨å¤„ç†æ•°æ®ï¼Œå¯èƒ½æ˜¯ä¿®æ”¹å®ƒçš„å€¼ï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ é™¤ keyã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•ä»Žæµ·é‡çš„ key ä¸­æ‰¾å‡ºæ»¡è¶³ç‰¹å®šå‰ç¼€çš„ key åˆ—è¡¨æ¥ï¼Ÿ Redis æä¾›äº†ä¸€ä¸ªç®€å•æš´åŠ›çš„æŒ‡ä»¤ keys ç”¨æ¥åˆ—å‡ºæ‰€æœ‰æ»¡è¶³ç‰¹å®šæ­£åˆ™å­—ç¬¦ä¸²è§„åˆ™çš„ keyã€‚ 12345678910$redis-cli keys key67* 1) "key6764" 2) "key6738" 3) "key6774" 4) "key673" 5) "key6710" 6) "key6759" 7) "key6715" 8) "key6746" 9) "key6796" è¿™ä¸ªæŒ‡ä»¤ä½¿ç”¨éžå¸¸ç®€å•ï¼Œæä¾›ä¸€ä¸ªç®€å•çš„æ­£åˆ™å­—ç¬¦ä¸²å³å¯ï¼Œä½†æ˜¯æœ‰å¾ˆæ˜Žæ˜¾çš„ä¸¤ä¸ªç¼ºç‚¹ã€‚ æ²¡æœ‰ offsetã€limit å‚æ•°ï¼Œä¸€æ¬¡æ€§åå‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ keyï¼Œä¸‡ä¸€å®žä¾‹ä¸­æœ‰å‡ ç™¾ w ä¸ª key æ»¡è¶³æ¡ä»¶ï¼Œ å½“ä½ çœ‹åˆ°æ»¡å±çš„å­—ç¬¦ä¸²åˆ·çš„æ²¡æœ‰å°½å¤´æ—¶ï¼Œä½ å°±çŸ¥é“éš¾å—äº†ã€‚ keys ç®—æ³•æ˜¯éåŽ†ç®—æ³•ï¼Œå¤æ‚åº¦æ˜¯ O(n)ï¼Œå¦‚æžœå®žä¾‹ä¸­æœ‰åƒä¸‡çº§ä»¥ä¸Šçš„ keyï¼Œè¿™ä¸ªæŒ‡ä»¤å°±ä¼šå¯¼è‡´ Redis æœåŠ¡å¡é¡¿ï¼Œ æ‰€æœ‰è¯»å†™ Redis çš„å…¶å®ƒçš„æŒ‡ä»¤éƒ½ä¼šè¢«å»¶åŽç”šè‡³ä¼šè¶…æ—¶æŠ¥é”™ï¼Œ å› ä¸º Redis æ˜¯å•çº¿ç¨‹ç¨‹åºï¼Œé¡ºåºæ‰§è¡Œæ‰€æœ‰æŒ‡ä»¤ï¼Œå…¶å®ƒæŒ‡ä»¤å¿…é¡»ç­‰åˆ°å½“å‰çš„ keys æŒ‡ä»¤æ‰§è¡Œå®Œäº†æ‰å¯ä»¥ç»§ç»­ã€‚ å»ºè®®ç”Ÿäº§çŽ¯å¢ƒå±è”½keyså‘½ä»¤ Redis ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒåœ¨ 2.8 ç‰ˆæœ¬ä¸­åŠ å…¥äº†æŒ‡ä»¤â€”â€”scanã€‚ scan ç›¸æ¯” keys å…·å¤‡æœ‰ä»¥ä¸‹ç‰¹ç‚¹: å¤æ‚åº¦è™½ç„¶ä¹Ÿæ˜¯ O(n)ï¼Œä½†æ˜¯å®ƒæ˜¯é€šè¿‡æ¸¸æ ‡åˆ†æ­¥è¿›è¡Œçš„ï¼Œä¸ä¼šé˜»å¡žçº¿ç¨‹; æä¾› limit å‚æ•°ï¼Œå¯ä»¥æŽ§åˆ¶æ¯æ¬¡è¿”å›žç»“æžœçš„æœ€å¤§æ¡æ•°ï¼Œlimit åªæ˜¯å¯¹å¢žé‡å¼è¿­ä»£å‘½ä»¤çš„ä¸€ç§æç¤º(hint)ï¼Œè¿”å›žçš„ç»“æžœå¯å¤šå¯å°‘; åŒ keys ä¸€æ ·ï¼Œå®ƒä¹Ÿæä¾›æ¨¡å¼åŒ¹é…åŠŸèƒ½; æœåŠ¡å™¨ä¸éœ€è¦ä¸ºæ¸¸æ ‡ä¿å­˜çŠ¶æ€ï¼Œæ¸¸æ ‡çš„å”¯ä¸€çŠ¶æ€å°±æ˜¯ scan è¿”å›žç»™å®¢æˆ·ç«¯çš„æ¸¸æ ‡æ•´æ•°; è¿”å›žçš„ç»“æžœå¯èƒ½ä¼šæœ‰é‡å¤ï¼Œéœ€è¦å®¢æˆ·ç«¯åŽ»é‡å¤ï¼Œè¿™ç‚¹éžå¸¸é‡è¦; éåŽ†çš„è¿‡ç¨‹ä¸­å¦‚æžœæœ‰æ•°æ®ä¿®æ”¹ï¼Œæ”¹åŠ¨åŽçš„æ•°æ®èƒ½ä¸èƒ½éåŽ†åˆ°æ˜¯ä¸ç¡®å®šçš„; å•æ¬¡è¿”å›žçš„ç»“æžœæ˜¯ç©ºçš„å¹¶ä¸æ„å‘³ç€éåŽ†ç»“æŸï¼Œè€Œè¦çœ‹è¿”å›žçš„æ¸¸æ ‡å€¼æ˜¯å¦ä¸ºé›¶ scan åŸºç¡€ä½¿ç”¨SCAN cursor [MATCH pattern] [COUNT count] åˆå§‹æ‰§è¡Œscanå‘½ä»¤ä¾‹å¦‚scan 0ã€‚SCANå‘½ä»¤æ˜¯ä¸€ä¸ªåŸºäºŽæ¸¸æ ‡çš„è¿­ä»£å™¨ã€‚ è¿™æ„å‘³ç€å‘½ä»¤æ¯æ¬¡è¢«è°ƒç”¨éƒ½éœ€è¦ä½¿ç”¨ä¸Šä¸€æ¬¡è¿™ä¸ªè°ƒç”¨è¿”å›žçš„æ¸¸æ ‡ä½œä¸ºè¯¥æ¬¡è°ƒç”¨çš„æ¸¸æ ‡å‚æ•°ï¼Œä»¥æ­¤æ¥å»¶ç»­ä¹‹å‰çš„è¿­ä»£è¿‡ç¨‹ã€‚ å½“SCANå‘½ä»¤çš„æ¸¸æ ‡å‚æ•°è¢«è®¾ç½®ä¸º0æ—¶ï¼ŒæœåŠ¡å™¨å°†å¼€å§‹ä¸€æ¬¡æ–°çš„è¿­ä»£ï¼Œè€Œå½“redisæœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›žå€¼ä¸º0çš„æ¸¸æ ‡æ—¶ï¼Œ è¡¨ç¤ºè¿­ä»£å·²ç»“æŸï¼Œè¿™æ˜¯å”¯ä¸€è¿­ä»£ç»“æŸçš„åˆ¤å®šæ–¹å¼ï¼Œè€Œä¸èƒ½é€šè¿‡è¿”å›žç»“æžœé›†æ˜¯å¦ä¸ºç©ºåˆ¤æ–­è¿­ä»£ç»“æŸã€‚ scan å‚æ•°æä¾›äº†ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ cursor æ•´æ•°å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ key çš„æ­£åˆ™æ¨¡å¼ï¼Œç¬¬ä¸‰ä¸ªæ˜¯éåŽ†çš„ limit hintã€‚ ç¬¬ä¸€æ¬¡éåŽ†æ—¶ï¼Œcursor å€¼ä¸º 0ï¼Œç„¶åŽå°†è¿”å›žç»“æžœä¸­ç¬¬ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºä¸‹ä¸€æ¬¡éåŽ†çš„ cursorã€‚ ä¸€ç›´éåŽ†åˆ°è¿”å›žçš„ cursor å€¼ä¸º 0 æ—¶ç»“æŸã€‚ 12345678910111213141516171819202122232425262728$redis-cli scan 0 match key99* count 10001) "13912"2) 1) "key997" 2) "key9906" 3) "key9957" 4) "key9902" 5) "key9971" 6) "key9935" 7) "key9958" 8) "key9928" 9) "key9931" 10) "key9961" 11) "key9948" 12) "key9965" 13) "key9937" $redis-cli scan 13912 match key99* count 10001) "5292"2) 1) "key996" 2) "key9960" 3) "key9973" 4) "key9978" 5) "key9927" 6) "key995" 7) "key9992" 8) "key9993" 9) "key9964" 10) "key9934" è¿”å›žç»“æžœåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†å³ 1) å°±æ˜¯ä¸‹ä¸€æ¬¡è¿­ä»£æ¸¸æ ‡ï¼Œç¬¬äºŒéƒ¨åˆ†å³ 2) å°±æ˜¯æœ¬æ¬¡è¿­ä»£ç»“æžœé›†ã€‚ ä»Žä¸Šé¢çš„è¿‡ç¨‹å¯ä»¥çœ‹åˆ°è™½ç„¶æä¾›çš„ limit æ˜¯ 1000ï¼Œä½†æ˜¯è¿”å›žçš„ç»“æžœåªæœ‰ 10 ä¸ªå·¦å³ã€‚ å› ä¸ºè¿™ä¸ª limit ä¸æ˜¯é™å®šè¿”å›žç»“æžœçš„æ•°é‡ï¼Œè€Œæ˜¯é™å®šæœåŠ¡å™¨å•æ¬¡éåŽ†çš„å­—å…¸æ§½ä½æ•°é‡(çº¦ç­‰äºŽ)ã€‚ å¦‚æžœå°† limit è®¾ç½®ä¸º 10ï¼Œä½ ä¼šå‘çŽ°è¿”å›žç»“æžœæ˜¯ç©ºçš„ï¼Œä½†æ˜¯æ¸¸æ ‡å€¼ä¸ä¸ºé›¶ï¼Œæ„å‘³ç€éåŽ†è¿˜æ²¡ç»“æŸã€‚ 1234567$redis-cli scan 0 match key99* count 101) "15360"2) (empty list or set)$redis-cli scan 15360 match key99* count 101) "2304"2) (empty list or set) æ›´å¤šçš„ scan æŒ‡ä»¤scan æŒ‡ä»¤æ˜¯ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œé™¤äº†å¯ä»¥éåŽ†æ‰€æœ‰çš„ key ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å¯¹æŒ‡å®šçš„å®¹å™¨é›†åˆè¿›è¡ŒéåŽ†ã€‚ zscan éåŽ† zset é›†åˆå…ƒç´ ï¼Œ hscan éåŽ† hash å­—å…¸çš„å…ƒç´ ã€ sscan éåŽ† set é›†åˆçš„å…ƒç´ ã€‚ æ³¨æ„ç‚¹ï¼š SSCAN å‘½ä»¤ã€ HSCAN å‘½ä»¤å’Œ ZSCAN å‘½ä»¤çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ä¸€ä¸ªæ•°æ®åº“é”®ã€‚ è€Œ SCAN å‘½ä»¤åˆ™ä¸éœ€è¦åœ¨ç¬¬ä¸€ä¸ªå‚æ•°æä¾›ä»»ä½•æ•°æ®åº“é”® â€”â€” å› ä¸ºå®ƒè¿­ä»£çš„æ˜¯å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®åº“é”®ã€‚ å¤§ key æ‰«ææœ‰æ—¶å€™ä¼šå› ä¸ºä¸šåŠ¡äººå‘˜ä½¿ç”¨ä¸å½“ï¼Œåœ¨ Redis å®žä¾‹ä¸­ä¼šå½¢æˆå¾ˆå¤§çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ªå¾ˆå¤§çš„ hashï¼Œä¸€ä¸ªå¾ˆå¤§çš„ zset è¿™éƒ½æ˜¯ç»å¸¸å‡ºçŽ°çš„ã€‚ è¿™æ ·çš„å¯¹è±¡å¯¹ Redis çš„é›†ç¾¤æ•°æ®è¿ç§»å¸¦æ¥äº†å¾ˆå¤§çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨é›†ç¾¤çŽ¯å¢ƒä¸‹ï¼Œå¦‚æžœæŸä¸ª key å¤ªå¤§ï¼Œä¼šè®©æ•°æ®å¯¼è‡´è¿ç§»å¡é¡¿ã€‚ å¦å¤–åœ¨å†…å­˜åˆ†é…ä¸Šï¼Œå¦‚æžœä¸€ä¸ª key å¤ªå¤§ï¼Œé‚£ä¹ˆå½“å®ƒéœ€è¦æ‰©å®¹æ—¶ï¼Œä¼šä¸€æ¬¡æ€§ç”³è¯·æ›´å¤§çš„ä¸€å—å†…å­˜ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´å¡é¡¿ã€‚ å¦‚æžœè¿™ä¸ªå¤§ key è¢«åˆ é™¤ï¼Œå†…å­˜ä¼šä¸€æ¬¡æ€§å›žæ”¶ï¼Œå¡é¡¿çŽ°è±¡ä¼šå†ä¸€æ¬¡äº§ç”Ÿã€‚ åœ¨å¹³æ—¶çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œè¦å°½é‡é¿å…å¤§ key çš„äº§ç”Ÿã€‚ å¦‚æžœä½ è§‚å¯Ÿåˆ° Redis çš„å†…å­˜å¤§èµ·å¤§è½ï¼Œè¿™æžæœ‰å¯èƒ½æ˜¯å› ä¸ºå¤§ key å¯¼è‡´çš„ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦å®šä½å‡ºå…·ä½“æ˜¯é‚£ä¸ª keyï¼Œ è¿›ä¸€æ­¥å®šä½å‡ºå…·ä½“çš„ä¸šåŠ¡æ¥æºï¼Œç„¶åŽå†æ”¹è¿›ç›¸å…³ä¸šåŠ¡ä»£ç è®¾è®¡ã€‚ é‚£å¦‚ä½•å®šä½å¤§ key å‘¢ï¼Ÿ ä¸ºäº†é¿å…å¯¹çº¿ä¸Š Redis å¸¦æ¥å¡é¡¿ï¼Œè¿™å°±è¦ç”¨åˆ° scan æŒ‡ä»¤ï¼Œå¯¹äºŽæ‰«æå‡ºæ¥çš„æ¯ä¸€ä¸ª keyï¼Œä½¿ç”¨ type æŒ‡ä»¤èŽ·å¾— key çš„ç±»åž‹ï¼Œ ç„¶åŽä½¿ç”¨ç›¸åº”æ•°æ®ç»“æž„çš„ size æˆ–è€… len æ–¹æ³•æ¥å¾—åˆ°å®ƒçš„å¤§å°ï¼Œå¯¹äºŽæ¯ä¸€ç§ç±»åž‹ï¼Œä¿ç•™å¤§å°çš„å‰ N åä½œä¸ºæ‰«æç»“æžœå±•ç¤ºå‡ºæ¥ã€‚ ä¸Šé¢è¿™æ ·çš„è¿‡ç¨‹éœ€è¦ç¼–å†™è„šæœ¬ï¼Œæ¯”è¾ƒç¹çï¼Œä¸è¿‡ Redis å®˜æ–¹å·²ç»åœ¨ redis-cli æŒ‡ä»¤ä¸­æä¾›äº†è¿™æ ·çš„æ‰«æåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ‹¿æ¥å³ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031$redis-cli --bigkeys# Scanning the entire keyspace to find biggest keys as well as# average sizes per key type. You can use -i 0.1 to sleep 0.1 sec# per 100 SCAN commands (not usually needed).[00.00%] Biggest string found so far 'key316' with 3 bytes[00.00%] Biggest string found so far 'key7806' with 4 bytes[12.79%] Biggest zset found so far 'salary' with 1 members[13.19%] Biggest string found so far 'counter:__rand_int__' with 6 bytes[13.50%] Biggest hash found so far 'websit' with 2 fields[14.37%] Biggest set found so far 'bbs' with 3 members[14.67%] Biggest hash found so far 'website' with 3 fields[30.41%] Biggest list found so far 'mylist' with 100000 items[95.53%] Biggest zset found so far 'page_rank' with 3 members-------- summary -------Sampled 10019 keys in the keyspace!Total key length in bytes is 68990 (avg len 6.89)Biggest string found 'counter:__rand_int__' has 6 bytesBiggest list found 'mylist' has 100000 itemsBiggest set found 'bbs' has 3 membersBiggest hash found 'website' has 3 fieldsBiggest zset found 'page_rank' has 3 members10011 strings with 38919 bytes (99.92% of keys, avg size 3.89)3 lists with 100003 items (00.03% of keys, avg size 33334.33)1 sets with 3 members (00.01% of keys, avg size 3.00)2 hashs with 5 fields (00.02% of keys, avg size 2.50)2 zsets with 4 members (00.02% of keys, avg size 2.00) å¦‚æžœä½ æ‹…å¿ƒè¿™ä¸ªæŒ‡ä»¤ä¼šå¤§å¹…æŠ¬å‡ Redis çš„ ops å¯¼è‡´çº¿ä¸ŠæŠ¥è­¦ï¼Œè¿˜å¯ä»¥å¢žåŠ ä¸€ä¸ªä¼‘çœ å‚æ•°ã€‚ 12345678910111213141516171819202122232425262728293031$redis-cli --bigkeys -i 0.1# Scanning the entire keyspace to find biggest keys as well as# average sizes per key type. You can use -i 0.1 to sleep 0.1 sec# per 100 SCAN commands (not usually needed).[00.00%] Biggest string found so far 'key316' with 3 bytes[00.00%] Biggest string found so far 'key7806' with 4 bytes[12.79%] Biggest zset found so far 'salary' with 1 members[13.19%] Biggest string found so far 'counter:__rand_int__' with 6 bytes[13.50%] Biggest hash found so far 'websit' with 2 fields[14.37%] Biggest set found so far 'bbs' with 3 members[14.67%] Biggest hash found so far 'website' with 3 fields[30.41%] Biggest list found so far 'mylist' with 100000 items[95.53%] Biggest zset found so far 'page_rank' with 3 members-------- summary -------Sampled 10019 keys in the keyspace!Total key length in bytes is 68990 (avg len 6.89)Biggest string found 'counter:__rand_int__' has 6 bytesBiggest list found 'mylist' has 100000 itemsBiggest set found 'bbs' has 3 membersBiggest hash found 'website' has 3 fieldsBiggest zset found 'page_rank' has 3 members10011 strings with 38919 bytes (99.92% of keys, avg size 3.89)3 lists with 100003 items (00.03% of keys, avg size 33334.33)1 sets with 3 members (00.01% of keys, avg size 3.00)2 hashs with 5 fields (00.02% of keys, avg size 2.50)2 zsets with 4 members (00.02% of keys, avg size 2.00) ä¸Šé¢è¿™ä¸ªæŒ‡ä»¤æ¯éš” 100 æ¡ scan æŒ‡ä»¤å°±ä¼šä¼‘çœ  0.1sï¼Œops å°±ä¸ä¼šå‰§çƒˆæŠ¬å‡ï¼Œä½†æ˜¯æ‰«æçš„æ—¶é—´ä¼šå˜é•¿ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªbigkeyså¾—åˆ°çš„æœ€å¤§ï¼Œä¸ä¸€å®šæ˜¯æœ€å¤§ã€‚ è¯´æ˜ŽåŽŸå› å‰ï¼Œé¦–å…ˆè¯´æ˜Žbigkeysçš„åŽŸç†ï¼Œéžå¸¸ç®€å•ï¼Œé€šè¿‡scanå‘½ä»¤éåŽ†ï¼Œå„ç§ä¸åŒæ•°æ®ç»“æž„çš„keyï¼Œåˆ†åˆ«é€šè¿‡ä¸åŒçš„å‘½ä»¤å¾—åˆ°æœ€å¤§çš„keyï¼š å¦‚æžœæ˜¯stringç»“æž„ï¼Œé€šè¿‡strlenåˆ¤æ–­ï¼› å¦‚æžœæ˜¯listç»“æž„ï¼Œé€šè¿‡llenåˆ¤æ–­ï¼› å¦‚æžœæ˜¯hashç»“æž„ï¼Œé€šè¿‡hlenåˆ¤æ–­ï¼› å¦‚æžœæ˜¯setç»“æž„ï¼Œé€šè¿‡scardåˆ¤æ–­ï¼› å¦‚æžœæ˜¯sorted setç»“æž„ï¼Œé€šè¿‡zcardåˆ¤æ–­ã€‚ æ­£å› ä¸ºè¿™æ ·çš„åˆ¤æ–­æ–¹å¼ï¼Œè™½ç„¶stringç»“æž„è‚¯å®šå¯ä»¥æ­£ç¡®çš„ç­›é€‰å‡ºæœ€å ç”¨ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥è¯´æœ€å¤§çš„keyã€‚ ä½†æ˜¯listä¸ä¸€å®šï¼Œä¾‹å¦‚ï¼ŒçŽ°åœ¨æœ‰ä¸¤ä¸ªlistç±»åž‹çš„keyï¼Œåˆ†åˆ«æ˜¯ï¼šnumberlistâ€“[0,1,2]ï¼Œstringlistâ€“[â€œ123456789123456789â€]ï¼Œ ç”±äºŽé€šè¿‡llenåˆ¤æ–­ï¼Œæ‰€ä»¥numberlistè¦å¤§äºŽstringlistã€‚ è€Œäº‹å®žä¸Šstringlistæ›´å ç”¨å†…å­˜ã€‚å…¶ä»–ä¸‰ç§æ•°æ®ç»“æž„hashï¼Œsetï¼Œsorted setéƒ½ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨bigkeysä¸€å®šè¦æ³¨æ„è¿™ä¸€ç‚¹ã€‚ slowlogå‘½ä»¤ä¸Šé¢æåˆ°ä¸èƒ½ä½¿ç”¨keyså‘½ä»¤ï¼Œå¦‚æžœå°±æœ‰å¼€å‘è¿™ä¹ˆåšäº†å‘¢ï¼Œæˆ‘ä»¬å¦‚ä½•å¾—çŸ¥ï¼Ÿ ä¸Žå…¶ä»–ä»»æ„å­˜å‚¨ç³»ç»Ÿä¾‹å¦‚mysqlï¼Œmongodbå¯ä»¥æŸ¥çœ‹æ…¢æ—¥å¿—ä¸€æ ·ï¼Œredisä¹Ÿå¯ä»¥ï¼Œå³é€šè¿‡å‘½ä»¤slowlogã€‚ ç”¨æ³•å¦‚ä¸‹ SLOWLOG subcommand [argument] subcommandä¸»è¦æœ‰ï¼š getï¼Œç”¨æ³•ï¼šslowlog get [argument]ï¼ŒèŽ·å–argumentå‚æ•°æŒ‡å®šæ•°é‡çš„æ…¢æ—¥å¿—ã€‚ lenï¼Œç”¨æ³•ï¼šslowlog lenï¼Œæ€»æ…¢æ—¥å¿—æ•°é‡ã€‚ resetï¼Œç”¨æ³•ï¼šslowlog resetï¼Œæ¸…ç©ºæ…¢æ—¥å¿—ã€‚ 12345678910111213141516171819202122232425262728$redis-cli slowlog get 51) 1) (integer) 2 2) (integer) 1537786953 3) (integer) 17980 4) 1) "scan" 2) "0" 3) "match" 4) "key99*" 5) "count" 6) "1000" 5) "127.0.0.1:50129" 6) ""2) 1) (integer) 1 2) (integer) 1537785886 3) (integer) 39537 4) 1) "keys" 2) "*" 5) "127.0.0.1:49701" 6) ""3) 1) (integer) 0 2) (integer) 1537681701 3) (integer) 18276 4) 1) "ZADD" 2) "page_rank" 3) "10" 4) "google.com" 5) "127.0.0.1:52334" 6) "" å‘½ä»¤è€—æ—¶è¶…è¿‡å¤šå°‘æ‰ä¼šä¿å­˜åˆ°slowlogä¸­ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤config set slowlog-log-slower-than 2000é…ç½®å¹¶ä¸”ä¸éœ€è¦é‡å¯redisã€‚ æ³¨æ„ï¼šå•ä½æ˜¯å¾®å¦™ï¼Œ2000å¾®å¦™å³2æ¯«ç§’ã€‚ rename-commandä¸ºäº†é˜²æ­¢æŠŠé—®é¢˜å¸¦åˆ°ç”Ÿäº§çŽ¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶é‡å‘½åä¸€äº›å±é™©å‘½ä»¤ï¼Œ ä¾‹å¦‚keysç­‰ä¸€äº›é«˜å±å‘½ä»¤ã€‚æ“ä½œéžå¸¸ç®€å•ï¼Œ åªéœ€è¦åœ¨confé…ç½®æ–‡ä»¶å¢žåŠ å¦‚ä¸‹æ‰€ç¤ºé…ç½®å³å¯ï¼š rename-command flushdb flushddbb rename-command flushall flushallall rename-command keys keysys]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[25å²]]></title>
      <url>%2F2019%2F09%2F16%2F25%E5%B2%81%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  25å²æ€»ç»“ (à¹‘â€¢ . â€¢à¹‘) Time Flies. å¦‚æžœè¯´æˆ‘èƒ½æ´»åˆ°100å²ï¼Œé‚£ä¹ˆçŽ°åœ¨æˆ‘å·²ç»åº¦è¿‡äººç”Ÿçš„å››åˆ†ä¹‹ä¸€ï¼›å¦‚æžœæˆ‘åªèƒ½æ´»åˆ°75å²ï¼Œé‚£ä¹ˆæˆ‘å·²ç»åº¦è¿‡äº†äººç”Ÿçš„ä¸‰åˆ†ä¹‹ä¸€ã€‚ å‘çŽ°è‡ªå·±å¹¶å†™ä¸ä¸‹åŽ»è¿™ç§æ–‡ç« ï¼Œä»¥åŽè¿˜æ˜¯å›žå½’åˆ°æŠ€æœ¯å§ã€‚ å·¥ä½œæ¥åˆ°æ‹¼å¤šå¤šæˆ‘è§‰å¾—è¿‡çš„è¿˜æ˜¯æŒºå¥½çš„ï¼Œè™½ç„¶ä¸‹ç­æ™šäº†ï¼Œä½†æ˜¯ä¸Šç­ä¹Ÿæ™šï¼ŒçŽ°åœ¨å·²ç»å¯ä»¥æ‰¾åˆ°å¹³è¡¡ç‚¹äº†ã€‚èº«ä½“åº”è¯¥é—®é¢˜ä¸å¤§ï¼Œ æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå°±æ˜¯è‡ªå·±ç¡®å®žæ˜¯æ²¡æœ‰åŽ»é”»ç‚¼ï¼Œè¿™å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªéšæ‚£ã€‚è¿˜æ˜¯éœ€è¦å¼•èµ·æ³¨æ„çš„ã€‚ðŸ˜” è‡³äºŽå·¥ä½œå†…å®¹æ–¹é¢ï¼Œå­¦ä¹ æ˜¯æ¯å¤©å·¥ä½œä¸­éƒ½ä¼šé‡åˆ°çš„ã€‚åŸºæœ¬ä¸Šéƒ½æ˜¯å†ç”¨JAVAï¼Œè¿™æ˜¯ä¸ªæœºä¼šï¼Œä»¥åŽå›žåˆ°æ­¦æ±‰ä¹Ÿå¯ä»¥æ‰¾åˆ°JAVAç›¸å…³çš„å·¥ä½œã€‚ JAVAåœ¨æŸäº›æ–¹é¢ç”¨èµ·æ¥çœŸçš„æ¯”Pythonè¦çˆ½ï¼Œä½†å¦‚æžœæ˜¯å†™ä¸€äº›å¿«é€Ÿçš„è„šæœ¬ï¼ŒPythonå½“ç„¶æ˜¯æœ€ä½³é€‰æ‹©ã€‚å¾ˆåº†å¹¸è‡ªå·±å¯ä»¥é€šè¿‡çˆ¬è™«è½¬åž‹åˆ°JAVAã€‚ åœ¨çŽ°åœ¨è¿™ä¸ªå¤§çŽ¯å¢ƒä¸‹ï¼Œæ‹¼å¤šå¤šè‡³å°‘ä¸ä¼šè£å‘˜ï¼Œè€Œä¸”æ¯å¹´éƒ½æœ‰æ¶¨è–ªï¼Œè¿˜æ˜¯å€¼å¾—æœŸå¾…çš„ï¼Œæˆ‘è§‰å¾—åº”è¯¥ä¼šåœ¨æ‹¼å¤šå¤šå‘†ä¸ªä¸‰åˆ°äº”å¹´ã€‚å¦‚æžœæˆ‘è¿˜ç•™åœ¨é€ æ•°ï¼ŒçŽ°åœ¨çš„ç»“æžœè‚¯å®šä¸ä¼šæ˜¯è¿™æ ·å§ã€‚ ç”Ÿæ´»æ¯å‘¨å…­ä¼‘æ¯ä¸€å¤©ã€‚å¦‚æžœæ˜¯åŒä¼‘ï¼Œæˆ‘è‚¯å®šæ˜¯åœ¨æ‰“æ¸¸æˆï¼Œå€’è¿˜ä¸å¦‚æ¥åŠ ç­ï¼Œè¶ç€å¹´è½»å¤šèµšç‚¹é’±ï¼Œå¥¹è¿˜æœ‰ä¸€å±è‚¡å€ºå‘¢ã€‚ æˆ‘æ˜¯ä¸€ä¸ªä¸æ„¿æ„å‡ºé—¨çš„äººï¼Œæ— è®ºä»€ä¹ˆæ”¾å‡ï¼Œéƒ½ä¸æƒ³å‡ºé—¨åŽ»çœ‹äººï¼Œè‡ªå·±å¾…åœ¨å®¶é‡Œå¾ˆèˆ’æœã€‚ è‡³äºŽç»“å©šè¿™ä¸ªäº‹æƒ…ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯2021å¹´å§ï¼Œç»™è‡ªå·±ä¸¤å¹´æ—¶é—´ã€‚å¤ªæ—©ç»“å©šå¹¶ä¸æ˜¯ä¸€ä¸ªæ˜Žæ™ºé€‰æ‹©ï¼Œæˆ‘è§‰å¾—è¿˜ä¸å¤Ÿäº†è§£å¥¹ï¼Œä¹Ÿå‘çŽ°äº†å¾ˆå¤šç¼ºç‚¹ï¼Œæˆ‘è¦å­¦ä¼šåŽ»åŒ…å®¹ã€‚æ„Ÿè§‰æˆ‘ä»¬å¾ˆéš¾èµ°åˆ°æœ€åŽã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ¥æ‹¼å¤šå¤šçš„ç¬¬ä¸€ä¸ªæœˆ]]></title>
      <url>%2F2019%2F07%2F27%2F%E6%9D%A5%E6%8B%BC%E5%A4%9A%E5%A4%9A%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%9C%88%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åå…­ç¯‡åŽŸåˆ›æ–‡ç«  ä¸ƒæœˆæ€»ç»“ (à¹‘â€¢ . â€¢à¹‘) 2019å¹´ä¸‹åŠå¹´ï¼Œä¹Ÿå°±æ˜¯7æœˆ1æ—¥ï¼Œæˆ‘å…¥èŒäº†æ‹¼å¤šå¤šã€‚ç®—èµ·æ¥åˆ°çŽ°åœ¨å·²ç»4å‘¨äº†ï¼Œæƒ³è®°å½•ä¸‹çŽ°åœ¨åˆ°è¿™è¾¹æ¥çš„æ„Ÿå—ã€‚ å·¥ä½œå…ˆè¯´ä¸‹åœ¨è¿™è¾¹çš„å·¥ä½œï¼Œçˆ¬è™«åªæ˜¯ä¸€æ–¹é¢ï¼Œæ•°æ®ä¸‹æ¸¸è¿˜æœ‰å¾ˆé•¿çš„åº”ç”¨é“¾ï¼Œç”¨åŒäº‹çš„è¯è¯´ï¼Œçˆ¬è™«æ˜¯å¤§åŠ¨è„‰ï¼ŒæŒ‚äº†å°±å®Œäº†ã€‚å°±ç›®å‰æˆ‘åšçš„ä¸€ä¸ªæœˆæ¥è¯´ï¼Œæœ‰å¼€å‘çˆ¬è™«ï¼Œæä¾›æ•°æ®ï¼Œä¹Ÿæœ‰æ”¹è¿›ä¸€äº›ä¸šåŠ¡ä»£ç ã€‚è¯­è¨€çš„è¯ï¼Œå¤§çŽ¯å¢ƒæ˜¯JAVAï¼Œçˆ¬è™«æœ‰ä¸€éƒ¨åˆ†æ˜¯Pythonï¼Œæˆ‘æœ‰éƒ¨åˆ†ä¸šåŠ¡ä¹Ÿéœ€è¦ä½¿ç”¨JAVAï¼Œç„¶åŽå°±å¼€å§‹ JAVA7å¤©ä»Žå…¥é—¨åˆ°ç²¾é€šï¼Œç…§ç€åˆ«äººçš„ä»£ç ä¸€æ­¥æ­¥å†™ã€‚å¦‚ä½•å£°æ˜Žä¸€ä¸ªæ•°ç»„ã€Mapï¼Œå¦‚ä½•æ·»åŠ å˜é‡ï¼Œå‡½æ•°è¿”å›žçš„æ˜¯ä»€ä¹ˆï¼ŒJSONè§£æžçš„ç±»åž‹æ˜¯ä»€ä¹ˆï¼Œè¿™ç§åŸºç¡€é—®é¢˜ï¼Œå…¨æ˜¯ä¸€æ­¥æ­¥Googleä¸‹æ¥çš„ï¼Œå°±è¿™æ ·ä¸‹æ¥ï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†å…¶ä¸­ä¸€ä¸ªå°æ¨¡å—ï¼Œè¿™å‘¨ä¸Šçº¿äº†ï¼Œå¾ˆæœ‰æˆå°±æ„ŸðŸ˜¯ã€‚ å·¥ä½œå†…å®¹ç¡®å®žä¼šæ¯”è¾ƒå¤šï¼Œæ¯å¤©éƒ½ä¼šæœ‰åšä¸å®Œçš„äº‹æƒ…ï¼Œåªè¦è‡ªå·±åœ¨å…¶ä¸­èƒ½æ„Ÿå—åˆ°æˆå°±æ„Ÿï¼Œèƒ½å‘æŒ¥è‡ªå·±çš„ä»·å€¼ï¼Œæ¯å¤©èƒ½å­¦åˆ°æ–°ä¸œè¥¿ï¼Œæ„Ÿè§‰å°±è¿˜å¥½ã€‚åªæ˜¯åˆšæ¥ä¼šæœ‰äº›ä¸é€‚åº”ï¼Œæ…¢æ…¢å°±å¥½äº†ã€‚ å›¢é˜Ÿå°±å›¢é˜Ÿæ¥è¯´çš„è¯ï¼Œæˆ‘ç®—æ˜¯å…¶ä¸­å±¥åŽ†æœ€å·®çš„ï¼Œè¿™é‡Œæœ‰é˜¿é‡Œã€è…¾è®¯ã€ç™¾åº¦ç­‰ç­‰å¤§åŽ‚æ¥çš„ï¼Œåº”å±Šç”Ÿä¹Ÿæ˜¯985çš„ï¼Œè¿˜æœ‰ä½5å¹´ç»éªŒçš„çˆ¬è™«å¤§ä½¬å¸¦æˆ‘ã€‚å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥é—®ä»–ä»¬æ‰¾åˆ°ç­”æ¡ˆï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å¿«é€Ÿæˆé•¿çš„åœ°æ–¹ã€‚ æ‹¼å¤šå¤šçŽ°åœ¨å¥½åƒæœ‰äº”åƒå¤šå·å‘˜å·¥äº†ï¼Œæˆ‘å…¥èŒé‚£å¤©æ¥äº†å‡ ç™¾å·æ–°å‘˜å·¥ã€‚å¤§ä½¬ä»¬æ²¡æœ‰ç‹¬ç«‹çš„åŠžå…¬å®¤ï¼Œæ‰€ä»¥ç»å¸¸ä¼šè§åˆ°å¤§ä½¬ï¼Œæ›¾ç»æ¯å¤©ä¸ŠåŽ•æ‰€éƒ½è¦è·¯è¿‡ä¸€ä½åˆ›å§‹äººçš„å·¥ä½ã€‚ å·¥ä½œæ—¶é—´è¿™ä¸ªåœ¨æ¥ä¹‹å‰å°±é—®èƒ½ä¸èƒ½æŽ¥å—â€œ11116â€ï¼Œä¹Ÿå°±æ˜¯æ—©ä¸Š11ç‚¹åˆ°æ™šä¸Š11ç‚¹ï¼Œä¸€å‘¨ä¸Šå…­å¤©ç­ï¼Œæ¥ä¹‹å‰è§‰å¾—æŒºå“äººçš„ï¼Œä½†æ˜¯çŽ°åœ¨è§‰å¾—è¿˜æ˜¯OKçš„ã€‚ è‡ªå·±æœ¬æ¥å°±æ˜¯ä¸€ä¸ªå¤œçŒ«å­ï¼Œæˆ‘çš„ä¸€å¤©ä½œæ¯åŸºæœ¬æ˜¯è¿™æ ·ï¼š å‡Œæ™¨1ç‚¹ä¹‹å‰ç¡è§‰ï¼Œæ—©ä¸Š9ç‚¹èµ·åºŠï¼Œä¿è¯æ¯å¤©8ä¸ªå°æ—¶ä»¥ä¸Š 10ç‚¹åˆ°å…¬å¸åƒä¸ªæ—©é¤ï¼Œå­¦ä¸€ä¸ªå°æ—¶ï¼ŒçŽ°åœ¨æ˜¯åœ¨çœ‹JAVAï¼Œ11ç‚¹æ­£å¼å¼€å§‹å·¥ä½œ 12ç‚¹åƒåˆé¥­ï¼Œåƒå®Œä¼šç¡åŠå°æ—¶ï¼Œ1ç‚¹åŠå¼€å§‹å·¥ä½œ 6ç‚¹åƒæ™šé¤ï¼Œåƒå®Œäº†ä¼šä¸‹åŽ»èµ°èµ°ï¼Œ7ç‚¹åŠä¸Šæ¥å·¥ä½œ æ™šä¸Š11ç‚¹ä¸‹ç­ï¼ˆæœ‰äº›å›¢é˜Ÿæ˜¯10ç‚¹ä¸‹ç­ï¼‰ æ¯•ç«Ÿæ™šä¸Š11ç‚¹æ‰èƒ½ä¸‹ç­ï¼Œæ‰€ä»¥çŽ°åœ¨ä¹Ÿæ²¡æ—¶é—´å†™åšå®¢äº†ï¼Œä¹Ÿå°±æ¯å‘¨å…­æ”¾å‡äº†å¯ä»¥å†™ç‚¹ã€‚ä»¥åŽçˆ¬è™«çš„å¯èƒ½ä¼šå°‘ä¸€ç‚¹ï¼Œä¼šå†™ä¸€å†™JAVAåŸºç¡€ã€‚æœ€è¿‘ä¹Ÿæœ‰æœ‹å‹åœ¨é—®æ€Žä¹ˆå­¦çˆ¬è™«ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼Œå¦‚æžœçˆ¬è™«åªæ˜¯ä½ çš„å‰¯ä¸šï¼ŒæŽŒæ¡å¤šçº¿ç¨‹å°±å¯ä»¥äº†ï¼Œå¦‚æžœä½ è¦è½¬è¡Œå­¦çˆ¬è™«çš„è¯ï¼Œå¹¶ä¸å»ºè®®ï¼Œå­¦JAVAå‰æ™¯ä¼šå¾ˆå¥½ï¼ŒPythonå²—ä½å¤ªå°‘ã€‚å›½å†…çš„è¯ï¼Œè¿˜æ˜¯JAVAç¬¬ä¸€ã€‚ å…³äºŽæ‹¼å¤šå¤šåœ¨æˆ‘æ¥ä¹‹å‰ï¼Œæˆ‘ä¹Ÿåƒä½ ä»¬ä¸€æ ·ï¼Œå†…å¿ƒæ˜¯éžå¸¸æŠµè§¦æ‹¼å¤šå¤šçš„ï¼Œå…¨æ˜¯å‡è´§ï¼Œåšå†³ä¸ä¼šåœ¨ä¸Šé¢ä¹°çš„ã€‚é¢äº†æ‹¼å¤šå¤šä¹‹åŽï¼Œä¸‹è½½äº†æ‹¼å¤šå¤šAppï¼Œé¢†äº†ä¸€å¼ 5å…ƒåˆ¸ï¼Œä¹°äº†ä¸€ä¸ªå°é£Žæ‰‡ï¼Œæœ€åŽèŠ±äº†0.09å…ƒã€‚æŒºå¥½ç”¨çš„ï¼ŒçœŸé¦™ã€‚ ä¹‹åŽä¼šç»å¸¸åœ¨ä¸Šé¢ä¹°ä¸€äº›å°ä¸œè¥¿ï¼Œç¡®å®žå¾ˆä¾¿å®œï¼Œæœ‰ä¸ªåŒäº‹åœ¨æ‹¼å¤šå¤šä¸Šä¹°çš„2019æ¬¾çš„MBPï¼Œæ²¡å•¥é—®é¢˜ã€‚ä»¥ä¸€ä¸ªå†…éƒ¨å‘˜å·¥çš„èº«ä»½å‘Šè¯‰ä½ ï¼Œæ‹¼å¤šå¤šé‡Œçš„â€œç™¾äº¿è¡¥è´´â€å’Œâ€œå“ç‰Œé¦†â€æ˜¯æ²¡æœ‰å‡è´§çš„ï¼Œå¤§å®¶ä¹°ä¹°ä¹°ã€‚ æœ€åŽï¼Œæˆ‘ä»¬è¿™ä¸ªå›¢é˜Ÿè¿˜åœ¨æ‹›äººï¼Œçˆ¬è™«ã€JAVAã€ç®—æ³•éƒ½è¦ï¼Œ3~5å¹´ç»éªŒï¼Œè¿™è¾¹ç¤¾æ‹›çš„è¯ä¼šé—®å¾ˆå¤šåº•å±‚çš„ä¸œè¥¿ï¼Œä¸æ­¢è¦æ±‚ä½ ä¼šç”¨ï¼Œè¿˜ä¼šè¦æ±‚ä½ çŸ¥é“å…¶ä¸­çš„åŽŸç†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ¯”ä½ ä¼˜ç§€çš„äººä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ¯”ä½ ä¼˜ç§€çš„äººæ¯”ä½ æ›´åŠªåŠ›]]></title>
      <url>%2F2019%2F07%2F13%2F%E6%AF%94%E4%BD%A0%E4%BC%98%E7%A7%80%E7%9A%84%E4%BA%BA%E4%B8%8D%E5%8F%AF%E6%80%95%EF%BC%8C%E5%8F%AF%E6%80%95%E7%9A%84%E6%98%AF%E6%AF%94%E4%BD%A0%E4%BC%98%E7%A7%80%E7%9A%84%E4%BA%BA%E6%AF%94%E4%BD%A0%E6%9B%B4%E5%8A%AA%E5%8A%9B%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åäº”ç¯‡åŽŸåˆ›æ–‡ç«  æ¯”ä½ ä¼˜ç§€çš„äººä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ¯”ä½ ä¼˜ç§€çš„äººæ¯”ä½ æ›´åŠªåŠ› (à¹‘â€¢ . â€¢à¹‘) æ¥åˆ°æ‹¼å¤šå¤šæœ‰åŠä¸ªæœˆäº†ï¼Œè‡ªå·±æ€»ç»“ä¸‹æ¥ï¼Œæœ‰ä¸€å¥è¯å°±æ˜¯æ ‡é¢˜è¯´çš„ï¼šæ¯”ä½ ä¼˜ç§€çš„äººä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ¯”ä½ ä¼˜ç§€çš„äººæ¯”ä½ æ›´åŠªåŠ›ã€‚ è¿™å¥è¯æ˜¯æˆ‘çš„é¢†å¯¼ç»å¸¸æŒ‚åœ¨å˜´è¾¹çš„ï¼Œä»–æ˜¯ä¸€ä¸ªå¾ˆåŽ‰å®³çš„äººï¼Œä¹‹å‰åšC++çš„ï¼Œæ¥åˆ°è¿™è¾¹å¼€å§‹å„ç§å­¦ä¹ ï¼ŒJAVAã€Pythonã€Nodeï¼Œè¿™äº›éƒ½æ˜¯ä»–è‡ªå­¦çš„ï¼Œå› ä¸ºä»–åŸºç¡€å¥½ã€‚ä»–å¸¸å¸¸è·Ÿæˆ‘è¯´ï¼Œä½ ä¸æ˜¯è®¡ç®—æœºä¸“ä¸šå‡ºç”Ÿï¼Œä½ è¦å¥½å¥½è¡¥ä¸‹linuxåŸºç¡€ï¼Œç„¶åŽæŽ¨èæˆ‘åŽ»çœ‹ã€ŠunixçŽ¯å¢ƒç¼–ç¨‹ã€‹ã€‚è¯´ä½ çœ‹å®Œè¿™æœ¬ä¹¦ä¹‹åŽï¼Œä½ å’Œåˆ«äººäº¤è°ˆå°±ä¼šæœ‰æ–™ã€‚ è¿™è¾¹ä¸€èˆ¬æ˜¯11116ï¼Œæˆ‘ä¸€èˆ¬ä¼š10ç‚¹40å¤šè¿‡æ¥æ‰“å¡ï¼Œæ™šä¸Š11ç‚¹20ä¸‹ç­ï¼Œå›žåˆ°å®¶åŸºæœ¬å°±ä¸ä¼šå†å­¦ä¹ äº†ã€‚ä»–è¯´ä»–æ¯å¤©ç¡6ä¸ªå°æ—¶ï¼Œæ™šä¸Šå›žåŽ»çœ‹æ…•è¯¾ç½‘ã€æ—©ä¸Šèµ·æ¥ä¹Ÿçœ‹ï¼Œæ¯æ¬¡æˆ‘ä¸‹ç­äº†ä»–éƒ½è¿˜æ²¡ä¸‹ç­ã€‚ä»–è·Ÿæˆ‘è¯´ä»–å‘¨å…­è¿˜ä¼šåˆ°å…¬å¸è¿™è¾¹æ¥å­¦ä¹ ï¼Œçœ‹è§†é¢‘æ•™ç¨‹ï¼Œå­¦SpringBootï¼Œç»™æˆ‘çœ‹ä»–å‘¨å…­çš„æ‰“å¡è®°å½•ã€‚å½“æ—¶æˆ‘æ˜¯éœ‡æƒŠçš„ï¼Œå› ä¸ºå¤§å®¶éƒ½ä¼šè§‰å¾—åœ¨æ‹¼å¤šå¤šåŠ ç­å¤šï¼Œå·¥ä½œå¾ˆç´¯ï¼Œå¥½ä¸å®¹æ˜“æ”¾å‡äº†ï¼Œè¦å¥½å¥½ä¼‘æ¯ã€‚ å°±æˆ‘è‡ªå·±æ¥è¯´ï¼Œè¿™è¾¹å·¥ä½œç¡®å®žæ˜¯å¾ˆæœ‰æŒ‘æˆ˜çš„ã€‚åŸºç¡€å·®æ˜¯ä¸€æ–¹é¢ï¼Œè¿˜æœ‰å°±æ˜¯è¦å­¦ä¹ æ–°è¯­è¨€ï¼Œè¿™è¾¹åŸºæœ¬ä¸Šéƒ½æ˜¯JAVAï¼Œä¹‹å‰æˆ‘ä¸€ç›´ç”¨Pythonã€‚åˆšå¼€å§‹çœŸçš„å¾ˆéš¾å—ï¼Œå„ç§ç±»åž‹å’Œè·³è½¬å·²ç»æŠŠæˆ‘é€¼ç–¯äº†ï¼Œä¸¤å‘¨ä¸‹æ¥ï¼Œæˆ‘ä¹Ÿèƒ½å¼€å§‹å†™ä¸€äº›SpringBootã€‚çŽ°åœ¨æˆ‘æŠŠæ¯å¤©èµ·åºŠæ—¶é—´æå‰ä¸€å°æ—¶ï¼Œå¯ä»¥å…ˆæ¥åˆ°å…¬å¸å­¦ä¸€äº›åŸºç¡€ã€‚ JAVAæ¯æ¬¡å£°æ˜Žå˜é‡å°±éœ€è¦ç»™å®šç±»åž‹ï¼Œè¿™ä¸€ç‚¹åˆšå¼€å§‹å¾ˆéš¾é€‚åº”ï¼Œç‰¹åˆ«æ˜¯å¤„ç†JSONæ„Ÿè§‰å¾ˆè›‹ç–¼ï¼ŒPythonçš„è¯å°±æ ¹æœ¬ä»€ä¹ˆéƒ½ä¸ç”¨ç®¡ï¼Œæ‹¿æ¥å°±ä¸Šã€‚è¿™ä¸€ç‚¹ä¸Šç¡®å®žæ˜¯Pythonç®€å•ï¼Œä½†æ˜¯ä¸€äº›æœåŠ¡ä¸Šè‚¯å®šè¿˜æ˜¯ä¼šé€‰æ‹©JAVAï¼Œè¯­è¨€æ€§è´¨å†³å®šçš„ã€‚ è¿˜æœ‰ä¸€ç‚¹æ„Ÿå—ï¼Œçˆ¬è™«çœŸçš„åªæ˜¯å¾ˆå°å¾ˆå°ä¸€éƒ¨åˆ†ï¼Œè¦æ›´å¤šåœ°æŽ¥è§¦åˆ°çˆ¬è™«çš„ä¸Šä¸‹æ¸¸ï¼Œè¦æŠŠåŽŸå§‹æ•°æ®å˜ä¸ºä»·å€¼æ•°æ®æ˜¯ä¸€ä¸ªå¾ˆéš¾çš„è¿‡ç¨‹ï¼Œè¿™å°±æ˜¯å…¨æ–°çš„æŒ‘æˆ˜ã€‚ æœ€åŽï¼Œæ‰“ä¸€ä¸ªå°å¹¿å‘Šï¼Œæ‹¼å¤šå¤šçŽ°åœ¨å‘å±•çš„å¾ˆå¿«ï¼Œç–¯ç‹‚æ‹›äººã€‚è¿™è¾¹å·¥ä½œæ—¶é—´æ˜¯11116ï¼Œæ–°å‘˜å·¥ç¬¬ä¸€å¹´æ˜¯å¯ä»¥ä½å®¿èˆçš„ï¼ŒåŒ…ä¸‰é¤ï¼Œåƒçš„è¿˜è¡Œï¼ˆæ‹¼å¤šå¤šå·¥èµ„ç»™çš„ç¡®å®žé«˜ï¼‰ï¼Œå¯ä»¥åŽ»Bossç›´è˜ä¸Šçœ‹æ‹¼å¤šå¤šçš„æ‹›è˜å²—ä½ï¼Œæœ‰æ„å‘çš„å¯ä»¥å‘ç®€åŽ†ç»™æˆ‘ï¼Œç„¶åŽæ ¡æ‹›çš„åœ¨è¿™é‡Œæ‹¼å¤šå¤šæ ¡æ‹›å†…æŽ¨]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ã€é¢è¯•é«˜é¢‘é—®é¢˜ã€‘çº¿ç¨‹ã€è¿›ç¨‹ã€åç¨‹]]></title>
      <url>%2F2019%2F06%2F22%2F%E3%80%90%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91%E9%97%AE%E9%A2%98%E3%80%91%E7%BA%BF%E7%A8%8B%E3%80%81%E8%BF%9B%E7%A8%8B%E3%80%81%E5%8D%8F%E7%A8%8B%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åå››ç¯‡åŽŸåˆ›æ–‡ç«  ä¸€äº›é¢è¯•é¢˜ (à¹‘â€¢ . â€¢à¹‘) éœ€è¦å…ˆå¯¹ IO çš„æ¦‚å¿µæœ‰ä¸€å®šçš„è®¤è¯†: IOåœ¨è®¡ç®—æœºä¸­æŒ‡Input/Outputï¼Œä¹Ÿå°±æ˜¯è¾“å…¥å’Œè¾“å‡ºã€‚ å¹¶å‘ä¸Žå¹¶è¡Œ å¹¶å‘ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼ŒæŸä¸€æ—¶é—´æ®µï¼Œå‡ ä¸ªç¨‹åºåœ¨åŒä¸€ä¸ªCPUä¸Šè¿è¡Œï¼Œä½†åœ¨ä»»æ„ä¸€ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œåªæœ‰ä¸€ä¸ªç¨‹åºåœ¨CPUä¸Šè¿è¡Œã€‚ å½“æœ‰å¤šä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æžœç³»ç»Ÿåªæœ‰ä¸€ä¸ªCPUï¼Œé‚£ä¹ˆCPUä¸å¯èƒ½çœŸæ­£åŒæ—¶è¿›è¡Œå¤šä¸ªçº¿ç¨‹ï¼ŒCPUçš„è¿è¡Œæ—¶é—´ä¼šè¢«åˆ’åˆ†æˆè‹¥å¹²ä¸ªæ—¶é—´æ®µï¼Œæ¯ä¸ªæ—¶é—´æ®µåˆ†é…ç»™å„ä¸ªçº¿ç¨‹åŽ»æ‰§è¡Œï¼Œä¸€ä¸ªæ—¶é—´æ®µé‡ŒæŸä¸ªçº¿ç¨‹è¿è¡Œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¤„äºŽæŒ‚èµ·çŠ¶æ€ï¼Œè¿™å°±æ˜¯å¹¶å‘ã€‚å¹¶å‘è§£å†³äº†ç¨‹åºæŽ’é˜Ÿç­‰å¾…çš„é—®é¢˜ï¼Œå¦‚æžœä¸€ä¸ªç¨‹åºå‘ç”Ÿé˜»å¡žï¼Œå…¶ä»–ç¨‹åºä»ç„¶å¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚ å¹¶è¡Œï¼šå½“æ“ä½œç³»ç»Ÿæœ‰å¤šä¸ªCPUæ—¶ï¼Œä¸€ä¸ªCPUå¤„ç†Açº¿ç¨‹ï¼Œå¦ä¸€ä¸ªCPUå¤„ç†Bçº¿ç¨‹ï¼Œä¸¤ä¸ªçº¿ç¨‹äº’ç›¸ä¸æŠ¢å CPUèµ„æºï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œï¼Œè¿™ç§æ–¹å¼æˆä¸ºå¹¶è¡Œã€‚ åŒºåˆ« å¹¶å‘åªæ˜¯åœ¨å®è§‚ä¸Šç»™äººæ„Ÿè§‰æœ‰å¤šä¸ªç¨‹åºåœ¨åŒæ—¶è¿è¡Œï¼Œä½†åœ¨å®žé™…çš„å•CPUç³»ç»Ÿä¸­ï¼Œæ¯ä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨è¿è¡Œï¼Œå¾®è§‚ä¸Šè¿™äº›ç¨‹åºæ˜¯åˆ†æ—¶äº¤æ›¿æ‰§è¡Œã€‚ åœ¨å¤šCPUç³»ç»Ÿä¸­ï¼Œå°†è¿™äº›å¹¶å‘æ‰§è¡Œçš„ç¨‹åºåˆ†é…åˆ°ä¸åŒçš„CPUä¸Šå¤„ç†ï¼Œæ¯ä¸ªCPUç”¨æ¥å¤„ç†ä¸€ä¸ªç¨‹åºï¼Œè¿™æ ·å¤šä¸ªç¨‹åºä¾¿å¯ä»¥å®žçŽ°åŒæ—¶æ‰§è¡Œã€‚ çŸ¥ä¹Žä¸Šé«˜èµžä¾‹å­ï¼š ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ ä¸€ç›´åˆ°åƒå®Œäº†ä»¥åŽæ‰åŽ»æŽ¥ï¼Œè¿™å°±è¯´æ˜Žä½ ä¸æ”¯æŒå¹¶å‘ä¹Ÿä¸æ”¯æŒå¹¶è¡Œã€‚ ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ åœäº†ä¸‹æ¥æŽ¥äº†ç”µè¯ï¼ŒæŽ¥å®ŒåŽç»§ç»­åƒé¥­ï¼Œè¿™è¯´æ˜Žä½ æ”¯æŒå¹¶å‘ã€‚ ä½ åƒé¥­åƒåˆ°ä¸€åŠï¼Œç”µè¯æ¥äº†ï¼Œä½ ä¸€è¾¹æ‰“ç”µè¯ä¸€è¾¹åƒé¥­ï¼Œè¿™è¯´æ˜Žä½ æ”¯æŒå¹¶è¡Œã€‚ å¹¶å‘çš„å…³é”®æ˜¯ä½ æœ‰å¤„ç†å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›ï¼Œä¸ä¸€å®šè¦åŒæ—¶ã€‚å¹¶è¡Œçš„å…³é”®æ˜¯ä½ æœ‰åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡çš„èƒ½åŠ›ã€‚æ‰€ä»¥æˆ‘è®¤ä¸ºå®ƒä»¬æœ€å…³é”®çš„ç‚¹å°±æ˜¯ï¼šæ˜¯å¦æ˜¯ã€ŽåŒæ—¶ã€ã€‚ è¿›ç¨‹ ä¸€ä¸ªè¿›ç¨‹å¥½æ¯”æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå®ƒæ˜¯ èµ„æºåˆ†é…çš„æœ€å°å•ä½ ã€‚åŒä¸€æ—¶åˆ»æ‰§è¡Œçš„è¿›ç¨‹æ•°ä¸ä¼šè¶…è¿‡æ ¸å¿ƒæ•°ã€‚ä¸è¿‡å¦‚æžœé—®å•æ ¸CPUèƒ½å¦è¿è¡Œå¤šè¿›ç¨‹ï¼Ÿç­”æ¡ˆåˆæ˜¯è‚¯å®šçš„ã€‚å•æ ¸CPUä¹Ÿå¯ä»¥è¿è¡Œå¤šè¿›ç¨‹ï¼Œåªä¸è¿‡ä¸æ˜¯åŒæ—¶çš„ï¼Œè€Œæ˜¯æžå¿«åœ°åœ¨è¿›ç¨‹é—´æ¥å›žåˆ‡æ¢å®žçŽ°çš„å¤šè¿›ç¨‹ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå°±ç®—æ˜¯åå¹´å‰çš„å•æ ¸CPUçš„ç”µè„‘ï¼Œä¹Ÿå¯ä»¥èŠQQçš„åŒæ—¶çœ‹è§†é¢‘ã€‚ ç”µè„‘ä¸­æœ‰è®¸å¤šè¿›ç¨‹éœ€è¦å¤„äºŽã€ŒåŒæ—¶ã€å¼€å¯çš„çŠ¶æ€ï¼Œè€Œåˆ©ç”¨CPUåœ¨è¿›ç¨‹é—´çš„å¿«é€Ÿåˆ‡æ¢ï¼Œå¯ä»¥å®žçŽ°ã€ŒåŒæ—¶ã€è¿è¡Œå¤šä¸ªç¨‹åºã€‚è€Œè¿›ç¨‹åˆ‡æ¢åˆ™æ„å‘³ç€éœ€è¦ä¿ç•™è¿›ç¨‹åˆ‡æ¢å‰çš„çŠ¶æ€ï¼Œä»¥å¤‡åˆ‡æ¢å›žåŽ»çš„æ—¶å€™èƒ½å¤Ÿç»§ç»­æŽ¥ç€å·¥ä½œã€‚æ‰€ä»¥è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œå…¨å±€å˜é‡ï¼Œæ–‡ä»¶æè¿°ç¬¦ï¼Œå„ç§ç¡¬ä»¶ç­‰ç­‰èµ„æºã€‚æ“ä½œç³»ç»Ÿé€šè¿‡è°ƒåº¦CPUåŽ»æ‰§è¡Œè¿›ç¨‹çš„è®°å½•ã€å›žå¤ã€åˆ‡æ¢ç­‰ç­‰ã€‚ çº¿ç¨‹ å¦‚æžœè¯´è¿›ç¨‹å’Œè¿›ç¨‹ä¹‹é—´ç›¸å½“äºŽç¨‹åºä¸Žç¨‹åºä¹‹é—´çš„å…³ç³»ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¸Žçº¿ç¨‹ä¹‹é—´å°±ç›¸å½“äºŽç¨‹åºå†…çš„ä»»åŠ¡å’Œä»»åŠ¡ä¹‹é—´çš„å…³ç³»ã€‚æ‰€ä»¥çº¿ç¨‹æ˜¯ä¾èµ–äºŽè¿›ç¨‹çš„ï¼Œä¹Ÿç§°ä¸º ã€Œå¾®è¿›ç¨‹ã€ ã€‚å®ƒæ˜¯ ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æœ€å°å•å…ƒ ã€‚ ä¸€ä¸ªç¨‹åºå†…åŒ…å«äº†å¤šç§ä»»åŠ¡ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œç”¨æ’­æ”¾å™¨çœ‹è§†é¢‘çš„æ—¶å€™ï¼Œè§†é¢‘è¾“å‡ºçš„ç”»é¢å’Œå£°éŸ³å¯ä»¥è®¤ä¸ºæ˜¯ä¸¤ç§ä»»åŠ¡ã€‚å½“ä½ æ‹–åŠ¨è¿›åº¦æ¡çš„æ—¶å€™åˆè§¦å‘äº†å¦å¤–ä¸€ç§ä»»åŠ¡ã€‚æ‹–åŠ¨è¿›åº¦æ¡ä¼šå¯¼è‡´ç”»é¢å’Œå£°éŸ³éƒ½å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æžœè¿›ç¨‹é‡Œæ²¡æœ‰çº¿ç¨‹çš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½å‘ç”Ÿçš„æƒ…å†µå°±æ˜¯ï¼š æ‹–åŠ¨è¿›åº¦æ¡-&gt;ç”»é¢æ›´æ–°-&gt;å£°éŸ³æ›´æ–°ã€‚ä½ ä¼šæ˜Žæ˜¾æ„Ÿåˆ°ç”»é¢å’Œå£°éŸ³å’Œè¿›åº¦æ¡ä¸åŒæ­¥ã€‚ ä½†æ˜¯åŠ ä¸Šäº†çº¿ç¨‹ä¹‹åŽï¼Œçº¿ç¨‹èƒ½å¤Ÿå…±äº«è¿›ç¨‹çš„å¤§éƒ¨åˆ†èµ„æºï¼Œå¹¶å‚ä¸ŽCPUçš„è°ƒåº¦ã€‚æ„å‘³ç€å®ƒèƒ½å¤Ÿåœ¨è¿›ç¨‹é—´è¿›è¡Œåˆ‡æ¢ï¼Œå®žçŽ°ã€Œå¹¶å‘ã€ï¼Œä»Žè€Œåé¦ˆåˆ°ä½¿ç”¨ä¸Šå°±æ˜¯æ‹–åŠ¨è¿›åº¦æ¡çš„åŒæ—¶ï¼Œç”»é¢å’Œå£°éŸ³éƒ½åŒæ­¥äº†ã€‚æ‰€ä»¥æˆ‘ä»¬ç»å¸¸èƒ½å¬åˆ°çš„ä¸€ä¸ªè¯æ˜¯ã€Œå¤šçº¿ç¨‹ã€ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªç¨‹åºåˆ†æˆå¤šä¸ªä»»åŠ¡åŽ»è·‘ï¼Œè®©ä»»åŠ¡æ›´å¿«å¤„ç†ã€‚ä¸è¿‡çº¿ç¨‹å’Œçº¿ç¨‹ä¹‹é—´ç”±äºŽæŸäº›èµ„æºæ˜¯ç‹¬å çš„ï¼Œä¼šå¯¼è‡´é”çš„é—®é¢˜ã€‚ä¾‹å¦‚Pythonçš„GILå¤šçº¿ç¨‹é”ã€‚ è¿›ç¨‹ä¸Žçº¿ç¨‹çš„åŒºåˆ« è¿›ç¨‹æ˜¯CPUèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼ˆCPUä¸ŠçœŸæ­£è¿è¡Œçš„æ˜¯çº¿ç¨‹ï¼‰ã€‚ è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„èµ„æºç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹åŒ…å«è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹ä¸ŽCPUèµ„æºåˆ†é…æ— å…³ï¼Œå¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€è¿›ç¨‹å†…çš„èµ„æºã€‚ çº¿ç¨‹çš„è°ƒåº¦ä¸Žåˆ‡æ¢æ¯”è¿›ç¨‹å¿«å¾ˆå¤šã€‚ CPUå¯†é›†åž‹ä»£ç (å„ç§å¾ªçŽ¯å¤„ç†ã€è®¡ç®—ç­‰ç­‰)ï¼šä½¿ç”¨å¤šè¿›ç¨‹ã€‚IOå¯†é›†åž‹ä»£ç (æ–‡ä»¶å¤„ç†ã€ç½‘ç»œçˆ¬è™«ç­‰)ï¼šä½¿ç”¨å¤šçº¿ç¨‹ é˜»å¡žä¸Žéžé˜»å¡ž é˜»å¡žæ˜¯æŒ‡è°ƒç”¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹è¢«æ“ä½œç³»ç»ŸæŒ‚èµ·ã€‚ éžé˜»å¡žæ˜¯æŒ‡è°ƒç”¨çº¿ç¨‹æˆ–è€…è¿›ç¨‹ä¸ä¼šè¢«æ“ä½œç³»ç»ŸæŒ‚èµ·ã€‚ åŒæ­¥ä¸Žå¼‚æ­¥ åŒæ­¥æ˜¯é˜»å¡žæ¨¡å¼ï¼Œå¼‚æ­¥æ˜¯éžé˜»å¡žæ¨¡å¼ã€‚ åŒæ­¥å°±æ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹åœ¨æ‰§è¡ŒæŸä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œè‹¥è¯¥è¯·æ±‚éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è¿”å›žä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°†ä¼šä¸€ç›´ç­‰å¾…ä¸‹åŽ»ï¼ŒçŸ¥é“æ”¶åˆ°è¿”å›žä¿¡æ¯æ‰ç»§ç»­æ‰§è¡Œä¸‹åŽ»ï¼› å¼‚æ­¥æ˜¯æŒ‡è¿›ç¨‹ä¸éœ€è¦ä¸€ç›´ç­‰ä¸‹åŽ»ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼Œä¸ç®¡å…¶ä»–è¿›ç¨‹çš„çŠ¶æ€ã€‚å½“æœ‰æ¶ˆæ¯è¿”å›žå¼ç³»ç»Ÿä¼šé€šçŸ¥è¿›ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¯ä»¥æé«˜æ‰§è¡Œçš„æ•ˆçŽ‡ã€‚ ç”±è°ƒç”¨æ–¹ç›²ç›®ä¸»åŠ¨é—®è¯¢çš„æ–¹å¼æ˜¯åŒæ­¥è°ƒç”¨ï¼Œç”±è¢«è°ƒç”¨æ–¹ä¸»åŠ¨é€šçŸ¥è°ƒç”¨æ–¹ä»»åŠ¡å·²å®Œæˆçš„æ–¹å¼æ˜¯å¼‚æ­¥è°ƒç”¨ã€‚çœ‹ä¸‹å›¾ åç¨‹ åç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚è‹±æ–‡åCoroutineã€‚ä¸€å¥è¯è¯´æ˜Žä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼šåç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚ åç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›žæ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚å› æ­¤ï¼š åç¨‹èƒ½ä¿ç•™ä¸Šä¸€æ¬¡è°ƒç”¨æ—¶çš„çŠ¶æ€ï¼ˆå³æ‰€æœ‰å±€éƒ¨çŠ¶æ€çš„ä¸€ä¸ªç‰¹å®šç»„åˆï¼‰ï¼Œæ¯æ¬¡è¿‡ç¨‹é‡å…¥æ—¶ï¼Œå°±ç›¸å½“äºŽè¿›å…¥ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€ï¼Œæ¢ç§è¯´æ³•ï¼šè¿›å…¥ä¸Šä¸€æ¬¡ç¦»å¼€æ—¶æ‰€å¤„é€»è¾‘æµçš„ä½ç½®ã€‚ åç¨‹çš„å¥½å¤„ï¼š æ— éœ€çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ æ— éœ€åŽŸå­æ“ä½œé”å®šåŠåŒæ­¥çš„å¼€é”€ æ–¹ä¾¿åˆ‡æ¢æŽ§åˆ¶æµï¼Œç®€åŒ–ç¼–ç¨‹æ¨¡åž‹ é«˜å¹¶å‘+é«˜æ‰©å±•æ€§+ä½Žæˆæœ¬ï¼šä¸€ä¸ªCPUæ”¯æŒä¸Šä¸‡çš„åç¨‹éƒ½ä¸æ˜¯é—®é¢˜ã€‚æ‰€ä»¥å¾ˆé€‚åˆç”¨äºŽé«˜å¹¶å‘å¤„ç†ã€‚ ç¼ºç‚¹ï¼š æ— æ³•åˆ©ç”¨å¤šæ ¸èµ„æºï¼šåç¨‹çš„æœ¬è´¨æ˜¯ä¸ªå•çº¿ç¨‹,å®ƒä¸èƒ½åŒæ—¶å°† å•ä¸ªCPU çš„å¤šä¸ªæ ¸ç”¨ä¸Š,åç¨‹éœ€è¦å’Œè¿›ç¨‹é…åˆæ‰èƒ½è¿è¡Œåœ¨å¤šCPUä¸Š.å½“ç„¶æˆ‘ä»¬æ—¥å¸¸æ‰€ç¼–å†™çš„ç»å¤§éƒ¨åˆ†åº”ç”¨éƒ½æ²¡æœ‰è¿™ä¸ªå¿…è¦ï¼Œé™¤éžæ˜¯cpuå¯†é›†åž‹åº”ç”¨ã€‚ è¿›è¡Œé˜»å¡žï¼ˆBlockingï¼‰æ“ä½œï¼ˆå¦‚IOæ—¶ï¼‰ä¼šé˜»å¡žæŽ‰æ•´ä¸ªç¨‹åº æœ€ä½³å®žè·µ çº¿ç¨‹å’Œåç¨‹æŽ¨èåœ¨IOå¯†é›†åž‹çš„ä»»åŠ¡(æ¯”å¦‚ç½‘ç»œè°ƒç”¨)ä¸­ä½¿ç”¨ï¼Œè€Œåœ¨CPUå¯†é›†åž‹çš„ä»»åŠ¡ä¸­ï¼Œè¡¨çŽ°è¾ƒå·®ã€‚ å¯¹äºŽCPUå¯†é›†åž‹çš„ä»»åŠ¡ï¼Œåˆ™éœ€è¦å¤šä¸ªè¿›ç¨‹ï¼Œç»•å¼€GILçš„é™åˆ¶ï¼Œåˆ©ç”¨æ‰€æœ‰å¯ç”¨çš„CPUæ ¸å¿ƒï¼Œæé«˜æ•ˆçŽ‡ã€‚ æ‰€ä»¥å¤§å¹¶å‘ä¸‹çš„æœ€ä½³å®žè·µå°±æ˜¯å¤šè¿›ç¨‹+åç¨‹ï¼Œæ—¢å……åˆ†åˆ©ç”¨å¤šæ ¸ï¼Œåˆå……åˆ†å‘æŒ¥åç¨‹çš„é«˜æ•ˆçŽ‡ï¼Œå¯èŽ·å¾—æžé«˜çš„æ€§èƒ½ã€‚ é¡ºä¾¿ä¸€æï¼Œéžå¸¸æµè¡Œçš„ä¸€ä¸ªçˆ¬è™«æ¡†æž¶Scrapyå°±æ˜¯ç”¨åˆ°å¼‚æ­¥æ¡†æž¶Twistedæ¥è¿›è¡Œä»»åŠ¡çš„è°ƒåº¦ï¼Œè¿™ä¹Ÿæ˜¯Scrapyæ¡†æž¶é«˜æ€§èƒ½çš„åŽŸå› ä¹‹ä¸€ã€‚ æœ€åŽæŽ¨èé˜…è¯»ï¼šæ·±å…¥ç†è§£ Python å¼‚æ­¥ç¼–ç¨‹(ä¸Š) é˜…è¯»åŽŸæ–‡]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Dockeré€šè¿‡EFKï¼ˆElasticsearch + Fluentd + Kibanaï¼‰æŸ¥è¯¢æ—¥å¿—]]></title>
      <url>%2F2019%2F04%2F20%2FDocker%E9%80%9A%E8%BF%87EFK%EF%BC%88Elasticsearch-Fluentd-Kibana%EF%BC%89%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  éƒ¨ç½²ç›¸å…³ (à¹‘â€¢ . â€¢à¹‘) Dockeré€šè¿‡EFKï¼ˆElasticsearch + Fluentd + Kibanaï¼‰æŸ¥è¯¢æ—¥å¿—è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯å‚è€ƒDocker Logging via EFK (Elasticsearch + Fluentd + Kibana) Stack with Docker Composeï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šåšäº†ä¸€äº›ä¿®æ”¹ã€‚ Elasticsearchæ˜¯ä¸€ä¸ªå¼€æºæœç´¢å¼•æ“Žï¼Œä»¥æ˜“ç”¨æ€§ç€ç§°ã€‚kibanaæ˜¯ä¸€ä¸ªå›¾å½¢ç•Œé¢ï¼Œå¯ä»¥åœ¨ä¸Šé¢æ¡ä»¶æ£€ç´¢å­˜å‚¨åœ¨ElasticSearché‡Œæ•°æ®ï¼Œç›¸å½“äºŽæä¾›äº†ESçš„å¯è§†åŒ–æ“ä½œç®¡ç†å™¨ã€‚æˆªå›¾å¦‚ä¸‹ï¼š è¿™é‡ŒåŸºæœ¬çš„æž¶æž„æ˜¯è¿™æ ·çš„ è¿™é‡Œä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯æ—¥å¿—æŸ¥è¯¢ï¼Œæ—¥å¿—æ¥æºæ˜¯dockerã€‚æˆ‘ä»¬ä½¿ç”¨dockeréƒ¨ç½²ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨docker logs -f &lt;å®¹å™¨id&gt;æŸ¥çœ‹æ—¥å¿—ï¼Œä¹Ÿå¯ä»¥åŽ»/var/lib/docker/containers/&lt;å®¹å™¨id&gt;/&lt;å®¹å™¨id&gt;-json.logæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ã€‚ä½†æ˜¯è¿™éƒ½å¾ˆéš¾åŽ»åšæŸ¥è¯¢ï¼Œæœ¬æ–‡ä»‹ç»çš„EFKå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æˆ‘ä»¬ä¼šåˆ›å»ºå››ä¸ªå®¹å™¨ï¼š httpd (å‘é€æ—¥å¿—ç»™EFK) Fluentd Elasticsearch Kibana çŽ¯å¢ƒå‡†å¤‡è¯·å®‰è£…æœ€æ–°çš„dockeråŠdocker-composeï¼Œè€ç‰ˆæœ¬ä¼šæœ‰äº›é—®é¢˜ã€‚ è¿™é‡Œæ˜¯æˆ‘çš„ç‰ˆæœ¬ 123456789101112131415161718192021222324âžœ ~ docker versionClient: Docker Engine - Community Version: 18.09.2 API version: 1.39 Go version: go1.10.8 Git commit: 6247962 Built: Sun Feb 10 04:12:39 2019 OS/Arch: darwin/amd64 Experimental: falseServer: Docker Engine - Community Engine: Version: 18.09.2 API version: 1.39 (minimum version 1.12) Go version: go1.10.6 Git commit: 6247962 Built: Sun Feb 10 04:13:06 2019 OS/Arch: linux/amd64 Experimental: falseâžœ ~ docker-compose versiondocker-compose version 1.23.2, build 1110ad01docker-py version: 3.6.0CPython version: 3.6.6OpenSSL version: OpenSSL 1.1.0h 27 Mar 2018 ç¼–å†™docker-compose.ymlDocker Composeæ˜¯ä¸€ä¸ªç”¨äºŽå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚ 12345678910111213141516171819202122232425262728293031323334353637version: '2'services: web: image: httpd ports: - "1080:80" #é¿å…å’Œé»˜è®¤çš„80ç«¯å£å†²çª links: - fluentd logging: driver: "fluentd" options: fluentd-address: localhost:24224 tag: httpd.access fluentd: build: ./fluentd volumes: - ./fluentd/conf:/fluentd/etc links: - "elasticsearch" ports: - "24224:24224" - "24224:24224/udp" elasticsearch: image: elasticsearch:5.3.0 expose: - 9200 ports: - "9200:9200" kibana: image: kibana:5.3.0 links: - "elasticsearch" ports: - "5601:5601" æ‰€æœ‰webé‡Œçš„æ—¥å¿—ä¼šè‡ªåŠ¨å‘é€åˆ°fluentd-address: localhost:24224ï¼Œä¹Ÿå°±æ˜¯fluentdå®¹å™¨ã€‚ Elasticsearch å’Œ Kibanaå¹¶ä¸æ”¯æŒæœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œé€‰æ‹©çš„æ˜¯5.3.0ï¼Œå¦‚æžœæƒ³è¦é€‰æ‹©æ›´æ–°çš„ï¼Œå¯ä»¥åŽ»è¿™é‡ŒæŸ¥çœ‹ Elasticsearch image tags in DockerHub Kibana image tags in DockerHub Fluentdçš„é…ç½®å’Œæ’ä»¶æ–°å»ºæ–‡ä»¶fluentd/Dockerfileï¼Œä½¿ç”¨å®˜æ–¹é•œåƒFluentdâ€™s official Docker imageï¼Œå®‰è£…éœ€è¦çš„æ’ä»¶ 123# fluentd/DockerfileFROM fluent/fluentd:v0.12-debianRUN ["gem", "install", "fluent-plugin-elasticsearch", "--no-rdoc", "--no-ri", "--version", "1.9.7"] ç„¶åŽæ–°å»ºæ–‡ä»¶fluentd/conf/fluent.confï¼Œç¼–å†™Fluentdçš„é…ç½®æ–‡ä»¶ 123456789101112131415161718192021222324# fluentd/conf/fluent.conf&lt;source&gt; @type forward port 24224 bind 0.0.0.0&lt;/source&gt;&lt;match *.**&gt; @type copy &lt;store&gt; @type elasticsearch host elasticsearch port 9200 logstash_format true logstash_prefix fluentd logstash_dateformat %Y%m%d include_tag_key true type_name access_log tag_key @log_name flush_interval 1s &lt;/store&gt; &lt;store&gt; @type stdout &lt;/store&gt;&lt;/match&gt; å®˜æ–¹è®¾ç½®æ–‡æ¡£config-file å¯åŠ¨å®¹å™¨åœ¨åŽå°å¯åŠ¨ï¼Œä½¿ç”¨docker-compose up -d 12345âžœ docker-compose up -dRecreating temp_elasticsearch_1 ... doneRecreating temp_kibana_1 ... doneRecreating temp_fluentd_1 ... doneRecreating temp_web_1 ... done æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ 123456âžœ docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES03d589afc2fd httpd "httpd-foreground" About a minute ago Up About a minute 0.0.0.0:1080-&gt;80/tcp temp_web_1e84d0753ee58 kibana:5.3.0 "/docker-entrypoint.â€¦" About a minute ago Up About a minute 0.0.0.0:5601-&gt;5601/tcp temp_kibana_10f069b8b138f temp_fluentd "tini -- /bin/entrypâ€¦" About a minute ago Up About a minute 5140/tcp, 0.0.0.0:24224-&gt;24224/tcp, 0.0.0.0:24224-&gt;24224/udp temp_fluentd_1fb4c6255e7ed elasticsearch:5.3.0 "/docker-entrypoint.â€¦" 2 minutes ago Up About a minute 0.0.0.0:9200-&gt;9200/tcp, 9300/tcp temp_elasticsearch_1 äº§ç”Ÿæ—¥å¿—åŽŸæ–‡æ˜¯repeat 10 curl http://localhost:80/ï¼Œä½†æ˜¯æˆ‘åœ¨docker-compose.ymlä¸­ä¿®æ”¹äº†ç«¯å£ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œæ˜¯ 1234567891011âžœ repeat 10 curl http://localhost:1080/&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&lt;html&gt;&lt;body&gt;&lt;h1&gt;It works!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt; æŸ¥çœ‹æ—¥å¿—æ‰“å¼€http://localhost:5601ï¼Œæç¤ºéœ€è¦å…ˆå»ºç´¢å¼•ï¼Œè¾“å…¥fluentd-*åˆ·æ–°å³å¯ åŽ»Discoveré¡µé¢ï¼Œç„¶åŽå°±å¯ä»¥çœ‹åˆ°ä¹‹å‰çš„æ—¥å¿—äº†ã€‚ å¦‚ä½•æŽ¥å…¥å…¶ä»–dockeræ—¥å¿—è¿™é‡Œæ˜¯ä»¥docker-composeå½¢å¼å¯åŠ¨çš„ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æžœè¿˜æœ‰åˆ«çš„ä»»åŠ¡éœ€è¦å°†æ—¥å¿—å‘é€åˆ°fluentdï¼Œéœ€è¦è¿™å‡ ä¸ªæ­¥éª¤ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker-composeä¼šä¸ºæˆ‘ä»¬çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªç½‘ç»œï¼ŒæœåŠ¡çš„æ¯ä¸ªå®¹å™¨éƒ½ä¼šåŠ å…¥è¯¥ç½‘ç»œä¸­ã€‚è¿™æ ·ï¼Œå®¹å™¨å°±å¯è¢«è¯¥ç½‘ç»œä¸­çš„å…¶ä»–å®¹å™¨è®¿é—®ï¼Œä¸ä»…å¦‚æ­¤ï¼Œè¯¥å®¹å™¨è¿˜èƒ½ä»¥æœåŠ¡åç§°ä½œä¸ºhostnameè¢«å…¶ä»–å®¹å™¨è®¿é—®ã€‚ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦æ‰¾åˆ°æˆ‘ä»¬çŽ°åœ¨åˆ›å»ºçš„EFKçš„ç½‘ç»œåï¼Œ 1234567891011âžœ docker network lsNETWORK ID NAME DRIVER SCOPEfd428cfa7264 bridge bridge locale08505f7bfe6 docker-compose-efk_default bridge local650f2f690175 docker-efk_default bridge local35f17aeb61e9 docker-elk_elk bridge localdb29d28aa5cc esnet bridge local56ea915974c9 host host local4d0207065fb8 none null local3dd60d8ddfce temp_default bridge localcf1a06702ae8 web_default bridge local æˆ‘æ˜¯åœ¨tempç›®å½•ä¸‹åˆ›å»ºçš„docker-compose.ymlæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œé»˜è®¤çš„åå­—å°±æ˜¯temp_defaultã€‚ å†çœ‹çœ‹ä¹‹å‰webçš„è®¾ç½® 1234567891011web: image: httpd ports: - "1080:80" #é¿å…å’Œé»˜è®¤çš„80ç«¯å£å†²çª links: - fluentd logging: driver: "fluentd" options: fluentd-address: localhost:24224 tag: httpd.access æœ‰å‡ ä¸ªå…³é”®è®¾ç½®æ˜¯ï¼šlinkså’Œloggingï¼Œlink ç”¨äºŽå®¹å™¨ç›´æŽ¥çš„äº’é€šï¼Œloggingåˆ™æ˜¯æ—¥å¿—çš„è¾“å‡ºè®¾ç½®ã€‚ é‚£æˆ‘ä»¬è¿™é‡Œå†å¯åŠ¨ä¸€ä¸ªæ–°dockeréœ€è¦è¿™äº›è®¾ç½® 1234567docker run --link temp_fluentd_1 \ --net temp_default \ --log-driver=fluentd \ --log-opt fluentd-address=localhost:24224 \ --log-opt tag=httpd.access \ -d hello-world æˆ‘ä»¬åŽ»kibanaçœ‹çœ‹ï¼Œæžœç„¶ï¼Œæ—¥å¿—å·²ç»å‘é€åˆ°kibanaäº† å°†logæ·»åŠ åˆ°é€‰æ‹©å­—æ®µï¼Œæ—¥å¿—é˜…è¯»èµ·æ¥æ›´ä½³ ç‰ˆæœ¬é€‰æ‹©ä¸Šé¢è¯´åˆ°è¿™é‡Œé€‰æ‹©çš„æ˜¯5.3.0ï¼Œæˆ‘ä»¬è¯•è¯•æ–°ç‰ˆæœ¬6.7.1ï¼Œå†çœ‹çœ‹kibanaã€‚ä½¿ç”¨docker-compose stopåœæ­¢æœåŠ¡ï¼Œä¿®æ”¹docker-composeæ–‡ä»¶å†å¯åŠ¨ã€‚ ä½†æ˜¯å·²å¯åŠ¨eså°±æŒ‚äº†ï¼Œæœ€ åŽæŸ¥çœ‹æ—¥å¿—docker-compose logs | grep elasticsearch_1ï¼Œå‘çŽ°å¦‚ä¸‹é”™è¯¯ï¼š â€œNative controller process has stopped - no new native processes can be startedâ€ æœ€åŽåœ¨giuhubä¸Šæ‰¾åˆ°ç­”æ¡ˆï¼šes crashes with â€œNative controller process has stopped - no new native processes can be startedâ€ è§£å†³æ–¹æ³•æ˜¯ï¼Œæé«˜dockerå¯ç”¨å†…å­˜ï¼Œmacä¸Šæ˜¯è¿™æ ·è®¾ç½®ï¼ŒæŠŠå†…å­˜ä»Ž2Gæé«˜åˆ°4Gï¼Œå†å¯åŠ¨å°±æˆåŠŸäº†ã€‚ è¿™é‡Œæ˜¯6.7.1çš„ç•Œé¢ æœ€åŽæƒ³è¦åšçš„å°±æ˜¯å¦‚ä½•åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šæœé›†æ‰€æœ‰çš„æ—¥å¿—ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œåªéœ€è¦ä¸€å°æœåŠ¡å™¨éƒ¨ç½²ä¸ŠEFKï¼Œæš´éœ²ç«¯å£ï¼Œå…¶ä»–æœåŠ¡å™¨åŽ»å‘é€å³å¯ï¼Œå®žé™…ä¸Šè¿˜æ²¡è¯•è¿‡ã€‚ å¦‚æžœæœ‰å¥½çš„æ„è§ï¼Œæ¬¢è¿Žæ¥æã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¯¹ç¬¬ä¸€ä»½å·¥ä½œçš„æ€»ç»“]]></title>
      <url>%2F2019%2F04%2F07%2F%E5%AF%B9%E7%AC%AC%E4%B8%80%E4%BB%BD%E5%B7%A5%E4%BD%9C%E7%9A%84%E6%80%BB%E7%BB%93%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åäºŒç¯‡åŽŸåˆ›æ–‡ç«  ä¸¤å¹´å·¥ä½œçš„æ€»ç»“ (à¹‘â€¢ . â€¢à¹‘) æœ‰æ®µæ—¶é—´æ²¡å†™ä¸œè¥¿äº†ï¼Œå¦‚æžœä½ åœ¨èŒæ–°ç¾¤é‡Œï¼Œåº”è¯¥çŸ¥é“æˆ‘æœ€è¿‘æ¢å·¥ä½œçš„äº‹ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯è¾žåŽ»äº†åŒ—äº¬çš„å·¥ä½œï¼Œåœ¨æ­å·žæ‰¾åˆ°äº†æ–°å·¥ä½œã€‚ çœ‹åˆ°æ‰‹é‡Œçš„ç¦»èŒè¯æ˜Žï¼Œæƒ³ç€è¿˜æ˜¯å†™ç‚¹ä»€ä¹ˆï¼Œè®°å½•ä¸‹æˆ‘æ¯•ä¸šåŽçš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œåœ¨è¿™é‡Œæˆ‘åšäº†ä»€ä¹ˆï¼Œå­¦åˆ°äº†ä»€ä¹ˆã€‚ åˆ°æ¥17å¹´6æœˆåˆ†æ¯•ä¸šæˆ·å°±æ¥åˆ°äº†åŒ—äº¬ï¼Œæˆ‘æ¸…æ¥šçš„è®°å¾—åŽ»åŒ—äº¬æ˜¯åçš„æ™®å¿«ï¼Œé‚£å¤©æ™šä¸Šæ˜¯æ¬§å† å†³èµ›ï¼Œçš‡é©¬æ˜¯å† å†›ã€‚æˆ‘åŽ»æŸ¥äº†ä¸‹ï¼Œæ˜¯2017å¹´06æœˆ04ï¼Œçš‡é©¬èµ¢äº†å°¤æ–‡å›¾æ–¯ã€‚(æˆ‘æ˜¯Cç½—çƒè¿·) å¼€å§‹ä¸€ä¸ªäººæ¥åˆ°åŒ—äº¬ï¼Œç¡®å®žæœ‰å¾ˆå¤šä¸é€‚åº”çš„åœ°æ–¹ã€‚é¦–å…ˆä½çš„åœ°æ–¹ï¼Œæœ‹å‹å¸®æˆ‘åœ¨6å·çº¿çš„ä¸œå¤å›­ç§Ÿäº†ä¸€ä¸ª1000å…ƒçš„å°æˆ¿å­ï¼Œå°åŒºç‰¹åˆ«ååƒ»ï¼Œåƒé¥­çš„åœ°æ–¹å¾ˆå°‘ï¼Œè€Œä¸”åŒ—æ–¹ç…Žé¥¼æžœå­å’Œé¢é£Ÿç‰¹åˆ«å¤šï¼Œåˆšå¼€å§‹å¾ˆä¸é€‚åº”ï¼ŒåŽæ¥æ…¢æ…¢å¥½äº†ç‚¹ã€‚ å…¬å¸åˆšå¼€å§‹åœ¨é’å¹´è·¯ç«™ï¼ŒåŽæ¥æ¬åŽ»äº†åé‡Œå ¡ã€‚æ‰€ä»¥å‡ºè¡Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œå°±åœ¨6å·çº¿ï¼Œæ—©ä¸Šä¸Šç­è¿˜æœ‰åº§ä½å¯ä»¥åã€‚é€ æ•°ä¹‹å‰çš„äº§å“ä¸»è¦æ˜¯æ•°æ®é‡‡é›†å·¥å…·ï¼ŒçŽ°åœ¨å¯ä»¥å…è´¹è¯•ç”¨ï¼šé€ æ•° - æ–°ä¸€ä»£æ™ºèƒ½äº‘çˆ¬è™«ï¼Œè™½ç„¶å¾ˆå¤šç½‘ç«™ç”¨ä¸äº†ã€‚ æˆ‘åˆšå¼€å§‹åšçš„æœ‰ä¸€éƒ¨åˆ†è¿è¥çš„å·¥ä½œã€ä¹Ÿæœ‰é…åˆå…¶ä»–äººå½•åˆ¶äº†çˆ¬è™«è§†é¢‘æ•™ç¨‹ï¼ŒçŽ°åœ¨å›žåŽ»ç®€ç›´æ²¡æ³•çœ‹ï¼Œæ„Ÿè§‰å¤ªå‚»äº†ï¼Œä½ ä»¬åƒä¸‡åˆ«åŽ»çœ‹ã€‚å¦‚æžœè¦å­¦çˆ¬è™«çš„è¯ï¼Œç­‰æˆ‘æŠŠè¿™ä¸ªå†™å®Œï¼šæ•°æ®é‡‡é›†ä»Žå…¥é—¨åˆ°æ”¾å¼ƒ è½¬å²—æˆ‘æ˜¯åœ¨é€ æ•°å†…éƒ¨å®Œæˆçš„è½¬å²—ï¼Œæˆä¸ºçˆ¬è™«å·¥ç¨‹å¸ˆã€‚ä¸€æ–¹é¢æ˜¯æˆ‘æœ‰çˆ¬è™«æ–¹é¢çš„åŸºç¡€ï¼Œå¹¶ä¸€æ–¹é¢ä¸šåŠ¡éœ€è¦æ‹›äº†éœ€è¦å¾ˆå¤šæ•°æ®ã€‚è½¬å²—ç¡®å®žä¸å®¹æ˜“ï¼Œéœ€è¦å­¦ä¹ å¾ˆå¤šä¸œè¥¿ï¼Œä¹Ÿéœ€è¦ä¸€ç‚¹è¿æ°”ï¼Œæ„Ÿè§‰æœ€é‡è¦æ˜¯å°±æ˜¯åšæŒå§ã€‚ åšçš„ç¬¬ä¸€ä¸ªé¡¹ç›®æ˜¯æœ‰äººå¸¦ï¼Œå‰å‰åŽåŽæœ‰ä¸€ä¸ªå¤šæœˆæ‰ç®—å®Œå·¥ï¼Œè™½ç„¶æœ€ç»ˆçš„çˆ¬è™«å¾ˆç®€å•ï¼Œä¸­é—´å´è¸©äº†ä¸å°‘å¼¯è·¯ï¼Œä¹Ÿåœ¨ä½¿ç”¨ä¸­å¯¹Scrapyè¶Šæ¥è¶Šç†Ÿæ‚‰ï¼Œä¹ŸçŸ¥é“å¦‚ä½•åœ¨Scrapyçš„åŸºç¡€ä¸Šå†æ¬¡å¼€å‘ï¼Œä¹Ÿå°±æ˜¯é€ è½®å­ï¼Œè¿™äº›è½®å­åœ¨åŽæ¥æ­¤ç±»çš„é¡¹ç›®ä¸­åŸºæœ¬æ˜¯åœ¨ä¸€ç›´ä½¿ç”¨ã€‚ å†åˆ°åŽæ¥åŸºæœ¬ä¸Šå°±æ˜¯è‡ªå·±ç‹¬ç«‹è´Ÿè´£Nä¸ªé¡¹ç›®äº†ï¼Œæ„Ÿè§‰æ¯åšä¸€ä¸ªé¡¹ç›®ï¼Œå°±é‡åˆ°ä¸€äº›å‘ï¼Œç„¶åŽå°±ä¼šæ–°å­¦åˆ°ä¸€äº›æŠ€èƒ½ï¼Œæˆé•¿ä¼šæ¯”è¾ƒå¿«ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆæœ‰è¶£çš„è¿‡ç¨‹ã€‚ ä¼šæœ‰åŠ ç­ï¼Œæœ€æ™šçš„ä¸€æ¬¡æ˜¯å‡Œæ™¨ä¸¤ç‚¹å§ï¼Œå…¶å®žæˆ‘çŽ°åœ¨å›žæƒ³åŠ ç­çš„åŽŸå› ä¸»è¦æ˜¯è‡ªå·±èƒ½åŠ›å¤ªå·®ï¼Œå¦‚æžœå½“æ—¶æ°´å¹³å†å¥½ç‚¹ï¼Œå°±ä¸è‡³äºŽåŠ ç­è¿™ä¹ˆæ™šã€‚ å­¦ä¹ æˆ‘è§‰å¾—è‡ªå·±æ¯”è¾ƒå¤§çš„ä¼˜åŠ¿åœ¨äºŽå­¦ä¹ å§ï¼Œä»Žæœ€å¼€å§‹å­¦ä¹ ç¼–ç¨‹å¼€å§‹ï¼Œå°±ä¼šæŠŠè‡ªå·±æ‰€å­¦è®°å½•ä¸‹æ¥ï¼Œåˆšå¼€å§‹æ˜¯åœ¨çŸ¥ä¹Žä¸Šï¼ŒåŽæ¥ç”¨hexoæ­å»ºäº†è‡ªå·±çš„åšå®¢ï¼ŒåŽæ¥å†™å…¬ä¼—å·ï¼Œæ‰“ç®—ä»¥åŽå†ç”¨tornadoæ¥å†™ä¸ªåšå®¢ã€‚ å…³äºŽå­¦ä¹ è¿™ä¸ªä¸œè¥¿ï¼Œæ‰€å­¦ä¸€å®šè¦æœ‰æ‰€ç”¨ï¼Œä¸ç„¶ä¸€å®šä¼šå¿˜è®°ã€‚æŸä¸ªä¸œè¥¿åœ¨éœ€è¦çš„æ—¶å€™å†åŽ»å­¦ä¹ ï¼Œç„¶åŽå°†æ‰€å­¦ç”¨åˆ°å®žé™…é¡¹ç›®ä¸­ï¼Œå†æœ‰äººæŒ‡ç‚¹ä¸€äºŒï¼Œä¼šå¾ˆå¿«æŽŒæ¡æ–°çš„æŠ€èƒ½ã€‚ æˆ‘ä¸€èˆ¬é‡åˆ°é—®é¢˜ä¼šæœ‰å¦‚ä¸‹è§£å†³æ–¹æ³•ï¼š é¦–å…ˆè‚¯å®šæ˜¯åŽ»Googleï¼Œæ³¨æ„éœ€è¦æŠŠä½ çš„ä¸­æ–‡å…ˆç¿»è¯‘ä¸ºè‹±æ–‡ æ ¹æ®æœç´¢ç»“æžœåŽ»å°è¯•ï¼Œstackoverflowå®žåœ¨æ˜¯å¤ªå¥½ç”¨ï¼Œå¯ä»¥è§£å†³ä¸€åŠçš„é—®é¢˜ å¦‚æžœå°è¯•å¤±è´¥ï¼Œå†åŽ»é—®å¯èƒ½çŸ¥é“è¿™ä¸ªé—®é¢˜çš„äººã€‚ä¸å»ºè®®åœ¨ç½‘ä¸Šé—®ï¼Œæ•ˆçŽ‡ä½Žä¸‹ï¼Œç›´æŽ¥åŽ»æ‰¾å…¬å¸å¤§ä½¬é—®ã€‚ åœ¨é€šè¿‡å„ç§é€”å¾„è§£å†³è¯¥é—®é¢˜åŽï¼Œæˆ‘ä¼šè®°å½•ä¸‹æ¥ï¼Œä¸€èˆ¬ä¼šå‘åœ¨åšå®¢ä¸­ã€‚æ‰€ä»¥ä½ çœ‹æˆ‘çš„åšå®¢é‡Œï¼Œå¤§å¤šæ˜¯é’ˆå¯¹æŸä¸€ä¸ªå…·ä½“é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¾ˆå°‘æœ‰ç±»ä¼¼äºŽâ€æˆ‘çˆ¬äº†xxæ•°æ®ï¼Œç ”ç©¶å‡ºxxç»“è®ºâ€æ­¤ç±»æ–‡ç« ã€‚ ä»¥åŽå†é‡åˆ°æ­¤ç±»é—®é¢˜ï¼Œæˆ‘ä¼šè¿…é€Ÿæƒ³åˆ°è‡ªå·±å†™çš„ï¼Œå°±ä¼šæ‰“å¼€åšå®¢ï¼Œæ‰¾åˆ°é‚£ç¯‡æ–‡ç« é˜…è¯»ã€‚ é€ æ•°æœ‰å¾ˆå¤šæŠ€æœ¯å¤§ç‰›ï¼Œåœ¨æŸäº›é¢†åŸŸä¸Šä¸“æ”»ï¼Œæ‰€ä»¥åœ¨é‡åˆ°é—®é¢˜åŸºæœ¬ä¸Šéƒ½å¯ä»¥åŽ»é—®ä»–ä»¬ï¼Œè¿™ç§æ–¹æ³•æ¯”åœ¨å¾®ä¿¡ä¸Šé—®åˆ«äººå¥½å¾—å¤šã€‚ æŠ€èƒ½åˆ—ä¸¾ä¸‹è‡ªå·±åœ¨é€ æ•°æ‰€å­¦åˆ°çš„æˆ–è€…èƒ½ä½¿ç”¨çš„æŠ€èƒ½ç‚¹ï¼Œæˆ‘ä¹Ÿåœ¨ç®€åŽ†ä¸­æœ‰å†™å‡ºæ¥ï¼š Python3ã€Scalaã€Goã€SQl Requestsã€Scrapyã€Scrapy-Redisã€Bloom filter IOSé€†å‘ï¼ˆé™æ€IDAã€åŠ¨æ€hookï¼‰ã€JSæ–­ç‚¹ Seleniumã€Appiumã€Airtest MongoDBã€MySQLã€Redisã€Docker Xpathã€bs4ã€cssã€jQueryã€Regular Expression Fiddlerã€Charlesã€Wiresharkã€Mitmproxy Flaskã€Pandasã€Sparkã€TensorFlow ä»¥ä¸Šè¿™äº›æŠ€èƒ½ç‚¹åŸºæœ¬ä¸Šéƒ½å¯ä»¥åœ¨åŽ†å²æ–‡ç« ä¸­æ‰¾åˆ°èº«å½±ï¼Œè¿™äº›ä¹Ÿæ˜¯åšçˆ¬è™«æ‰€éœ€ã€‚å½“ç„¶ï¼Œä¹Ÿè¿˜æœ‰ä¸€äº›æˆ‘ä¸å¤§äº†è§£çš„ï¼Œåƒaiohttpã€rabbitmqã€celeryç­‰ï¼Œæ²¡æœ‰åœ¨å®žé™…é¡¹ç›®ä¸­ä½¿ç”¨è¿‡ï¼Œä¸æ•¢è¯´è‡ªå·±ä¼šç”¨ã€‚åœ¨çˆ¬è™«éƒ¨ç½²ã€æ¡†æž¶å¼€å‘ã€ä»£ç†æ± è®¾è®¡ç­‰æ–¹é¢ä¹Ÿéœ€è¦æé«˜ã€‚ ç¦»å¼€ä»Šå¹´å¼€å¹´åŽï¼Œæˆ‘æ¬åˆ°æ²™æ²³ï¼Œè€Œé€ æ•°åœ¨æœé˜³ï¼Œæ¯å¤©6ç‚¹åŠèµ·åºŠï¼Œåä¸¤å°æ—¶åœ°é“ï¼Œè·ç¦»åŽŸå› ï¼Œæ‰€ä»¥æäº†ç¦»èŒï¼Œåœ¨æœ‹å‹å†…æŽ¨ä¸‹æ¥åˆ°å°é»‘é±¼ï¼Œåœ¨æ­å·žã€‚ æ€»çš„æ¥è¯´ï¼Œåœ¨é€ æ•°çœŸçš„å­¦åˆ°äº†å¾ˆå¤šï¼Œä½œä¸ºæ¯•ä¸šåŽçš„ç¬¬ä¸€ä»½å·¥ä½œï¼Œè™½ç„¶æ˜¯å°å…¬å¸ï¼Œæˆ‘è§‰å¾—å¾ˆå¼€å¿ƒçš„ã€‚çœ‹æˆ‘çš„githubä»“åº“æäº¤è®°å½•ï¼Œæˆ‘åªæƒ³è¯´ï¼šçœŸå®ž! 2019å¹´4æœˆ4æ—¥æ¥åˆ°æ­å·žï¼Œé‚£å¤©è¿˜ä¸‹ç€é›¨ï¼Œæ‰€ä»¥è®°å¾—å¾ˆæ¸…æ¥šã€‚çŽ°åœ¨å·²ç»å®‰å®šä¸‹æ¥ï¼Œåœ¨å…¬å¸5åˆ†é’Ÿè·¯ç¨‹ç§Ÿåˆ°äº†æˆ¿å­ã€‚æ˜Žå¤©å°±ä¼šå…¥èŒæ–°å…¬å¸ï¼Œå¸Œæœ›å¯ä»¥å¥½å¥½åšå§ã€‚åˆšæ¥åˆ°æ­å·žæ²¡å‡ å¤©ï¼Œæˆ‘è§‰å¾—æ­å·žå¾ˆä¸é”™ï¼Œä½ç€æ¯”åŒ—äº¬èˆ’æœï¼ŒçŽ¯å¢ƒæ¯”åŒ—äº¬å¥½ã€‚å¦‚æžœæœ‰æ­å·žçš„å°ä¼™ä¼´ï¼Œæ¬¢è¿Žé¢åŸºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[scrapyåŽ»é‡ä¸Žscrapy_redisåŽ»é‡ä¸Žå¸ƒéš†è¿‡æ»¤å™¨]]></title>
      <url>%2F2019%2F03%2F26%2Fscrapy%E4%B8%8Escrapy-redis%E7%9A%84%E5%8E%BB%E9%87%8D%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  åœ¨å¼€å§‹ä»‹ç»scrapyçš„åŽ»é‡ä¹‹å‰ï¼Œå…ˆæƒ³æƒ³æˆ‘ä»¬æ˜¯æ€Žä¹ˆå¯¹requestså¯¹åŽ»é‡çš„ã€‚requestsåªæ˜¯ä¸‹è½½å™¨ï¼Œæœ¬èº«å¹¶æ²¡æœ‰æä¾›åŽ»é‡åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åŽ»åšã€‚å¾ˆå…¸åž‹çš„åšæ³•æ˜¯äº‹å…ˆå®šä¹‰ä¸€ä¸ªåŽ»é‡é˜Ÿåˆ—ï¼Œåˆ¤æ–­æŠ“å–çš„urlæ˜¯å¦åœ¨å…¶ä¸­ï¼Œå¦‚ä¸‹ï¼š 1234567crawled_urls = set()def check_url(url): if url not in crawled_urls: return True return False æ­¤æ—¶çš„é›†åˆæ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œéšç€çˆ¬è™«æŠ“å–å†…å®¹å˜å¤šï¼Œè¯¥é›†åˆä¼šè¶Šæ¥è¶Šå¤§ï¼Œæœ‰ä»€ä¹ˆåŠžæ³•å‘¢ï¼Ÿ æŽ¥ç€å¾€ä¸‹çœ‹ï¼Œä½ ä¼šçŸ¥é“çš„ã€‚ scrapyçš„åŽ»é‡scrapyå¯¹requestä¸åšåŽ»é‡å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨requestå¯¹è±¡ä¸­è®¾ç½®dont_filterä¸ºTrueï¼Œå¦‚ 1yield scrapy.Request(url, callback=self.get_response, dont_filter=True) çœ‹çœ‹æºç æ˜¯å¦‚ä½•åšçš„ï¼Œä½ç½® 1234567891011121314151617181920_fingerprint_cache = weakref.WeakKeyDictionary()def request_fingerprint(request, include_headers=None): if include_headers: include_headers = tuple(to_bytes(h.lower()) for h in sorted(include_headers)) cache = _fingerprint_cache.setdefault(request, &#123;&#125;) if include_headers not in cache: fp = hashlib.sha1() fp.update(to_bytes(request.method)) fp.update(to_bytes(canonicalize_url(request.url))) fp.update(request.body or b'') if include_headers: for hdr in include_headers: if hdr in request.headers: fp.update(hdr) for v in request.headers.getlist(hdr): fp.update(v) cache[include_headers] = fp.hexdigest() return cache[include_headers] æ³¨é‡Šè¿‡å¤šï¼Œæˆ‘å°±åˆ æŽ‰äº†ã€‚è°·æ­Œç¿»è¯‘ + äººç¿» 12345678910111213141516è¿”å›žè¯·æ±‚æŒ‡çº¹è¯·æ±‚æŒ‡çº¹æ˜¯å”¯ä¸€æ ‡è¯†è¯·æ±‚æŒ‡å‘çš„èµ„æºçš„å“ˆå¸Œã€‚ ä¾‹å¦‚ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªç½‘å€ï¼šhttp://www.example.com/query?id=111&amp;cat=222http://www.example.com/query?cat=222&amp;id=111å³ä½¿è¿™ä¸¤ä¸ªä¸åŒçš„URLéƒ½æŒ‡å‘ç›¸åŒçš„èµ„æºå¹¶ä¸”æ˜¯ç­‰ä»·çš„ï¼ˆå³ï¼Œå®ƒä»¬åº”è¯¥è¿”å›žç›¸åŒçš„å“åº”ï¼‰å¦ä¸€ä¸ªä¾‹å­æ˜¯ç”¨äºŽå­˜å‚¨ä¼šè¯IDçš„cookieã€‚ å‡è®¾ä»¥ä¸‹é¡µé¢ä»…å¯ä¾›ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·è®¿é—®ï¼šhttp://www.example.com/members/offers.htmlè®¸å¤šç½‘ç«™ä½¿ç”¨cookieæ¥å­˜å‚¨ä¼šè¯IDï¼Œè¿™ä¼šéšæœºæ·»åŠ å­—æ®µåˆ°HTTPè¯·æ±‚ï¼Œå› æ­¤åœ¨è®¡ç®—æ—¶åº”è¯¥è¢«å¿½ç•¥æŒ‡çº¹ã€‚å› æ­¤ï¼Œè®¡ç®—æ—¶é»˜è®¤ä¼šå¿½ç•¥request headersã€‚ å¦‚æžœè¦åŒ…å«ç‰¹å®šheadersï¼Œè¯·ä½¿ç”¨include_headerså‚æ•°ï¼Œå®ƒæ˜¯è¦è®¡ç®—Request headersçš„åˆ—è¡¨ã€‚ å…¶å®žå°±æ˜¯è¯´ï¼šscrapyä½¿ç”¨sha1ç®—æ³•ï¼Œå¯¹æ¯ä¸€ä¸ªrequestå¯¹è±¡åŠ å¯†ï¼Œç”Ÿæˆ40ä¸ºåå…­è¿›åˆ¶æ•°ï¼Œå¦‚ï¼šâ€™fad8cefa4d6198af8cb1dcf46add2941b4d32d78â€™ã€‚ æˆ‘ä»¬çœ‹æºç ï¼Œé‡ç‚¹æ˜¯ä¸€ä¸‹ä¸‰è¡Œ 1234fp = hashlib.sha1()fp.update(to_bytes(request.method))fp.update(to_bytes(canonicalize_url(request.url)))fp.update(request.body or b'') å¦‚æžœæ²¡æœ‰è‡ªå®šä¹‰headersï¼Œåªè®¡ç®—methodã€urlã€å’ŒäºŒè¿›åˆ¶bodyï¼Œæˆ‘ä»¬æ¥è®¡ç®—ä¸‹ï¼Œä»£ç ï¼š 123print(request_fingerprint(scrapy.Request('http://www.example.com/query?id=111&amp;cat=222')))print(request_fingerprint(scrapy.Request('http://www.example.com/query?cat=222&amp;id=111')))print(request_fingerprint(scrapy.Request('http://www.example.com/query'))) è¾“å‡ºï¼š 123fad8cefa4d6198af8cb1dcf46add2941b4d32d78fad8cefa4d6198af8cb1dcf46add2941b4d32d78b64c43a23f5e8b99e19990ce07b75c295165a923 å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¡å’Œç¬¬äºŒæ¡çš„å¯†ç æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯å› ä¸ºè°ƒç”¨äº†canonicalize_urlæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žå¦‚ä¸‹ 12345678910&gt;&gt;&gt; import w3lib.url&gt;&gt;&gt;&gt;&gt;&gt; # sorting query arguments&gt;&gt;&gt; w3lib.url.canonicalize_url('http://www.example.com/do?c=3&amp;b=5&amp;b=2&amp;a=50')'http://www.example.com/do?a=50&amp;b=2&amp;b=5&amp;c=3'&gt;&gt;&gt;&gt;&gt;&gt; # UTF-8 conversion + percent-encoding of non-ASCII characters&gt;&gt;&gt; w3lib.url.canonicalize_url(u'http://www.example.com/r\u00e9sum\u00e9')'http://www.example.com/r%C3%A9sum%C3%A9'&gt;&gt;&gt; scrapyçš„åŽ»é‡é»˜è®¤ä¼šä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œå¦‚æžœä»»åŠ¡é‡å¯ï¼Œä¼šå¯¼è‡´å†…å­˜ä¸­æ‰€æœ‰åŽ»é‡é˜Ÿåˆ—æ¶ˆå¤± scrapy-redisçš„åŽ»é‡scrapy-redisé‡å†™äº†scrapyçš„è°ƒåº¦å™¨å’ŒåŽ»é‡é˜Ÿåˆ—ï¼Œæ‰€ä»¥éœ€è¦åœ¨settingsä¸­ä¿®æ”¹å¦‚ä¸‹ä¸¤åˆ— 12345# Enables scheduling storing requests queue in redis.SCHEDULER = "scrapy_redis.scheduler.Scheduler"# Ensure all spiders share same duplicates filter through redis.DUPEFILTER_CLASS = "scrapy_redis.dupefilter.RFPDupeFilter" ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨redisä¸­çœ‹åˆ°è¿™ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯åŽ»é‡é˜Ÿåˆ—å’Œç§å­é“¾æŽ¥ å…ˆçœ‹çœ‹ä»£ç ï¼šé‡è¦ä»£ç  123456789101112131415161718192021222324def request_seen(self, request): """Returns True if request was already seen. Parameters ---------- request : scrapy.http.Request Returns ------- bool """ fp = self.request_fingerprint(request) # This returns the number of values added, zero if already exists. added = self.server.sadd(self.key, fp) return added == 0def request_fingerprint(self, request): """Returns a fingerprint for a given request. Parameters ---------- request : scrapy.http.Request Returns ------- str """ return request_fingerprint(request) é¦–å…ˆæ‹¿åˆ°scrapy.http.Requestä¼šå…ˆè°ƒç”¨self.request_fingerprintåŽ»è®¡ç®—ï¼Œä¹Ÿå°±æ˜¯scrapyçš„sha1ç®—æ³•åŽ»åŠ å¯†ï¼Œç„¶åŽä¼šå‘redisä¸­æ·»åŠ è¯¥æŒ‡çº¹ã€‚ è¯¥å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šè®¡ç®—è¯¥è¯·æ±‚æŒ‡çº¹ï¼Œæ·»åŠ åˆ°redisçš„åŽ»é‡é˜Ÿåˆ—ï¼Œå¦‚æžœå·²ç»å­˜åœ¨è¯¥æŒ‡çº¹ï¼Œè¿”å›žTrueã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªè¦æœ‰åœ¨settingsä¸­æ·»åŠ DUPEFILTER_CLASS = &quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;ï¼Œå°±ä¼šåœ¨redisä¸­æ–°åŠ ä¸€åˆ—åŽ»é‡é˜Ÿåˆ—ï¼Œè¯´ä¸‹è¿™æ ·åšçš„ä¼˜åŠ£åŠ¿ï¼š ä¼˜ç‚¹ï¼šå°†å†…å­˜ä¸­çš„åŽ»é‡é˜Ÿåˆ—åºåˆ—åŒ–åˆ°redisä¸­ï¼ŒåŠæ—¶çˆ¬è™«é‡å¯æˆ–è€…å…³é—­ï¼Œä¹Ÿå¯ä»¥å†æ¬¡ä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨SCHEDULER_PERSISTæ¥è°ƒæ•´ç¼“å­˜ ç¼ºç‚¹ï¼šå¦‚æžœä½ éœ€è¦åŽ»é‡çš„æŒ‡çº¹è¿‡å¤§ï¼Œrediså ç”¨ç©ºé—´è¿‡å¤§ã€‚8GB=8589934592Bytesï¼Œå¹³å‡ä¸€ä¸ªåŽ»é‡æŒ‡çº¹40Bytesï¼Œçº¦å¯ä»¥å­˜å‚¨214,748,000ä¸ª(2äº¿)ã€‚æ‰€ä»¥åœ¨åšå…³ç³»ç½‘ç»œçˆ¬è™«ä¸­ï¼Œåºåˆ—åŒ–åˆ°redisä¸­å¯èƒ½å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ä¹Ÿä¸å¥½ï¼Œæ‰€ä»¥å°±äº§ç”Ÿäº†å¸ƒéš†è¿‡æ»¤å™¨ã€‚ å¸ƒéš†è¿‡æ»¤å™¨å®ƒçš„åŽŸç†æ˜¯å°†ä¸€ä¸ªå…ƒç´ é€šè¿‡ k ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œå°†å…ƒç´ æ˜ å°„ä¸º k ä¸ªæ¯”ç‰¹ä½ï¼Œåœ¨ bitmap ä¸­æŠŠå®ƒä»¬ç½®ä¸º 1ã€‚åœ¨éªŒè¯çš„æ—¶å€™åªéœ€è¦éªŒè¯è¿™äº›æ¯”ç‰¹ä½æ˜¯å¦éƒ½æ˜¯ 1 å³å¯ï¼Œå¦‚æžœå…¶ä¸­æœ‰ä¸€ä¸ªä¸º 0ï¼Œé‚£ä¹ˆå…ƒç´ ä¸€å®šä¸åœ¨é›†åˆé‡Œï¼Œå¦‚æžœå…¨ä¸º 1ï¼Œåˆ™å¾ˆå¯èƒ½åœ¨é›†åˆé‡Œã€‚ï¼ˆå› ä¸ºå¯èƒ½ä¼šæœ‰å…¶å®ƒçš„å…ƒç´ ä¹Ÿæ˜ å°„åˆ°ç›¸åº”çš„æ¯”ç‰¹ä½ä¸Šï¼‰ åŒæ—¶è¿™ä¹Ÿå¯¼è‡´ä¸èƒ½ä»Ž Bloom filter ä¸­åˆ é™¤æŸä¸ªå…ƒç´ ï¼Œæ— æ³•ç¡®å®šè¿™ä¸ªå…ƒç´ ä¸€å®šåœ¨é›†åˆä¸­ã€‚ä»¥åŠå¸¦æ¥äº†è¯¯æŠ¥çš„é—®é¢˜ï¼Œå½“é‡Œé¢çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œè¿™ä¸ªå¯èƒ½åœ¨é›†åˆä¸­çš„é è°±ç¨‹åº¦å°±è¶Šæ¥è¶Šä½Žã€‚ï¼ˆç”±äºŽå“ˆå¸Œç¢°æ’žï¼Œå¯èƒ½å¯¼è‡´æŠŠä¸å±žäºŽé›†åˆå†…çš„å…ƒç´ è®¤ä¸ºå±žäºŽè¯¥é›†åˆï¼‰ å¸ƒéš†è¿‡æ»¤å™¨çš„ç¼ºç‚¹æ˜¯é”™åˆ¤ï¼Œå°±æ˜¯è¯´ï¼Œä¸åœ¨çš„ä¸€å®šä¸åœ¨ï¼Œåœ¨çš„ä¸ä¸€å®šåœ¨ï¼Œè€Œä¸”æ— æ³•åˆ é™¤å…¶ä¸­æ•°æ®ã€‚ 123456789&gt;&gt;&gt; import pybloomfilter&gt;&gt;&gt; fruit = pybloomfilter.BloomFilter(100000, 0.1, '/tmp/words.bloom')&gt;&gt;&gt; fruit.update(('apple', 'pear', 'orange', 'apple'))&gt;&gt;&gt; len(fruit)3&gt;&gt;&gt; 'mike' in fruitFalse&gt;&gt;&gt; 'apple' in fruitTrue python3ä½¿ç”¨pybloomfilterçš„ä¾‹å­ã€‚ é‚£ä¹ˆå¦‚ä½•åœ¨scrapyä¸­ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å‘¢ï¼Œå´”å¤§å¤§å·²ç»å†™å¥½äº†ï¼Œåœ°å€ï¼šScrapyRedisBloomFilterï¼Œå·²ç»æ‰“åŒ…å¥½ï¼Œå¯ä»¥ç›´æŽ¥å®‰è£… 1pip install scrapy-redis-bloomfilter åœ¨settingsä¸­è¿™æ ·é…ç½®ï¼š 1234567891011121314151617# Ensure use this SchedulerSCHEDULER = "scrapy_redis_bloomfilter.scheduler.Scheduler"# Ensure all spiders share same duplicates filter through redisDUPEFILTER_CLASS = "scrapy_redis_bloomfilter.dupefilter.RFPDupeFilter"# Redis URLREDIS_URL = 'redis://localhost:6379/0'# Number of Hash Functions to use, defaults to 6BLOOMFILTER_HASH_NUMBER = 6# Redis Memory Bit of Bloomfilter Usage, 30 means 2^30 = 128MB, defaults to 30BLOOMFILTER_BIT = 30# PersistSCHEDULER_PERSIST = True å…¶å®žä¹Ÿæ˜¯ä¿®æ”¹äº†è°ƒåº¦å™¨ä¸ŽåŽ»é‡æ–¹æ³•ï¼Œæœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Python&Golang:å†’æ³¡æŽ’åº]]></title>
      <url>%2F2019%2F03%2F21%2FPython-Golang-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%2F</url>
      <content type="text"><![CDATA[ä½¿ç”¨Python&amp;Golangå°è¯• (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹åç¯‡åŽŸåˆ›æ–‡ç«  å†’æ³¡æŽ’åºå®šä¹‰å†’æ³¡æŽ’åºï¼ˆè‹±è¯­ï¼šBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æŽ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°éåŽ†è¦æŽ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æžœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚éåŽ†æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æŽ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚ å†’æ³¡æŽ’åºç®—æ³•çš„è¿ä½œå¦‚ä¸‹ï¼š æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æžœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼ˆå‡åºï¼‰ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚ å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»Žå¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åŽä¸€å¯¹ã€‚è¿™æ­¥åšå®ŒåŽï¼Œæœ€åŽçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åŽä¸€ä¸ªã€‚ æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ ä¼ªä»£ç 123456789function bubble_sort (array, length) &#123; var i, j; for(i from 1 to length-1)&#123; for(j from 0 to length-1-i)&#123; if (array[j] &gt; array[j+1]) swap(array[j], array[j+1]) &#125; &#125;&#125; 123456789å‡½æ•° å†’æ³¡æŽ’åº è¾“å…¥ ä¸€ä¸ªæ•°ç»„åç§°ä¸ºarray å…¶é•¿åº¦ä¸ºlength i ä»Ž 1 åˆ° (length - 1) j ä»Ž 0 åˆ° (length - 1 - i) å¦‚æžœ array[j] &gt; array[j + 1] äº¤æ¢ array[j] å’Œ array[j + 1] çš„å€¼ å¦‚æžœç»“æŸ jå¾ªçŽ¯ç»“æŸ iå¾ªçŽ¯ç»“æŸ å‡½æ•°ç»“æŸ å¯ä»¥çœ‹åˆ°æ¯ç»è¿‡ä»¥æ­¤æŽ’åºä¹‹åŽï¼Œå°†ä¼šæœ‰ä¸€ä¸ªæ•°å­—(æœ€åŽé‚£ä¸ª)ç¡®å®šï¼Œæ‰€ä»¥ä¸‹ä¸€æ¬¡å°±æŽ’åºæ—¶å°±ä¼šå‡å°‘ä¸€ä¸ªå‚ä¸ŽæŽ’åºçš„å¯¹è±¡ Python12345678def bubble_sorted(iterable): new_list = list(iterable) list_len = len(new_list) for i in range(list_len - 1): for j in range(list_len - 1, i, -1): if new_list[j] &lt; new_list[j - 1]: new_list[j], new_list[j - 1] = new_list[j - 1], new_list[j] return new_list Golang12345678910111213141516package mainimport "fmt"func main() &#123; var arr = [10]int&#123;2, 4, 6, 8, 9, 7 ,5 ,3 ,1&#125; for i := 0; i&lt;len(arr)-1 ; i++ &#123; for j:=0; j &lt; len(arr)-i-1; j++ &#123; if arr[j] &gt; arr[j+1] &#123; arr[j], arr[j+1] = arr[j+1], arr[j] &#125; &#125; &#125; fmt.Println(arr)&#125;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode: 2.Add Two Numbers]]></title>
      <url>%2F2019%2F03%2F15%2FLeetcode-2-Add-Two-Numbers-1%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åä¹ç¯‡åŽŸåˆ›æ–‡ç«  2. Add Two Numberséš¾åº¦: Medium åˆ·é¢˜å†…å®¹åŽŸé¢˜è¿žæŽ¥ï¼šhttps://leetcode.com/problems/add-two-numbers/description/&gt; å†…å®¹æè¿° 123456789You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.You may assume the two numbers do not contain any leading zero, except the number 0 itself.Example:Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)Output: 7 -&gt; 0 -&gt; 8Explanation: 342 + 465 = 807. è§£é¢˜æ–¹æ¡ˆ Pythonæ€è·¯ 1 æ—¶é—´å¤æ‚åº¦: O(N) ç©ºé—´å¤æ‚åº¦: O(N) å°†ä¸¤ä¸ªé“¾è¡¨è½¬ä¸ºåˆ—è¡¨ï¼Œåè½¬ä¹‹åŽç›¸åŠ ï¼Œå†åè½¬ï¼Œæœ€åŽå°†ç»“æžœè½¬ä¸ºé“¾è¡¨ã€‚ 12345678910111213141516171819202122232425262728293031# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def addTwoNumbers(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if not l1: return l2 if not l2: return l1 val1, val2 = [l1.val], [l2.val] while l1.next: val1.append(l1.next.val) l1 = l1.next while l2.next: val2.append(l2.next.val) l2 = l2.next num1 = ''.join([str(i) for i in val1[::-1]]) num2 = ''.join([str(i) for i in val2[::-1]]) tmp = str(int(num1) + int(num2))[::-1] res = ListNode(int(tmp[0])) run_res = res for i in range(1, len(tmp)): run_res.next = ListNode(int(tmp[i])) run_res = run_res.next return res resultï¼š 123Runtime: 124 ms, faster than 33.23% of Python3 online submissions for Add Two Numbers.Memory Usage: 13.4 MB, less than 5.21% of Python3 online submissions for Add Two Numbers. è¿™æ˜¯æœ€ç®€å•çš„è§£æ³•ï¼Œä½†æ˜¯é¢è¯•å®˜å¾€å¾€ä¸ä¼šæ»¡è¶³ï¼Œä»–è‚¯å®šè¿˜ä¼šé—®ï¼Œä½ è¿˜æœ‰ç®€å•çš„è§£æ³•å—ï¼Ÿç©ºé—´å¤æ‚åº¦å¯ä»¥å†ä½Žä¸€äº›å—ï¼Ÿ æ€è·¯2 æ—¶é—´å¤æ‚åº¦: O(N) ç©ºé—´å¤æ‚åº¦: O(1) å¯ä»¥ä½¿ç”¨é€’å½’ï¼Œæ¯æ¬¡ç®—ä¸€ä½çš„ç›¸åŠ  1234567891011121314151617181920# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def addTwoNumbers(self, l1: ListNode, l2: ListNode) -&gt; ListNode: if not l1 and not l2: return elif not (l1 and l2): return l1 or l2 else: if l1.val + l2.val &lt; 10: l3 = ListNode(l1.val+l2.val) l3.next = self.addTwoNumbers(l1.next, l2.next) else: l3 = ListNode(l1.val+l2.val-10) l3.next = self.addTwoNumbers(l1.next, self.addTwoNumbers(l2.next, ListNode(1))) return l3 Result: 12Runtime: 116 ms, faster than 42.88% of Python3 online submissions for Add Two Numbers.Memory Usage: 13.3 MB, less than 5.21% of Python3 online submissions for Add Two Numbers. Golangè¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•ï¼ŒåŸºæœ¬ä¸Šè§£é¢˜æ€è·¯æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ã€‚è¾“å…¥æ˜¯ä¸¤ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨çš„å…ƒç´ éƒ½æ˜¯å•ä¸ªæ•°å­—ï¼ˆ0-9ï¼‰ï¼Œè¦æ±‚å°†ä¸¤ä¸ªåˆ—è¡¨çš„ç›¸åº”èŠ‚ç‚¹æ•°å­—ç›¸åŠ ï¼Œå¹¶ä½œä¸ºç»“æžœé“¾è¡¨è¿”å›žã€‚ è¿™ä¸ªé¢˜å’‹çœ‹å¯ä»¥é©¬ä¸Šå¼€å§‹è§£ç­”ï¼Œä½†æ˜¯åœ¨æ­¤ä¹‹å‰è¿˜æ˜¯æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ç¬¬ä¸€ç‚¹æ˜¯ï¼Œé¢˜ç›®å¹¶æ²¡æœ‰è¯´æ˜Žé“¾è¡¨çš„é•¿åº¦ï¼Œæ‰€ä»¥ A å’Œ B ä¸¤ä¸ªé“¾è¡¨å¯èƒ½ä¸ä¸€å®šç›¸åŒé•¿åº¦ï¼Œé‚£ä¹ˆå¦‚æžœä¸€ä¸ªé“¾è¡¨æ›´é•¿ï¼Œé‚£ä¹ˆç›¸åŠ æ€Žä¹ˆå¤„ç†å‘¢ï¼Ÿè¿™é‡Œå°±è€ƒè™‘ç›´æŽ¥è¿”å›žå³å¯ï¼Œç›¸å½“äºŽ+0ã€‚ç¬¬äºŒç‚¹æ˜¯ï¼Œå¦‚æžœç›¸åŠ æº¢å‡ºæ€Žä¹ˆå¤„ç†ï¼Œå…¶å®žé¢˜ç›®çš„ä¾‹å­é‡Œé¢å·²ç»å¾ˆæ¸…æ™°äº†ï¼Œæº¢å‡ºä¼šå‘ç”Ÿè¿›ä½ï¼Œä¾æ¬¡å‘åŽå¤„ç†ã€‚ç¬¬ä¸‰ç‚¹æ˜¯ï¼Œå¦‚æžœæœ€åŽä¸€ä½å‘ç”Ÿè¿›ä½å‘¢ï¼Œè¿™ç‚¹å®¹æ˜“è¢«é—å¿˜ï¼Œéœ€è¦æ–°å¢žä¸€ä¸ªèŠ‚ç‚¹ã€‚ 123456789101112131415161718192021222324252627282930313233package add_two_numberstype ListNode struct &#123; Val int Next *ListNode&#125;func addTwoNumbers(l1 *ListNode, l2 *ListNode) *ListNode &#123; resPre := &amp;ListNode&#123;&#125; cur := resPre carry := 0 for l1 != nil || l2 != nil || carry &gt; 0 &#123; sum := carry if l1 != nil &#123; sum += l1.Val l1 = l1.Next &#125; if l2 != nil &#123; sum += l2.Val l2 = l2.Next &#125; carry = sum / 10 cur.Next = &amp;ListNode&#123;Val: sum % 10&#125; cur = cur.Next &#125; return resPre.Next&#125; æµ‹è¯• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778package add_two_numbersimport ( "github.com/stretchr/testify/assert" "testing")type para struct &#123; one *ListNode two *ListNode&#125;type ans struct &#123; one *ListNode&#125;type question struct &#123; p para a ans&#125;func makeListNode(is []int) *ListNode &#123; if len(is) == 0 &#123; return nil &#125; res := &amp;ListNode&#123; Val: is[0], &#125; temp := res for i := 1; i &lt; len(is); i++ &#123; temp.Next = &amp;ListNode&#123;Val: is[i]&#125; temp = temp.Next &#125; return res&#125;func Test_OK(t *testing.T) &#123; ast := assert.New(t) qs := []question&#123; &#123; p: para&#123; one:makeListNode([]int&#123;2, 4, 3&#125;), two:makeListNode([]int&#123;5, 6, 4&#125;), &#125;, a: ans&#123; one:makeListNode([]int&#123; 7, 0, 8&#125;), &#125;, &#125;, &#123; p: para&#123; one:makeListNode([]int&#123;9, 8, 7, 6, 5&#125;), two:makeListNode([]int&#123;1, 1, 2, 3, 4&#125;), &#125;, a:ans&#123; one:makeListNode([]int&#123;0, 0, 0, 0, 0, 1&#125;), &#125;, &#125;, &#123; p: para&#123; one:makeListNode([]int&#123;0&#125;), two:makeListNode([]int&#123;5, 6, 4&#125;), &#125;, a: ans&#123; one:makeListNode([]int&#123;5, 6, 4&#125;), &#125;, &#125;, &#125; for _, q := range qs &#123; a, p := q.a, q.p ast.Equal(a.one, addTwoNumbers(p.one, p.two), "è¾“å…¥:%v", p) &#125;&#125; æ¶ˆè€— é€’å½’è§£æ³• 123456789101112131415161718192021func addTwoNumbers(l1 *ListNode, l2 *ListNode) *ListNode &#123; sum := l1.Val + l2.Val val := sum % 10 if (l1.Next == nil &amp;&amp; l2.Next == nil &amp;&amp; sum &lt; 10) &#123; return &amp;ListNode&#123;sum, nil&#125; &#125; if (l1.Next == nil) &#123; l1.Next = &amp;ListNode&#123;&#125; &#125; if (l2.Next == nil) &#123; l2.Next = &amp;ListNode&#123;&#125; &#125; if (sum &gt;= 10) &#123; l1.Next.Val += 1 &#125; res := addTwoNumbers(l1.Next, l2.Next) return &amp;ListNode&#123;val, res&#125;&#125; æœ‰æ—¶å€™å¾ˆæ— è¯­ï¼ŒåŒæ ·çš„è§£æ³•ï¼Œæäº¤æ—¶é—´ä¸ä¸€æ ·ï¼Œæ€§èƒ½å·®åˆ«ç«Ÿç„¶æœ‰è¿™ä¹ˆå¤§ï¼Œ12msä¸Ž20msã€‚(âŠ™_âŠ™)?]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcodeï¼š1.Two Sum]]></title>
      <url>%2F2019%2F03%2F04%2FLeetcode-1-Two-Sum%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åä¹ç¯‡åŽŸåˆ›æ–‡ç«  1. Two Suméš¾åº¦: Easy åˆ·é¢˜å†…å®¹åŽŸé¢˜è¿žæŽ¥ï¼šhttps://leetcode.com/problems/two-sum å†…å®¹æè¿°ï¼š 12345678910Given an array of integers, return indices of the two numbers such that they add up to a specific target.You may assume that each input would have exactly one solution, and you may not use the same element twice.Example:Given nums = [2, 7, 11, 15], target = 9,Because nums[0] + nums[1] = 2 + 7 = 9,return [0, 1]. è§£é¢˜æ–¹æ¡ˆPythonæ€è·¯ 1- æ—¶é—´å¤æ‚åº¦: O(N^2)- ç©ºé—´å¤æ‚åº¦: O(1)* æš´åŠ›è§£æ³•ï¼Œä¸¤è½®éåŽ† beats 12.80%1234567891011class Solution(object): def twoSum(self, nums, target): """ :type nums: List[int] :type target: int :rtype: List[int] """ for i in range(len(nums)): for j in range(i+1, len(nums)): if nums[i] + nums[j] == target: return [i, j] Runtime: 5248 ms, faster than 12.80% of Python3 online submissions forTwo Sum. Memory Usage: 13.5 MB, less than 51.76% of Python3 online submissions for Two Sum. å¤ªå“äººï¼ŒéåŽ†å¤ªæ…¢äº†ã€‚ æ€è·¯ 2A + B = targetï¼ŒåŒæ ·çš„ï¼šA = target - Bï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå­—å…¸æ¥è®°å½•è¯´è®¿é—®è¿‡çš„å€¼ã€‚ è¿™é‡Œæˆ‘çŠ¯äº†ä¸ªé”™ï¼Œæˆ‘å…ˆè´´ä»£ç  12345678class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: lookup = &#123;&#125; for i, j in enumerate(nums): if target - j not in lookup.values(): lookup[i] = j else: return [i, nums.index(target - i)] Runtime: 568 ms, faster than 34.25% of Python3 online submissions forTwo Sum. Memory Usage: 14.1 MB, less than 9.73% of Python3 online submissions for Two Sum. è™½ç„¶æ¯”ç¬¬ä¸€ç§è§£æ³•å¥½ï¼Œä½†æ˜¯æ‰è¶…è¿‡34.25%ï¼Œè¿™ä¹Ÿå¤ªæ…¢äº†å§ã€‚ å…¶å®žæ˜¯æˆ‘å†™æ³•ä¸å¤Ÿå¥½ï¼Œå­—å…¸ç»´åºåäº†ï¼Œè¿™æ ·æŸ¥æ‰¾ä¼šæ…¢å¾ˆå¤šï¼Œæ¯æ¬¡æŸ¥æ‰¾éƒ½éœ€è¦æŸ¥è¯¢lookup.values()ï¼Œè¿™å…¶å®žæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåº”è¯¥å°±æ˜¯è¿™é‡Œå¯¼è‡´é€Ÿåº¦å˜æ…¢ã€‚ æ”¹è‰¯åŽçš„ä»£ç ï¼š 12345678class Solution: def twoSum(self, nums: List[int], target: int) -&gt; List[int]: lookup = &#123;&#125; for i, j in enumerate(nums): if target - j in lookup: return [i, nums.index(target - j)] else: lookup[j] = i Runtime: 40 ms, faster than 73.58% of Python3 online submissions for Two Sum. Memory Usage: 14.1 MB, less than 10.10% of Python3 online submissions for Two Sum. æ¯”73.58%çš„è¦å¿«ï¼Œæžœç„¶ç»†èŠ‚å†³å®šæˆè´¥å•Šã€‚ Golangè¿™äº›å¤©æ­£å¥½åœ¨å­¦ä¹ Golangçš„åŸºç¡€è¯­æ³•ï¼Œåšè¿™é¢˜åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ€è·¯ä»€ä¹ˆçš„å’Œä¸Šé¢çš„ä¸€æ ·ã€‚ä»£ç å¦‚ä¸‹ï¼š two_sum.go 12345678910111213package two_sumfunc twoSum(nums []int, target int) []int &#123; index := make(map[int]int, len(nums)) for i, b := range nums &#123; if j, ok := index[target-b]; ok &#123; return []int&#123;j, i&#125; &#125; index[b] = i &#125; return nil&#125; two_sum_test.go 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package two_sumimport ( "github.com/stretchr/testify/assert" "testing")type para struct &#123; one []int two int&#125;type ans struct &#123; one []int&#125;type question struct &#123; p para a ans&#125;func Test_OK(t *testing.T) &#123; ast := assert.New(t) qs := []question&#123; &#123; p: para&#123; one: []int&#123;3, 2, 4&#125;, two: 6, &#125;, a: ans&#123; one: []int&#123;1, 2&#125;, &#125;, &#125;, &#123; p: para&#123; one: []int&#123;3, 2, 4&#125;, two: 8, &#125;, a: ans&#123; one: nil, &#125;, &#125;, &#125; for _, q := range qs &#123; a, p := q.a, q.p ast.Equal(a.one, twoSum(p.one, p.two), "è¾“å…¥: %v", p) &#125;&#125; ä½œä¸ºè¿˜æ²¡å†™è¿‡å•å…ƒæµ‹è¯•çš„äººæ¥è¯´ï¼Œåˆšå¼€å§‹æŽ¥è§¦è¿™ç§çœŸçš„å¾ˆä¸é€‚åº”ï¼Œæ…¢æ…¢æ¥å§ã€‚ Runtime: 4 ms, faster than 100.00% of Go online submissions for Two Sum. Memory Usage: 3.4 MB, less than 63.51% of Go online submissions forTwo Sum. Goå’ŒPythonçš„å¯¹æ¯”ï¼Œç®€ç›´äº† è¿™ä¸ªè§£æ³•é¢å¤–çš„åˆ›å»ºäº†ä¸€ä¸ªmapæ¥å‚¨å­˜çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨ç©ºé—´ä¸Šä¸å¤Ÿå¥½ï¼Œçœ‹åˆ°åˆ«äººçš„è§£æ³•ï¼Œå¦‚ä¸‹ï¼š 1234567891011func twoSum(nums []int, target int) []int &#123; length := len(nums) for i := 0; i &lt; length; i++ &#123; for j := i + 1; j &lt; length; j++ &#123; if nums[i]+nums[j] == target &#123; return []int&#123;i, j&#125; &#125; &#125; &#125; return nil&#125; è¿™å°±ç›¸å½“äºŽä¸Šé¢å¼€å§‹çš„æš´åŠ›è§£æ³•ï¼Œç‰ºç‰²æ—¶é—´æ¥æ¢å–ç©ºé—´ï¼Œæœ€åŽçš„ç»“æžœæ˜¯ï¼š Runtime: 36 ms, faster than 41.39% of Go online submissions for Two Sum. Memory Usage: 2.9 MB, less than 68.92% of Go online submissions for Two Sum. æ—¶é—´æ˜¯åŽŸæ¥çš„9å€ï¼Œå˜åŒ–çœŸçš„å¤§ï¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MongoDBå‚æ•°é™åˆ¶å’Œé˜€å€¼]]></title>
      <url>%2F2019%2F02%2F28%2FMongoDB%E5%8F%82%E6%95%B0%E9%99%90%E5%88%B6%E5%92%8C%E9%98%80%E5%80%BC%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åå…«ç¯‡åŽŸåˆ›æ–‡ç«  ä»Šå¤©æœç´¢spark mongoçš„èµ„æ–™ï¼Œæ„å¤–å‘çŽ°äº†MongoDBçš„ä¸€äº›çŸ¥è¯†ï¼Œè¿™äº›éƒ½æ˜¯ä¹‹å‰æ²¡æœ‰æŽ¥è§¦è¿‡çš„ï¼Œæ‰€ä»¥ä¸“é—¨è®°å½•ä¸‹ã€‚ (à¹‘â€¢ . â€¢à¹‘) ä¸€ã€BSONæ–‡æ¡£ BSONæ–‡æ¡£å°ºå¯¸ï¼šä¸€ä¸ªdocumentæ–‡æ¡£æœ€å¤§å°ºå¯¸ä¸º16Mï¼›å¤§äºŽ16Mçš„æ–‡æ¡£éœ€è¦å­˜å‚¨åœ¨GridFSä¸­ã€‚ æ–‡æ¡£å†…åµŒæ·±åº¦ï¼šBSONæ–‡æ¡£çš„ç»“æž„ï¼ˆtreeï¼‰æ·±åº¦æœ€å¤§ä¸º100ã€‚ äºŒã€Namespaces collectionå‘½åç©ºé—´ï¼š.ï¼Œæœ€å¤§é•¿åº¦ä¸º120å­—èŠ‚ã€‚è¿™ä¹Ÿé™å®šäº†databaseå’Œcollectionçš„åå­—ä¸èƒ½å¤ªé•¿ã€‚ å‘½åç©ºé—´çš„ä¸ªæ•°ï¼šå¯¹äºŽMMAPV1å¼•æ“Žï¼Œä¸ªæ•°æœ€å¤§ä¸ºå¤§çº¦ä¸º24000ä¸ªï¼Œæ¯ä¸ªcollectionä»¥åŠindexéƒ½æ˜¯ä¸€ä¸ªnamespaceï¼›å¯¹äºŽwiredTigerå¼•æ“Žåˆ™æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚ namespaceæ–‡ä»¶çš„å¤§å°ï¼šå¯¹äºŽMMAPV1å¼•æ“Žè€Œè¨€ï¼Œé»˜è®¤å¤§å°ä¸º16Mï¼Œå¯ä»¥é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚wiredTigerä¸å—æ­¤é™åˆ¶ã€‚ ä¸‰ã€indexes index keyï¼šæ¯æ¡ç´¢å¼•çš„keyä¸å¾—è¶…è¿‡1024ä¸ªå­—èŠ‚ï¼Œå¦‚æžœindex keyçš„é•¿åº¦è¶…è¿‡æ­¤å€¼ï¼Œå°†ä¼šå¯¼è‡´writeæ“ä½œå¤±è´¥ã€‚ æ¯ä¸ªcollectionä¸­ç´¢å¼•çš„ä¸ªæ•°ä¸å¾—è¶…è¿‡64ä¸ªã€‚ ç´¢å¼•åç§°ï¼šæˆ‘ä»¬å¯ä»¥ä¸ºindexè®¾å®šåç§°ï¼Œæœ€ç»ˆå…¨åä¸º..$ï¼Œæœ€é•¿ä¸å¾—è¶…è¿‡128ä¸ªå­—èŠ‚ã€‚é»˜è®¤æƒ…å†µä¸‹ä¸ºfiledåç§°ä¸Žindexç±»åž‹çš„ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºç´¢å¼•æ—¶æ˜¾å¼çš„æŒ‡å®šindexåå­—ï¼Œå‚è§createIndex()æ–¹æ³•ã€‚ ç»„åˆç´¢å¼•æœ€å¤šèƒ½åŒ…å«31ä¸ªfieldã€‚ å››ã€Data Capped Collectionï¼šå¦‚æžœä½ åœ¨åˆ›å»ºâ€œCappedâ€ç±»åž‹çš„collectionæ—¶æŒ‡å®šäº†æ–‡æ¡£çš„æœ€å¤§ä¸ªæ•°ï¼Œé‚£ä¹ˆæ­¤ä¸ªæ•°ä¸èƒ½è¶…è¿‡2çš„32æ¬¡æ–¹ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šæœ€å¤§ä¸ªæ•°ï¼Œåˆ™æ²¡æœ‰é™åˆ¶ã€‚ Database Sizeï¼šMMAPV1å¼•æ“Žè€Œè¨€ï¼Œæ¯ä¸ªdatabaseä¸å¾—æŒæœ‰è¶…è¿‡16000ä¸ªæ•°æ®æ–‡ä»¶ï¼Œå³å•ä¸ªdatabaseçš„æ€»æ•°æ®é‡æœ€å¤§ä¸º32TBï¼Œå¯ä»¥é€šè¿‡è®¾ç½®â€œsmallFilesâ€æ¥é™å®šåˆ°8TBã€‚ Data Sizeï¼šå¯¹äºŽMMAVPV1å¼•æ“Žè€Œè¨€ï¼Œå•ä¸ªmongodä¸èƒ½ç®¡ç†è¶…è¿‡æœ€å¤§è™šæ‹Ÿå†…å­˜åœ°å€ç©ºé—´çš„æ•°æ®é›†ï¼Œæ¯”å¦‚linuxï¼ˆ64ä½ï¼‰ä¸‹æ¯ä¸ªmongodå®žä¾‹æœ€å¤šå¯ä»¥ç»´æŠ¤64Tæ•°æ®ã€‚wiredTigerå¼•æ“Žæ²¡æœ‰æ­¤é™åˆ¶ã€‚ æ¯ä¸ªDatabaseä¸­collectionä¸ªæ•°ï¼šå¯¹äºŽMMAPV1å¼•æ“Žè€Œç„¶ï¼Œæ¯ä¸ªdatabaseæ‰€èƒ½æŒæœ‰çš„collectionsä¸ªæ•°å–å†³äºŽnamespaceæ–‡ä»¶å¤§å°ï¼ˆç”¨æ¥ä¿å­˜namespaceï¼‰ä»¥åŠæ¯ä¸ªcollectionä¸­indexesçš„ä¸ªæ•°ï¼Œæœ€ç»ˆæ€»å°ºå¯¸ä¸è¶…è¿‡namespaceæ–‡ä»¶çš„å¤§å°ï¼ˆ16Mï¼‰ã€‚wiredTigerå¼•æ“Žä¸å—åˆ°æ­¤é™åˆ¶ã€‚ äº”ã€Replica Sets æ¯ä¸ªreplica setä¸­æœ€å¤šæ”¯æŒ50ä¸ªmembersã€‚ replica setä¸­æœ€å¤šå¯ä»¥æœ‰7ä¸ªvoting membersã€‚ï¼ˆæŠ•ç¥¨è€…ï¼‰ å¦‚æžœæ²¡æœ‰æ˜¾å¼çš„æŒ‡å®šoplogçš„å°ºå¯¸ï¼Œå…¶æœ€å¤§ä¸ä¼šè¶…è¿‡50Gã€‚ å…­ã€Sharded Clusters groupèšåˆå‡½æ•°ï¼Œåœ¨shardingæ¨¡å¼ä¸‹ä¸å¯ç”¨ã€‚è¯·ä½¿ç”¨mapreduceæˆ–è€…aggregateæ–¹æ³•ã€‚ Coverd Queriesï¼šå³æŸ¥è¯¢æ¡ä»¶ä¸­çš„Fieldså¿…é¡»æ˜¯indexçš„ä¸€éƒ¨åˆ†ï¼Œä¸”è¿”å›žç»“æžœåªåŒ…å«indexä¸­çš„fieldsï¼›å¯¹äºŽshardingé›†ç¾¤ï¼Œå¦‚æžœqueryä¸­ä¸åŒ…å«shard keyï¼Œç´¢å¼•åˆ™æ— æ³•è¿›è¡Œè¦†ç›–ã€‚è™½ç„¶_idä¸æ˜¯â€œshard keyâ€ï¼Œä½†æ˜¯å¦‚æžœæŸ¥è¯¢æ¡ä»¶ä¸­åªåŒ…å«_idï¼Œä¸”è¿”å›žçš„ç»“æžœä¸­ä¹Ÿåªéœ€è¦_idå­—æ®µå€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è¦†ç›–æŸ¥è¯¢ï¼Œä¸è¿‡è¿™ä¸ªæŸ¥è¯¢ä¼¼ä¹Žå¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼ˆé™¤éžæ˜¯æ£€æµ‹æ­¤_idçš„documentæ˜¯å¦å­˜åœ¨ï¼‰ã€‚ å¯¹äºŽå·²ç»å­˜æœ‰æ•°æ®çš„collectionså¼€å¯shardingï¼ˆåŽŸæ¥éžshardingï¼‰ï¼Œåˆ™å…¶æœ€å¤§æ•°æ®ä¸å¾—è¶…è¿‡256Gã€‚å½“collectionè¢«shardingä¹‹åŽï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å­˜å‚¨ä»»æ„å¤šçš„æ•°æ®ã€‚ å¯¹äºŽsharded collectionï¼Œupdateã€removeå¯¹å•æ¡æ•°æ®æ“ä½œï¼ˆæ“ä½œé€‰é¡¹ä¸ºmulti:falseæˆ–è€…justOneï¼‰ï¼Œå¿…é¡»æŒ‡å®šshard keyæˆ–è€…_idå­—æ®µï¼›å¦åˆ™å°†ä¼šæŠ›å‡ºerrorã€‚ å”¯ä¸€ç´¢å¼•ï¼šshardsä¹‹é—´ä¸æ”¯æŒå”¯ä¸€ç´¢å¼•ï¼Œé™¤éžè¿™ä¸ªâ€œshard keyâ€æ˜¯å”¯ä¸€ç´¢å¼•çš„æœ€å·¦å‰ç¼€ã€‚æ¯”å¦‚collectionçš„shard keyä¸º{â€œzipcodeâ€:1,â€nameâ€: 1}ï¼Œå¦‚æžœä½ æƒ³å¯¹collectionåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå”¯ä¸€ç´¢å¼•å¿…é¡»å°†zipcodeå’Œnameä½œä¸ºç´¢å¼•çš„æœ€å·¦å‰ç¼€ï¼Œæ¯”å¦‚ï¼šcollection.createIndex({â€œzipcodeâ€:1,â€nameâ€:1,â€companyâ€:1},{unique:true})ã€‚ åœ¨chunkè¿ç§»æ—¶å…è®¸çš„æœ€å¤§æ–‡æ¡£ä¸ªæ•°ï¼šå¦‚æžœä¸€ä¸ªchunkä¸­documentsçš„ä¸ªæ•°è¶…è¿‡250000ï¼ˆé»˜è®¤chunkå¤§å°ä¸º64Mï¼‰æ—¶ï¼Œæˆ–è€…documentä¸ªæ•°å¤§äºŽ 1.3 *ï¼ˆchunkæœ€å¤§å°ºå¯¸ï¼ˆæœ‰é…ç½®å‚æ•°å†³å®šï¼‰/ documentå¹³å‡å°ºå¯¸ï¼‰ï¼Œæ­¤chunkå°†æ— æ³•è¢«â€œmoveâ€ï¼ˆæ— è®ºæ˜¯balancerè¿˜æ˜¯äººå·¥å¹²é¢„ï¼‰ï¼Œå¿…é¡»ç­‰å¾…splitä¹‹åŽæ‰èƒ½è¢«moveã€‚ ä¸ƒã€shard key shard keyçš„é•¿åº¦ä¸å¾—è¶…è¿‡512ä¸ªå­—èŠ‚ã€‚ â€œshard keyç´¢å¼•â€å¯ä»¥ä¸ºåŸºäºŽshard keyçš„æ­£åºç´¢å¼•ï¼Œæˆ–è€…ä»¥shard keyå¼€å¤´çš„ç»„åˆç´¢å¼•ã€‚shard keyç´¢å¼•ä¸èƒ½æ˜¯multikeyç´¢å¼•ï¼ˆåŸºäºŽæ•°ç»„çš„ç´¢å¼•ï¼‰ã€textç´¢å¼•æˆ–è€…geoç´¢å¼•ã€‚ Shard keyæ˜¯ä¸å¯å˜çš„ï¼Œæ— è®ºä½•æ—¶éƒ½ä¸èƒ½ä¿®æ”¹documentä¸­çš„shard keyå€¼ã€‚å¦‚æžœéœ€è¦å˜æ›´shard keyï¼Œåˆ™éœ€è¦æ‰‹åŠ¨æ¸…æ´—æ•°æ®ï¼Œå³å…¨é‡dumpåŽŸå§‹æ•°æ®ï¼Œç„¶åŽä¿®æ”¹å¹¶ä¿å­˜åœ¨æ–°çš„collectionä¸­ã€‚ å•è°ƒé€’å¢žï¼ˆé€’å‡ï¼‰çš„shard keyä¼šé™åˆ¶insertçš„åžåé‡ï¼›å¦‚æžœ_idæ˜¯shard keyï¼Œéœ€è¦çŸ¥é“_idæ˜¯ObjectId()ç”Ÿæˆï¼Œå®ƒä¹Ÿæ˜¯è‡ªå¢žå€¼ã€‚å¯¹äºŽå•è°ƒé€’å¢žçš„shard keyï¼Œcollectionä¸Šçš„æ‰€æœ‰insertæ“ä½œéƒ½ä¼šåœ¨ä¸€ä¸ªshardèŠ‚ç‚¹ä¸Šè¿›è¡Œï¼Œé‚£ä¹ˆæ­¤shardå°†ä¼šæ‰¿è½½clusterçš„å…¨éƒ¨insertæ“ä½œï¼Œå› ä¸ºå•ä¸ªshardèŠ‚ç‚¹çš„èµ„æºæœ‰é™ï¼Œå› æ­¤æ•´ä¸ªclusterçš„inserté‡ä¼šå› æ­¤å—é™ã€‚å¦‚æžœclusterä¸»è¦æ˜¯readã€updateæ“ä½œï¼Œå°†ä¸ä¼šæœ‰è¿™æ–¹é¢çš„é™åˆ¶ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨â€œhashed shard keyâ€æˆ–è€…é€‰æ‹©ä¸€ä¸ªéžå•è°ƒé€’å¢žkeyä½œä¸ºshard keyã€‚ï¼ˆrang shard key å’Œhashed shard keyå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œéœ€è¦æ ¹æ®queryçš„æƒ…å†µè€Œå®šï¼‰ã€‚ å…«ã€Operations å¦‚æžœmongodbä¸èƒ½ä½¿ç”¨ç´¢å¼•æŽ’åºæ¥èŽ·å–documentsï¼Œé‚£ä¹ˆå‚ä¸ŽæŽ’åºçš„documentså°ºå¯¸éœ€è¦å°äºŽ32Mã€‚ Aggregation Pilelineæ“ä½œã€‚Pipeline stagesé™åˆ¶åœ¨100Må†…å­˜ï¼Œå¦‚æžœstageè¶…è¿‡æ­¤é™åˆ¶å°†ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä¸ºäº†èƒ½å¤„ç†è¾ƒå¤§çš„æ•°æ®é›†ï¼Œè¯·å¼€å¯â€œallowDiskUseâ€é€‰é¡¹ï¼Œå³å…è®¸pipeline stageså°†é¢å¤–çš„æ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶ã€‚ ä¹ã€å‘½åè§„åˆ™ databaseçš„å‘½ååŒºåˆ†å¤§å°å†™ã€‚ databaseåç§°ä¸­ä¸è¦åŒ…å«ï¼š/ .â€˜â€™$*&lt;&gt;:|? databaseåç§°é•¿åº¦ä¸èƒ½è¶…è¿‡64ä¸ªå­—ç¬¦ã€‚ collectionåç§°å¯ä»¥ä»¥â€œ_â€æˆ–è€…å­—æ¯å­—ç¬¦å¼€å¤´ï¼Œä½†æ˜¯ä¸èƒ½åŒ…å«â€$â€ç¬¦å·ï¼Œä¸èƒ½ä¸ºç©ºå­—ç¬¦æˆ–è€…nullï¼Œä¸èƒ½ä»¥â€œsystem.â€å¼€å¤´ï¼Œå› ä¸ºè¿™æ˜¯ç³»ç»Ÿä¿ç•™å­—ã€‚ documentå­—æ®µåä¸èƒ½åŒ…å«â€œ.â€æˆ–è€…nullï¼Œä¸”ä¸èƒ½ä»¥â€œ$â€å¼€å¤´ï¼Œå› ä¸º$æ˜¯ä¸€ä¸ªâ€œå¼•ç”¨ç¬¦å·â€ã€‚ æœ€åŽè®°å½•ä¸‹jsonåµŒå¥—ä¸­å«æœ‰åˆ—è¡¨çš„æŸ¥è¯¢æ–¹æ³•ï¼Œæ ·ä¾‹æ•°æ®ï¼š 1234567891011121314&#123; "_id" : ObjectId("5c6cc376a589c200018f7312"), "id" : "9472", "data" : &#123; "name" : "æµ‹è¯•", "publish_date" : "2009-05-15", "authors" : [ &#123; "author_id" : 3053, "author_name" : "æµ‹è¯•æ•°æ®" &#125; ], &#125;&#125; æˆ‘è¦æŸ¥è¯¢authorsä¸­çš„author_idï¼Œqueryå¯ä»¥è¿™æ ·å†™ï¼š 1db.getCollection().find(&#123;'data.authors.0.author_id': 3053&#125;) ç”¨0æ¥ä»£è¡¨ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œç‚¹ä»£è¡¨åµŒå¥—ç»“æž„ã€‚ä½†æ˜¯spark mongoä¸­æ˜¯ä¸èƒ½è¿™æ ·å¯¼å…¥çš„ï¼Œéœ€è¦ä½¿ç”¨åˆ«çš„æ–¹æ³•ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨pyppeteeræ·˜å®ç™»å½•]]></title>
      <url>%2F2019%2F02%2F17%2F%E4%BD%BF%E7%94%A8pyppeteer%E6%B7%98%E5%AE%9D%E7%99%BB%E5%BD%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  ä½¿ç”¨pyppeteeræ·˜å®ç™»å½•ï¼ŒèŽ·å–Cookies çŽ°åœ¨æ·˜å®çš„å•†å“æœç´¢é¡µå¿…é¡»è¦ç™»å½•æ‰èƒ½è§ï¼Œæ‰€ä»¥å¿…é¡»è¦cookiesæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚æœ¬æœŸä»‹ç»å¦‚ä½•ä½¿ç”¨pyppeteerç™»å½•æ·˜å®ï¼ŒèŽ·å–Cookiesã€‚ pyppeteerä»‹ç»åœ°å€ï¼šhttps://github.com/miyakogi/pyppeteer ä»‹ç»ï¼šUnofficial Python port of puppeteer JavaScript (headless) chrome/chromium browser automation library.éžå®˜æ–¹çš„chromeæµè§ˆå™¨ï¼Œå‰èº«æ˜¯JavaScriptçš„puppeteer å®‰è£…ï¼špython3 -m pip install pyppeteer æ‰“å¼€ç½‘ç«™å¹¶æˆªå›¾ 12345678910111213import asynciofrom pyppeteer import launchasync def main(): browser = await launch() page = await browser.newPage() await page.goto('https://zhangslob.github.io/') await page.screenshot(&#123;'path': 'zhangslob.png'&#125;) await browser.close()asyncio.get_event_loop().run_until_complete(main()) ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éœ€è¦ä¸‹è½½Chromiumï¼Œä½ å¯ä»¥æå‰åœ¨ç»ˆç«¯è¾“å…¥pyppeteer-installæ¥ä¸‹è½½ã€‚ ç™»å½•æ·˜å®æ•´ä½“é€»è¾‘å¾ˆç®€å•ï¼š è®¾ç½®pyppeteerå¯åŠ¨é¡¹ï¼Œæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ æ‰“å¼€æ·˜å®ç™»å½•é¡µé¢ ä¿®æ”¹æµè§ˆå™¨å±žæ€§ è¾“å…¥è´¦å·å¯†ç  æ»‘åŠ¨æ»‘å— ç™»å½• ä»£ç å¤ªé•¿ï¼Œå¯ä»¥ç›´æŽ¥åŽ»Githubä¸Šçœ‹ï¼Œè®°å¾—è¦åŠ ä¸Šè‡ªå·±çš„è´¦å·å¯†ç ã€‚è®°å¾—è¦ç”¨å°å·ï¼Œå¦‚æžœé•¿æ—¶é—´ä½¿ç”¨ä¸€ä¸ªè´¦å·ï¼Œä¼šå‡ºçŽ°å„ç§å„æ ·çš„éªŒè¯ã€‚ ç™»å½•çš„ä¸»ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354async def taobao_login(username, password, url): """ æ·˜å®ç™»å½•ä¸»ç¨‹åº :param username: ç”¨æˆ·å :param password: å¯†ç  :param url: ç™»å½•ç½‘å€ :return: ç™»å½•cookies """ ### await page.click('#J_QRCodeLogin &gt; div.login-links &gt; a.forget-pwd.J_Quick2Static') page.mouse time.sleep(1) # è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç  await page.type('#TPL_username_1', username, &#123;'delay': input_time_random() - 50&#125;) # delayæ˜¯é™åˆ¶è¾“å…¥çš„æ—¶é—´ await page.type('#TPL_password_1', password, &#123;'delay': input_time_random()&#125;) time.sleep(2) # æ£€æµ‹é¡µé¢æ˜¯å¦æœ‰æ»‘å—ã€‚åŽŸç†æ˜¯æ£€æµ‹é¡µé¢å…ƒç´ ã€‚ slider = await page.Jeval('#nocaptcha', 'node =&gt; node.style') # æ˜¯å¦æœ‰æ»‘å— if slider: print('å½“å‰é¡µé¢å‡ºçŽ°æ»‘å—') # await page.screenshot(&#123;'path': './headless-login-slide.png'&#125;) # æˆªå›¾æµ‹è¯• flag, page = await mouse_slide(page=page) # jsæ‹‰åŠ¨æ»‘å—è¿‡åŽ»ã€‚ if flag: await page.keyboard.press('Enter') # ç¡®ä¿å†…å®¹è¾“å…¥å®Œæ¯•ï¼Œå°‘æ•°é¡µé¢ä¼šè‡ªåŠ¨å®ŒæˆæŒ‰é’®ç‚¹å‡» print("print enter", flag) await page.evaluate('''document.getElementById("J_SubmitStatic").click()''') # å¦‚æžœæ— æ³•é€šè¿‡å›žè½¦é”®å®Œæˆç‚¹å‡»ï¼Œå°±è°ƒç”¨jsæ¨¡æ‹Ÿç‚¹å‡»ç™»å½•æŒ‰é’®ã€‚ time.sleep(2) cookies_list = await page.cookies() print(cookies_list) return await get_cookie(page) # å¯¼å‡ºcookie å®Œæˆç™»é™†åŽå°±å¯ä»¥æ‹¿ç€cookieçŽ©å„ç§å„æ ·çš„äº‹æƒ…äº†ã€‚ else: print("") await page.keyboard.press('Enter') print("print enter") await page.evaluate('''document.getElementById("J_SubmitStatic").click()''') await page.waitFor(20) await page.waitForNavigation() try: global error # æ£€æµ‹æ˜¯å¦æ˜¯è´¦å·å¯†ç é”™è¯¯ print("error_1:", error) error = await page.Jeval('.error', 'node =&gt; node.textContent') print("error_2:", error) except Exception as e: error = None finally: if error: print('ç¡®ä¿è´¦æˆ·å®‰å…¨é‡æ–°å…¥è¾“å…¥') # ç¨‹åºé€€å‡ºã€‚ loop.close() else: print(page.url) return await get_cookie(page) æ‰€æœ‰ä»£ç åœ¨AwesomeCrawler/taobao_login å¦‚ä½•å»ºç«‹Cookieæ± å¿…é¡»å¤šä¸ªè´¦å·ï¼Œé‚£ä¹ˆå¦‚ä½•æ³¨å†Œå¤šä¸ªæ·˜å®è´¦å·å‘¢ã€‚ã€‚ å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹æä¾›æ‰‹æœºå·éªŒè¯ç æœåŠ¡å•†ï¼Œé€šè¿‡pyppeteeræ³¨å†Œè´¦å·ï¼Œä¿å­˜è´¦å·ä¿¡æ¯ ç™»å½•è´¦å·å¹¶ä¿å­˜åœ¨redis å¼€çº¿ç¨‹æ£€æŸ¥è´¦å·æ˜¯å¦å·²è¿‡æœŸï¼Œè‹¥è¿‡æœŸé‡æ–°ç™»å½•å³å¯]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è¯´ç‚¹ä»€ä¹ˆ]]></title>
      <url>%2F2019%2F02%2F13%2F%E8%AF%B4%E7%82%B9%E4%BB%80%E4%B9%88%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åå…­ç¯‡åŽŸåˆ›æ–‡ç«  èŠèŠå¤© (à¹‘â€¢ . â€¢à¹‘) è¿‡å¹´è¿™äº›å¤©ï¼Œå…¬ä¼—å·æ²¡æ€Žä¹ˆå‘æ–‡ï¼Œæœ‰å¾ˆå¤šåŽŸå› ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºè‡ªå·±æ‡’ã€‚æœŸé—´ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤šæœ‰è¶£çš„äº‹ï¼Œä»Šå¤©å°±æ¥è¯´è¯´ã€‚ å¸¦å¥³æœ‹å‹å›žå®¶ã€‚è®¤è¯†å¥¹æœ‰ä¸€å¹´äº†ï¼Œä»Šå¤©è¿‡å¹´å°±å¸¦å›žå®¶äº†ï¼Œçˆ¶æ¯ä¹ŸæŒºæ»¡æ„ã€‚å®¶åœ¨æ¹–åŒ—ï¼Œåˆ«çš„éƒ½å¥½ï¼Œå°±æ˜¯æ„Ÿè§‰å¤ªå†·äº†ï¼Œåœ¨åŒ—äº¬ä¹ æƒ¯äº†å°±æ„Ÿè§‰å®¶é‡ŒçœŸçš„å¤ªå†·äº†ã€‚æ¯å¤©éƒ½ååœ¨â€œç‚•â€æ—è¾¹ï¼Œå¯¹ï¼Œå—æ–¹ä¹Ÿä¼šæœ‰ç‚•ã€‚ç»™å¥¹ä¹°äº†ä¸¤ä¸ªçƒ­æ°´è¢‹ï¼Œæ¯å¤©æ¢ç€æ¢ç€æ¥ã€‚æ„Ÿè§‰æœ€å¼€å¿ƒçš„å°±æ˜¯ç»ˆäºŽä¸ç”¨ä¸€ä¸ªäººåç«è½¦äº†ï¼Œä¸¤ä¸ªäººæœ‰ä¸ªä¼´ï¼Œä¼šå¥½å¾ˆå¤šã€‚ ç”±äºŽå®¶é‡Œå¤ªå†·ï¼ŒMacBookæ ¹æœ¬æ²¡æ³•æ­£å¸¸ä½¿ç”¨ï¼Œä¸€å¼€æœºå°±å…³æœºï¼Œè€Œä¸”è¿˜å……ç”µä¸è¿›åŽ»ã€‚è¿‡å¹´æœŸé—´ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ²¡å†™ä»£ç çš„ï¼ŒçŽ°åœ¨æ›´éœ€è¦å¥½å¥½åŠªåŠ›ï¼Œå¤šå­¦ç‚¹ä¸œè¥¿ï¼ŒåšæŒåˆ·é¢˜ã€‚ æœ€å°´å°¬çš„äº‹æƒ…æ˜¯æˆ‘TMè¢«ç‹—å’¬äº†ï¼Œå°±åœ¨åˆäºŒã€‚é‚»å±…å®¶çš„ç‹—è·‘è¿‡æ¥ï¼Œå’¬äº†ä¸€å£ï¼Œæœ‰ç ´çš®ï¼Œç›´æŽ¥åŽ»åŒ»é™¢æ‰“äº†ç‹‚çŠ¬ç–«è‹—ï¼Œè¢«åˆ¤å®šæ˜¯äºŒçº§å’¬ä¼¤ï¼Œè¿™å¹´è¿‡çš„çœŸæƒ¨ã€‚æœ€ç—›è‹¦çš„æ˜¯ä¸èƒ½åƒè¾£çš„ï¼Œå¯¼è‡´åŽæ¥å‡ å¤©åŸºæœ¬ä¸Šåªèƒ½åƒç‚¹é’èœäº†ï¼ŒçŽ°åœ¨è¶…çº§æƒ³åƒè¾£çš„ã€‚ è¢«ç‹—å’¬çš„é‚£å¤©å¿ƒæƒ…è¶…çº§å·®ï¼Œå› ä¸ºç‹‚çŠ¬ç—…æ­»äº¡çŽ‡æ˜¯ç™¾åˆ†ä¹‹ç™¾ï¼Œæ‹…å¿ƒè‡ªå·±ä¼šä¸ä¼šå°±è¿™æ ·æŒ‚äº†ï¼Œå› ä¸ºå°±ç®—æ‰“äº†ç–«è‹—ä¹Ÿä¸èƒ½è¯´ä¸€å®šæ²¡äº‹ã€‚å°±æƒ³ç€ï¼Œå¦‚æžœè‡ªå·±è¿˜å‰©ä¸‹ä¸€å¹´æ—¶é—´ï¼Œè¦åŽ»åšä»€ä¹ˆï¼Œå®¶åº­ã€çˆ±æƒ…ä»€ä¹ˆçš„è¯¥å¦‚ä½•å¤„ç†ï¼Œéƒ½æ²¡æœ‰åœ¨è¿™ä¸ªä¸–ç•Œä¸Šç•™ä¸‹æ¥è¿‡çš„ç—•è¿¹ã€‚æ‰€ä»¥åœ¨è¿‡å¹´é‚£å‡ å¤©å¿ƒæƒ…çœŸçš„è¶…çº§éƒé—·ã€‚è€Œä¸”ä»Šå¹´æ˜¯çŒªå¹´ï¼Œæˆ‘çš„æœ¬å‘½å¹´ï¼Œæˆ‘å¦ˆè¯´è®©æˆ‘åŽ»ä¹°ç‚¹çº¢è¢œå­ã€çº¢å†…è£¤ç©¿ï¼Œè§£è§£éœ‰è¿ã€‚ çŽ°åœ¨èº«ä½“æ„Ÿè§‰è¿˜å¥½ï¼Œéƒ½æœ‰æŒ‰æ—¶æ‰“é’ˆï¼Œä¿æŒå¿ƒæ€ï¼Œåˆ«è‡ªå·±å“è‡ªå·±ã€‚æˆ‘è¿˜æ²¡æ´»å¤Ÿå‘¢ã€‚ è¿˜æœ‰ä¸ªè¯é¢˜å°±æ˜¯ä¹°æˆ¿ã€‚æ‰“ç®—ä»¥åŽå›žæ­¦æ±‰å®šå±…äº†ï¼ŒåŒ—äº¬çœŸçš„ä¸ç”¨æƒ³ï¼Œåœ¨æ­¦æ±‰ä¹°100å¹³çš„æˆ¿å­éœ€è¦ä¸€ç™¾å¤šä¸‡ï¼Œé¦–ä»˜éœ€è¦ä¸‰å››åä¸‡ï¼Œå¯¹äºŽæˆ‘æ¥è¯´è¿˜éœ€è¦å¥‹æ–—å‡ å¹´æ‰è¡Œã€‚æœ‰å¥è¯è¿™æ ·è¯´ï¼Œä¹°æˆ¿æ‰èƒ½ä½“éªŒä¸€ä¸ªå®¶åº­çš„ç¡¬å®žåŠ›ï¼Œç©·äººå®¶çš„å­©å­åªèƒ½é è‡ªå·±å•Šã€‚ï¼ˆå…¶å®žå¾ˆæƒ³åŽ»æ·±å±±è€æž—ï¼Œè¿‡æœ‰wifiçš„ç”Ÿæ´»ï¼‰ æœ€åŽæˆ‘åœ¨æƒ³è‡ªå·±çŽ°åœ¨èƒ½åšä»€ä¹ˆï¼Œæƒ³å†™ç‚¹ä»€ä¹ˆã€‚å¥½åƒè‡ªå·±çŽ°åœ¨æ¯”è¾ƒç²¾é€šçš„å°±åªæœ‰çˆ¬è™«äº†ï¼Œå¯æ˜¯çŽ°åœ¨çˆ¬è™«æ•™ç¨‹æ³›æ»¥ï¼Œåˆä¸æƒ³å†™è¿™æ–¹é¢çš„ä¸œè¥¿ï¼Œå€’æ˜¯å¯ä»¥å†™ç‚¹åˆ†å¸ƒå¼çˆ¬è™«çš„ç†è§£ã€‚æ‰€ä»¥è¿˜æ˜¯éœ€è¦å……å®žè‡ªå·±ï¼Œè¿™æ ·æ‰ä¸ä¼šæ„Ÿè§‰åˆ°ç©ºè™šã€‚ å¥½äº†ï¼Œå…ˆè¯´åˆ°è¿™é‡Œï¼Œç»§ç»­åŽ»å­¦ä¹ äº†ã€‚ä½ ä»¬æƒ³çœ‹ä»€ä¹ˆï¼Œå¯ä»¥ç•™è¨€ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[scrapyè‡ªå®šä¹‰é‡è¯•æ–¹æ³•]]></title>
      <url>%2F2019%2F01%2F25%2Fscrapy%E8%87%AA%E5%AE%9A%E4%B9%89%E9%87%8D%E8%AF%95%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åäº”ç¯‡åŽŸåˆ›æ–‡ç«  è‡ªå®šä¹‰é‡è¯•æ–¹æ³• (à¹‘â€¢ . â€¢à¹‘) Scrapyæ˜¯è‡ªå¸¦æœ‰é‡è¯•çš„ï¼Œä½†ä¸€èˆ¬æ˜¯ä¸‹è½½å‡ºé”™æ‰ä¼šé‡è¯•ï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨Middlewareå¤„æ¥å®Œæˆä½ çš„é€»è¾‘ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»çš„æ˜¯å¦‚ä½•åœ¨spideré‡Œé¢å®Œæˆé‡è¯•ã€‚ä½¿ç”¨åœºæ™¯æ¯”å¦‚ï¼Œæˆ‘è§£æžjsonå‡ºé”™äº†ï¼Œhtmlä¸­ä¸åŒ…å«æˆ‘æƒ³è¦çš„æ•°æ®ï¼Œæˆ‘è¦é‡è¯•è¿™ä¸ªè¯·æ±‚ï¼ˆrequestï¼‰ã€‚ æˆ‘ä»¬å…ˆçœ‹çœ‹å®˜æ–¹æ˜¯å¦‚ä½•å®Œæˆé‡è¯•çš„ scrapy/downloadermiddlewares/retry.py 1234567891011121314151617181920212223242526272829def _retry(self, request, reason, spider): retries = request.meta.get('retry_times', 0) + 1 retry_times = self.max_retry_times if 'max_retry_times' in request.meta: retry_times = request.meta['max_retry_times'] stats = spider.crawler.stats if retries &lt;= retry_times: logger.debug("Retrying %(request)s (failed %(retries)d times): %(reason)s", &#123;'request': request, 'retries': retries, 'reason': reason&#125;, extra=&#123;'spider': spider&#125;) retryreq = request.copy() retryreq.meta['retry_times'] = retries retryreq.dont_filter = True retryreq.priority = request.priority + self.priority_adjust if isinstance(reason, Exception): reason = global_object_name(reason.__class__) stats.inc_value('retry/count') stats.inc_value('retry/reason_count/%s' % reason) return retryreq else: stats.inc_value('retry/max_reached') logger.debug("Gave up retrying %(request)s (failed %(retries)d times): %(reason)s", &#123;'request': request, 'retries': retries, 'reason': reason&#125;, extra=&#123;'spider': spider&#125;) å¯ä»¥çœ‹åˆ°éžå¸¸æ¸…æ™°ï¼Œåœ¨metaä¸­ä¼ é€’ä¸€ä¸ªå‚æ•°retry_timesï¼Œæ¥è®°å½•å½“å‰çš„requesté‡‡é›†äº†å¤šå°‘æ¬¡ï¼Œå¦‚æžœé‡è¯•æ¬¡æ•°å°äºŽè®¾ç½®çš„æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé‚£ä¹ˆé‡è¯•ã€‚ æ ¹æ®è¿™æ®µä»£ç æˆ‘ä»¬è‡ªå®šä¹‰çš„é‡è¯•å¯ä»¥è¿™ä¹ˆå†™ 12345678def parse(self, response): try: data = json.loads(response.text) except json.decoder.JSONDecodeError: r = response.request.copy() r.dont_filter = True yield r æ•èŽ·å¼‚å¸¸ï¼Œå¦‚æžœè¿”å›žä¸æ˜¯jsonï¼Œé‚£å°±é‡è¯•ï¼Œæ³¨æ„éœ€è¦è®¾ç½®ä¸è¿‡æ»¤ã€‚ è¿™ç§æ–¹æ³•ç®€å•ç²—æš´ï¼Œå­˜åœ¨BUGï¼Œå°±æ˜¯ä¼šé™·å…¥æ­»å¾ªçŽ¯ã€‚æˆ‘ä¹Ÿå¯ä»¥è®°å½•é‡è¯•çš„æ¬¡æ•°ï¼Œç”¨metaä¼ é€’ã€‚ 123456789101112131415def parse(self, response): try: data = json.loads(response.text) except json.decoder.JSONDecodeError: retries = response.meta.get('cus_retry_times', 0) + 1 if retries &lt;= self.cus_retry_times: r = response.request.copy() r.meta['cus_retry_times'] = retries r.dont_filter = True yield r else: self.logger.debug("Gave up retrying &#123;&#125;, failed &#123;&#125; times".format( response.url, retries )) è¿™æ ·å°±å®Œæˆäº†è‡ªå®šä¹‰é‡è¯•ï¼Œä½ å®Œå…¨å¯ä»¥åœ¨ä¸­é—´ä»¶å®Œæˆï¼Œä½†æ˜¯æˆ‘æ›´å–œæ¬¢è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥æ¸…æ¥šåœ°çŸ¥é“çˆ¬è™«å…·ä½“å“ªé‡Œä¼šå­˜åœ¨é—®é¢˜ã€‚ å…¶å®žä»¥ä¸Šè¿™ç§æ–¹æ³•ä¹Ÿä¸å¥½ï¼Œå› ä¸ºä½ å¯èƒ½ä¼šåœ¨å¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦é‡è¯•ï¼Œæ¯ä¸ªå‡½æ•°éƒ½éœ€è¦ï¼Œé‚£æ¯æ¬¡éƒ½å†™ä¸€éï¼Œå¤ªä¸ç¾Žè§‚ã€‚æ›´å¥½çš„æ–¹æ³•æ˜¯å°†æ­¤æ–¹æ³•å°è£…ä¸ºscrapy.http.Responseçš„ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦ç”¨çš„æ—¶å€™ç›´æŽ¥è°ƒã€‚ä»£ç å°±ä¸è´´äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ç ”ç©¶ä¸‹ï¼Œç”¨åˆ°pythonçš„ç»§æ‰¿ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ·é¢˜ä¹‹åˆå¹¶Kä¸ªæŽ’åºé“¾è¡¨]]></title>
      <url>%2F2019%2F01%2F22%2F%E5%88%B7%E9%A2%98%E4%B9%8B%E5%90%88%E5%B9%B6K%E4%B8%AA%E6%8E%92%E5%BA%8F%E9%93%BE%E8%A1%A8%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åå››ç¯‡åŽŸåˆ›æ–‡ç«  æ‹¼å‘½åˆ·é¢˜ (à¹‘â€¢ . â€¢à¹‘) é¢˜ç›®ï¼šåˆå¹¶ k ä¸ªæŽ’åºé“¾è¡¨ï¼Œè¿”å›žåˆå¹¶åŽçš„æŽ’åºé“¾è¡¨ã€‚ ç¤ºä¾‹: 1234567è¾“å…¥:[ 1-&gt;4-&gt;5, 1-&gt;3-&gt;4, 2-&gt;6]è¾“å‡º: 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6 æ€è·¯ä¸€ä»Ž21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿè§£å†³ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„é—®é¢˜ï¼ŒçŽ°åœ¨æ˜¯kä¸ªæœ‰åºé“¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¬¬ä¸€äºŒä¸ªæœ‰åºé“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œç„¶åŽå°†æ–°çš„æœ‰åºé“¾è¡¨å†ç»§ç»­è·Ÿç¬¬ä¸‰ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ï¼Œç›´åˆ°å°†æ‰€æœ‰çš„æœ‰åºé“¾è¡¨åˆå¹¶å®Œæˆã€‚ è¿™æ ·åšæ€è·¯ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å°†ä¼šå¾ˆå¤§ï¼Œå…·ä½“å°±ä¸è®¡ç®—äº†ã€‚æœ‰å…´è¶£çš„è‡ªå·±è®¡ç®—ä¸‹ã€‚ æ€è·¯äºŒæ ¹æ®æ€è·¯ä¸€ï¼Œæˆ‘ä»¬æ˜¯ä¸€ä¸ªä¸€ä¸ªåœ°å°†æœ‰åºé“¾è¡¨ç»„æˆæ–°çš„é“¾è¡¨ï¼Œè¿™é‡Œä¸€ä¸ªè¿›è¡Œäº†k-1æ¬¡ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„åˆå¹¶æ“ä½œã€‚è€Œä¸”éšç€æ–°é“¾è¡¨è¶Šæ¥è¶Šå¤§ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¼šè¶Šæ¥è¶Šé«˜ã€‚ è¿™é‡Œæœ‰ä¸€ç§ç®€åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥å…ˆå°†kä¸ªæœ‰åºé“¾è¡¨å…ˆä»¥2ä¸ªé“¾è¡¨ä¸ºä¸€ç»„è¿›è¡Œåˆå¹¶ï¼Œå¾—å‡ºç»“æžœåŽï¼Œå†å°†æ‰€æœ‰çš„æ–°æœ‰åºé“¾è¡¨ç»§ç»­ä¸Šé¢çš„æ–¹å¼ï¼Œ2ä¸ªé“¾è¡¨ä¸ºä¸€ç»„è¿›è¡Œåˆå¹¶ã€‚ç›´è‡³å°†æ‰€æœ‰çš„æœ‰åºé“¾è¡¨è¿›è¡Œåˆå¹¶ã€‚ è¿™ä¸ªæ€è·¯ä¼šæ¯”æ€è·¯ä¸€çš„ç®—æ³•å¤æ‚åº¦å°‘ä¸€ç‚¹ã€‚ æ€è·¯ä¸‰ï¼ˆæŽ¨èï¼‰æˆ‘ä»¬æ¢ä¸ªä¸ä¸€æ ·çš„æ€è·¯ã€‚æˆ‘ä»¬å…ˆéåŽ†ä¸€æ¬¡æ‰€æœ‰çš„é“¾è¡¨ä¸­çš„å…ƒç´ ã€‚ç„¶åŽå°†å…ƒç´ å…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ã€‚æŽ¥ç€å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡ŒæŽ’åºï¼Œæœ€ç»ˆå°†æŽ’åºåŽçš„æ•°ç»„é‡Œé¢çš„æ‰€æœ‰å…ƒç´ é“¾æŽ¥èµ·æ¥ã€‚ è¿™ç§æ–¹æ¡ˆçš„å¤æ‚åº¦å’Œä»£ç é‡ä¼šæ¯”å‰é›†ä¸­æ€è·¯æ›´å¥½ï¼Œæ›´ç®€å•ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šå› ä¸ºéœ€è¦ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚è¿™ä¸ªç©ºé—´çš„å¤§å°å°±æ˜¯é“¾è¡¨å…ƒç´ çš„ä¸ªæ•° æ—¶é—´å¤æ‚åº¦ï¼šå‡è®¾ä¸€ä¸ªæ˜¯nä¸ªå…ƒç´ ï¼Œå¯¹é“¾è¡¨è¿›è¡ŒéåŽ†(n),å¯¹æ•°ç»„è¿›è¡ŒæŽ’åº(æŽ’åºç®—æ³•å¯ä»¥è¾¾åˆ°nlogn)ï¼Œæœ€ç»ˆé“¾æŽ¥æ‰€æœ‰å…ƒç´ (n),å°±æ˜¯ ï¼ˆn+nlogn+nï¼‰ï¼Œä¹Ÿå°±æ˜¯O(nlogn)ã€‚ 12345678910111213141516171819202122232425262728# Definition for singly-linked list.# class ListNode:# def __init__(self, x):# self.val = x# self.next = Noneclass Solution: def mergeKLists(self, lists): """ :type lists: List[ListNode] :rtype: ListNode """ nodeList = [] for i in range(len(lists)): currentNode = lists[i] while currentNode: nodeList.append(currentNode) currentNode = currentNode.next nodeList = sorted(nodeList, key=lambda x: x.val) tempHead = ListNode(0) currentNode = tempHead for i in range(len(nodeList)): currentNode.next = nodeList[i] currentNode = currentNode.next return tempHead.next æ€è·¯å››å·æ‡’æ–¹æ³•ï¼Œä½¿ç”¨å†…ç½®åº“heapqï¼Œæœ€å°å †, æ¯ä¸ªlistæœ‰ä¸€ä¸ªæŒ‡é’ˆ, kä¸ªæŒ‡é’ˆæ”¾å…¥å †ä¸­, æ¯æ¬¡popå‡ºæœ€å°çš„, ç„¶åŽæŒ‡å‘ç›¸åº”listçš„ä¸‹ä¸€ä¸ªnode, å†pushå…¥å †ã€‚ æœ€å°å †æ˜¯ä¸€ä¸ªæ•°ç»„, æ‰€æœ‰å…ƒç´ æ»¡heap[k] &lt;= heap[2*k+1]å’Œheap[k] &lt;= heap[2*k+2], heap[0]å³å †é¡¶æœ€å°ã€‚ 1234567891011121314151617181920212223# class ListNode:# def __init__(self, x):# self.val = x# self.next = None class Solution: # @param a list of ListNode # @return a ListNode def mergeKLists(self, lists): heap = [] for node in lists: if node != None: heap.append((node.val, node)) heapq.heapify(heap) head = ListNode(0) curr = head while heap: pop = heapq.heappop(heap) curr.next = ListNode(pop[0]) curr = curr.next if pop[1].next: heapq.heappush(heap, (pop[1].next.val, pop[1].next)) return head.next]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç”¨Golangå†™çˆ¬è™«ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2019%2F01%2F16%2FGolang%E5%86%99%E7%88%AC%E8%99%AB%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  æ–°çš„æ—…ç¨‹å¼€å§‹äº† (à¹‘â€¢ . â€¢à¹‘) å‰è¨€è¿‘æœŸæœ‰äº›é¡¹ç›®éœ€è¦ç”¨åˆ°Golangï¼Œå¤§æ¦‚èŠ±äº†ä¸€å‘¨æ¥çœ‹è¯­æ³•ï¼Œç„¶åŽå°±å¼€å§‹çœ‹çˆ¬è™«ç›¸å…³çš„ã€‚è¿™é‡Œè®°å½•ä¸‹å¦‚ä½•ä½¿ç”¨Golangæ¥å†™çˆ¬è™«çš„å‡ ä¸ªæ­¥éª¤ï¼Œæœ€ç»ˆå®Œæˆçš„æ•ˆæžœå¦‚ä¸‹å›¾ çŽ¯å¢ƒå®‰è£…æ¯”è¾ƒç®€å• 12sudo apt-get install golang # (Linux)brew install go # (Mac) å®‰è£…ä¹‹åŽæ³¨æ„GOPATHå’ŒGOROOTç­‰çŽ¯å¢ƒå˜é‡è®¾ç½®ï¼ŒIDEç”¨çš„æ˜¯jetbrainså®¶çš„GoLandã€‚ å»ºè®®å…ˆåŽ»çœ‹çœ‹Golangçš„å®˜æ–¹æ–‡æ¡£ï¼Œå­¦ä¹ åŸºæœ¬è¯­æ³•çŸ¥è¯†ã€‚åœ°å€ï¼šå®˜æ–¹æ•™ç¨‹ä¸­æ–‡ç‰ˆ åˆ›å»ºæ–‡æ¡£æ–°å»ºæ–‡ä»¶crawler.goï¼Œå¹¶å†™å…¥å¦‚ä¸‹ä»£ç ï¼š 1234567package mainimport "fmt"func main() &#123; fmt.Println("Hello, world")&#125; è¿è¡Œæ–¹æ³•ï¼šgo run crawler.goï¼Œè‚‰çœ¼å¯è§ï¼Œç¼–è¯‘é€Ÿåº¦æ¯”JAVAè¦å¿«å¾—å¤šã€‚ ä¸‹è½½ç½‘é¡µè¿™é‡Œå…ˆä»ŽGolangåŽŸç”Ÿhttpåº“å¼€å§‹ï¼Œç›´æŽ¥ä½¿ç”¨net/httpåŒ…å†…çš„å‡½æ•°è¯·æ±‚ 123import "net/http"...resp, err := http.Get("http://wwww.baidu.com") æ‰€ä»¥ä»£ç å¯ä»¥è¿™æ ·å†™ 12345678910111213141516171819202122package mainimport ( "fmt" "io/ioutil" "net/http")func main() &#123; fmt.Println("Hello, world") resp, err := http.Get("http://www.baidu.com/") if err != nil &#123; fmt.Println("http get error", err) return &#125; body, err := ioutil.ReadAll(resp.Body) if err != nil &#123; fmt.Println("read error", err) return &#125; fmt.Println(string(body))&#125; Golangçš„é”™è¯¯å¤„ç†å°±æ˜¯è¿™æ ·çš„ï¼Œä¹ æƒ¯å°±å¥½ã€‚ è¿™é‡Œæ›´å¥½çš„åšæ³•æ˜¯æŠŠä¸‹è½½æ–¹æ³•å°è£…ä¸ºå‡½æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132333435package mainimport ( "fmt" "io/ioutil" "net/http")func main() &#123; fmt.Println("Hello, world") url := "http://www.baidu.com/" download(url)&#125;func download(url string) &#123; client := &amp;http.Client&#123;&#125; req, _ := http.NewRequest("GET", url, nil) // è‡ªå®šä¹‰Header req.Header.Set("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)") resp, err := client.Do(req) if err != nil &#123; fmt.Println("http get error", err) return &#125; //å‡½æ•°ç»“æŸåŽå…³é—­ç›¸å…³é“¾æŽ¥ defer resp.Body.Close() body, err := ioutil.ReadAll(resp.Body) if err != nil &#123; fmt.Println("read error", err) return &#125; fmt.Println(string(body))&#125; è§£æžç½‘é¡µgoå¸¸è§çš„è§£æžå™¨xpathã€jqueryã€æ­£åˆ™éƒ½æœ‰ï¼Œç›´æŽ¥æœç´¢å³å¯ï¼Œæˆ‘è¿™é‡Œå·æ‡’ï¼Œç›´æŽ¥ç”¨åˆ«äººå†™å¥½çš„è½®å­collectlinksï¼Œå¯ä»¥æå–ç½‘é¡µä¸­æ‰€æœ‰çš„é“¾æŽ¥ï¼Œä¸‹è½½æ–¹æ³•go get -u github.com/jackdanger/collectlinks 123456789101112131415161718192021222324252627282930313233package mainimport ( "fmt" "github.com/jackdanger/collectlinks" "net/http")func main() &#123; fmt.Println("Hello, world") url := "http://www.baidu.com/" download(url)&#125;func download(url string) &#123; client := &amp;http.Client&#123;&#125; req, _ := http.NewRequest("GET", url, nil) // è‡ªå®šä¹‰Header req.Header.Set("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)") resp, err := client.Do(req) if err != nil &#123; fmt.Println("http get error", err) return &#125; //å‡½æ•°ç»“æŸåŽå…³é—­ç›¸å…³é“¾æŽ¥ defer resp.Body.Close() links := collectlinks.All(resp.Body) for _, link := range links &#123; fmt.Println("parse url", link) &#125;&#125; å¹¶å‘Golangä½¿ç”¨å…³é”®å­—goå³å¯å¼€å¯ä¸€ä¸ªæ–°çš„goç¨‹ï¼Œä¹Ÿå«goroutineï¼Œä½¿ç”¨ go è¯­å¥å¼€å¯ä¸€ä¸ªæ–°çš„ goroutine ä¹‹åŽï¼Œgo è¯­å¥ä¹‹åŽçš„å‡½æ•°è°ƒç”¨å°†åœ¨æ–°çš„ goroutine ä¸­æ‰§è¡Œï¼Œè€Œä¸ä¼šé˜»å¡žå½“å‰çš„ç¨‹åºæ‰§è¡Œã€‚æ‰€ä»¥ä½¿ç”¨Golangå¯ä»¥å¾ˆå®¹æ˜“å†™æˆå¼‚æ­¥IOã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243package mainimport ( "fmt" "github.com/jackdanger/collectlinks" "net/http")func main() &#123; fmt.Println("Hello, world") url := "http://www.baidu.com/" queue := make(chan string) go func() &#123; queue &lt;- url &#125;() for uri := range queue &#123; download(uri, queue) &#125;&#125;func download(url string, queue chan string) &#123; client := &amp;http.Client&#123;&#125; req, _ := http.NewRequest("GET", url, nil) // è‡ªå®šä¹‰Header req.Header.Set("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)") resp, err := client.Do(req) if err != nil &#123; fmt.Println("http get error", err) return &#125; //å‡½æ•°ç»“æŸåŽå…³é—­ç›¸å…³é“¾æŽ¥ defer resp.Body.Close() links := collectlinks.All(resp.Body) for _, link := range links &#123; fmt.Println("parse url", link) go func() &#123; queue &lt;- link &#125;() &#125;&#125; çŽ°åœ¨çš„æµç¨‹æ˜¯mainæœ‰ä¸€ä¸ªforå¾ªçŽ¯è¯»å–æ¥è‡ªåä¸ºqueueçš„é€šé“ï¼Œdownloadä¸‹è½½ç½‘é¡µå’Œé“¾æŽ¥è§£æžï¼Œå°†å‘çŽ°çš„é“¾æŽ¥æ”¾å…¥mainä½¿ç”¨çš„åŒä¸€é˜Ÿåˆ—ä¸­ï¼Œå¹¶å†å¼€å¯ä¸€ä¸ªæ–°çš„goroutineåŽ»æŠ“å–å½¢æˆæ— é™å¾ªçŽ¯ã€‚ è¿™é‡Œå¯¹äºŽæ–°æ‰‹æ¥è¯´çœŸçš„ä¸å¥½ç†è§£ï¼Œæ¶‰åŠåˆ°Golangçš„ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ä¸œè¥¿ï¼šgoroutineå’Œchannelsï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸å¤§æ‡‚ï¼Œè¿™é‡Œä¹Ÿä¸å¤šè®²äº†ï¼Œä»¥åŽæœ‰æœºä¼šç»†è¯´ã€‚ å®˜æ–¹ï¼šA goroutine is a lightweight thread managed by the Go runtime.ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šGoroutineæ˜¯ç”±Goè¿è¡Œæ—¶ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ã€‚channelsæ˜¯è¿žæŽ¥å¹¶å‘goroutineçš„ç®¡é“ï¼Œå¯ä»¥ç†è§£ä¸ºgoroutineé€šä¿¡çš„ç®¡é“ã€‚ å¯ä»¥å°†å€¼ä»Žä¸€ä¸ªgoroutineå‘é€åˆ°é€šé“ï¼Œå¹¶å°†è¿™äº›å€¼æŽ¥æ”¶åˆ°å¦ä¸€ä¸ªgoroutineä¸­ã€‚å¯¹è¿™éƒ¨åˆ†æœ‰å…´è¶£çš„å¯ä»¥åŽ»çœ‹æ–‡æ¡£ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œçˆ¬è™«åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šåŽ»é‡ã€é“¾æŽ¥æ˜¯å¦æœ‰æ•ˆã€‚ é“¾æŽ¥è½¬ä¸ºç»å¯¹è·¯å¾„1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package mainimport ( "fmt" "github.com/jackdanger/collectlinks" "net/http" "net/url")func main() &#123; fmt.Println("Hello, world") url := "http://www.baidu.com/" queue := make(chan string) go func() &#123; queue &lt;- url &#125;() for uri := range queue &#123; download(uri, queue) &#125;&#125;func download(url string, queue chan string) &#123; client := &amp;http.Client&#123;&#125; req, _ := http.NewRequest("GET", url, nil) // è‡ªå®šä¹‰Header req.Header.Set("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)") resp, err := client.Do(req) if err != nil &#123; fmt.Println("http get error", err) return &#125; //å‡½æ•°ç»“æŸåŽå…³é—­ç›¸å…³é“¾æŽ¥ defer resp.Body.Close() links := collectlinks.All(resp.Body) for _, link := range links &#123; absolute := urlJoin(link, url) if url != " " &#123; fmt.Println("parse url", absolute) go func() &#123; queue &lt;- absolute &#125;() &#125; &#125;&#125;func urlJoin(href, base string) string &#123; uri, err := url.Parse(href) if err != nil &#123; return " " &#125; baseUrl, err := url.Parse(base) if err != nil &#123; return " " &#125; return baseUrl.ResolveReference(uri).String()&#125; è¿™é‡Œæ–°å†™äº†ä¸€ä¸ªurlJoinå‡½æ•°ï¼ŒåŠŸèƒ½å’ŒPythonä¸­çš„urllib.parse.urljoinä¸€æ ·ã€‚ åŽ»é‡æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªmapç”¨æ¥è®°å½•ï¼Œé‚£äº›æ˜¯å·²ç»è®¿é—®è¿‡çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package mainimport ( "fmt" "github.com/jackdanger/collectlinks" "net/http" "net/url")var visited = make(map[string]bool)func main() &#123; fmt.Println("Hello, world") url := "http://www.baidu.com/" queue := make(chan string) go func() &#123; queue &lt;- url &#125;() for uri := range queue &#123; download(uri, queue) &#125;&#125;func download(url string, queue chan string) &#123; visited[url] = true client := &amp;http.Client&#123;&#125; req, _ := http.NewRequest("GET", url, nil) // è‡ªå®šä¹‰Header req.Header.Set("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)") resp, err := client.Do(req) if err != nil &#123; fmt.Println("http get error", err) return &#125; //å‡½æ•°ç»“æŸåŽå…³é—­ç›¸å…³é“¾æŽ¥ defer resp.Body.Close() links := collectlinks.All(resp.Body) for _, link := range links &#123; absolute := urlJoin(link, url) if url != " " &#123; if !visited[absolute] &#123; fmt.Println("parse url", absolute) go func() &#123; queue &lt;- absolute &#125;() &#125; &#125; &#125;&#125;func urlJoin(href, base string) string &#123; uri, err := url.Parse(href) if err != nil &#123; return " " &#125; baseUrl, err := url.Parse(base) if err != nil &#123; return " " &#125; return baseUrl.ResolveReference(uri).String()&#125; å¥½äº†å¤§åŠŸå‘Šæˆï¼Œè¿è¡Œç¨‹åºï¼Œä¼šåƒä¸€å¼ ç½‘é“ºå¼€ä¸€ç›´ä¸åœçš„æŠ“ä¸‹åŽ»ã€‚ å†™åˆ°è¿™é‡Œï¼Œæˆ‘çªç„¶è§‰å¾—æˆ‘å¿˜äº†ä»€ä¹ˆï¼Œå“¦ï¼Œå¿˜è®°åŠ timeoutäº†ï¼Œå¿…é¡»è¦ä¸ºæ¯æ¬¡è¯·æ±‚åŠ ä¸Šè¶…æ—¶ï¼Œå‰ä¸¤å¤©æ‰å†™äº†çš„ã€‚å®Œæ•´ä»£ç å°±è¡¥è´´ä¸Šæ¥äº†ï¼Œåœ¨githubä¸­ã€‚ è¿è¡Œä¸€æ®µæ—¶é—´åŽçš„èµ„æºæ¶ˆè€— CPUä½¿ç”¨çŽ‡å¹¶ä¸é«˜ï¼Œå†…å­˜å› ä¸ºä¼šä¿å­˜ä¸€å¼ ä¸æ–­å¢žå¤§çš„mapï¼Œæ‰€ä»¥ä¼šä¸€ç›´ä¸Šæ¶¨ã€‚å¦‚æžœæ˜¯ç”¨Pythonï¼Œè¯¥æ€Žä¹ˆå†™å‘¢ï¼Ÿèµ„æºæ¶ˆè€—å’ŒGolangæ¯”ä¼šå¦‚ä½•å‘¢ï¼Ÿæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åŽ»è¯•è¯•ã€‚ åŽè®°éƒ½è¯´Golangçš„å¹¶å‘å¥½ï¼Œä½“éªŒäº†ä¸‹ç¡®å®žå¦‚æ­¤ã€‚Golangèµ·æ­¥æ™šï¼Œä½†æ˜¯å‘å±•çš„å—ã€‚é‡‡é›†è¿˜æ˜¯å¤šå­¦ç‚¹æŠ€èƒ½é˜²èº«å§ã€‚æˆ‘ä»Žä¸Šå‘¨å¼€å§‹å­¦ä¹ Golangè¯­æ³•ï¼Œè·Ÿç€å®˜æ–¹æ–‡æ¡£å­¦ä¹ ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥çœ‹æ‡‚åœ¨åšä»€ä¹ˆï¼Œé™¤äº†é‚£å‡ å—éš¾ç†è§£çš„ï¼Œéœ€è¦è‡ªå·±å¤šå†™å¤šç”¨æ‰è¡Œã€‚ æœ‰å…´è¶£çš„å°ä¼™ä¼´ä¸€èµ·å…¥å‘å•Šã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythoné‡è¯•çš„å¤šé‡æ–¹æ³•]]></title>
      <url>%2F2019%2F01%2F14%2FPython%E9%87%8D%E8%AF%95%E7%9A%84%E5%A4%9A%E9%87%8D%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åäºŒç¯‡åŽŸåˆ›æ–‡ç«  æ²¡äººèƒ½ä¿è¯è‡ªå·±çš„çš„ç¨‹åºæ²¡BUGï¼Œæ‰€ä»¥é‡è¯•éžå¸¸æœ‰å¿…è¦ã€‚ ä¸‹é¢è¯´ä¸‹æˆ‘çŸ¥é“çš„å‡ ç§Pythoné‡è¯•æ–¹æ³•ã€‚ è£…é¥°å™¨è¿™æ˜¯æœ€æœ€ç®€å•çš„é‡è¯•æ–¹æ³•ï¼Œè€Œä¸”æœ‰çŽ°æˆçš„è½®å­ï¼ŒæŽ¨èä¸¤ä¸ªï¼š retrying tenacity ä¸¤ç§ç”¨æ³•æ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ç»å¸¸ç”¨åŽè€…ï¼Œçœ‹ä¸‹ 1234567891011import randomfrom tenacity import retry@retrydef do_something_unreliable(): if random.randint(0, 10) &gt; 1: raise IOError("Broken sauce, everything is hosed!!!111one") else: return "Awesome sauce!"print(do_something_unreliable()) ç”¨æ³•éžå¸¸ç®€å•ï¼Œç›´æŽ¥åŠ ä¸Šè£…é¥°å™¨ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æœ‰å„ç§è‡ªå®šä¹‰ã€‚ 123456from tenacity import *@retry(stop=(stop_after_delay(10) | stop_after_attempt(5)), wait=wait_fixed(2))def stop_after_10_s_or_5_retries(): print("Stopping after 10 seconds or 5 retries") raise Exception ä»¥ä¸Šæ˜¯é‡è¯•5æ¬¡ï¼Œæ¯æ¬¡é—´éš”10ç§’ï¼Œé‡è¯•å‰ç­‰å¾…2ç§’ã€‚ æ•èŽ·å¼‚å¸¸è¿™ç§æ–¹æ³•æ›´å¸¸è§ 12345678910def func(): passfor _ in range(0,100): while True: try: func() except SomeSpecificException: continue break è¿™é‡Œä¸€å®šä¸è¦å†™æˆexceptæˆ–è€…except Exceptionï¼Œä¸€å®šè¦æŒ‡å®šå¼‚å¸¸ï¼Œè®©åˆ«çš„é”™è¯¯æ‰“å°å‡ºæ¥ï¼Œç„¶åŽçœ‹æ—¥å¿—å†ä¿®æ”¹çˆ¬è™«ï¼Œæˆ–è€…ä¼šå‡ºçŽ°æ„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚ ä¸¾ä¸€ä¸ªä¾‹ï¼š 12345678910111213141516171819202122def verify_url(url): import requests try: requests.get(url, timeout=10) return True except requests.exceptions.ConnectTimeout: return Falsedef main(): for _ in range(5): try: if verify_url(''): return else: continue except KeyError: continueif __name__ == '__main__': main()]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[pysparkæ“ä½œMongoDB]]></title>
      <url>%2F2019%2F01%2F03%2Fpyspark%E6%93%8D%E4%BD%9CMongoDB%2F</url>
      <content type="text"><![CDATA[pysparkå¯¹mongoæ•°æ®åº“çš„åŸºæœ¬æ“ä½œ (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„ï¼š ä¸è¦å®‰è£…æœ€æ–°çš„pysparkç‰ˆæœ¬ï¼Œè¯·å®‰è£…pip3 install pyspark==2.3.2 spark-connectorä¸Žå¹³å¸¸çš„MongoDBå†™æ³•ä¸åŒï¼Œæ ¼å¼æ˜¯ï¼šmongodb://127.0.0.1:database.collection å¦‚æžœè®¡ç®—æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä½ çš„ç”µè„‘å¯èƒ½ä¼šæ¯”è¾ƒå¡ï¼Œ^_^ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576#!/usr/bin/env python # -*- coding: utf-8 -*-"""@author: zhangslob@file: spark_count.py @time: 2019/01/03@desc: ä¸è¦å®‰è£…æœ€æ–°çš„pysparkç‰ˆæœ¬ `pip3 install pyspark==2.3.2` æ›´å¤špysparkæ“ä½œMongoDBè¯·çœ‹https://docs.mongodb.com/spark-connector/master/python-api/"""import osfrom pyspark.sql import SparkSession# set PYSPARK_PYTHON to python36os.environ['PYSPARK_PYTHON'] = '/usr/bin/python36'# load mongodb data# æ ¼å¼æ˜¯ï¼š"mongodb://127.0.0.1:database.collection"input_uri = "mongodb://127.0.0.1:27017/spark.spark_test"output_uri = "mongodb://127.0.0.1:27017/spark.spark_test"# åˆ›å»ºsparkï¼Œé»˜è®¤ä½¿ç”¨æœ¬åœ°çŽ¯å¢ƒï¼Œæˆ–è€…"spark://master:7077"spark = SparkSession \ .builder \ .master("local") \ .appName("MyApp") \ .config("spark.mongodb.input.uri", input_uri) \ .config("spark.mongodb.output.uri", output_uri) \ .config('spark.jars.packages', 'org.mongodb.spark:mongo-spark-connector_2.11:2.2.0') \ .getOrCreate()def except_id(collection_1, collection_2, output_collection, pipeline): """ è®¡ç®—è¡¨1ä¸Žè¡¨2ä¸­ä¸åŒçš„æ•°æ® :param collection_1: å¯¼å…¥è¡¨1 :param collection_2: å¯¼å…¥è¡¨2 :param output_collection: ä¿å­˜çš„è¡¨ :param pipeline: MongoDBæŸ¥è¯¢è¯­å¥ str :return: """ # å¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šæƒ³è¦å¯¼å…¥çš„æ•°æ®åº“ï¼Œå°†ä¼šè¦†ç›–ä¸Šé¢é…ç½®ä¸­çš„input_uriã€‚ä¸‹é¢ä¿å­˜æ•°æ®ä¹Ÿä¸€æ · # .option("collection", "mongodb://127.0.0.1:27017/spark.spark_test") # .option("database", "people").option("collection", "contacts") df_1 = spark.read.format('com.mongodb.spark.sql.DefaultSource').option("collection", collection_1) \ .option("pipeline", pipeline).load() df_2 = spark.read.format('com.mongodb.spark.sql.DefaultSource').option("collection", collection_2) \ .option("pipeline", pipeline).load() # df_1æœ‰ä½†æ˜¯ä¸åœ¨ df_2ï¼ŒåŒç†å¯ä»¥è®¡ç®—df_2æœ‰ï¼Œdf_1æ²¡æœ‰ df = df_1.subtract(df_2) df.show() # mode å‚æ•°å¯é€‰èŒƒå›´ # * `append`: Append contents of this :class:`DataFrame` to existing data. # * `overwrite`: Overwrite existing data. # * `error` or `errorifexists`: Throw an exception if data already exists. # * `ignore`: Silently ignore this operation if data already exists. df.write.format("com.mongodb.spark.sql.DefaultSource").option("collection", output_collection).mode("append").save() spark.stop()if __name__ == '__main__': # mongodb query, MongoDBæŸ¥è¯¢è¯­å¥ï¼Œå¯ä»¥å‡å°‘å¯¼å…¥æ•°æ®é‡ pipeline = "[&#123;'$project': &#123;'uid': 1, '_id': 0&#125;&#125;]" collection_1 = "spark_1" collection_2 = "spark_2" output_collection = 'diff_uid' except_id(collection_1, collection_2, output_collection, pipeline) print('success') å®Œæ•´ä»£ç åœ°å€ï¼šspark_count_diff_uid.py]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Chromeæ–­ç‚¹JSå¯»æ‰¾æ·˜å®ç­¾åsign]]></title>
      <url>%2F2018%2F12%2F21%2FChrome%E6%96%AD%E7%82%B9JS%E5%AF%BB%E6%89%BE%E6%B7%98%E5%AE%9D%E7%AD%BE%E5%90%8Dsign%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«åç¯‡åŽŸåˆ›æ–‡ç«  Chromeæ–­ç‚¹JSå¯»æ‰¾æ·˜å®ç­¾åsign (à¹‘â€¢ . â€¢à¹‘) å†™äº†è¿™ç¯‡æ–‡ç« æ·˜å®signåŠ å¯†ç®—æ³•ä¹‹åŽï¼Œå¾ˆå¤šäººé—®æˆ‘Chromeæ–­ç‚¹è°ƒè¯•æ€Žä¹ˆåšï¼Œä»Šå¤©ä¼šå°½é‡è¯¦ç»†èŠèŠã€‚å¦‚æžœä½ ç”¨ä½¿ç”¨è¿‡Pycharmçš„æ–­ç‚¹ï¼Œä¼šæ›´å¥½ç†è§£ã€‚ æˆ‘ä»¬è¿˜æ˜¯ä»¥æ·˜å®ä¸ºä¾‹ï¼Œä½¿ç”¨Chromeçš„ç§»åŠ¨è¯·æ±‚å¤´æ‰“å¼€è¿™ä¸ªç½‘ç«™ï¼Œhttps://s.m.taobao.com/h5?q=%E9%9E%8B%E6%9E%B6ï¼Œç„¶åŽæ‰“å¼€å¼€å‘è€…å·¥å…·ã€‚ å¯ä»¥çœ‹åˆ°æ•°æ®éƒ½åœ¨è¿™é‡Œ: 1curl 'https://acs.m.taobao.com/h5/mtop.taobao.wsearch.h5search/1.0/?jsv=2.3.16&amp;appKey=12574478&amp;t=1545389573843&amp;sign=b7d69692d1cc16adec65502f0bac2018&amp;api=mtop.taobao.wsearch.h5search&amp;v=1.0&amp;H5Request=true&amp;ecode=1&amp;type=jsonp&amp;dataType=jsonp&amp;callback=mtopjsonp1&amp;data=%7B%22q%22%3A%22%E9%9E%8B%E6%9E%B6%22%2C%22sst%22%3A%221%22%2C%22n%22%3A20%2C%22buying%22%3A%22buyitnow%22%2C%22m%22%3A%22api4h5%22%2C%22token4h5%22%3A%22%22%2C%22abtest%22%3A%2214%22%2C%22wlsort%22%3A%2214%22%2C%22page%22%3A1%7D' -H 'accept-encoding: gzip, deflate, br' -H 'accept-language: zh-CN,zh;q=0.9' -H 'user-agent: Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1' -H 'accept: */*' -H 'referer: https://s.m.taobao.com/h5?q=%E9%9E%8B%E6%9E%B6' -H 'authority: acs.m.taobao.com' -H 'cookie: _m_h5_tk=2d819f0b9e7ed54e22c296a4d0a2ad24_1545397060981; _m_h5_tk_enc=1337c23b9d98086e735af8c00bdeeea1; t=6b9cfdffa68f4d6ea189913d5288bde7; cna=vbOjFJRUeAYCAd3aK4xZQfic; l=aBVCFdFpyHMPonDmBMaOIX41pVt4SOZzuUwM1MazniYktO-39Z2vPjYb-VwWK_qC5B7y_jt5F; isg=BC8v8gXjr7rLXauG9FFT5HkjvkUz3onQo3vs1UG8yx6lkE-SSaQTRi1BFoau6Ftu' --compressed é‡è¦å‚æ•°æ˜¯è¿™äº›ï¼Œç®€å•çœ‹çœ‹ï¼Œå¾ˆå¤šéƒ½æ˜¯å›ºå®šå€¼ï¼Œå¯èƒ½ä¼šå˜çš„æœ‰æ—¶é—´æˆ³ã€dataä¸­çš„æœç´¢å…³é”®è¯ã€é¡µç ç­‰ä¿¡æ¯ã€‚é‡è¦çš„å°±æ˜¯signæ˜¯æ€Žä¹ˆæ¥çš„ã€‚ ä¸‹é¢å¼€å§‹ä¸€æ­¥æ­¥ä»‹ç»ã€‚ é¦–å…ˆæœç´¢signæ•°å€¼ï¼Œçœ‹çœ‹åœ¨å…¶ä»–åœ°æ–¹æ—¶å€™æ˜¯å¦å‡ºçŽ°è¿‡ æŽ¥ç€æœç´¢æ–¹æ³•åã€‚é€‰æ‹©ä¸€ä¸ªå†·é—¨çš„å˜é‡åå¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼Œå¦‚ä¸‹å›¾ï¼Œä¸€ä¸ªä¸ªåœ°ç‚¹è¿›åŽ»çœ‹çœ‹ï¼Œæœç´¢signï¼Œçœ‹æ˜¯å¦æœ‰åŒ¹é…ã€‚ æœ€ç»ˆç¡®å®šå…³é”®ä»£ç åœ¨ç¬¬äºŒä¸ªï¼Œä¹Ÿå°±æ˜¯https://g.alicdn.com/mtb/lib-mtop/2.3.16/mtop.js æ ¼å¼åŒ–ä»£ç ï¼Œå¹¶æœç´¢signï¼Œç¡®å®šä»£ç ä½ç½®ã€‚ ç›´æŽ¥è´´å‡ºæ¥ 1234567891011121314151617 if (d.H5Request === !0) &#123; var f = "//" + (d.prefix ? d.prefix + "." : "") + (d.subDomain ? d.subDomain + "." : "") + d.mainDomain + "/h5/" + c.api.toLowerCase() + "/" + c.v.toLowerCase() + "/" , g = c.appKey || ("waptest" === d.subDomain ? "4272" : "12574478") , i = (new Date).getTime() , j = h(d.token + "&amp;" + i + "&amp;" + g + "&amp;" + c.data) , k = &#123; jsv: x, appKey: g, t: i, sign: j &#125; , l = &#123; data: c.data, ua: c.ua &#125;;/// &#125; å¯ä»¥çœ‹åˆ°signç­‰äºŽjï¼Œjç­‰äºŽh(d.token + &quot;&amp;&quot; + i + &quot;&amp;&quot; + g + &quot;&amp;&quot; + c.data)ï¼Œæ„Ÿè§‰æ˜¯ä¸€äº›å­—ç¬¦ä¸²é€šè¿‡â€œ&amp;â€è¿žæŽ¥èµ·æ¥ï¼Œä¸‹ä¸€æ­¥å°±å¯ä»¥å¯¹jsä»£ç æ‰“æ–­ç‚¹åŽ»çœ‹çœ‹å…·ä½“æ•°æ®æ˜¯ä»€ä¹ˆã€‚å¦‚ä¸‹å›¾ä½ç½®ã€‚ æ­¤æ—¶æˆ‘ä»¬å†æ¬¡åˆ·æ–°ç½‘é¡µï¼Œç¨ç­‰ç‰‡åˆ»ã€‚ä¼šå‡ºçŽ°å„ä¸ªå˜é‡çš„ä¿¡æ¯ æˆ‘ä»¬æŠŠé¼ æ ‡æ”¾åˆ°å˜é‡çš„ä½ç½®å°±å¯ä»¥çœ‹åˆ°ç›¸å…³ä¿¡æ¯ã€‚æˆ‘ä»¬å…³æ³¨çš„æ˜¯å¦‚ä¸‹å‚æ•°ï¼š d.token i g c.data èŽ·å–d.tokenæˆ‘ä»¬ä¸€ä¸€æ¥çœ‹è¿™äº›æ˜¯ä»€ä¹ˆã€‚æˆ‘è¿™é‡Œçš„tokenæ˜¯c2b90ff4dd1405aa02fda3b5a2ee72c0ï¼Œå…ˆåŽ»æœç´¢ä¸‹ï¼Œå‘çŽ°åœ¨è¯·æ±‚ç½‘é¡µæ—¶è¿”å›žçš„ã€‚å¯æ˜¯è¿™é‡Œæ˜¯Request Cookiesã€‚ æˆ‘ä»¬æ¸…ç©ºç¼“å­˜ï¼Œå†æ¥ã€‚å‘çŽ°ç¬¬ä¸€æ¬¡tokenæ˜¯ç©ºçš„ ç»§ç»­å¾€ä¸‹èµ°ï¼Œç›´åˆ°åœ¨Networkä¸­çœ‹åˆ°è¯·æ±‚å‘å‡ºåŽ»äº† ç›´æŽ¥å¤åˆ¶Curlåœ¨å‘½ä»¤è¡Œï¼Œç»“æžœæ˜¯ï¼š 1mtopjsonp1(&#123;"api":"mtop.taobao.wsearch.h5search","data":&#123;&#125;,"ret":["FAIL_SYS_TOKEN_EMPTY::ä»¤ç‰Œä¸ºç©º"],"v":"1.0"&#125;) æˆ‘ä»¬æŽ¥ç€å¾€ä¸‹èµ°ï¼Œå‘çŽ°ç»ˆäºŽæœ‰è¿”å›žçš„Cookiesäº†ï¼Œè€Œä¸”å¯¹æ¯”å‘çŽ°ä¸‹ä¸ªè¯·æ±‚ä½¿ç”¨çš„å°±æ˜¯è¿™é‡Œçš„Cookiesï¼Œtokenå°±åˆ†å·å¤„ç†äº†ã€‚ é¦–å…ˆæ— cookieçŠ¶æ€ä¸‹åŽ»è®¿é—®è¯¥è¯·æ±‚ï¼šhttps://acs.m.taobao.com/h5/mtop.taobao.wsearch.h5search/1.0ï¼Œå¯¹æ–¹ä¼šè¿”å›žå…³é”®Cookiesä¿¡æ¯ï¼Œ_m_h5_tkå’Œ_m_h5_tk_encï¼ŒæŽ¥ä¸‹æ¥ä¼šç”¨åˆ°ã€‚ ä¸‹ä¸€æ­¥æŽ¥ä¸‹æ¥çš„å°±æ¯”è¾ƒç®€å•äº†ï¼Œiå¾ˆæ˜Žæ˜¾å°±æ˜¯æ—¶é—´æˆ³ï¼Œgæ˜¯å®šå€¼ï¼š12574478ï¼Œé‚£ä¹ˆdataæ˜¯ä»€ä¹ˆå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ‰“å°åˆ°console å‘çŽ°å°±æ˜¯Query String é‡Œçš„data å¥½äº†æˆ‘ä»¬çŽ°åœ¨å·²ç»å¯ä»¥æ‰¾åˆ°æ‰€æœ‰çš„å‚æ•°äº†ï¼Œå¦‚ä¸‹ 12&gt; d.token + "&amp;" + i + "&amp;" + g + "&amp;" + c.data&lt; "59e8d998ee8b36a04b6e9d8037ac22b7&amp;1545409677267&amp;12574478&amp;&#123;"q":"éž‹æž¶","sst":"1","n":20,"buying":"buyitnow","m":"api4h5","token4h5":"","abtest":"15","wlsort":"15","page":1&#125;" æœ€åŽsignæ˜¯11a08dbbaa04aa6f9e4b35f6d9213242ï¼Œçœ‹èµ·æ¥åƒã€‚å¤åˆ¶å­—ç¬¦ä¸²åˆ°åœ¨çº¿ç½‘ç«™é‡Œæµ‹è¯•ï¼Œå‘çŽ°ç»“æžœæ˜¯æ­£ç¡®çš„ã€‚ æ€»ç»“signç”Ÿæˆå…¬å¼æ˜¯ï¼š 1md5Hex(token&amp;t&amp;appKey&amp;data) å…¬å¼å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªè¦æŽŒæ¡äº†æ–­ç‚¹è°ƒè¯•çš„æ–¹æ³•ï¼Œåˆ†æžèµ·æ¥ä¼šç®€å•å¾ˆå¤šã€‚æƒ³å­¦æ›´å¤šæœç´¢Chromeè°ƒè¯•æŠ€å·§ã€‚ æœ¬æ–‡è¿˜æœ‰äº›åœ°æ–¹æ²¡æœ‰è¯´æ¸…æ¥šï¼Œæ¯”å¦‚å¦‚ä½•æ¸…ç©ºç¼“å­˜ï¼Œæœ€ä½³æ–¹æ³•æ˜¯Applicationä¸­çš„Storageï¼Œå°†ä¸‹é¢çš„æ‰€æœ‰Valueæ¸…ç©ºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[MongoDBä¿å­˜æ•°æ®çš„ä¼˜åŒ–æ–¹æ³•]]></title>
      <url>%2F2018%2F12%2F18%2FMongoDB%E4%BF%9D%E5%AD%98%E6%95%B0%E6%8D%AE%E7%9A%84%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåä¹ç¯‡åŽŸåˆ›æ–‡ç«  MongoDBä¿å­˜æ•°æ®çš„ä¼˜åŒ–æ–¹æ³• (à¹‘â€¢ . â€¢à¹‘) è¿™ä¸¤å¤©é¢‘ç¹é‡åˆ°MongoDBæ’å…¥æ•°æ®çš„é—®é¢˜ï¼Œè¿™é‡Œè®°å½•ä¸‹ã€‚ é—®é¢˜æè¿°ï¼šæˆ‘æœ‰å¤šä¸ªçº¿ç¨‹åœ¨æŠ“æ•°æ®ï¼Œæ¯å¤©æ•°æ®é‡Œæœ‰å«æœ‰å¤šä¸ªæ–‡æ¡£ï¼ˆDocumentï¼‰ï¼Œä½¿ç”¨Pymongoçš„æ’å…¥æ–¹æ³•ï¼Œé€æ¡æ’å…¥ã€‚å½¢å¦‚ä¸‹ 123def save_to_mongo(data): for i in data: db.insert_one(i) åœ¨æŽ¥æ”¶åˆ°æ•°æ®åŽç›´æŽ¥è°ƒç”¨è¯¥æ–¹æ³•å³å¯ã€‚ä½†æ˜¯è¿ç»´é‚£è¾¹åé¦ˆï¼Œæ•°æ®åº“åŽ‹åŠ›æ¯”è¾ƒå¤§ï¼Œè®©æˆ‘ä¿®æ”¹ã€‚ä»”ç»†æƒ³äº†æƒ³ï¼Œå¯ä»¥ä½¿ç”¨insert_manyæ–¹æ³•ã€‚ æ’å…¥å¯è¿­ä»£çš„æ–‡æ¡£ 1234567&gt;&gt;&gt; db.test.count_documents(&#123;&#125;)0&gt;&gt;&gt; result = db.test.insert_many([&#123;'x': i&#125; for i in range(2)])&gt;&gt;&gt; result.inserted_ids[ObjectId('54f113fffba522406c9cc20e'), ObjectId('54f113fffba522406c9cc20f')]&gt;&gt;&gt; db.test.count_documents(&#123;&#125;)2 æœ‰å‡ ä¸ªå‚æ•°éœ€è¦äº†è§£ documents: å¯è¿­ä»£æ–‡æ¡£ ordered :ï¼ˆå¯é€‰ï¼‰å¦‚æžœâ€œTrueâ€ï¼ˆé»˜è®¤ï¼‰æ–‡æ¡£å°†æŒ‰é¡ºåºæ’å…¥æœåŠ¡å™¨ï¼ŒæŒ‰æä¾›çš„é¡ºåºã€‚ å¦‚æžœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™ä¸­æ­¢æ‰€æœ‰å‰©ä½™æ’å…¥ã€‚ å¦‚æžœä¸ºâ€œFalseâ€ï¼Œæ–‡æ¡£å°†ä»¥ä»»æ„é¡ºåºæ’å…¥æœåŠ¡å™¨ï¼Œå¯èƒ½å¹¶è¡Œï¼Œå¹¶ä¸”å°†å°è¯•æ‰€æœ‰æ–‡æ¡£æ’å…¥ã€‚ bypass_document_validation: ï¼ˆå¯é€‰ï¼‰å¦‚æžœä¸ºâ€œTrueâ€ï¼Œåˆ™å…è®¸å†™å…¥é€‰æ‹©é€€å‡ºæ–‡æ¡£çº§åˆ«éªŒè¯ã€‚ é»˜è®¤ä¸ºâ€œFalseâ€ã€‚ session (optional): a ClientSession. å¥½äº†æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯æŠŠæ‰€æœ‰éœ€è¦ä¿å­˜çš„æ•°æ®æš‚æ—¶å­˜æ”¾åœ¨åˆ—è¡¨ä¸­ï¼Œæœ€åŽå†æ’å…¥ã€‚å»ºè®®åŠ ä¸Šordered=Falseå‚æ•°ï¼Œå¯ä»¥é˜²æ­¢æ•°æ®ä¿å­˜å¼‚å¸¸ã€‚ 12345678910111213141516171819202122def save_mongo(): while True: while len(tmp) &gt; 100: try: c = db[collection_name] c.insert_many(tmp, ordered=False) tmp.clear() except pymongo.errors.BulkWriteError: tmp.clear() except Exception as e: logging.error('mongodb_save insert_many: &#123;&#125;, &#123;&#125;'.format(e, tmp)) time.sleep(3)tmp = []for i in data: tmp.append(i)t_save = threading.Thread(target=save_mongo)t_save.setDaemon(True)t_save.start() æ–°å¼€ä¸€ä¸ªçº¿ç¨‹åŽ»ä¸åœçš„æ£€æŸ¥ï¼Œå¦‚æžœåˆ—è¡¨æ•°æ®å¤§äºŽ100ï¼Œåˆ™æ‰¹é‡æ’å…¥ï¼Œæˆ–è€…ç­‰å¾…3ç§’ã€‚ è¿™é‡Œæ•èŽ·pymongo.errors.BulkWriteErrorå¼‚å¸¸ï¼Œå¦‚æžœåœ¨insert_manyæ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¼šäº§ç”Ÿè¯¥å¼‚å¸¸ã€‚åœ¨æˆ‘è¿™é‡Œé€šå¸¸æ˜¯æ’å…¥é‡å¤æ•°æ®å¼•èµ·çš„ã€‚ è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œæ˜¯åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ã€‚å¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ï¼Œè‚¯å®šæ˜¯éœ€è¦åŠ é”çš„ï¼Œå¦‚æžœä½¿ç”¨Lockæ¥ç®¡ç†æ•°æ®æ’å…¥é—®é¢˜ï¼Œéœ€è¦åŽ»ç»™åˆ—è¡¨åŠ é”ã€‚ä¹‹å‰è¿˜æ²¡ç”¨è¿‡é”ï¼ŒåŽ»çœ‹çœ‹æ•™ç¨‹ã€‚ 12345678910111213141516171819202122232425import threadingclass SharedCounter: ''' A counter object that can be shared by multiple threads. ''' def __init__(self, initial_value = 0): self._value = initial_value self._value_lock = threading.Lock() def incr(self,delta=1): ''' Increment the counter with locking ''' self._value_lock.acquire() self._value += delta self._value_lock.release() def decr(self,delta=1): ''' Decrement the counter with locking ''' self._value_lock.acquire() self._value -= delta self._value_lock.release() è§‰å¾—å¤ªéº»çƒ¦ï¼Œå¯ä»¥å°†ä¿å­˜æ•°æ®ç­‰æ–¹æ³•å°è£…æˆä¸€ä¸ªç±»å¯¹è±¡ï¼Œå®žä¾‹åŒ–ä¸€ä¸ªåˆ—è¡¨ï¼Œåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å®žä¾‹åŒ–ä¸€ä¸ªç±»å¯¹è±¡å³å¯ï¼Œè¿™æ ·å¤šä¸ªçº¿ç¨‹ä¸­æ˜¯ä¸ä¼šå…±äº«åˆ—è¡¨æ•°æ®çš„ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ç§æ•°æ®ç»“æž„ï¼šQueueé˜Ÿåˆ—ã€‚Queueæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè‡ªå¸¦é”ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œä¸ç”¨å¯¹é˜Ÿåˆ—åŠ é”æ“ä½œã€‚å¯ä»¥å°†æ•°æ®æš‚æ—¶å­˜å…¥queueï¼Œç„¶åŽç”¨åˆ—è¡¨å–å‡ºæ¥ï¼Œæ•°é‡å¤§äºŽ100åˆ™æ’å…¥ï¼Œå¹¶æ¸…ç©ºåˆ—è¡¨ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonå †æŽ’åºä¹‹heapq]]></title>
      <url>%2F2018%2F12%2F05%2FPython%E5%A0%86%E6%8E%92%E5%BA%8F%E4%B9%8Bheapq%2F</url>
      <content type="text"><![CDATA[å †æŽ’åº (à¹‘â€¢ . â€¢à¹‘) 1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåå…«ç¯‡åŽŸåˆ›æ–‡ç«  Pythonä¸­çš„å †æŽ’åºheapqæ¨¡å—å®žçŽ°äº†Pythonä¸­çš„å †æŽ’åºï¼Œå¹¶æä¾›äº†æœ‰å…³æ–¹æ³•ã€‚è®©ç”¨Pythonå®žçŽ°æŽ’åºç®—æ³•æœ‰äº†ç®€å•å¿«æ·çš„æ–¹å¼ã€‚ heapqçš„å®˜æ–¹æ–‡æ¡£å’Œæºç ï¼šHeap queue algorithm ä¸‹é¢é€šè¿‡ä¸¾ä¾‹çš„æ–¹å¼è¯´æ˜Žheapqçš„åº”ç”¨æ–¹æ³• å®žçŽ°å †æŽ’åº123456789101112from heapq import *def heap_sort(iterable): h = [] for value in iterable: heappush(h, value) return [heappop(h) for _ in range(len(h))]if __name__ == '__main__': print(heap_sort([1, 3, 5, 9, 2, 123, 4, 88])) Output: [1, 2, 3, 4, 5, 9, 88, 123] ä¸‹é¢è¯´è¯´å‡ ä¸ªä¸»è¦æ–¹æ³• heappush()heapq.heappush(heap, item):å°†itemåŽ‹å…¥åˆ°å †æ•°ç»„heapä¸­ã€‚å¦‚æžœä¸è¿›è¡Œæ­¤æ­¥æ“ä½œï¼ŒåŽé¢çš„heappop()å¤±æ•ˆ heappop()heapq.heappop(heap):ä»Žå †æ•°ç»„heapä¸­å–å‡ºæœ€å°çš„å€¼ï¼Œå¹¶è¿”å›žã€‚ 123456789101112131415161718192021222324&gt;&gt;&gt; h = [] #å®šä¹‰ä¸€ä¸ªlist&gt;&gt;&gt; from heapq import * #å¼•å…¥heapqæ¨¡å—&gt;&gt;&gt; h[]&gt;&gt;&gt; heappush(h, 5) #å‘å †ä¸­ä¾æ¬¡å¢žåŠ æ•°å€¼&gt;&gt;&gt; heappush(h, 2)&gt;&gt;&gt; heappush(h, 3)&gt;&gt;&gt; heappush(h, 9)&gt;&gt;&gt; h #hçš„å€¼[2, 5, 3, 9]&gt;&gt;&gt; heappop(h) #ä»Žhä¸­åˆ é™¤æœ€å°çš„ï¼Œå¹¶è¿”å›žè¯¥å€¼2&gt;&gt;&gt; h[3, 5, 9]&gt;&gt;&gt; h.append(1) #æ³¨æ„ï¼Œå¦‚æžœä¸æ˜¯åŽ‹å…¥å †ä¸­ï¼Œè€Œæ˜¯é€šè¿‡appendè¿½åŠ ä¸€ä¸ªæ•°å€¼&gt;&gt;&gt; h #å †çš„å‡½æ•°å¹¶ä¸èƒ½æ“ä½œè¿™ä¸ªå¢žåŠ çš„æ•°å€¼ï¼Œæˆ–è€…è¯´å®ƒå †å¯¹æ¥è®²æ˜¯ä¸å­˜åœ¨çš„[3, 5, 9, 1]&gt;&gt;&gt; heappop(h) #ä»Žhä¸­èƒ½å¤Ÿæ‰¾åˆ°çš„æœ€å°å€¼æ˜¯3,è€Œä¸æ˜¯13&gt;&gt;&gt; heappush(h, 2) #è¿™æ—¶ï¼Œä¸ä»…å°†2åŽ‹å…¥åˆ°å †å†…ï¼Œè€Œä¸”1ä¹Ÿè¿›å…¥äº†å †ã€‚&gt;&gt;&gt; h[1, 2, 9, 5]&gt;&gt;&gt; heappop(h) #æ“ä½œå¯¹è±¡å·²ç»åŒ…å«äº†11 heapq.heappushpop(heap, item)æ˜¯ä¸Šè¿°heappushå’Œheappopçš„åˆä½“ï¼ŒåŒæ—¶å®Œæˆä¸¤è€…çš„åŠŸèƒ½.æ³¨æ„ï¼šç›¸å½“äºŽå…ˆæ“ä½œäº†heappush(heap,item),ç„¶åŽæ“ä½œheappop(heap) 12345678&gt;&gt;&gt; h[1, 2, 9, 5]&gt;&gt;&gt; heappop(h)1&gt;&gt;&gt; heappushpop(h, 4) #å¢žåŠ 4åŒæ—¶åˆ é™¤æœ€å°å€¼2å¹¶è¿”å›žè¯¥æœ€å°å€¼ï¼Œä¸Žä¸‹åˆ—æ“ä½œç­‰åŒï¼š2 #heappush(h,4),heappop(h)&gt;&gt;&gt; h[4, 5, 9] heapq.heapify(x)xå¿…é¡»æ˜¯listï¼Œæ­¤å‡½æ•°å°†listå˜æˆå †ï¼Œå®žæ—¶æ“ä½œã€‚ä»Žè€Œèƒ½å¤Ÿåœ¨ä»»ä½•æƒ…å†µä¸‹ä½¿ç”¨å †çš„å‡½æ•°ã€‚ 12345678910&gt;&gt;&gt; a = [3, 6, 1]&gt;&gt;&gt; heapify(a) #å°†aå˜æˆå †ä¹‹åŽï¼Œå¯ä»¥å¯¹å…¶æ“ä½œ&gt;&gt;&gt; heappop(a)1&gt;&gt;&gt; b = [4, 2, 5] #bä¸æ˜¯å †ï¼Œå¦‚æžœå¯¹å…¶è¿›è¡Œæ“ä½œï¼Œæ˜¾ç¤ºç»“æžœå¦‚ä¸‹&gt;&gt;&gt; heappop(b) #æŒ‰ç…§é¡ºåºï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªæ•°å€¼å¹¶è¿”å›ž,ä¸ä¼šä»Žä¸­æŒ‘é€‰å‡ºæœ€å°çš„4&gt;&gt;&gt; heapify(b) #å˜æˆå †ä¹‹åŽï¼Œå†æ“ä½œ&gt;&gt;&gt; heappop(b)2 heapq.heapreplace(heap, item)æ˜¯heappop(heap)å’Œheappush(heap,item)çš„è”åˆæ“ä½œã€‚æ³¨æ„ï¼Œä¸Žheappushpop(heap,item)çš„åŒºåˆ«åœ¨äºŽï¼Œé¡ºåºä¸åŒï¼Œè¿™é‡Œæ˜¯å…ˆè¿›è¡Œåˆ é™¤ï¼ŒåŽåŽ‹å…¥å † 12345678910111213141516171819202122232425&gt;&gt;&gt; a = []&gt;&gt;&gt; heapreplace(a, 3) #å¦‚æžœlistç©ºï¼Œåˆ™æŠ¥é”™Traceback (most recent call last):File "&lt;stdin&gt;", line 1, in &lt;module&gt;IndexError: index out of range&gt;&gt;&gt; heappush(a, 3)&gt;&gt;&gt; a[3]&gt;&gt;&gt; heapreplace(a, 2) #å…ˆæ‰§è¡Œåˆ é™¤ï¼ˆheappop(a)-&gt;3),å†æ‰§è¡ŒåŠ å…¥ï¼ˆheappush(a, 2))3&gt;&gt;&gt; a[2]&gt;&gt;&gt; heappush(a, 5) &gt;&gt;&gt; heappush(a, 9)&gt;&gt;&gt; heappush(a, 4)&gt;&gt;&gt; a[2, 4, 9, 5]&gt;&gt;&gt; heapreplace(a, 6) #å…ˆä»Žå †aä¸­æ‰¾å‡ºæœ€å°å€¼å¹¶è¿”å›žï¼Œç„¶åŽåŠ å…¥62&gt;&gt;&gt; a[4, 5, 9, 6]&gt;&gt;&gt; heapreplace(a, 1) #1æ˜¯åŽæ¥åŠ å…¥çš„ï¼Œåœ¨1åŠ å…¥ä¹‹å‰ï¼Œaä¸­çš„æœ€å°å€¼æ˜¯44&gt;&gt;&gt; a[1, 5, 9, 6] heapq.merge(*iterables)ä¸¾ä¾‹ï¼š &gt;&gt;&gt; a = [2, 4, 6] &gt;&gt;&gt; b = [1, 3, 5] &gt;&gt;&gt; c = merge(a, b) &gt;&gt;&gt; list(c) [1, 2, 3, 4, 5, 6] åœ¨å½’å¹¶æŽ’åºä¸­è¯¦ç»†æ¼”ç¤ºäº†æœ¬å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚ heapq.nlargest(n, iterable[, key]),heapq.nsmallest(n, iterable[, key])èŽ·å–åˆ—è¡¨ä¸­æœ€å¤§ã€æœ€å°çš„å‡ ä¸ªå€¼ã€‚ &gt;&gt;&gt; a [2, 4, 6] &gt;&gt;&gt; nlargest(2,a) [6, 4] æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ å…¶å®žä»¥ä¸Šè¯´äº†é‚£ä¹ˆå¤šï¼Œåªæ˜¯ä¸ºäº†è¯´è¿™é“é¢˜ã€‚ åœ¨æœªæŽ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æŽ’åºåŽçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2è¾“å‡º: 5 ç¤ºä¾‹ 2: 12è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4è¾“å‡º: 4 è¯´æ˜Ž: ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¸” 1 â‰¤ k â‰¤ æ•°ç»„çš„é•¿åº¦ã€‚ è¿™é‡Œä¸è¯´åˆ«çš„è§£æ³•ã€‚å½“ç„¶é¢è¯•ä¸­ä½ è‚¯å®šä¸èƒ½è¿™ä¹ˆå†™ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ€è·¯ 12345678910class Solution: def findKthLargest(self, nums, k): """ :type nums: List[int] :type k: int :rtype: int """ import heapq heapq.heapify(nums) return heapq.nlargest(k, nums)[-1] çœ‹åˆ°æœ‰äººç”¨return sorted(nums)[-k]ï¼ŒçœŸçš„è¦è¢«æ°”æ­»äº†ã€‚ å‚è€ƒ https://github.com/qiwsir/algorithm/blob/master/heapq.md]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[èŠä¸€èŠè¶³çƒ]]></title>
      <url>%2F2018%2F12%2F04%2F%E8%81%8A%E4%B8%80%E8%81%8A%E8%B6%B3%E7%90%83%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  å–œçˆ±è¶³çƒ (à¹‘â€¢ . â€¢à¹‘) ä»¥åŽé™¤äº†æŠ€æœ¯è¿˜ä¼šèŠç‚¹åˆ«çš„ï¼Œè¿™æ¬¡å°±æ¥èŠèŠæˆ‘çš„çˆ±å¥½ä¹‹ä¸€â€”â€”è¶³çƒã€‚è¿™é‡Œä¸»è¦æ˜¯è¯´çœ‹çƒï¼Œçœ‹çƒä»¥å‰ä¸»è¦çœ‹è¥¿ç”²ï¼ŒçŽ°åœ¨ä¸»è¦çœ‹æ„ç”²ï¼ŒCç½—é“ç²‰ã€‚ æˆ‘æ˜¯ä»Žé«˜ä¸­å¼€å§‹å–œæ¬¢è¶³çƒï¼Œé‚£æ—¶å€™é€‰çš„æ–‡ç§‘å˜›ï¼Œç„¶åŽç”·ç”Ÿåˆå°‘ï¼Œå…¨ç­11äººï¼Œå¤§å®¶éƒ½åŽ»è¸¢çƒï¼Œå°±æ…¢æ…¢çˆ±ä¸Šäº†è¿™ä¸ªè¿åŠ¨ã€‚å¤§å­¦æ—¶å‚åŠ äº†é™¢é˜Ÿï¼Œå¯æƒœè‡ªå·±æŠ€æœ¯å¤ªæ°´ï¼Œå§‹ç»ˆåœ¨æ‰“é…±æ²¹ï¼Œå¤§äºŒå°±é€€é˜Ÿäº†ï¼Œä»¥åŽå°±åªçœ‹çœ‹çƒã€‚ è¿™é‡Œä»‹ç»ä¸‹æ¢…è¥¿å’ŒCç½—ï¼Œå½“ä»Šæœ€é¡¶å°–çš„ä¸¤ä½çƒå‘˜ã€‚å¦‚æžœä½ è¦é—®è°æ›´åŽ‰å®³ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªé—®é¢˜å°±å’ŒPHPå’ŒJavaè°æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ä¸€æ ·ã€‚æˆ‘å–œæ¬¢Cç½—ï¼ŒåŒæ—¶ä¹Ÿæ•¬ä½©æ¢…è¥¿ï¼Œä¸¤äººå„æœ‰ä¼Ÿå¤§ä¹‹å¤„ï¼Œåˆ›é€ æ— æ•°è®°å½•ï¼Œå„å¤ºå¾—äº†5æ¬¡é‡‘çƒå¥–ã€‚ è¯´åˆ°é‡‘çƒå¥–ï¼Œå°±ä¸å¾—ä¸è¯´ä»Šå¤©çš„é‡‘çƒå¥–å¾—ä¸»â€”â€”èŽ«å¾·é‡Œå¥‡äº†ã€‚å…¶å®žæˆ‘è§‰å¾—æ—¢ç„¶éƒ½å·²ç»æ˜¯äº‹å®žäº†ï¼Œå†åŽ»è¯´åˆ«äººæ€Žä¹ˆæ€Žä¹ˆæ°´ï¼Œæ²¡æ„æ€ã€‚å¯¹äºŽæ¢…ç½—æ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯æœ€å¥½çš„ç»“å±€ï¼ŒåŒæ–¹å„èŽ·å¥–5æ¬¡ï¼Œæ‰“äº†ä¸ªå¹³æ‰‹ï¼ŒæŒºå¥½çš„ã€‚æˆ‘æœ€å—ä¸äº†çš„æ˜¯æŸäº›çƒè¿·ï¼Œå¤©å¤©éª‚æ¥éª‚åŽ»ï¼Œåªæ˜¯ä¸ºäº†äº‰è®ºè‡ªå·±å¿ƒä¸­è°æ‰æ˜¯åŽ†å²æœ€ä½³ï¼Œè¿™ç§è¡Œä¸ºçœŸçš„å¾ˆæ— èŠï¼Œæœ‰è¿™ä¸ªæ—¶é—´è¿˜ä¸å¦‚å¤šå†™å†™ä»£ç ã€‚ çœ‹ç¯®çƒä¸Žçœ‹è¶³çƒæœ‰å¾ˆå¤šä¸åŒï¼Œå› ä¸ºç¯®çƒè¿›çƒå¤ªå®¹æ˜“ï¼Œè€Œè¶³çƒæ‰“90åˆ†é’Ÿ0ï¼š0æ˜¯å¾ˆæ­£å¸¸çš„ï¼ŒåŠå¤œçœ‹çƒæœ‰æ—¶å€™ä¼šå¾ˆå›°ï¼Œä¸è¿‡è¶³çƒä»ç„¶æ˜¯ä¸–ç•Œç¬¬ä¸€è¿åŠ¨ã€‚ä¸–ç•Œæ¯ä¸Šæœ‰ä¸€åœºæ¯”èµ›è¶…çº§ç»å…¸ï¼Œæ˜¯è‘¡è„ç‰™3-3è¥¿ç­ç‰™é‚£åœºï¼Œæ¥çœ‹çœ‹https://v.qq.com/x/page/p0703fedijp.html å–œæ¬¢Cç½—ä¸ä»…æ˜¯å› ä¸ºè¿›çƒå¤šï¼Œä¹Ÿå› ä¸ºä»–çš„èŒä¸šæ€åº¦ã€‚ä»–çš„èŒä¸šæ€åº¦æ˜¯è¡Œä¸šå†…ä»»ä½•äººéƒ½ä¸ä¼šæ€€ç–‘çš„ï¼Œæ±‚èƒœçš„æ¬²æœ›ï¼Œå¥½èƒœçš„å¿ƒç†ï¼Œä½¿å¾—Cç½—ä¸€ç›´éƒ½å…¢å…¢ä¸šä¸šçš„è®­ç»ƒç€ï¼Œå³ä½¿æ˜¯ä¼‘èµ›æœŸé—´ï¼ŒCç½—ä¹Ÿä¼šä»ç„¶åšæŒæ¯å¤©é”»ç‚¼ã€‚ å„ä¸ªæ—¶æœŸçš„Cç½—è‚Œè‚‰ æœ€åŽï¼Œè¯´è¯´å¦‚ä½•çœ‹çƒã€‚çŽ°åœ¨åŸºæœ¬ä¸Šéƒ½å¯ä»¥åœ¨ppä½“è‚²ä¸Šçœ‹ï¼Œä½†æ˜¯æœ‰äº›æ˜¯ä¼šå‘˜åœºã€‚æœ‰æ—¶å€™CCTV5ä¹Ÿä¼šæœ‰è½¬æ’­ï¼Œä¸Šå‘¨æœ«å°±è½¬æ’­æ„ç”²å°¤æ–‡3-0å¼—æ´›ä¼¦è¨é‚£åœºã€‚è¿˜æœ‰é¾™ç ç›´æ’­çš„ä½“è‚²é¢‘é“ï¼Œç»å¸¸ä¼šæœ‰å°ä¸»æ’­è½¬æ’­æ¯”èµ›ï¼Œç„¶åŽä¸åœåœ°å«ä½ åŠ å¾®ä¿¡ã€‚ã€‚ æœ€åŽæƒ³è¯´ï¼Œè¶ç€å¹´è½»èƒ½ç†¬å¤œå¤šçœ‹çœ‹ï¼Œä»¥åŽä¼°è®¡å°±æ²¡ç²¾ç¥žäº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è¯´ä¸€é“æŽ’åºé¢˜]]></title>
      <url>%2F2018%2F11%2F27%2F%E8%AF%B4%E4%B8%80%E9%81%93%E6%8E%92%E5%BA%8F%E9%A2%98%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåå…­ç¯‡åŽŸåˆ›æ–‡ç«  å¾ˆç»å…¸çš„æŽ’åºé—®é¢˜ (à¹‘â€¢ . â€¢à¹‘) å…ˆçœ‹é¢˜ç›®ï¼Œâ€œå‰Kä¸ªé«˜é¢‘å…ƒç´ â€ ç»™å®šä¸€ä¸ªéžç©ºçš„æ•´æ•°æ•°ç»„ï¼Œè¿”å›žå…¶ä¸­å‡ºçŽ°é¢‘çŽ‡å‰ k é«˜çš„å…ƒç´ ã€‚ ç¤ºä¾‹ 1: 12è¾“å…¥: nums = [1,1,1,2,2,3], k = 2è¾“å‡º: [1,2] ç¤ºä¾‹ 2: 12è¾“å…¥: nums = [1], k = 1è¾“å‡º: [1] ç®€å•è§£æ³•è¿™é¢˜å¾ˆç®€å•ï¼Œä¸¤æ­¥ï¼š ç”¨å­—å…¸ä¿å­˜æ•°å­—åŠå…¶å‡ºçŽ°çš„å¯¹åº”é¢‘çŽ‡ æŽ’åº é‚£ä¹ˆç¬¬ä¸€æ­¥å°±ä¸ç”¨è¯´äº†ï¼Œå¾ˆç®€å• 123456m = dict()for num in nums: if num in m: m[num] += 1 else: m[num] = 1 æœ‰è¶£çš„å°±åœ¨ç¬¬äºŒæ­¥ï¼ŒæŽ’åºã€‚å¾ˆå¤šäººéƒ½æ˜¯ä½¿ç”¨å†…ç½®åº“sorted 1234567891011121314151617181920class Solution(object): def topKFrequent(self, nums, k): """ :type nums: List[int] :type k: int :rtype: List[int] """ m = dict() for num in nums: if num in m: m[num] += 1 else: m[num] = 1 output = sorted(m.items(), key=lambda e: e[1], reverse=True) final = [] for i in range(k): final.append(output[i][0]) return final æœ€ç®€æ´çš„ä»£ç æ˜¯ç›´æŽ¥ä½¿ç”¨Pythonå†…ç½®çš„collections 12345678910class Solution(object): def topKFrequent(self, nums, k): """ :type nums: List[int] :type k: int :rtype: List[int] """ import collections counter = collections.Counter(nums) return [item[0] for item in counter.most_common(k)] è¿™çœŸæ˜¯æ˜¯æˆ‘ä»¬æƒ³è¦çš„å—ï¼Ÿå¹¶ä¸æ˜¯ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä¸ä½¿ç”¨ä»»ä½•å†…ç½®åº“ã€‚ sortedåŽŸç†å…³äºŽPythonçš„sortedæŽ’åºç®—æ³•ï¼Œè¿™ç¯‡æ–‡ç« è®²çš„æ¯”è¾ƒè¯¦ç»†ï¼špython sortå‡½æ•°å†…éƒ¨å®žçŽ°åŽŸç†ï¼Œè¯´åˆ°Pythonä½¿ç”¨çš„æ˜¯è‘—åçš„Timesortç®—æ³•ã€‚ Timsortæ˜¯ç»“åˆäº†åˆå¹¶æŽ’åºï¼ˆmerge sortï¼‰å’Œæ’å…¥æŽ’åºï¼ˆinsertion sortï¼‰è€Œå¾—å‡ºçš„æŽ’åºç®—æ³•ï¼Œå®ƒåœ¨çŽ°å®žä¸­æœ‰å¾ˆå¥½çš„æ•ˆçŽ‡ã€‚ Tim Petersåœ¨2002å¹´è®¾è®¡äº†è¯¥ç®—æ³•å¹¶åœ¨Pythonä¸­ä½¿ç”¨ï¼ˆTimSort æ˜¯ Python ä¸­ list.sort çš„é»˜è®¤å®žçŽ°ï¼‰ã€‚è¯¥ç®—æ³•æ‰¾åˆ°æ•°æ®ä¸­å·²ç»æŽ’å¥½åºçš„å—-åˆ†åŒºï¼Œæ¯ä¸€ä¸ªåˆ†åŒºå«ä¸€ä¸ªrunï¼Œç„¶åŽæŒ‰è§„åˆ™åˆå¹¶è¿™äº›runã€‚Pyhtonè‡ªä»Ž2.3ç‰ˆä»¥æ¥ä¸€ç›´é‡‡ç”¨Timsortç®—æ³•æŽ’åºï¼ŒçŽ°åœ¨Java SE7å’ŒAndroidä¹Ÿé‡‡ç”¨Timsortç®—æ³•å¯¹æ•°ç»„æŽ’åºã€‚ å¦‚æžœæƒ³è‡ªå·±ç”¨Pythonæ¥å†™ä¸€ä¸ªæŽ’åºç®—æ³•ï¼Œå®Œæˆæœ¬é¢˜è¦æ±‚è¯¥å¦‚ä½•å†™ï¼Ÿä¹Ÿå°±æ˜¯å¯¹è¿™ä¸ªå­—å…¸è¿›è¡ŒæŽ’åºï¼Œ{5: 1, 1: 3, 4: 1, 2: 2, 3: 1}ï¼Œæœ‰ä»€ä¹ˆå¥½åŠžæ³•ã€‚ æ€è·¯å¯ä»¥æ˜¯ä¸¤ä¸ªæŒ‡é’ˆéåŽ†å­—å…¸ï¼Œå¦‚æžœå·¦è¾¹å¤§äºŽå³è¾¹ï¼Œåˆ™æ›¿æ¢ä½ç½®ã€‚ æ›´å¥½çš„æ–¹æ³•12345678910111213141516171819202122232425class Solution(object): def topKFrequent(self, nums, k): """ :type nums: List[int] :type k: int :rtype: List[int] """ m = dict() for num in nums: if num in m: m[num] += 1 else: m[num] = 1 bucket = [[] for _ in range(len(nums) + 1)] for key, value in m.items(): bucket[value].append(key) result = [] for i in range(len(nums), 0, -1): for n in bucket[i]: result.append(n) if len(result) == k: return result return result å¾ˆå·§å¦™çš„ä½¿ç”¨åˆ—è¡¨çš„ç´¢å¼•æ¥ä¿å­˜valueã€‚ æ­¤æ—¶bucketå€¼æ˜¯[[], [5, 4, 3], [2], [1], [], [], [], [], []]ï¼Œç´¢å¼•å³å‡ºçŽ°æ¬¡æ•°ã€‚ æ­¤è§£æ³•ç”¨æ—¶72msï¼Œæˆ˜èƒœ 50.84 % çš„ python3 æäº¤è®°å½•ã€‚ä½†æ˜¯çœ‹äº†æŽ’åœ¨å‰é¢çš„ç®—æ³•ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„Pythonå†…ç½®çš„collectionsã€‚ å¦‚æžœæ˜¯ä½ ï¼Œä¼šç”¨ä»€ä¹ˆæ–¹æ³•å‘¢ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç”¨nodeæ¥DNSæŠ“åŒ…]]></title>
      <url>%2F2018%2F11%2F22%2F%E7%94%A8node%E6%9D%A5DNS%E6%8A%93%E5%8C%85%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåå››ç¯‡åŽŸåˆ›æ–‡ç«  ç”¨nodeæ¥DNSæŠ“åŒ… (à¹‘â€¢ . â€¢à¹‘) å‰æå‡†å¤‡å®‰è£…nodeï¼Œå¹¶å®‰è£…ä¾èµ–ï¼ŒåŽ»server.jsåŒçº§ç›®å½•ä¸‹å®‰è£… 12npm install native-dnsnpm install async ä¿å­˜ä»¥ä¸‹æ–‡ä»¶ä¸ºserver.jsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566let dns = require('native-dns');let server = dns.createServer();let authority = &#123; address: '114.114.114.114', port: 53, type: 'udp' &#125;;server.on('listening', () =&gt; console.log('server listening on', server.address()));server.on('close', () =&gt; console.log('server closed', server.address()));server.on('error', (err, buff, req, res) =&gt; console.error(err.stack));server.on('socketError', (err, socket) =&gt; console.error(err));function proxy(question, response, cb) &#123; console.log('proxying', question.name); var request = dns.Request(&#123; question: question, // forwarding the question server: authority, // this is the DNS server we are asking timeout: 1000 &#125;); // when we get answers, append them to the response request.on('message', (err, msg) =&gt; &#123; msg.answer.forEach(a =&gt; response.answer.push(a)); &#125;); request.on('end', cb); request.send();&#125;let async = require('async');let entries = [ &#123; domain: "^weixin.keruyun.com*", records: [ &#123; type: "A", address: "10.10.10.90", ttl: 1800 &#125; ] &#125;];function handleRequest(request, response) &#123; console.log('request from', request.address.address, 'for', request.question[0].name); let f = []; request.question.forEach(question =&gt; &#123; let entry = entries.filter(r =&gt; new RegExp(r.domain, 'i').exec(question.name)); if (entry.length) &#123; entry[0].records.forEach(record =&gt; &#123; record.name = question.name; record.ttl = record.ttl || 1800; response.answer.push(dns[record.type](record)); &#125;); &#125; else &#123; f.push(cb =&gt; proxy(question, response, cb)); &#125; &#125;); async.parallel(f, function() &#123; response.send(); &#125;);&#125;server.on('request', handleRequest);server.serve(53); æ‰‹æœºwifiè®¾ç½®å¦‚ä¸‹ï¼š åœ¨DNS1å’ŒDNS2ï¼Œéƒ½è®¾ç½®ä¸ºç”µè„‘ç«¯åœ°å€ æ‰¾åˆ°åŸŸåä½¿ç”¨å‘½ånode server.jsè¿è¡Œjsæ–‡ä»¶ï¼Œæ‰‹æœºæ‰“å¼€é£žè¡Œæ¨¡å¼ï¼Œå†å…³é—­é£žè¡Œæ¨¡å¼ï¼Œå…³é—­æ‰‹æœºæ‰€æœ‰åº”ç”¨åŽï¼Œæ‰“å¼€ç›®æ ‡åº”ç”¨ï¼ŒæŸ¥çœ‹è¾“å‡º 12345678910111213141516request from 10.10.10.30 for api.huoshan.comproxying api.huoshan.comrequest from 10.10.10.30 for api.huoshan.comproxying api.huoshan.comrequest from 10.10.10.30 for sf3-ttcdn-tos.pstatp.comproxying sf3-ttcdn-tos.pstatp.comrequest from 10.10.10.30 for nbsdk-baichuan.alicdn.comproxying nbsdk-baichuan.alicdn.comrequest from 10.10.10.30 for sf1-hscdn-tos.pstatp.comproxying sf1-hscdn-tos.pstatp.comrequest from 10.10.10.30 for wgo.mmstat.comproxying wgo.mmstat.comrequest from 10.10.10.30 for v7.pstatp.comproxying v7.pstatp.comrequest from 10.10.10.30 for sf1-ttcdn-tos.pstatp.comproxying sf1-ttcdn-tos.pstatp.com æ‰¾åˆ°è‡ªå·±æƒ³è¦æŠ“å–çš„åŸŸåï¼Œå‡è®¾çŽ°åœ¨æˆ‘ä»¬æƒ³æŠ“å–çš„åŸŸåæ˜¯superapp.kiwa-tech.comï¼Œä¿®æ”¹server.jsæ–‡ä»¶ï¼Œå¦‚ä¸‹ 12345678let entries = [ &#123; domain: "^superapp.kiwa-tech.com*", records: [ &#123; type: "A", address: "10.10.10.90", ttl: 1800 &#125; ] &#125;]; é…ç½®Charlesæ‰“å¼€Charlesï¼Œæ³¨æ„ï¼Œè¦ä½¿ç”¨sudoæ‰“å¼€ï¼Œsudo /Applications/Charles.app/Contents/MacOS/Charles å®‰è£…è¯ä¹¦ï¼Œæ‰‹æœºç«¯ä¹Ÿè¦å®‰è£… æ‰“å¼€ssl proxying Reverse Proxiesï¼Œè®¾ç½®å¦‚ä¸‹ æœ€åŽæœ€åŽå°±å¤§åŠŸå‘Šæˆäº†ï¼Œæ­¤æ—¶åœ¨æ‰‹æœºç«¯æ‰“å¼€è¯¥Appï¼Œå³å¯æŸ¥çœ‹ç›¸å…³DNSæŠ“åŒ…æ•°æ®ã€‚ è¿™ç§æ–¹æ³•å«åšDNSæŠ“åŒ…]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Appçˆ¬è™«æ€è·¯]]></title>
      <url>%2F2018%2F11%2F22%2FApp%E7%88%AC%E8%99%AB%E6%80%9D%E8%B7%AF%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåäº”ç¯‡åŽŸåˆ›æ–‡ç«  Appçˆ¬è™« (à¹‘â€¢ . â€¢à¹‘) çœ‹å›¾ä¸€ç‚¹ç‚¹ä»‹ç» è¯„ä¼°åˆ†æžåœ¨æŠ“åŒ…å‰ï¼Œå»ºè®®ä¸€å®šè¦å…ˆåˆ†æžã€‚ æœ‰ç½‘é¡µç«¯æŠ“ç½‘é¡µç«¯ã€æœ‰ç§»åŠ¨ç«¯æŠ“ç§»åŠ¨ç«¯ã€æœ‰å®¢æˆ·ç«¯æŠ“å®¢æˆ·ç«¯ï¼Œæœ€åŽçš„é€‰æ‹©æ‰æ˜¯Appã€‚ ä¸¾ä¸ªä¾‹å­ã€‚é’ˆå¯¹è…¾è®¯è§†é¢‘è€ƒè™‘é¡ºåºï¼š ç½‘é¡µç«¯ï¼šhttps://v.qq.com/ ç§»åŠ¨ç«¯ï¼šhttps://m.v.qq.com/index.html å®¢æˆ·ç«¯ï¼šé€šè¿‡charlesè®¾ç½®ä»£ç†æŠ“å– App è…¾è®¯è‡ªå·±å°±æœ‰åšåº”ç”¨åŠ å›ºçš„ï¼Œæ——ä¸‹äº§å“è‡ªç„¶å¾ˆéš¾è¢«ç¼–è¯‘ å¦‚æžœä½ èƒ½ç¼–è¯‘è…¾è®¯æ——ä¸‹Appï¼Œè¯·å‘Šè¯‰æˆ‘æ–¹æ³• å¦‚ä½•æŠ“åŒ…åœ¨çŸ¥ä¹Žä¸Šä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ å¦‚ä½•åœ¨ Android æ‰‹æœºä¸Šå®žçŽ°æŠ“åŒ…ï¼Ÿ ä½†æ˜¯æˆ‘è§‰å¾—ä¸å¤Ÿå…¨ï¼Œé¦–å…ˆå¯¹äºŽä¸€èˆ¬çš„HTTPå’ŒHTTPSåè®®ï¼Œé€šè¿‡æœ€åŸºæœ¬çš„Fiddlerå’ŒCharleså°±å¯ä»¥æŠ“åŒ…ï¼Œå…·ä½“æ–¹æ³•è¯·Googleã€‚éœ€è¦ä¿è¯ä¸¤ç‚¹ï¼šAppèµ°ä»£ç†ï¼Œè¯ä¹¦è¢«ä¿¡ä»»ã€‚ æœ‰äº›åº”ç”¨ä¸èµ°æ“ä½œç³»ç»Ÿçš„ HTTP ä»£ç†ï¼Œç›´æŽ¥èµ° TCP åè®®ï¼Œæ— æ³•ä½¿ç”¨ HTTP ä»£ç†æŠ“åŒ…ã€‚è™½ç„¶ Charles æ”¯æŒ SOCKS ä»£ç†ï¼Œä½†æ— æ³•åˆ†æž TCP åŒ…ã€‚è¿™å°±éœ€è¦ç¥­å‡ºå¤§æ€å™¨ tcpdump å’Œ Wireshark ã€‚ è¯´ä¸€ä¸‹DNSæŠ“åŒ…ï¼Œã€‚è¿™ä¸ªç½‘ä¸ŠåŸºæœ¬æ‰¾ä¸åˆ°èµ„æ–™ï¼Œè¿™ä¹Ÿæ˜¯å¤§ä½¬æ•™æˆ‘çš„ï¼Œè¯¦ç»†æ­¥éª¤åœ¨åšå®¢é‡Œï¼Œæ„Ÿå…´è¶£è‡ªè¡Œç¿»é˜…ã€‚ è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå‡ºåçš„æ˜¯mitmproxyï¼Œæ²¡æ€Žä¹ˆç”¨è¿‡ã€‚ æœ€åŽï¼Œè‹¹æžœå…¬å¸æœ‰åšä¸€ä¸ªæ¯”è¾ƒè¯¦ç»†çš„æŠ“åŒ…è¯´æ˜Ž https://developer.apple.com/library/archive/qa/qa1176/_index.html å¦‚ä½•é€†å‘é€†å‘ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¯é¢˜ï¼Œè€Œä¸”è¿˜ä¸“é—¨æœ‰é€†å‘å·¥ç¨‹å¸ˆè¿™ä¸ªèŒä½ï¼Œå¯è§å…¶ä¸­æ°´ä¹‹æ·±ã€‚ å¯¹äºŽçˆ¬è™«ï¼Œç®€å•äº†è§£å³å¯ã€‚è¿™é‡Œéœ€è¦ä¸‰ä¸ªé€†å‘å·¥å…·ï¼š Apktoolï¼šèŽ·å–èµ„æºæ–‡ä»¶å’Œsmailä»£ç  dex2jarï¼šå°†dexæ–‡ä»¶è½¬æ¢æˆjaræ–‡ä»¶ JD-GUIï¼šæŸ¥çœ‹åˆ°åç¼–è¯‘åŽçš„dexçš„ä»£ç  æœ€åŽçœ‹åˆ°çš„æ˜¯JAVAä»£ç ï¼Œæ‰€ä»¥èƒ½çœ‹æ‡‚JAVAæ˜¯å¿…è¦èƒ½åŠ›ã€‚ JD-GUIæˆ‘ç”¨çš„æ¯”è¾ƒå¤šï¼Œç®€å•æ¼”ç¤ºä¸‹ã€‚ ä¸»è¦æ˜¯ä½¿ç”¨æœç´¢åŠŸèƒ½ï¼Œæœç´¢å‰éœ€è¦å…ˆèŠ±å¾ˆå¤šæ—¶é—´åç¼–è¯‘ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç¥žç»ç½‘ç»œåŸºç¡€åŠKeraså…¥é—¨]]></title>
      <url>%2F2018%2F11%2F20%2F%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E5%8F%8AKeras%E5%85%A5%E9%97%A8%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  æ·±åº¦å­¦ä¹  (à¹‘â€¢ . â€¢à¹‘) ç¥žç»ç½‘ç»œå®šä¹‰äººå·¥ç¥žç»ç½‘ç»œï¼Œç®€ç§°ç¥žç»ç½‘ç»œï¼Œåœ¨æœºå™¨å­¦ä¹ å’Œè®¤çŸ¥ç§‘å­¦é¢†åŸŸï¼Œæ˜¯ä¸€ç§æ¨¡ä»¿ç”Ÿç‰©ç¥žç»ç½‘ç»œï¼ˆåŠ¨ç‰©çš„ä¸­æž¢ç¥žç»ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯å¤§è„‘ï¼‰çš„ç»“æž„å’ŒåŠŸèƒ½çš„æ•°å­¦æ¨¡åž‹æˆ–è®¡ç®—æ¨¡åž‹ï¼Œç”¨äºŽå¯¹å‡½æ•°è¿›è¡Œä¼°è®¡æˆ–è¿‘ä¼¼ã€‚ ä¸ºäº†æè¿°ç¥žç»ç½‘ç»œï¼Œæˆ‘ä»¬å…ˆä»Žæœ€ç®€å•çš„ç¥žç»ç½‘ç»œè®²èµ·ï¼Œè¿™ä¸ªç¥žç»ç½‘ç»œä»…ç”±ä¸€ä¸ªâ€œç¥žç»å…ƒâ€æž„æˆï¼Œä»¥ä¸‹å³æ˜¯è¿™ä¸ªâ€œç¥žç»å…ƒâ€çš„å›¾ç¤ºï¼š è¿™ä¸ªâ€œç¥žç»å…ƒâ€æ˜¯ä¸€ä¸ªä»¥ åŠæˆªè· ä¸ºè¾“å…¥å€¼çš„è¿ç®—å•å…ƒï¼Œå…¶è¾“å‡ºä¸º ï¼Œå…¶ä¸­å‡½æ•° è¢«ç§°ä¸ºâ€œæ¿€æ´»å‡½æ•°â€ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€‰ç”¨sigmoidå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•° å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå•ä¸€â€œç¥žç»å…ƒâ€çš„è¾“å…¥ï¼è¾“å‡ºæ˜ å°„å…³ç³»å…¶å®žå°±æ˜¯ä¸€ä¸ªé€»è¾‘å›žå½’ï¼ˆlogistic regressionï¼‰ã€‚ ç¥žç»ç½‘ç»œæ¨¡åž‹æ‰€è°“ç¥žç»ç½‘ç»œå°±æ˜¯å°†è®¸å¤šä¸ªå•ä¸€â€œç¥žç»å…ƒâ€è”ç»“åœ¨ä¸€èµ·ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªâ€œç¥žç»å…ƒâ€çš„è¾“å‡ºå°±å¯ä»¥æ˜¯å¦ä¸€ä¸ªâ€œç¥žç»å…ƒâ€çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œä¸‹å›¾å°±æ˜¯ä¸€ä¸ªç®€å•çš„ç¥žç»ç½‘ç»œï¼š æˆ‘ä»¬ç”¨ æ¥è¡¨ç¤ºç½‘ç»œçš„å±‚æ•°ï¼Œæœ¬ä¾‹ä¸­ ï¼Œæˆ‘ä»¬å°†ç¬¬ å±‚è®°ä¸º ï¼ŒäºŽæ˜¯ æ˜¯è¾“å…¥å±‚ï¼Œè¾“å‡ºå±‚æ˜¯ ã€‚æœ¬ä¾‹ç¥žç»ç½‘ç»œæœ‰å‚æ•° ï¼Œå…¶ä¸­ ï¼ˆä¸‹é¢çš„å¼å­ä¸­ç”¨åˆ°ï¼‰æ˜¯ç¬¬ å±‚ç¬¬ å•å…ƒä¸Žç¬¬ å±‚ç¬¬ å•å…ƒä¹‹é—´çš„è”æŽ¥å‚æ•°ï¼ˆå…¶å®žå°±æ˜¯è¿žæŽ¥çº¿ä¸Šçš„æƒé‡ï¼Œæ³¨æ„æ ‡å·é¡ºåºï¼‰ï¼Œ æ˜¯ç¬¬ å±‚ç¬¬ å•å…ƒçš„åç½®é¡¹ã€‚å› æ­¤åœ¨æœ¬ä¾‹ä¸­ï¼Œ ï¼Œ ã€‚æ³¨æ„ï¼Œæ²¡æœ‰å…¶ä»–å•å…ƒè¿žå‘åç½®å•å…ƒ(å³åç½®å•å…ƒæ²¡æœ‰è¾“å…¥)ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯è¾“å‡º ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ç”¨ è¡¨ç¤ºç¬¬ å±‚çš„èŠ‚ç‚¹æ•°ï¼ˆåç½®å•å…ƒä¸è®¡åœ¨å†…ï¼‰ã€‚ Keraså®žæˆ˜ä½¿ç”¨keraså®žçŽ°å¦‚ä¸‹ç½‘ç»œç»“æž„, å¹¶è®­ç»ƒæ¨¡åž‹: ä½¿ç”¨åœºæ™¯: è¾“å…¥å€¼(x1,x2,x3)ä»£è¡¨äººçš„èº«é«˜ä½“é‡å’Œå¹´é¾„, è¾“å‡ºå€¼(y1,y2) 123456789101112131415161718import numpy as np# æ€»äººæ•°æ˜¯1000, ä¸€åŠæ˜¯ç”·ç”Ÿn = 1000# æ‰€æœ‰çš„èº«ä½“æŒ‡æ ‡æ•°æ®éƒ½æ˜¯æ ‡å‡†åŒ–æ•°æ®, å¹³å‡å€¼0, æ ‡å‡†å·®1tizhong = np.random.normal(size = n) shengao = np.random.normal(size=n)nianling = np.random.normal(size=n)# æ€§åˆ«æ•°æ®, å‰500åå­¦ç”Ÿæ˜¯ç”·ç”Ÿ, ç”¨æ•°å­—1è¡¨ç¤ºgender = np.zeros(n)gender[:500] = 1# ç”·ç”Ÿçš„ä½“é‡æ¯”è¾ƒé‡,æ‰€ä»¥è®©ç”·ç”Ÿçš„ä½“é‡+1tizhong[:500] += 1# ç”·ç”Ÿçš„èº«é«˜æ¯”è¾ƒé«˜, æ‰€ä»¥è®©ç”·ç”Ÿçš„å‡é«˜ + 1shengao[:500] += 1# ç”·ç”Ÿçš„å¹´é¾„åå°, æ‰€ä»¥è®©ç”·ç”Ÿå¹´é¾„é™ä½Ž 1nianling[:500] -= 1 åˆ›å»ºæ¨¡åž‹1234567891011121314151617from keras import Sequentialfrom keras.layers import Dense, Activationmodel = Sequential()# åªæœ‰ä¸€ä¸ªç¥žç»å…ƒ, ä¸‰ä¸ªè¾“å…¥æ•°å€¼model.add(Dense(4, input_dim=3, kernel_initializer='random_normal', name="Dense1"))# æ¿€æ´»å‡½æ•°ä½¿ç”¨softmaxmodel.add(Activation('relu', name="hidden"))# æ·»åŠ è¾“å‡ºå±‚model.add(Dense(2, input_dim=4, kernel_initializer='random_normal', name="Dense2"))# æ¿€æ´»å‡½æ•°ä½¿ç”¨softmaxmodel.add(Activation('softmax', name="output")) ç¼–è¯‘æ¨¡åž‹éœ€è¦æŒ‡å®šä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°: 123model.compile(optimizer='rmsprop', loss='categorical_crossentropy', metrics=['accuracy']) è®­ç»ƒæ¨¡åž‹1234567# è½¬æ¢æˆone-hotæ ¼å¼from keras import utilsgender_one_hot = utils.to_categorical(gender, num_classes=2)# èº«ä½“æŒ‡æ ‡éƒ½æ”¾å…¥ä¸€ä¸ªçŸ©é˜µdata data = np.array([tizhong, shengao, nianling]).T# è®­ç»ƒæ¨¡åž‹model.fit(data, gender_one_hot, epochs=10, batch_size=8) 12345678910111213141516171819202122è¾“å‡º(stream):Epoch 1/101000/1000 [==============================] - 0s 235us/step - loss: 0.6743 - acc: 0.7180Epoch 2/101000/1000 [==============================] - 0s 86us/step - loss: 0.6162 - acc: 0.7310Epoch 3/101000/1000 [==============================] - 0s 88us/step - loss: 0.5592 - acc: 0.7570Epoch 4/101000/1000 [==============================] - 0s 87us/step - loss: 0.5162 - acc: 0.7680Epoch 5/101000/1000 [==============================] - 0s 89us/step - loss: 0.4867 - acc: 0.7770Epoch 6/101000/1000 [==============================] - 0s 88us/step - loss: 0.4663 - acc: 0.7830Epoch 7/101000/1000 [==============================] - 0s 87us/step - loss: 0.4539 - acc: 0.7890Epoch 8/101000/1000 [==============================] - 0s 86us/step - loss: 0.4469 - acc: 0.7920Epoch 9/101000/1000 [==============================] - 0s 88us/step - loss: 0.4431 - acc: 0.7940Epoch 10/101000/1000 [==============================] - 0s 88us/step - loss: 0.4407 - acc: 0.7900è¾“å‡º(plain): è¿›è¡Œé¢„æµ‹123456test_data = np.array([[0, 0, 0]])probability = model.predict(test_data)if probability[0, 0]&gt;0.5: print('å¥³ç”Ÿ')else: print('ç”·ç”Ÿ') 12è¾“å‡º(stream):å¥³ç”Ÿ å…³é”®è¯è§£é‡Š input_dim: è¾“å…¥çš„ç»´åº¦æ•° kernel_initializer: æ•°å€¼åˆå§‹åŒ–æ–¹æ³•, é€šå¸¸æ˜¯æ­£å¤ªåˆ†å¸ƒ batch_size: ä¸€æ¬¡è®­ç»ƒä¸­, æ ·æœ¬æ•°æ®è¢«åˆ†å‰²æˆå¤šä¸ªå°ä»½, æ¯ä¸€å°ä»½åŒ…å«çš„æ ·æœ¬æ•°å«åšbatch_size epochs: å¦‚æžœè¯´å°†æ‰€æœ‰æ•°æ®è®­ç»ƒä¸€æ¬¡å«åšä¸€è½®çš„è¯ã€‚epochså†³å®šäº†æ€»å…±è¿›è¡Œå‡ è½®è®­ç»ƒã€‚ optimizer: ä¼˜åŒ–å™¨, å¯ä»¥ç†è§£ä¸ºæ±‚æ¢¯åº¦çš„æ–¹æ³• loss: æŸå¤±å‡½æ•°, å¯ä»¥ç†è§£ä¸ºç”¨äºŽè¡¡é‡ä¼°è®¡å€¼å’Œè§‚å¯Ÿå€¼ä¹‹é—´çš„å·®è·, å·®è·è¶Šå°, lossè¶Šå° metrics: ç±»ä¼¼loss, åªæ˜¯metricsä¸å‚ä¸Žæ¢¯åº¦è®¡ç®—, åªæ˜¯ä¸€ä¸ªè¡¡é‡ç®—æ³•å‡†ç¡®æ€§çš„æŒ‡æ ‡, åˆ†ç±»æ¨¡åž‹å°±ç”¨accuracy]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[WebSocketçˆ¬è™«ä¹‹çˆ¬å–é¾™ç å¼¹å¹•]]></title>
      <url>%2F2018%2F11%2F17%2FWebSocket%E7%88%AC%E8%99%AB%E4%B9%8B%E7%88%AC%E5%8F%96%E9%BE%99%E7%8F%A0%E5%BC%B9%E5%B9%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåäºŒç¯‡åŽŸåˆ›æ–‡ç«  å¼¹å¹•çˆ¬è™« (à¹‘â€¢ . â€¢à¹‘) æˆ‘æ˜¯ä¸€ä¸ªç›´æ’­çˆ±å¥½è€…ï¼Œå–œæ¬¢çœ‹å¾ˆå¤šäººç›´æ’­ï¼Œä»¥å‰å¯ä»¥çœ‹ä¸€å¤©ç›´æ’­ä¸å‡ºé—¨ã€‚çŽ°åœ¨ä¸»è¦çœ‹è¿™ä¹ˆäº›ä¸»æ’­ï¼Œè™Žç‰™çš„éŸ¦ç¥žã€Dopaï¼Œæ–—é±¼çš„ç‹—è´¼å˜˜å˜˜ã€‚ å¯¹äºŽå…¶ä¸­çš„å¼¹å¹•æ–‡åŒ–ï¼Œéžå¸¸æ„Ÿå…´è¶£ï¼Œå°±ç ”ç©¶ä¸‹ï¼Œå‘çŽ°å¼¹å¹•æ˜¯ç”¨WebSocketå®žçŽ°çš„ï¼Œé‚£é¦–å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯WebSocketã€‚ WebSocketæ˜¯ä»€ä¹ˆè¯¦ç»†å†…å®¹å¯ä»¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜WebSocket æ˜¯ä»€ä¹ˆåŽŸç†ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥å®žçŽ°æŒä¹…è¿žæŽ¥ï¼Ÿ ç®€å•è§£é‡Šä¸‹ï¼š HTTP åè®®æ˜¯ä¸€ç§æ— çŠ¶æ€çš„ã€æ— è¿žæŽ¥çš„ã€å•å‘çš„åº”ç”¨å±‚åè®®ã€‚å®ƒé‡‡ç”¨äº†è¯·æ±‚/å“åº”æ¨¡åž‹ã€‚é€šä¿¡è¯·æ±‚åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·ï¼ŒæœåŠ¡ç«¯å¯¹è¯·æ±‚åšå‡ºåº”ç­”å¤„ç†ã€‚ è¿™ç§é€šä¿¡æ¨¡åž‹æœ‰ä¸€ä¸ªå¼Šç«¯ï¼šHTTP åè®®æ— æ³•å®žçŽ°æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘èµ·æ¶ˆæ¯ã€‚å¤§å¤šæ•° Web åº”ç”¨ç¨‹åºå°†é€šè¿‡é¢‘ç¹çš„å¼‚æ­¥JavaScriptå’ŒXMLï¼ˆAJAXï¼‰è¯·æ±‚å®žçŽ°é•¿è½®è¯¢ã€‚è½®è¯¢çš„æ•ˆçŽ‡ä½Žï¼Œéžå¸¸æµªè´¹èµ„æºï¼ˆå› ä¸ºå¿…é¡»ä¸åœè¿žæŽ¥ï¼Œæˆ–è€… HTTP è¿žæŽ¥å§‹ç»ˆæ‰“å¼€ï¼‰ã€‚ WebSocketçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æŽ¨é€ä¿¡æ¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ã€‚ WebSocket å¦‚ä½•å·¥ä½œ äº‹ä»¶ äº‹ä»¶å¤„ç†ç¨‹åº æè¿° open WebSocket.onopen è¿žæŽ¥å»ºç«‹æ—¶è§¦å‘ message WebSocket.onmessage å®¢æˆ·ç«¯æŽ¥æ”¶æœåŠ¡ç«¯æ•°æ®æ—¶è§¦å‘ error WebSocket.onerror é€šä¿¡å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ close WebSocket.onclose è¿žæŽ¥å…³é—­æ—¶è§¦å‘ ä¸€ä¸ªéžå¸¸å…¸åž‹çš„WebSocketåˆ›å»ºæ–¹å¼å¦‚ä¸‹ï¼ˆæ¥è‡ªæŸå·¨å¤´ï¼‰ï¼š 1234567891011function r() &#123; if (!d) &#123; var t = i(); I.info("%cconnecting " + t, p("#0000E3")), u = new WebSocket(t), u.onopen = n, u.onclose = o, u.onerror = a, u.onmessage = h &#125;&#125; WebSocketèŽ·å–é¾™ç ç›´æ’­å¼¹å¹•æœ¬æ¬¡ä½¿ç”¨çš„Pythonç¬¬ä¸‰æ–¹åº“æ˜¯ websocket-client çœ‹çœ‹å®˜æ–¹ä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829303132333435import websockettry: import threadexcept ImportError: import _thread as threadimport timedef on_message(ws, message): print(message)def on_error(ws, error): print(error)def on_close(ws): print("### closed ###")def on_open(ws): def run(*args): for i in range(3): time.sleep(1) ws.send("Hello %d" % i) time.sleep(1) ws.close() print("thread terminating...") thread.start_new_thread(run, ())if __name__ == "__main__": websocket.enableTrace(True) ws = websocket.WebSocketApp("ws://echo.websocket.org/", on_message = on_message, on_error = on_error, on_close = on_close) ws.on_open = on_open ws.run_forever() æ˜¯ä¸æ˜¯éžå¸¸ç†Ÿæ‚‰ï¼Œå’Œä¸Šé¢è®²åˆ°çš„ä¸€æ¨¡ä¸€æ ·ï¼Œ4ç§ä¸»è¦æ€æƒ³æ–¹æ³•éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥ç›´æŽ¥è°ƒç”¨ã€‚ é‚£ä¹ˆåˆ°äº†å®žè·µçŽ¯èŠ‚ï¼Œæœ¬æ¬¡é€‰å–çš„æ˜¯é¾™ç ç›´æ’­ï¼Œä¸ºå•¥ä¸æ˜¯è™Žç‰™ã€æ–—é±¼å‘¢ï¼Ÿè¿™ä¸ªå¾…ä¼šå†è¯´ï¼Œæˆ‘ä»¬æ‰“å¼€é¾™ç æŸä¸ªç›´æ’­é—´ åœ¨ç½‘ç»œé‡Œé¢é€‰æ‹©wsè¿™ä¸€é¡¹ï¼Œå³å¯çœ‹åˆ°ç›¸å…³è¿žæŽ¥ï¼Œè€Œä¸”è¿™äº›æ¶ˆæ¯æ˜¯åŠ å¯†è¿‡çš„ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬æ‰“å¼€mç«™è¯•è¯• è¿™ä¸ªæ—¶å€™ä¼ è¾“çš„å¼¹å¹•æ¶ˆæ¯å·²ç»æ²¡æœ‰åŠ å¯†è¿‡ï¼Œç›´æŽ¥å¯¹æ¯”ï¼Œçœ‹åˆ°äº†ä¸€æ¡â€œå“ˆå“ˆå“ˆâ€çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬çŽ°åœ¨å¯ä»¥ç¡®å®šå°±æ˜¯è¿™ä¸ªwebsocketè¿žæŽ¥åœ¨ä¼ è¾“ç›¸å…³æ¶ˆæ¯ã€‚ ä¾è‘«èŠ¦ç”»ç“¢ï¼Œæˆ‘ä»¬å°è¯•ç”¨Pythonæ¥è¿žæŽ¥ Curl: 1curl 'wss://mbgows.plu.cn:8806/?room_id=2185&amp;group=0' -H 'Pragma: no-cache' -H 'Origin: http://m.longzhu.com' -H 'Accept-Encoding: gzip, deflate, br' -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7' -H 'Sec-WebSocket-Key: n72+EfLt2iSrQ0EswTZ+2A==' -H 'User-Agent: Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Mobile Safari/537.36' -H 'Upgrade: websocket' -H 'Sec-WebSocket-Extensions: permessage-deflate; client_max_window_bits' -H 'Cache-Control: no-cache' -H 'Cookie: pluguest=81D781D68480BE065D952CA699B38E6627B61756AEF57338B39053154850A9502BC7FD850F86922BDF3DBD7F774BFDE5CBC80838A34B8F26' -H 'Connection: Upgrade' -H 'Sec-WebSocket-Version: 13' --compressed Pythonä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#!/usr/bin/env python # -*- coding: utf-8 -*-"""@author: zhangslob@file: longzhu_websocket.py @time: 2018/11/17@desc: simple websocket client to connect longzhu"""import websockettry: import threadexcept ImportError: import _thread as threadimport timedef on_message(ws, message): import json try: print(json.loads(message)) except: print(message)def on_error(ws, error): print(error)def on_close(ws): print("### closed ###")def on_open(ws): pass # def run(*args): # for i in range(3): # time.sleep(1) # ws.send("Hello %d" % i) # time.sleep(1) # ws.close() # print("thread terminating...") # thread.start_new_thread(run, ())headers = &#123; 'Pragma': 'no-cache', 'Origin': 'http://m.longzhu.com', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7', # 'Sec-WebSocket-Key': 'n72+EfLt2iSrQ0EswTZ+2A==', 'User-Agent': 'Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Mobile Safari/537.36', 'Upgrade': 'websocket', 'Sec-WebSocket-Extensions': 'permessage-deflate; client_max_window_bits', 'Cache-Control': 'no-cache', 'Connection': 'Upgrade', 'Sec-WebSocket-Version': '13',&#125;if __name__ == "__main__": websocket.enableTrace(True) ws = websocket.WebSocketApp("wss://mbgows.plu.cn:8806/?room_id=2185&amp;group=0", on_message=on_message, on_error=on_error, on_close=on_close, header=headers) ws.on_open = on_open ws.run_forever() ä½ å¯ä»¥ç›´æŽ¥è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œçœ‹çœ‹ä¼šæœ‰ä»€ä¹ˆç»“æžœ é¾™ç ç›´æ’­è¿™ä¸ªæœ‰ç‚¹å¥‡æ€ªï¼Œä½ æ ¹æœ¬ä¸ç”¨åŽ»å‘æœåŠ¡å™¨å‘é€ä»€ä¹ˆæ¶ˆæ¯ï¼ŒæœåŠ¡å™¨æ— è„‘ç»™ä½ æŽ¨é€å¼¹å¹•ï¼Œå¸¸è§çš„æ˜¯å®¢æˆ·ç«¯éœ€è¦å…ˆå‘Šè¯‰æœåŠ¡å™¨â€œæˆ‘æ˜¯è°â€ï¼Œç„¶åŽæœåŠ¡å™¨å†æŽ¨é€æ¶ˆæ¯ç»™ä½ ï¼Œå¹¶ä¸”è¿˜æœ‰æœ‰å¿ƒè·³æ£€æµ‹ï¼Œâ€œæˆ‘â€å‘Šè¯‰æœåŠ¡å™¨æˆ‘è¿˜åœ¨çœ‹å‘¢ï¼Œä½ ç»§ç»­ç»™æˆ‘å¼¹å¹•ï¼Œçœ‹çœ‹è™Žç‰™å’Œæ–—é±¼ã€‚ å›¾ä¸­ç»¿è‰²çš„æ˜¯å‘é€çš„æ¶ˆæ¯ï¼Œçº¢è‰²æ˜¯æŽ¥å—çš„æ¶ˆæ¯ã€‚åƒè¿™ç§æƒ…å†µå°±éœ€è¦è‡ªå·±åŽ»çœ‹jsä»£ç æ˜¯å¦‚ä½•å¤„ç†æ¶ˆæ¯çš„ã€‚æ–—é±¼çš„è¯æœ‰å…¬å¼€è‡ªå·±çš„å¼¹å¹•æœåŠ¡å™¨ç¬¬ä¸‰æ–¹æŽ¥å…¥åè®®ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pycharmæ’ä»¶æŽ¨èï¼šDocker integration]]></title>
      <url>%2F2018%2F11%2F15%2FPycharm%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90%EF%BC%9ADocker-integration%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåä¸€ç¯‡åŽŸåˆ›æ–‡ç«  ç®€æ˜“Dockeræ“ä½œ (à¹‘â€¢ . â€¢à¹‘) æ’ä»¶Dockeråœ¨è®¾ç½®-Plugins-BROWSE REPOSITORIESâ€¦ ä¸­æœç´¢â€œDockerâ€ å®‰è£…å³å¯ï¼Œé‡å¯ä½¿ç”¨ å½“ç„¶æœ¬åœ°å¿…é¡»å…ˆå®‰è£…Dockerï¼Œå¹¶ä¸”æ‰“å¼€Dockerï¼Œè€Œä¸”éœ€è¦åŠ å…¥ç”¨æˆ·ç»„ 1$ sudo groupadd docker &amp;&amp; sudo usermod -aG docker $USER ä¹‹åŽå°±å¯ä»¥ä¸åŠ sudoè¿è¡ŒDockerå‘½ä»¤äº† 1$ docker run hello-world æ‰“å¼€ä¹‹åŽå°±æ˜¯è¿™æ ·çš„ åˆ†åˆ«å°±æ˜¯å®¹å™¨å’Œé•œåƒï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªç®€å•çš„æ —å­ï¼Œå…ˆåŽ»æ‹‰pythonçš„é•œåƒï¼Œç„¶åŽè¿è¡Œhelloworld.pyæ–‡ä»¶ 12345FROM pythonCOPY helloworld.py /app/helloworld.pyWORKDIR /app åœ¨Dockerfileå·¦è¾¹æœ‰ä¸€ä¸ªç»¿è‰²æŒ‰é’®ï¼ŒRun Dockerfile helloworld.py 1print 'hello world' è¿™é‡Œä¼šç›´æŽ¥æŠ¥é”™ï¼Œå› ä¸ºpython3å˜›ï¼Œç„¶åŽæˆ‘ä»¬çŽ°åœ¨éœ€è¦ä¿®å¤ï¼Œå¯ä»¥å…ˆä¿®æ”¹pythonæ–‡ä»¶ï¼Œå†é‡æ–°buildï¼Œè¿™é‡Œä»‹ç»ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ã€‚ å³é”®ç‚¹å‡»æž„å»ºå¥½çš„å®¹å™¨ï¼Œç‚¹å‡»â€œExecâ€ï¼Œè¾“å…¥/bin/bashè¿›å…¥shell 12345678910root@a8b31f52a720:/app# lshelloworld.pyroot@a8b31f52a720:/app# python helloworld.py File "helloworld.py", line 1 print 'hello world' ^SyntaxError: Missing parentheses in call to 'print'. Did you mean print('hello world')?root@a8b31f52a720:/app# python --versionPython 3.7.1root@a8b31f52a720:/app# æˆ‘ä»¬æ‹‰å–çš„é•œåƒæ˜¯Python3.7ç‰ˆæœ¬çš„ï¼Œæˆ‘æƒ³è¦ç›´æŽ¥åœ¨Pycharmä¸­ç¼–è¾‘PYæ–‡ä»¶ï¼Œå¹¶è®©Dockerç›´æŽ¥åŒæ­¥æ–‡ä»¶å˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªåŠŸèƒ½ï¼šVolume Bindings åˆ†åˆ«å¡«ä¸ŠDockerä¸­çš„ç›®å½•ä¸Žæœ¬åœ°æ‰€åœ¨ç›®å½•ï¼Œä¸€å®šè¦ç‚¹å‡»å³ä¸‹è§’çš„SAVEï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œç‚¹å‡»Volume Bindings å°±å¯ä»¥çœ‹åˆ°å…³è”äº†ã€‚ å…¶å®žè¿™ä¸ªåŠŸèƒ½å°±æ˜¯Dockerä¸­çš„Volumeï¼ŒDocker ä¸­å¯ä»¥é€šè¿‡ Volume å®žçŽ°æŒä¹…åŒ–å­˜å‚¨å’Œæ•°æ®å…±äº«ã€‚åªä¸è¿‡è¿™é‡Œé€šè¿‡å¯è§†åŒ–éžå¸¸æ–¹ä¾¿è°ƒè¯•ã€‚ è¿˜æœ‰å…¶ä»–åŠŸèƒ½ï¼Œåƒè®¾ç½®çŽ¯å¢ƒå˜é‡ã€ç«¯å£æš´éœ²ç­‰ç­‰ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶å°±ä¼šæ¯”è¾ƒå®¹æ˜“å¤„ç†ã€‚ å…¶å®žæˆ‘ç”¨çš„æ¯”è¾ƒå¤šçš„æƒ…å†µæ˜¯çˆ¬è™«æœ¬åœ°å’Œçº¿ä¸Šæœ‰å·®è·æ—¶å°±ä¼šæ¥æµ‹è¯•ï¼Œæœ‰æ—¶å€™æ˜¯å‘çŽ°æŸä¸ªä¾èµ–æ²¡æœ‰è£…ï¼Œæœ‰æ—¶å€™åˆ™æ˜¯ç½‘ç»œé—®é¢˜ã€‚ Dockeræµ‹è¯•å¯ä»¥ä¿è¯çš„ä¸€ç‚¹æ˜¯çŽ¯å¢ƒå®Œå…¨ä¸€è‡´ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonå®žçŽ°å¸¸è§çš„å›žæ–‡å­—ç¬¦ä¸²ç®—æ³•]]></title>
      <url>%2F2018%2F11%2F13%2FPython%E5%AE%9E%E7%8E%B0%E5%B8%B8%E8%A7%81%E7%9A%84%E5%9B%9E%E6%96%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%AE%97%E6%B3%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒåç¯‡åŽŸåˆ›æ–‡ç«  å›žæ–‡åˆ©ç”¨python è‡ªå¸¦çš„ç¿»è½¬ å‡½æ•°reversed() 12def is_plalindrome(string): return string == ''.join(list(reversed(string))) è‡ªå·±å®žçŽ° 1234567891011def is_plalindrome(string): string = list(string) length = len(string) left = 0 right = length - 1 while left &lt; right: if string[left] != string[right]: return False left += 1 right -= 1 return True æœ€é•¿çš„å›žæ–‡å­ä¸²æš´åŠ›ç ´è§£æš´åŠ›ç ´è§£ï¼Œæžšä¸¾æ‰€æœ‰çš„å­ä¸²ï¼Œå¯¹æ¯ä¸ªå­ä¸²åˆ¤æ–­æ˜¯å¦ä¸ºå›žæ–‡ï¼Œ æ—¶é—´å¤æ‚åº¦ä¸º O(n^3) åŠ¨æ€è§„åˆ’12345678910111213141516171819202122def solution(s): s = list(s) l = len(s) dp = [[0] * l for i in range(l)] for i in range(l): dp[i][i] = True # å½“ k = 2æ—¶è¦ç”¨åˆ° dp[i][i - 1] = True resLeft = 0 resRight = 0 # æžšä¸¾å­ä¸²çš„é•¿åº¦ for k in range(2, l+1): # å­ä¸²çš„èµ·å§‹ä½ç½® for i in range(0, l-k+1): j = i + k - 1 if s[i] == s[j] and dp[i + 1][j - 1]: dp[i][j] = True # ä¿å­˜æœ€é•¿çš„å›žæ–‡èµ·ç‚¹å’Œç»ˆç‚¹ if resRight - resLeft + 1 &lt; k: resLeft = i resRight = j return ''.join(s[resLeft:resRight+1]) æ—¶é—´å¤æ‚åº¦ä¸º O(n^2), ç©ºé—´å¤æ‚åº¦ä¸º O(n^2) Manacher ç®—æ³•Manacher ç®—æ³•é¦–å…ˆå¯¹å­—ç¬¦ä¸²åšä¸€ä¸ªé¢„å¤„ç†,ä½¿å¾—æ‰€æœ‰çš„ä¸²éƒ½æ˜¯å¥‡æ•°é•¿åº¦, æ’å…¥çš„æ˜¯åŒæ ·çš„ç¬¦å·ä¸”ç¬¦å·ä¸å­˜åœ¨ä¸ŽåŽŸä¸²ä¸­ï¼Œä¸²çš„å›žæ–‡æ€§ä¸å—å½±å“ 12aba =&gt; #a#b#a#abab =&gt; #a#b#a#b# æˆ‘ä»¬æŠŠå›žæ–‡ä¸²ä¸­æœ€å³ä½ç½®ä¸Žå…¶å¯¹ç§°è½´çš„è·ç¦»ç§°ä¸ºå›žæ–‡åŠå¾„ï¼ŒManacher ç®—æ³•å®šä¹‰äº†ä¸€ä¸ªå›žæ–‡åŠå¾„æ•°ç»„ RLï¼ŒRL[i]è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå­—ç¬¦ä¸ºå¯¹ç§°è½´çš„å›žæ–‡åŠå¾„ï¼Œå¯¹äºŽä¸Šé¢å¾—åˆ°çš„æ’å…¥åˆ†éš”ç¬¦çš„ä¸²æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° RLæ•°ç»„ 12345678char: # a # b # a #RL: 1 2 1 4 1 2 1RL-1: 0 1 0 3 0 1 0i: 0 1 2 3 4 5 6char: # a # b # a # b #RL: 1 2 1 4 1 4 1 2 1RL-1: 0 1 0 3 0 3 0 1 0i: 0 1 2 3 4 5 6 7 8 æˆ‘ä»¬è¿˜æ±‚äº† RL[i] - 1: æˆ‘ä»¬å‘çŽ°RL[i] -1 æ­£å¥½æ˜¯åˆå§‹å­—ç¬¦ä¸²ä¸­ä»¥ä½ç½®i ä¸ºå¯¹ç§°è½´çš„æœ€é•¿å›žæ–‡é•¿åº¦ æ‰€ä»¥ä¸‹é¢å°±æ˜¯é‡ç‚¹å¦‚ä½•æ±‚å¾— RL æ•°ç»„äº†ï¼Œ å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  (è®²å¾—æ¯”è¾ƒæ¸…æ™°) ä¸‹é¢æ˜¯ç®—æ³•å®žçŽ° 12345678910111213141516171819def manacher(preS): s = '#' + '#'.join(preS) + '#' l = len(s) RL = [0] * l maxRight = pos = maxLen = 0 for i in range(l): if i &lt; maxRight: RL[i] = min(RL[2*pos - i], maxRight-i) else: RL[i] = 1 while i - RL[i] &gt;= 0 and i + RL[i] &lt; l and s[i - RL[i]] == s[i + RL[i]]: RL[i] += 1 if i + RL[i] - 1 &gt; maxRight: maxRight = i + RL[i] - 1 pos = i maxLen = max(RL) idx = RL.index(maxLen) sub = s[idx - maxLen + 1: idx + maxLen] return sub.replace('#', '') ç©ºé—´å¤æ‚åº¦ï¼šå€ŸåŠ©äº†ä¸€ä¸ªè¾…åŠ©æ•°ç»„ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)æ—¶é—´å¤æ‚åº¦ï¼šå°½ç®¡å†…å±‚å­˜åœ¨å¾ªçŽ¯ï¼Œä½†æ˜¯å†…å±‚å¾ªçŽ¯åªå¯¹å°šæœªåŒ¹é…çš„éƒ¨åˆ†è¿›è¡Œï¼Œå¯¹äºŽæ¯ä¸€ä¸ªå­—ç¬¦æ¥è¯´ï¼Œåªä¼šè¿›è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(n) æœ€é•¿å›žæ–‡å‰ç¼€æ‰€è°“å‰ç¼€ï¼Œå°±æ˜¯ä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ ä¸‹é¢çš„æœ€é•¿å›žæ–‡å‰ç¼€ 123abbabbc =&gt; abbcabababb =&gt; ababasogou =&gt; s å°†åŽŸä¸²é€†è½¬ï¼Œé‚£ä¹ˆé—®é¢˜å°±è½¬å˜ä¸ºæ±‚åŽŸä¸²çš„å‰ç¼€å’Œé€†ä¸²åŽç¼€ç›¸ç­‰ä¸”é•¿åº¦æœ€å¤§çš„å€¼, è¿™ä¸ªé—®é¢˜å…¶å®žå°±æ˜¯ KMP ç®—æ³•ä¸­çš„ next æ•°ç»„çš„æ±‚è§£äº† å…·ä½“æ±‚è§£ï¼š å°†åŽŸä¸²é€†è½¬å¹¶æ‹¼æŽ¥åˆ°åŽŸä¸²ä¸­ï¼Œ ä»¥â€™#â€™ åˆ†éš”åŽŸä¸²å’Œé€†è½¬é¿å…å†…éƒ¨å­—ç¬¦ä¸²å¹²æ‰°ã€‚ 12345678910111213141516def longest_palindrome_prefix(s): if not s: return 0 s = s + '#' + s[::-1] + '$' i = 0 j = -1 nt = [0] * len(s) nt[0] = -1 while i &lt; len(s) - 1: if j == -1 or s[i] == s[j]: i += 1 j += 1 nt[i] = j else: j = nt[j] return nt[len(s) - 1] æ·»åŠ å­—ç¬¦ç”Ÿæˆæœ€çŸ­å›žæ–‡å­—ç¬¦ä¸²è¿™é“é¢˜å…¶å®žè·Ÿä¸Šé¢åŸºæœ¬æ˜¯ä¸€æ ·çš„ï¼Œå®žä¾‹ï¼š 12aacecaaa -&gt; aaacecaaa # æ·»åŠ  aabcd -&gt; dcbabcd # æ·»åŠ  dcb æˆ‘ä»¬å…ˆæ±‚å­—ç¬¦ä¸²çš„æœ€é•¿å›žæ–‡å‰ç¼€, ç„¶åŽå‰©ä½™çš„å­—ç¬¦ä¸²é€†è½¬å¹¶æ‹¼æŽ¥åˆ°å­—ç¬¦ä¸²çš„å¤´éƒ¨å³æ˜¯é—®é¢˜æ‰€æ±‚ 123def solution(s): length = longest_palindrome_prefix(s) return s[length:][::-1] + s æœ€é•¿å›žæ–‡å­åºåˆ—åŠ¨æ€è§„åˆ’æ³• dp[i][j] è¡¨ç¤ºå­åºåˆ— s[i..j] ä¸­å­˜åœ¨çš„æœ€é•¿å›žæ–‡å­åºåˆ—é•¿åº¦ åˆå§‹åŒ–dp[i][i] = 1 å½“ s[i] == s[j] ä¸º true æ—¶ï¼Œdp[i][j] = dp[i+1][j - 1] + 2 å½“ s[i] == s[j] ä¸º false æ—¶ï¼Œdp[i][j] = max(dp[i+1][j], dp[i][j - 1]) 12345678910111213141516# æ±‚å¾—æœ€é•¿å›žæ–‡å­åºåˆ—çš„é•¿åº¦def solution(s): l = len(s) dp = [[0] * l for i in range(l)] for i in range(l): dp[i][i] = 1 # æžšä¸¾å­ä¸²çš„é•¿åº¦ for k in range(2, l+1): # æžšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½® for i in range(0, l-k+1): j = i + k - 1 if s[i] == s[j]: dp[i][j] = dp[i + 1][j - 1] + 2 else: dp[i][j] = max(dp[i][j - 1], dp[i + 1][j]) return dp[0][l-1] æ—¶é—´å¤æ‚åº¦ä¸º O(n^2), ç©ºé—´å¤æ‚åº¦ä¸º O(n^2) è½¬è‡ªï¼šhttp://youbookee.com/2016/09/06/plalindrome-substring/]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çˆ¬è™«ä¹‹å…¨ç«™çˆ¬å–æ–¹æ³•]]></title>
      <url>%2F2018%2F11%2F07%2F%E7%88%AC%E8%99%AB%E4%B9%8B%E5%85%A8%E7%AB%99%E7%88%AC%E5%8F%96%E6%96%B9%E6%B3%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åä¹ç¯‡åŽŸåˆ›æ–‡ç«  æ–¹æ³•åšè¿‡å¥½å‡ ä¸ªå…³äºŽç½‘ç«™å…¨ç«™çš„é¡¹ç›®ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ã€‚ å…ˆæŠŠä¸Šé¢é‚£å¼ å›¾å†™ä¸‹æ¥ï¼Œå…¨ç«™çˆ¬å–çš„ä¸¤ç§æ–¹æ³•ï¼š å…³ç³»ç½‘ç»œï¼š ä¼˜ç‚¹ï¼šç®€å•ï¼›å¯ä»¥æŠ“å–â€œçƒ­é—¨â€æ•°æ® ç¼ºç‚¹ï¼šæ— æ³•æŠ“å–å…¨é‡æ•°æ®ï¼›é€Ÿåº¦æ…¢ï¼›éœ€è¦è§£å†³åŽ»é‡é—®é¢˜ å¯è¡Œæ€§ï¼šæ¯”è¾ƒé«˜ éåŽ†ID ä¼˜ç‚¹ï¼šå¯ä»¥æŠ“å–æ‰€æœ‰æ•°æ®ï¼›ä¸ç”¨æ•°æ®åŽ»é‡ ç¼ºç‚¹ï¼šèµ„æºæ¶ˆè€—å¤§ï¼›é€Ÿåº¦æ…¢ï¼›å¯èƒ½è¢«å‘çŽ° å¯è¡Œæ€§ï¼šä»…å¯ç”¨äºŽIDè‡ªå¢ž å…³äºŽå…³ç³»ç½‘ç»œå…¶å®žè¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚æ¯”å¦‚è¯´çŸ¥ä¹Žï¼Œä¸€ä¸ªå¤§Væœ‰100Wç²‰ä¸ï¼Œä»Žè¿™ä¸ªå¤§Vå‡ºå‘ï¼ŒæŠ“å–ç²‰ä¸çš„ç²‰ä¸ï¼Œä¸€ç›´å¾ªçŽ¯ä¸‹åŽ»ã€‚ï¼ˆå¯èƒ½æ˜¯ä¸ªæ­»å¾ªçŽ¯ï¼‰ è¿™ä¸ªæ–¹æ³•å°±æ¯”è¾ƒç®€å•ï¼ŒScrapyä¸­å°±æ˜¯ç»§æ‰¿CrawlSpiderï¼Œå†ç¼–å†™åŒ¹é…è§„åˆ™å°±å¥½ã€‚ Example 12345678910111213141516171819202122232425import scrapyfrom scrapy.spiders import CrawlSpider, Rulefrom scrapy.linkextractors import LinkExtractorclass MySpider(CrawlSpider): name = 'example.com' allowed_domains = ['example.com'] start_urls = ['http://www.example.com'] rules = ( # Extract links matching 'category.php' (but not matching 'subsection.php') # and follow links from them (since no callback means follow=True by default). Rule(LinkExtractor(allow=('category\.php', ), deny=('subsection\.php', ))), # Extract links matching 'item.php' and parse them with the spider's method parse_item Rule(LinkExtractor(allow=('item\.php', )), callback='parse_item'), ) def parse_item(self, response): self.logger.info('Hi, this is an item page! %s', response.url) item = scrapy.Item() item['id'] = response.xpath('//td[@id="item_id"]/text()').re(r'ID: (\d+)') item['name'] = response.xpath('//td[@id="item_name"]/text()').extract() item['description'] = response.xpath('//td[@id="item_description"]/text()').extract() return item è¿™ç§æ–¹æ³•ä¸€èˆ¬æ˜¯æœç´¢å¼•æ“Žä¼šåšçš„ã€‚è€Œä¸”æŠ“å–çš„å†…å®¹åŸºæœ¬æ˜¯æœ€å¤šäººçœ‹åˆ°çš„ï¼Œæ‰€ä»¥æœˆæŽ’åœ¨å‰é¢ï¼Œå’ŒSEOæœ‰å…³ã€‚ ä½†æ˜¯è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜Žæ˜¾çš„ï¼Œæœ€æ˜Žæ˜¾çš„å°±æ˜¯æ²¡æ³•æŠ“å…¨æ•°æ®ï¼Œåƒé‚£ç§å†·é—¨çš„æ•°æ®å°±æ²¡æ³•æŠ“å–åˆ°ï¼Œé€Ÿåº¦ä¹Ÿæ˜¯æ¯”è¾ƒæ…¢çš„ï¼Œå¿…é¡»ä¿å­˜åŽ»é‡é˜Ÿåˆ—ï¼Œä»¥é˜²æ­¢é‡å¤æŠ“å–é¡µé¢ã€‚ï¼ˆäº†è§£ä¸‹å¸ƒéš†è¿‡æ»¤å™¨ï¼‰ å¦‚æžœå¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚æ²¡é‚£ä¹ˆé«˜å¯ä»¥è€ƒè™‘è¿™ç§æ–¹æ³•ã€‚ éåŽ†IDæ‰¾å„ç§æ–¹æ³•å°±æ¯”è¾ƒæ— è„‘äº†ï¼Œå•¥ä¹Ÿä¸ç”¨æƒ³ï¼Œä»Ž0å¼€å§‹éåŽ†è·‘å§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æŠ“å–ç½‘ç«™æ‰€æœ‰çš„æ•°æ®ï¼Œå› ä¸ºåœ¨å¼€å§‹æŠ“å–å‰å°±å·²ç»å®Œæˆçš„åŽ»é‡ï¼Œæ‰€ä»¥è¿™æ–¹é¢å°±ä¸ç”¨ç®¡äº†ã€‚ ä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆæ˜Žæ˜¾ï¼Œå› ä¸ºæ˜¯éåŽ†IDï¼Œæ‰€ä»¥éœ€è¦å¾ˆå¤šæœåŠ¡å™¨èµ„æºå’Œä»£ç†èµ„æºï¼Œæœ‰å¯èƒ½æŸä¸ªIDå·²ç»ä¸‹æž¶æˆ–å¤±æ•ˆã€‚æ‰€ä»¥æ•´ä¸ªå·¥ç¨‹è¯·æ±‚é‡ä¼šéžå¸¸å¤§ã€‚è€Œä¸”å¯èƒ½è¢«åˆ«äººå‘çŽ°ï¼Œä¸€èˆ¬äººéƒ½åŽ»çœ‹é‚£äº›çƒ­é—¨å¸–å­ï¼Œç»“æžœä½ æŠŠé‚£ä¹ˆé‡æ¥æ²¡äººçœ‹çš„ç¿»äº†ä¸€éï¼Œåˆ«äººä¹Ÿä¼šå‘çŽ°æ•°æ®å¼‚å¸¸çš„ï¼ˆä¹Ÿä¼šå­˜åœ¨å‡æ•°æ®çš„æƒ…å†µðŸ˜­ï¼‰ã€‚ è€Œä¸”è¿™ç§æ–¹æ³•ä¹‹é€‚ç”¨äºŽIDè‡ªå¢žçš„ï¼Œå¤§å¤šæ•°æ˜¯æ•°å­—IDé€’å¢žï¼Œæ¯”å¦‚è¯´å¤©çœ¼æŸ¥çš„ï¼š 123https://www.tianyancha.com/company/24762997https://www.tianyancha.com/company/150041670https://www.tianyancha.com/company/1073358312 çŸ¥ä¹Žä¹Ÿæ˜¯ï¼š 123https://zhuanlan.zhihu.com/p/47969297https://zhuanlan.zhihu.com/p/48652497https://zhuanlan.zhihu.com/p/47805332 åº”è¯¥æ˜¯å’Œæ•°å­—æœ‰å…³ç³»ï¼Œå¯ä»¥å…ˆé‡‡æ ·è¿›è¡ŒæŠ“å–ï¼Œç ”ç©¶æ•°æ®åˆ†å¸ƒæƒ…å†µã€‚ å½“æä¾›ä¸æ­£ç¡®IDæ—¶ï¼Œä¹Ÿä¼šè¿”å›žæ•°æ®ä¸å­˜åœ¨çš„æƒ…å†µ åœ¨è¿™é‡Œæä¾›ä¸€ä¸ªç”ŸæˆIDçš„æ–¹æ³• 1234567891011121314def gen_uid(num): """ ä½¿ç”¨ç”Ÿæˆå™¨ç”ŸæˆID :param num: èµ·å§‹ID :return: ç”Ÿæˆå™¨ """ js = 0 result = list() while js &lt; 20000: num += 1 js += 1 result.append(num) yield result æœ€åŽå†çœ‹çœ‹è¿™å¼ å›¾ã€‚ä¸¤ç§æ–¹æ³•éƒ½æœ‰ä¼˜ç¼ºç‚¹ï¼Œæ ¹æ®å®žé™…éœ€æ±‚é€‰å–ï¼Œå¦‚æžœä½ è¿˜çŸ¥é“åˆ«çš„æŠ“å–æ–¹æ³•ï¼Œæ¬¢è¿ŽæŒ‡å‡ºã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scalaå­¦ä¹ ä¹‹ç›¸åŒçš„å‡½æ•°å]]></title>
      <url>%2F2018%2F11%2F05%2FScala%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%9B%B8%E5%90%8C%E7%9A%84%E5%87%BD%E6%95%B0%E5%90%8D%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åå…«ç¯‡åŽŸåˆ›æ–‡ç«  æœ€è¿‘åœ¨æ…¢æ…¢çš„å¼€å§‹ç”¨Scalaå†™Sparkï¼Œåˆšå¼€å§‹ä¹Ÿæ˜¯åœ¨èœé¸Ÿæ•™ç¨‹ä¸Šç®€å•è¿‡äº†ä¸€éScalaï¼ŒçŽ°åœ¨è¿˜è®°å¾—ä¸€äº›åŸºæœ¬è¯­æ³•ï¼Œè¿˜æœ‰å„ç§å¥‡æ€ªçš„è¯­æ³•ç³–ã€‚æƒ³è¦æ›´å¿«çš„å­¦ä¹ è¿™é—¨è¯­è¨€ï¼Œè¿˜æ˜¯éœ€è¦è‡ªå·±å¤šè°¢è°¢ã€‚ ä»Šå¤©åœ¨çœ‹åˆ«äººä»£ç æ—¶ï¼Œå‘çŽ°ä»–åœ¨ç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ªåå­—ä¸€æ¨¡ä¸€æ ·çš„å‡½æ•°ï¼Œä½†æ˜¯æˆ‘è¿˜ä»¥ä¸ºä»–å†™é”™äº†ã€‚å½“æˆ‘ä»¥Pythonçš„æ€ç»´åŽ»çœ‹å¾…è¿™ä»¬è¯­è¨€æ—¶ï¼Œå½“ç„¶æ˜¯åœ¨ä½œæ­»çš„è¾¹ç¼˜äº†ã€‚ ä¸¾ä¸€ä¸ªç®€å•çš„æ —å­ï¼Œä»ŽMongoDBè¯»å–æ•°æ®æ—¶ä½¿ç”¨çš„é…ç½®æ‰€å®šä¹‰çš„ä¸¤ä¸ªå‡½æ•° 12345678910def readConfig(context: SparkContext, database: String, collection: String): ReadConfig = &#123; ReadConfig(Map("database" -&gt; database, "collection" -&gt; collection), Some(ReadConfig(context)))&#125;def readConfig(session: SparkSession, database: String, collection: String): ReadConfig = &#123; ReadConfig(Map("database" -&gt; database, "collection" -&gt; collection), Some(ReadConfig(session)))&#125; å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå‡½æ•°åä¸€æ ·çš„ï¼Œåˆšå¼€å§‹æˆ‘ä¹Ÿå¾ˆæ‡µé€¼ï¼Œä½†æ˜¯ä»”ç»†ä¸€çœ‹ï¼Œä»–çš„å‚æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸€ä¸ªæ˜¯context: SparkContextï¼Œä¸€ä¸ªæ˜¯session: SparkSessionã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯æŽ¥å—çš„å‚æ•°ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™æ‰éœ€è¦åŽ»å®šä¹‰ä¸¤ä¸ªå‡½æ•°ã€‚ï¼ˆè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨Pythonä¸­å¦‚ä½•åŽ»å®žçŽ°ï¼‰ å¯èƒ½ä½ ä¸æ‡‚Scalaï¼Œè®©æˆ‘ç®€å•è·Ÿä½ è®²ä¸€ä¸‹ã€‚é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨defå…³é”®å­—å®šä¹‰äº†ä¸€ä¸ªåä¸ºreadConfigçš„å‡½æ•°ï¼Œå’ŒPythonä¸€æ¨¡ä¸€æ ·ï¼›ç„¶åŽå°±æ˜¯å‡½æ•°æŽ¥å—çš„å‚æ•°äº†ï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ¯ä¸ªå‚æ•°åŽé¢æœ‰å†’å·ï¼Œè¿™ä¸ªå†’å·å°±è¡¨ç¤ºå‰é¢çš„æ•°æ®ç±»åž‹ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ªç›¸åŠ å‡½æ•° 1234567object add&#123; def addInt(a:Int, b:Int) : Int = &#123; var sum:Int = 0 sum = a + b return sum &#125;&#125; Scalaä¼šåœ¨å˜é‡åŽå®šä¹‰ç±»åž‹ï¼Œè¿™æ ·å°±å¯ä»¥åŒºåˆ«ä¸åŒçš„å‡½æ•°äº†ã€‚ å›žåˆ°ä¸Šé¢çš„æ —å­ï¼Œä¸€ä¸ªç±»åž‹æ˜¯SparkContextï¼Œä¸€ä¸ªæ˜¯SparkSessionï¼Œè¿™æ˜¯Sparkçš„æ•°æ®ç±»åž‹ï¼›ç„¶åŽæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨å‡½æ•°æœ«å°¾æ˜¯å†’å·åŠ ReadConfigï¼Œè¿™é‡Œè¯´çš„è¿”å›žçš„æ•°æ®ç±»åž‹æ˜¯ReadConfigï¼Œä¹Ÿå°±æ˜¯ä»ŽMongoDBè¯»å–æ•°æ®æ—¶ä½¿ç”¨çš„é…ç½®ç±»åž‹ã€‚ï¼ˆå¦‚æžœæ˜¯Unitåˆ™ä¸ç”¨è¿”å›žä»»ä½•æ•°æ®ï¼Œå’ŒJavaç±»ä¼¼ï¼‰ æ˜¯ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œåªè¦æˆ‘ä»¬ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸åŒç±»åž‹ï¼Œå°±ä¼šä½¿ç”¨ç›¸åº”çš„å‡½æ•°ã€‚ éƒ½è¯´Scalaæ˜¯ä¸€ç§å‡½æ•°å¼è¯­è¨€ï¼Œå‡½æ•°æ˜¯ Scala è¯­è¨€çš„æ ¸å¿ƒï¼Œçœ‹çœ‹Scalaå‡½æ•°çš„ç‰¹æ€§ï¼Œä¸è¯´äº†ï¼Œç»§ç»­æ’¸Scalaäº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Sparkå®žæˆ˜ï¼ˆäºŒï¼‰å­¦ä¹ UDF]]></title>
      <url>%2F2018%2F10%2F29%2FSpark%E5%AE%9E%E6%88%98%EF%BC%88%E4%BA%8C%EF%BC%89%E5%AD%A6%E4%B9%A0UDF%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  åœ¨å¼€å§‹æ­£å¼æ•°æ®å¤„ç†ä¹‹å‰ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦åŽ»å­¦ä¹ ç†è§£ä¸‹UDFã€‚ UDFUDFå…¨ç§°User-Defined Functionsï¼Œç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œæ˜¯Spark SQLçš„ä¸€é¡¹åŠŸèƒ½ï¼Œç”¨äºŽå®šä¹‰æ–°çš„åŸºäºŽåˆ—çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°æ‰©å±•äº†Spark SQLçš„DSLç”¨äºŽè½¬æ¢æ•°æ®é›†çš„è¯æ±‡è¡¨ã€‚ æˆ‘åœ¨databricksä¸Šæ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒç®€å•ç†è§£çš„å…¥é—¨æ —å­ï¼š Register the function as a UDF1234val squared = (s: Int) =&gt; &#123; s * s&#125;spark.udf.register("square", squared) Call the UDF in Spark SQL1spark.range(1, 20).registerTempTable("test") 1%sql select id, square(id) as id_squared from test æˆ‘ç†è§£å°±æ˜¯å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°squaredï¼Œè¿”å›žè¾“å…¥æ•°å­—çš„å¹³æ–¹ï¼Œç„¶åŽregisterï¼Œå¹¶ç»‘å®šsquareæ–¹æ³•åä¸ºsquareï¼Œç„¶åŽå°±åœ¨Spark SQLä¸­ç›´æŽ¥ä½¿ç”¨squareæ–¹æ³•ã€‚ å®žä¾‹ä¸€ï¼šæ¸©åº¦è½¬åŒ–1234567891011121314151617import org.apache.spark.sql.SparkSessionimport org.apache.spark.SparkConfobject ScalaUDFExample &#123; def main(args: Array[String]) &#123; val conf = new SparkConf().setAppName("Scala UDF Example") val spark = SparkSession.builder().enableHiveSupport().config(conf).getOrCreate() val ds = spark.read.json("temperatures.json") ds.createOrReplaceTempView("citytemps") // Register the UDF with our SparkSession spark.udf.register("CTOF", (degreesCelcius: Double) =&gt; ((degreesCelcius * 9.0 / 5.0) + 32.0)) spark.sql("SELECT city, CTOF(avgLow) AS avgLowF, CTOF(avgHigh) AS avgHighF FROM citytemps").show() &#125;&#125; æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ª UDF æ¥å°†ä»¥ä¸‹ JSON æ•°æ®ä¸­çš„æ¸©åº¦ä»Žæ‘„æ°åº¦ï¼ˆdegrees Celsiusï¼‰è½¬æ¢ä¸ºåŽæ°åº¦ï¼ˆdegrees Fahrenheitï¼‰ï¼š 1234567&#123;"city":"St. John's","avgHigh":8.7,"avgLow":0.6&#125;&#123;"city":"Charlottetown","avgHigh":9.7,"avgLow":0.9&#125;&#123;"city":"Halifax","avgHigh":11.0,"avgLow":1.6&#125;&#123;"city":"Fredericton","avgHigh":11.2,"avgLow":-0.5&#125;&#123;"city":"Quebec","avgHigh":9.0,"avgLow":-1.0&#125;&#123;"city":"Montreal","avgHigh":11.1,"avgLow":1.4&#125;... å®žä¾‹äºŒï¼šæ—¶é—´è½¬åŒ–1234567891011case class Purchase(customer_id: Int, purchase_id: Int, date: String, time: String, tz: String, amount:Double)val x = sc.parallelize(Array( Purchase(123, 234, "2007-12-12", "20:50", "UTC", 500.99), Purchase(123, 247, "2007-12-12", "15:30", "PST", 300.22), Purchase(189, 254, "2007-12-13", "00:50", "EST", 122.19), Purchase(187, 299, "2007-12-12", "07:30", "UTC", 524.37)))val df = sqlContext.createDataFrame(x)df.registerTempTable("df") è‡ªå®šä¹‰å‡½æ•° 1234567def makeDT(date: String, time: String, tz: String) = s"$date $time $tz"sqlContext.udf.register("makeDt", makeDT(_:String,_:String,_:String))// Now we can use our function directly in SparkSQL.sqlContext.sql("SELECT amount, makeDt(date, time, tz) from df").take(2)// but not outsidedf.select($"customer_id", makeDt($"date", $"time", $"tz"), $"amount").take(2) // fails å¦‚æžœæƒ³è¦åœ¨SQLå¤–é¢ä½¿ç”¨ï¼Œå¿…é¡»é€šè¿‡spark.sql.function.udfæ¥åˆ›å»ºUDF 1234import org.apache.spark.sql.functions.udfval makeDt = udf(makeDT(_:String,_:String,_:String))// now this worksdf.select($"customer_id", makeDt($"date", $"time", $"tz"), $"amount").take(2) å®žè·µæ“ä½œå†™ä¸€ä¸ªUDFæ¥å°†ä¸€äº›Intæ•°å­—åˆ†ç±» 123456789101112131415val formatDistribution = (view: Int) =&gt; &#123; if (view &lt; 10) &#123; "&lt;10" &#125; else if (view &lt;= 100) &#123; "10~100" &#125; else if (view &lt;= 1000) &#123; "100~1K" &#125; else if (view &lt;= 10000) &#123; "1K~10K" &#125; else if (view &lt;= 100000) &#123; "10K~100K" &#125; else &#123; "&gt;100K" &#125;&#125; æ³¨å†Œï¼š 1session.udf.register("formatDistribution", UDF.formatDistribution) SQLï¼š 1session.sql("select user_id, formatDistribution(variance_digg_count) as variance from video") å†™åˆ°è¿™é‡Œï¼Œå†å›žé¡¾UDFï¼Œæˆ‘æ„Ÿè§‰è¿™å°±åƒæ˜¯åŽ»ä¸ºäº†æ–¹ä¾¿åšä¸€ä¸ªåˆ†ç±»è½¬åŒ–ç­‰æ“ä½œï¼Œå’ŒPythoné‡Œé¢çš„å‡½æ•°ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œçš„UDFä¸€èˆ¬ç‰¹æŒ‡Spark SQLé‡Œé¢ä½¿ç”¨çš„å‡½æ•°ã€‚ç„¶åŽå‘çŽ°è¿™é‡Œå’ŒSQLä¸­çš„è‡ªå®šä¹‰å‡½æ•°æŒºåƒçš„: 12345678910111213CREATE FUNCTION [å‡½æ•°æ‰€æœ‰è€….]&lt;å‡½æ•°åç§°&gt; ( -- æ·»åŠ å‡½æ•°æ‰€éœ€çš„å‚æ•°ï¼Œå¯ä»¥æ²¡æœ‰å‚æ•° [&lt;@param1&gt; &lt;å‚æ•°ç±»åž‹&gt;] [,&lt;@param1&gt; &lt;å‚æ•°ç±»åž‹&gt;]â€¦)RETURNS TABLE ASRETURN ( -- æŸ¥è¯¢è¿”å›žçš„SQLè¯­å¥ SELECTæŸ¥è¯¢è¯­å¥) 123456789101112131415161718192021222324252627282930/** åˆ›å»ºå†…è”è¡¨å€¼å‡½æ•°ï¼ŒæŸ¥è¯¢äº¤æ˜“æ€»é¢å¤§äºŽ1Wçš„å¼€æˆ·äººä¸ªäººä¿¡æ¯*/create function getCustInfo()returns @CustInfo table --è¿”å›žtableç±»åž‹( --è´¦æˆ·ID CustID int, --å¸æˆ·åç§° CustName varchar(20) not null, --èº«ä»½è¯å· IDCard varchar(18), --ç”µè¯ TelePhone varchar(13) not null, --åœ°å€ Address varchar(50) default('åœ°å€ä¸è¯¦'))asbegin --ä¸ºtableè¡¨èµ‹å€¼ insert into @CustInfo select CustID,CustName,IDCard,TelePhone,Address from AccountInfo where CustID in (select CustID from CardInfo where CardID in (select CardID from TransInfo group by CardID,transID,TransType,TransMoney,TransDate having sum(TransMoney)&gt;10000)) returnendgo-- è°ƒç”¨å†…è”è¡¨å€¼å‡½æ•°select * from getCustInfo()go å¥½åƒæœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™~]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[sparkå®žæˆ˜ï¼ˆä¸€ï¼‰ï¼šå¯¹æ•°æ®å¤„ç†çš„ç†è§£]]></title>
      <url>%2F2018%2F10%2F24%2Fspark%E5%AE%9E%E6%88%98%E4%B8%80%EF%BC%9A%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E7%9A%84%E7%90%86%E8%A7%A3%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åå…­ç¯‡åŽŸåˆ›æ–‡ç«  å¤§æ•°æ®çš„å­¦ä¹ ç»åŽ†å¤§æ•°æ®æ˜¯ä»€ä¹ˆï¼Œæˆ‘è§‰å¾—åº”è¯¥æœ‰è¿™ä¹ˆå‡ æ­¥ï¼š æ•°æ®é‡‡é›†ï¼ˆPython&amp;&amp;Scrapyï¼‰ æ•°æ®æ¸…æ´—ï¼ˆScala&amp;&amp;Sparkï¼‰ æŒ‡æ ‡è®¡ç®—ï¼ˆScala&amp;&amp;Sparkï¼‰ æ•°æ®å±•ç¤ºï¼ˆPostgreï¼‰ åšäº†ä¸€æ®µæ—¶é—´çš„çˆ¬è™«ï¼Œæˆ–è€…è¯´å«æ•°æ®é‡‡é›†ï¼Œä½†æ˜¯ä»Žæ¥æ²¡æœ‰æŽ¥è§¦åˆ°å¤§æ•°æ®çš„ä¸‹ä¸€æ­¥ã€‚æœ€è¿‘å’Œæ…¢æ…¢èŠäº†ä¸‹ï¼Œå¯¹æ•°æ®å¤„ç†ä¹Ÿå¾ˆæ„Ÿå…´è¶£ï¼Œä¾¿æƒ³åŽ»æŽ¥è§¦ã€å°è¯•ã€‚ åœ¨æ…¢æ…¢ã€ç™»ç™»ç­‰äººçš„å¸®åŠ©ä¸‹ï¼Œå¼€å§‹å­¦ä¹ äº†ä¸€æ®µæ—¶é—´çš„Sparkã€‚åˆšå¼€å§‹å­¦ä¹ SQLè¯­å¥ï¼ŒçŽ°åœ¨å°±è®°å¾—ç®€å•çš„é‚£äº›äº†ã€‚ç„¶åŽåŽ»çœ‹Sparkæ–‡æ¡£ï¼Œè‡ªå·±åŠ¨æ‰‹å¼€å§‹å†™ã€‚ å› ä¸ºå›¢é˜Ÿä¸»è¦ç”¨Scalaå¼€å‘ï¼Œæ‰€ä»¥ä¸­é€”åˆèŠ±äº†ä¸€äº›æ—¶é—´æ¥å­¦ä¹ Scalaè¯­è¨€ï¼Œæ„Ÿè§‰å’ŒPythonæœ‰è®¸å¤šç±»ä¼¼çš„åœ°æ–¹ï¼Œå¹¶ä¸æ˜¯å¤ªéš¾ï¼Œä½†æ˜¯Scalaæœ‰ä¸€äº›ç‰¹æ€§ï¼Œä¸æ˜¯å¤ªæ˜Žç™½ï¼Œä¸»è¦æ˜¯è‡ªå·±å†™å¤ªå°‘äº†ã€‚çˆ¬è™«ä»€ä¹ˆçš„è¿˜æ˜¯ç”¨Pythonã€‚ ç„¶åŽå†åŽ»çœ‹å…·ä½“çš„Spark é¡¹ç›®ï¼Œæ¨¡ä»¿ï¼ˆæŠ„è¢­ï¼‰åˆ«äººçš„ä»£ç ï¼Œå¤§æ¦‚ä¹Ÿçœ‹æ‡‚äº†ä¸€äº›ï¼Œç”±äºŽå§‹ç»ˆæ²¡æœ‰è‡ªå·±å®žè·µæ¥æ“ä½œï¼Œæ‰€ä»¥ç¼ºä¹å®žé™…æ“ä½œèƒ½åŠ›ã€‚æœ€å¥½çš„åŠžæ³•å°±æ˜¯è‡ªå·±åŽ»å†™ï¼Œæ‰€ä»¥è®¡åˆ’è‡ªå·±åŽ»å•ç‹¬åšä¸€ä¸ªé¡¹ç›®è¯•è¯•çœ‹ï¼Œæ‰‹å¤´ä¸Šè¿˜æœ‰å¥½å¤šå·²å¼€å‘ä½†æ˜¯è¿˜æ²¡å¼€å§‹è®¡ç®—çš„é¡¹ç›®ï¼Œæˆ‘è‡ªå·±å¯ä»¥å…ˆè¯•è¯•çœ‹ã€‚ å¤§æ•°æ®å¤„ç†æ­¥éª¤åœ¨ä¸Šé¢æ‰€è¯´çš„åŸºç¡€ä¸Šå†è¯´ç»†ä¸€äº›ã€‚ æ•°æ®é‡‡é›†å°±åˆ«è¯´äº†ï¼Œå°±æ˜¯é‡‡é›†æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼ˆäº§å“ç»ç†è¦æ±‚çš„ï¼‰æ•°æ® æ•°æ®æ¸…æ´—è¿™é‡Œï¼Œæ˜¯å’Œæ•°æ®é‡‡é›†æœ‰å¾ˆå¤§å…³ç³»çš„ã€‚åˆ†ä¸ºè¿™ä¹ˆä¸¤æ­¥ï¼š æå–æŒ‡å®šæ•°æ®ã€‚å› ä¸ºæˆ‘ä»¬åœ¨åšæ•°æ®é‡‡é›†çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œæ˜¯å°½å¯èƒ½å¤šçš„ä¿å­˜åŽŸå§‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åˆ«äººç»™å¤šå°‘ï¼Œæˆ‘å°±å–å¤šå°‘ï¼Œä½†æ˜¯è¿™äº›æ•°æ®å¹¶éžéƒ½æ˜¯æœ‰ç”¨çš„æ•°æ®ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯éœ€è¦åŽ»æå–åŽŸå§‹æ•°æ®è¡¨ä¸­æˆ‘ä»¬æ‰€éœ€è¦çš„æŒ‡å®šæ•°æ®ã€‚è¿™é‡Œæ–¹æ³•æœ‰å¾ˆå¤šï¼Œç”¨SQLï¼Œæˆ–è€…åœ¨é“è·¯æ•°æ®çš„æ—¶å€™ç›´æŽ¥é€‰å–é‚£äº›å­—æ®µå³å¯ã€‚æœ€åŽæˆ‘ä»¬æŠŠè¿™äº›æå–çš„æ•°æ®é‡æ–°ä¿å­˜åœ¨æ–°çš„è¡¨ä¸­ï¼Œè¿™æ ·åŽé¢è®¡ç®—ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ï¼ˆå…¶å®žè¿™ä¸€æ­¥åœ¨æ•°æ®é‡‡é›†å°±å¯ä»¥å®Œæˆï¼Œä½†æ˜¯è°ä¹Ÿè¯´ä¸æ¸…åˆ°åº•ä»¥åŽä¼šä¸ä¼šéœ€è¦æ›´å¤šçš„æ•°æ®ï¼‰ æ¸…æ´—æ•°æ®ã€‚æ¯”å¦‚æ—¶é—´ç»´åº¦ã€ä¸ºç©ºå­—æ®µç­‰ç­‰ï¼Œè¿™äº›çŽ°åœ¨é‡åˆ°çš„è¿˜ä¸å¤šï¼Œä»¥åŽå†è¡¥ä¸Šã€‚ æŒ‡æ ‡è®¡ç®—ã€‚è¿™ä¸€æ­¥å°±éœ€è¦æ ¹æ®å…·ä½“çš„éœ€æ±‚æ¥è®¡ç®—å„ç§ç»´åº¦ï¼Œå¹¶æŠŠè®¡ç®—å¥½çš„æ•°æ®ä¿å­˜æ–°è¡¨ã€‚ æ•°æ®å±•ç¤ºã€‚è¿™éƒ¨åˆ†å¥½åƒæ˜¯åŽç«¯åšçš„ï¼Œå¾…äº†è§£ã€‚ éœ€è¦äº†è§£çš„çŸ¥è¯† å¼€å‘å·¥å…·å’ŒçŽ¯å¢ƒ MongoDB Postgre SQLï¼ŒJOIN Docker IDEAã€SBT Scalaï¼ˆ2.10+ï¼‰ Spark å®˜æ–¹æ–‡æ¡£ UDF ç›®å‰æ„Ÿè§‰ä»¥ä¸Šéƒ¨åˆ†éƒ½æœ‰ä¸€çŸ¥åŠè§£ï¼Œå¿…é¡»è¦å®žé™…åŽ»åšæ‰èƒ½çŸ¥é“åˆ°åº•é‚£éƒ¨åˆ†æŽŒæ¡ï¼Œé‚£éƒ¨åˆ†è¿˜ä¸æ‡‚ã€‚ æˆ‘çš„è®¡åˆ’ æ‰¾PMè¦DMæ–‡æ¡£ï¼Œç†è§£å…·ä½“ä¸šåŠ¡éœ€æ±‚ æ ¹æ®éœ€æ±‚æ¥é€‰æ‹©æ•°æ®åº“ä¸­çš„æ•°æ®ç»´åº¦ åœ¨æœ¬åœ°å°è¯•æ•°æ®æ¸…æ´—å¹¶è®¡ç®—æŒ‡æ ‡ æœ‰é—®é¢˜è¯·æ•™æ…¢æ…¢ï¼†ç™»ç™»]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Sparkæ•™ç¨‹ï¼ˆäºŒï¼‰Sparkè¿žæŽ¥MongoDB]]></title>
      <url>%2F2018%2F09%2F03%2FSpark%E6%95%99%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89Spark%E8%BF%9E%E6%8E%A5MongoDB%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åäº”ç¯‡åŽŸåˆ›æ–‡ç«  å­¦ä¹ Spark (à¹‘â€¢ . â€¢à¹‘) å¦‚ä½•å¯¼å…¥æ•°æ®æ•°æ®å¯èƒ½æœ‰å„ç§æ ¼å¼ï¼Œè™½ç„¶å¸¸è§çš„æ˜¯HDFSï¼Œä½†æ˜¯å› ä¸ºåœ¨Pythonçˆ¬è™«ä¸­æ•°æ®åº“ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯MongoDBï¼Œæ‰€ä»¥è¿™é‡Œä¼šé‡ç‚¹è¯´è¯´å¦‚ä½•ç”¨sparkå¯¼å…¥MongoDBä¸­çš„æ•°æ®ã€‚ å½“ç„¶ï¼Œé¦–å…ˆä½ éœ€è¦åœ¨è‡ªå·±ç”µè„‘ä¸Šå®‰è£…sparkçŽ¯å¢ƒï¼Œç®€å•è¯´ä¸‹ï¼Œåœ¨è¿™é‡Œä¸‹è½½sparkï¼ŒåŒæ—¶éœ€è¦é…ç½®å¥½JAVAï¼ŒScalaçŽ¯å¢ƒã€‚ è¿™é‡Œå»ºè®®ä½¿ç”¨Jupyter notebookï¼Œä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œåœ¨çŽ¯å¢ƒå˜é‡ä¸­è¿™æ ·è®¾ç½® 12PYSPARK_DRIVER_PYTHON=jupyter PYSPARK_DRIVER_PYTHON_OPTS=notebook ./bin/pyspark å¦‚æžœä½ çš„çŽ¯å¢ƒä¸­æœ‰å¤šä¸ªPythonç‰ˆæœ¬ï¼ŒåŒæ ·å¯ä»¥åˆ¶å®šä½ æƒ³è¦ä½¿ç”¨çš„è§£é‡Šå™¨ï¼Œæˆ‘è¿™é‡Œæ˜¯python36ï¼Œæ ¹æ®éœ€æ±‚ä¿®æ”¹ã€‚ 1PYSPARK_PYTHON=/usr/bin/python36 å¯åŠ¨å‘½ä»¤è¿›å…¥sparkæ ¹ç›®å½•ï¼Œ./bin/pysparkè¿™æ˜¯æœ€ç®€å•çš„å¯åŠ¨å‘½ä»¤ï¼Œé»˜è®¤ä¼šæ‰“å¼€Pythonçš„äº¤äº’å¼è§£é‡Šå™¨ï¼Œä½†æ˜¯ç”±äºŽæˆ‘ä»¬ä¸Šé¢æœ‰è®¾ç½®è¿‡ï¼Œä¼šæ‰“å¼€Jupyter notebookï¼ŒæŽ¥ä¸‹æ¥å˜æˆä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ å…ˆæ¥çœ‹çœ‹æœ€ç®€å•çš„ä¾‹å­ï¼š 12345678910111213&gt;&gt;&gt; textFile = spark.read.text("README.md")&gt;&gt;&gt; textFile.count() # Number of rows in this DataFrame126&gt;&gt;&gt; textFile.first() # First row in this DataFrameRow(value=u'# Apache Spark')&gt;&gt;&gt; linesWithSpark = textFile.filter(textFile.value.contains("Spark"))&gt;&gt;&gt; textFile.filter(textFile.value.contains("Spark")).count() # How many lines contain "Spark"?15 è¿™é‡Œæœ‰æˆ‘ä¹‹å‰å†™è¿‡çš„ä¾‹å­ï¼Œå¯ä»¥ç…§ç€å†™ä¸€é basic_exercise æˆ‘ä»¬çš„å¯åŠ¨æ–¹å¼æ˜¯./bin/pysparkï¼Œæˆ‘ä»¬å¯ä»¥å®¶åŽé¢åŠ å¾ˆå¤šå‚æ•°ï¼Œæ¯”å¦‚è¯´å¦‚è‹¥æˆ‘ä»¬è¦è¿žæŽ¥MongoDBï¼Œå°±éœ€è¦è¿™æ · å®Œæ•´çš„å¯ä»¥å‚è€ƒSpark Connector Python Guide 123./bin/pyspark --conf "spark.mongodb.input.uri=mongodb://127.0.0.1/test.myCollection?readPreference=primaryPreferred" \ --conf "spark.mongodb.output.uri=mongodb://127.0.0.1/test.myCollection" \ --packages org.mongodb.spark:mongo-spark-connector_2.11:2.3.0 è¿™é‡Œæœ‰ä¸¤ä¸ªuriï¼Œåˆ†åˆ«æ˜¯inputå’Œoutputï¼Œå¯¹åº”è¯»å–çš„æ•°æ®åº“å’Œå†™å…¥çš„æ•°æ®åº“ï¼Œæœ€åŽé¢çš„packagesç›¸å½“äºŽå¼•å…¥çš„åŒ…çš„åå­—ï¼Œæˆ‘ä¸€èˆ¬å–œæ¬¢åœ¨ä»£ç ä¸­å®šä¹‰ã€‚ è¯»å–/ä¿å­˜æ•°æ®è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¢žåŠ å‚æ•°optionï¼Œåœ¨è¿™é‡Œè®¾ç½®æƒ³è¦è¯»å–çš„æ•°æ®åº“åœ°å€ï¼Œæ³¨æ„æ ¼å¼ã€‚ è¯»å–æ•°æ® 12df = spark.read.format("com.mongodb.spark.sql.DefaultSource").option("uri","mongodb://127.0.0.1/people.contacts").load() ä¿å­˜æ•°æ® 123people.write.format("com.mongodb.spark.sql.DefaultSource").mode("append").option("uri","mongodb://127.0.0.1/people.contacts").option("database","people").option("collection", "contacts").save() ç®€å•å¯¹æ¯”ä¸‹ï¼Œoptionè¿˜å¯ä»¥å®šä¹‰databaseå’Œcollectionï¼Œè¿™æ ·å°±ä¸éœ€è¦åœ¨å¯åŠ¨Sparkæ—¶å®šä¹‰ã€‚ ä»¥ä¸Šæ˜¯å®˜ç½‘æŽ¨èçš„è¿žæŽ¥æ–¹å¼ï¼Œè¿™é‡Œéœ€è¦è¯´çš„æ˜¯å¦ä¸€ç§ï¼Œå¦‚æžœæˆ‘æ²¡æœ‰ä»Žå‘½ä»¤è¡Œä¸­å¯åŠ¨ï¼Œè€Œæ˜¯ç›´æŽ¥æ–°å»ºä¸€ä¸ªpyæ–‡ä»¶ï¼Œè¯¥å¦‚ä½•æ“ä½œï¼Ÿ æœç´¢ç›¸å…³èµ„æ–™åŽï¼Œå‘çŽ°æ˜¯è¿™æ · 123456789101112131415161718192021222324#!/usr/bin/env python# -*- coding: utf-8 -*-__author__ = 'zhangslob'import osfrom pyspark.sql import SparkSession# set PYSPARK_PYTHON to python36os.environ['PYSPARK_PYTHON'] = '/usr/bin/python36'# load mongo datainput_uri = "mongodb://127.0.0.1:spark.spark_test"output_uri = "mongodb://127.0.0.1:spark.spark_test"my_spark = SparkSession\ .builder\ .appName("MyApp")\ .config("spark.mongodb.input.uri", input_uri)\ .config("spark.mongodb.output.uri", output_uri)\ .config('spark.jars.packages','org.mongodb.spark:mongo-spark-connector_2.11:2.2.0')\ .getOrCreate()df = my_spark.read.format('com.mongodb.spark.sql.DefaultSource').load() å¿…é¡»è¦å¢žåŠ é»˜è®¤è®¾ç½®(&#39;spark.jars.packages&#39;,&#39;org.mongodb.spark:mongo-spark-connector_2.11:2.2.0&#39;)ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Sparkæ•™ç¨‹ï¼ˆä¸€ï¼‰ä¸ºä»€ä¹ˆè¦å­¦spark]]></title>
      <url>%2F2018%2F09%2F01%2FSpark%E6%95%99%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6spark%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åå››ç¯‡åŽŸåˆ›æ–‡ç«  å­¦ä¹ Spark (à¹‘â€¢ . â€¢à¹‘) ä»‹ç»Apache Sparkæ˜¯ä¸€ä¸ªå¼€æºé›†ç¾¤è¿ç®—æ¡†æž¶ï¼Œæœ€åˆæ˜¯ç”±åŠ å·žå¤§å­¦æŸå…‹èŽ±åˆ†æ ¡AMPLabæ‰€å¼€å‘ã€‚ç›¸å¯¹äºŽHadoopçš„MapReduceä¼šåœ¨è¿è¡Œå®Œå·¥ä½œåŽå°†ä¸­ä»‹æ•°æ®å­˜æ”¾åˆ°ç£ç›˜ä¸­ï¼ŒSparkä½¿ç”¨äº†å­˜å‚¨å™¨å†…è¿ç®—æŠ€æœ¯ï¼Œèƒ½åœ¨æ•°æ®å°šæœªå†™å…¥ç¡¬ç›˜æ—¶å³åœ¨å­˜å‚¨å™¨å†…åˆ†æžè¿ç®—ã€‚ Sparkåœ¨å­˜å‚¨å™¨å†…è¿è¡Œç¨‹åºçš„è¿ç®—é€Ÿåº¦èƒ½åšåˆ°æ¯”Hadoop MapReduceçš„è¿ç®—é€Ÿåº¦å¿«ä¸Š100å€ï¼Œå³ä¾¿æ˜¯è¿è¡Œç¨‹åºäºŽç¡¬ç›˜æ—¶ï¼ŒSparkä¹Ÿèƒ½å¿«ä¸Š10å€é€Ÿåº¦ã€‚Sparkå…è®¸ç”¨æˆ·å°†æ•°æ®åŠ è½½è‡³é›†ç¾¤å­˜å‚¨å™¨ï¼Œå¹¶å¤šæ¬¡å¯¹å…¶è¿›è¡ŒæŸ¥è¯¢ï¼Œéžå¸¸é€‚åˆç”¨äºŽæœºå™¨å­¦ä¹ ç®—æ³• Sparkä¹Ÿæ”¯æŒä¼ªåˆ†å¸ƒå¼ï¼ˆpseudo-distributedï¼‰æœ¬åœ°æ¨¡å¼ï¼Œä¸è¿‡é€šå¸¸åªç”¨äºŽå¼€å‘æˆ–æµ‹è¯•æ—¶ä»¥æœ¬æœºæ–‡ä»¶ç³»ç»Ÿå–ä»£åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼ŒSparkä»…åœ¨ä¸€å°æœºå™¨ä¸Šä½¿ç”¨æ¯ä¸ªCPUæ ¸å¿ƒè¿è¡Œç¨‹åºã€‚ Apache Sparkâ„¢ is a unified analytics engine for large-scale data processing. ä¼˜åŠ¿ é¦–å…ˆï¼ŒSparkä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¨é¢ã€ç»Ÿä¸€çš„æ¡†æž¶ç”¨äºŽç®¡ç†å„ç§æœ‰ç€ä¸åŒæ€§è´¨ï¼ˆæ–‡æœ¬æ•°æ®ã€å›¾è¡¨æ•°æ®ç­‰ï¼‰çš„æ•°æ®é›†å’Œæ•°æ®æºï¼ˆæ‰¹é‡æ•°æ®æˆ–å®žæ—¶çš„æµæ•°æ®ï¼‰çš„å¤§æ•°æ®å¤„ç†çš„éœ€æ±‚ã€‚ Sparkå¯ä»¥å°†Hadoopé›†ç¾¤ä¸­çš„åº”ç”¨åœ¨å†…å­˜ä¸­çš„è¿è¡Œé€Ÿåº¦æå‡100å€ï¼Œç”šè‡³èƒ½å¤Ÿå°†åº”ç”¨åœ¨ç£ç›˜ä¸Šçš„è¿è¡Œé€Ÿåº¦æå‡10å€ã€‚ Sparkè®©å¼€å‘è€…å¯ä»¥å¿«é€Ÿçš„ç”¨Javaã€Scalaæˆ–Pythonç¼–å†™ç¨‹åºã€‚å®ƒæœ¬èº«è‡ªå¸¦äº†ä¸€ä¸ªè¶…è¿‡80ä¸ªé«˜é˜¶æ“ä½œç¬¦é›†åˆã€‚è€Œä¸”è¿˜å¯ä»¥ç”¨å®ƒåœ¨shellä¸­ä»¥äº¤äº’å¼åœ°æŸ¥è¯¢æ•°æ®ã€‚ é™¤äº†Mapå’ŒReduceæ“ä½œä¹‹å¤–ï¼Œå®ƒè¿˜æ”¯æŒSQLæŸ¥è¯¢ï¼Œæµæ•°æ®ï¼Œæœºå™¨å­¦ä¹ å’Œå›¾è¡¨æ•°æ®å¤„ç†ã€‚å¼€å‘è€…å¯ä»¥åœ¨ä¸€ä¸ªæ•°æ®ç®¡é“ç”¨ä¾‹ä¸­å•ç‹¬ä½¿ç”¨æŸä¸€èƒ½åŠ›æˆ–è€…å°†è¿™äº›èƒ½åŠ›ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚ äº²èº«ä½“ä¼šç»è¿‡è¿™ä¸¤å‘¨çš„æŠ˜è…¾ï¼Œæ€»ç®—æ˜¯åœ¨æœ¬åœ°çŽ¯å¢ƒä¸‹å®Œæˆäº†ç¬¬ä¸€ä¸ªsparké¡¹ç›®ï¼Œå®Œæˆåä¸‡çº§æ–‡æœ¬åˆ†è¯å’ŒåŽ»é‡ï¼Œé€Ÿåº¦è¿˜æ˜¯æŒºå¿«çš„ï¼Œä»Žè¯»å–æ•°æ®ã€å¤„ç†æ•°æ®ã€å†åˆ°ä¿å­˜æ•°æ®ï¼Œå¤§æ¦‚èŠ±äº†ååˆ†é’Ÿå·¦å³ã€‚è¿™é‡Œæ“ä½œçš„æ•°æ®åº“éƒ½æ˜¯MongoDBï¼Œå› ä¸ºçˆ¬è™«çˆ¬å–çš„æ•°æ®éƒ½æ˜¯ç›´æŽ¥ä¿å­˜åˆ°Mongoã€‚ ä¹‹åŽå†å¢žåŠ æ•°æ®é‡ï¼Œè¾¾åˆ°å››åƒå¤šä¸‡ï¼Œè¯»å–æ•°æ®èŠ±äº†8åˆ†é’Ÿï¼Œä¸‹å›¾æ˜¯æ­£åœ¨å¤„ç†å’Œä¿å­˜æ•°æ®çš„Spark UIã€‚ ä»¥å‰å¤„ç†æ•°æ®ä¼šä½¿ç”¨pandasï¼Œæ•°æ®ä¼šä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®é‡è¿‡å¤§å°±ä¼šå´©äº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†å¸ƒå¼è®¡ç®—çš„åŽŸå› ã€‚æ²¡æœ‰åšè¿‡æ¨ªå‘å¯¹æ¯”ï¼Œæš‚æ—¶è¿˜ä¸çŸ¥é“æœ‰å¤šå¤§å·®åˆ«ã€‚ æœ€åŽèŠ±äº†1.3hï¼Œæœ¬åœ°å¤„ç†å®Œäº†å››åƒå¤šä¸‡æ•°æ®ï¼ŒCPUå’Œå†…å­˜éƒ½è¦ç‚¸äº†ï¼Œçœ‹æ¥ä»¥åŽè®¡ç®—éƒ¨åˆ†è¿˜æ˜¯è¦æ­é›†ç¾¤ã€‚ å­¦ä¹ è®¡åˆ’æˆ‘åœ¨Githubä¸Šå¼€äº†ä¸€ä¸ªä»“åº“ï¼Œè®°å½•æ‰€å­¦ï¼Œåœ°å€åœ¨è¿™ï¼šlearning-spark åˆšå¼€å§‹ä½¿ç”¨çš„è¯­è¨€è¿˜æ˜¯Pythonï¼Œç›®æ ‡æ˜¯å­¦Scalaï¼Œçœ‹äº†äº›åŸºç¡€è¯­æ³•ï¼Œå’ŒPythonæŒºç±»ä¼¼çš„ï¼Œä»¥åŽå¤šå†™å†™ï¼Œç»´æŒè¿™ä¸ªé¡¹ç›®ï¼Œè®°å½•å„ç§å‘ã€‚ okï¼ŒBBäº†è¿™ä¹ˆå¤šï¼Œä¸‹ä¸€ç¯‡å°±è¦å¼€å§‹çœŸæ­£çš„ä»£ç å®žæˆ˜äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨scrapyå‘é€postè¯·æ±‚çš„å‘]]></title>
      <url>%2F2018%2F08%2F24%2F%E4%BD%BF%E7%94%A8scrapy%E5%8F%91%E9%80%81post%E8%AF%B7%E6%B1%82%E7%9A%84%E5%9D%91%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  ä½¿ç”¨scrapyå‘é€postè¯·æ±‚çš„å‘ ä½¿ç”¨requestså‘é€postè¯·æ±‚å…ˆæ¥çœ‹çœ‹ä½¿ç”¨requestsæ¥å‘é€postè¯·æ±‚æ˜¯å¤šå°‘å¥½ç”¨ï¼Œå‘é€è¯·æ±‚ Requests ç®€ä¾¿çš„ API æ„å‘³ç€æ‰€æœ‰ HTTP è¯·æ±‚ç±»åž‹éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·å‘é€ä¸€ä¸ª HTTP POST è¯·æ±‚ï¼š 1&gt;&gt;&gt; r = requests.post('http://httpbin.org/post', data = &#123;'key':'value'&#125;) ä½¿ç”¨dataå¯ä»¥ä¼ é€’å­—å…¸ä½œä¸ºå‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¼ é€’å…ƒç¥– 12345678910111213&gt;&gt;&gt; payload = (('key1', 'value1'), ('key1', 'value2'))&gt;&gt;&gt; r = requests.post('http://httpbin.org/post', data=payload)&gt;&gt;&gt; print(r.text)&#123; ... "form": &#123; "key1": [ "value1", "value2" ] &#125;, ...&#125; ä¼ é€’jsonæ˜¯è¿™æ · 123456&gt;&gt;&gt; import json&gt;&gt;&gt; url = 'https://api.github.com/some/endpoint'&gt;&gt;&gt; payload = &#123;'some': 'data'&#125;&gt;&gt;&gt; r = requests.post(url, data=json.dumps(payload)) 2.4.2 ç‰ˆçš„æ–°åŠ åŠŸèƒ½ï¼š 1234&gt;&gt;&gt; url = 'https://api.github.com/some/endpoint'&gt;&gt;&gt; payload = &#123;'some': 'data'&#125;&gt;&gt;&gt; r = requests.post(url, json=payload) ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸éœ€è¦å¯¹å‚æ•°åšä»€ä¹ˆå˜åŒ–ï¼Œåªéœ€è¦å…³æ³¨ä½¿ç”¨data=è¿˜æ˜¯json=ï¼Œå…¶ä½™çš„requestséƒ½å·²ç»å¸®ä½ åšå¥½äº†ã€‚ ä½¿ç”¨scrapyå‘é€postè¯·æ±‚å®˜æ–¹æŽ¨èçš„ Using FormRequest to send data via HTTP POST 123return [FormRequest(url="http://www.example.com/post/action", formdata=&#123;'name': 'John Doe', 'age': '27'&#125;, callback=self.after_post)] è¿™é‡Œä½¿ç”¨çš„æ˜¯FormRequestï¼Œå¹¶ä½¿ç”¨formdataä¼ é€’å‚æ•°ï¼Œçœ‹åˆ°è¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªå­—å…¸ã€‚ ä½†æ˜¯ï¼Œè¶…çº§å‘çš„ä¸€ç‚¹æ¥äº†ï¼Œä»Šå¤©æŠ˜è…¾äº†ä¸€ä¸‹åˆï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•å‘é€è¯·æ±‚ï¼Œæ€Žä¹ˆå‘éƒ½ä¼šå‡ºé—®é¢˜ï¼Œè¿”å›žçš„æ•°æ®ä¸€ç›´éƒ½ä¸æ˜¯æˆ‘æƒ³è¦çš„ 1return scrapy.FormRequest(url, formdata=(payload)) åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆä¹…ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨scrapy.Requestå‘é€è¯·æ±‚ï¼Œå°±å¯ä»¥æ­£å¸¸çš„èŽ·å–æ•°æ®ã€‚ 1return scrapy.Request(url, body=json.dumps(payload), method='POST', headers=&#123;'Content-Type': 'application/json'&#125;,) å‚è€ƒï¼šSend Post Request in Scrapy 1234my_data = &#123;'field1': 'value1', 'field2': 'value2'&#125;request = scrapy.Request( url, method='POST', body=json.dumps(my_data), headers=&#123;'Content-Type':'application/json'&#125; ) FormRequest ä¸Ž Request åŒºåˆ«åœ¨æ–‡æ¡£ä¸­ï¼Œå‡ ä¹Žçœ‹ä¸åˆ°å·®åˆ«ï¼Œ The FormRequest class adds a new argument to the constructor. The remaining arguments are the same as for the Request class and are not documented here. Parameters: formdata (dict or iterable of tuples) â€“ is a dictionary (or iterable of (key, value) tuples) containing HTML Form data which will be url-encoded and assigned to the body of the request. è¯´FormRequestæ–°å¢žåŠ äº†ä¸€ä¸ªå‚æ•°formdataï¼ŒæŽ¥å—åŒ…å«è¡¨å•æ•°æ®çš„å­—å…¸æˆ–è€…å¯è¿­ä»£çš„å…ƒç»„ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºè¯·æ±‚çš„bodyã€‚å¹¶ä¸”FormRequestæ˜¯ç»§æ‰¿Requestçš„ 12345678910111213141516171819202122232425class FormRequest(Request): def __init__(self, *args, **kwargs): formdata = kwargs.pop('formdata', None) if formdata and kwargs.get('method') is None: kwargs['method'] = 'POST' super(FormRequest, self).__init__(*args, **kwargs) if formdata: items = formdata.items() if isinstance(formdata, dict) else formdata querystr = _urlencode(items, self.encoding) if self.method == 'POST': self.headers.setdefault(b'Content-Type', b'application/x-www-form-urlencoded') self._set_body(querystr) else: self._set_url(self.url + ('&amp;' if '?' in self.url else '?') + querystr) ###def _urlencode(seq, enc): values = [(to_bytes(k, enc), to_bytes(v, enc)) for k, vs in seq for v in (vs if is_listlike(vs) else [vs])] return urlencode(values, doseq=1) æœ€ç»ˆæˆ‘ä»¬ä¼ é€’çš„{â€˜keyâ€™: â€˜valueâ€™, â€˜kâ€™: â€˜vâ€™}ä¼šè¢«è½¬åŒ–ä¸ºâ€™key=value&amp;k=vâ€™ å¹¶ä¸”é»˜è®¤çš„methodæ˜¯POSTï¼Œå†æ¥çœ‹çœ‹Request 123456789class Request(object_ref): def __init__(self, url, callback=None, method='GET', headers=None, body=None, cookies=None, meta=None, encoding='utf-8', priority=0, dont_filter=False, errback=None, flags=None): self._encoding = encoding # this one has to be set first self.method = str(method).upper() é»˜è®¤çš„æ–¹æ³•æ˜¯GETï¼Œå…¶å®žå¹¶ä¸å½±å“ã€‚ä»ç„¶å¯ä»¥å‘é€postè¯·æ±‚ã€‚è¿™è®©æˆ‘æƒ³èµ·æ¥requestsä¸­çš„requestç”¨æ³•ï¼Œè¿™æ˜¯å®šä¹‰è¯·æ±‚çš„åŸºç¡€æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344def request(method, url, **kwargs): """Constructs and sends a :class:`Request &lt;Request&gt;`. :param method: method for the new :class:`Request` object. :param url: URL for the new :class:`Request` object. :param params: (optional) Dictionary or bytes to be sent in the query string for the :class:`Request`. :param data: (optional) Dictionary or list of tuples ``[(key, value)]`` (will be form-encoded), bytes, or file-like object to send in the body of the :class:`Request`. :param json: (optional) json data to send in the body of the :class:`Request`. :param headers: (optional) Dictionary of HTTP Headers to send with the :class:`Request`. :param cookies: (optional) Dict or CookieJar object to send with the :class:`Request`. :param files: (optional) Dictionary of ``'name': file-like-objects`` (or ``&#123;'name': file-tuple&#125;``) for multipart encoding upload. ``file-tuple`` can be a 2-tuple ``('filename', fileobj)``, 3-tuple ``('filename', fileobj, 'content_type')`` or a 4-tuple ``('filename', fileobj, 'content_type', custom_headers)``, where ``'content-type'`` is a string defining the content type of the given file and ``custom_headers`` a dict-like object containing additional headers to add for the file. :param auth: (optional) Auth tuple to enable Basic/Digest/Custom HTTP Auth. :param timeout: (optional) How many seconds to wait for the server to send data before giving up, as a float, or a :ref:`(connect timeout, read timeout) &lt;timeouts&gt;` tuple. :type timeout: float or tuple :param allow_redirects: (optional) Boolean. Enable/disable GET/OPTIONS/POST/PUT/PATCH/DELETE/HEAD redirection. Defaults to ``True``. :type allow_redirects: bool :param proxies: (optional) Dictionary mapping protocol to the URL of the proxy. :param verify: (optional) Either a boolean, in which case it controls whether we verify the server's TLS certificate, or a string, in which case it must be a path to a CA bundle to use. Defaults to ``True``. :param stream: (optional) if ``False``, the response content will be immediately downloaded. :param cert: (optional) if String, path to ssl client cert file (.pem). If Tuple, ('cert', 'key') pair. :return: :class:`Response &lt;Response&gt;` object :rtype: requests.Response Usage:: &gt;&gt;&gt; import requests &gt;&gt;&gt; req = requests.request('GET', 'http://httpbin.org/get') &lt;Response [200]&gt; """ # By using the 'with' statement we are sure the session is closed, thus we # avoid leaving sockets open which can trigger a ResourceWarning in some # cases, and look like a memory leak in others. with sessions.Session() as session: return session.request(method=method, url=url, **kwargs)]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ·˜å®signåŠ å¯†ç®—æ³•]]></title>
      <url>%2F2018%2F08%2F14%2F%E6%B7%98%E5%AE%9Dsign%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åäºŒç¯‡åŽŸåˆ›æ–‡ç«  æ·˜å®signåŠ å¯†ç®—æ³• æ·˜å®signåŠ å¯†ç®—æ³•æ·˜å®å¯¹äºŽh5çš„è®¿é—®é‡‡ç”¨äº†å’Œå®¢æˆ·ç«¯ä¸åŒçš„æ–¹å¼ï¼Œç”±äºŽåœ¨h5çš„jsä»£ç ä¸­ä¿å­˜appsercretå…·æœ‰è¾ƒé«˜çš„é£Žé™©ï¼Œmtopé‡‡ç”¨äº†éšæœºåˆ†é…ä»¤ç‰Œçš„æ–¹å¼ï¼Œä¸ºæ¯ä¸ªè®¿é—®ç«¯åˆ†é…ä¸€ä¸ªtokenï¼Œä¿å­˜åœ¨ç”¨æˆ·çš„cookieä¸­ï¼Œé€šè¿‡cookieå¸¦å›žæœåŠ¡ç«¯åˆ†é…çš„token, å®¢æˆ·ç«¯åˆ©ç”¨åˆ†é…çš„tokenå¯¹è¯·æ±‚çš„URLå‚æ•°ç”Ÿæˆæ‘˜è¦å€¼sign, MTOPåˆ©ç”¨è¿™ä¸ªæ‘˜ç”¨å€¼å’Œcookieä¸­çš„tokenæ¥é˜²æ­¢URLç¯¡æ”¹ã€‚ æµç¨‹ å½“æœ¬åœ°cookieä¸­çš„tokenä¸ºç©ºæ—¶ï¼ˆé€šå¸¸æ˜¯ç¬¬ä¸€æ¬¡è®¿é—®ï¼‰ï¼Œmtopä¼šæ”¶åˆ°â€FAIL_SYS_TOKEN_EXOIRED:: ä»¤ç‰Œè¿‡æœŸâ€œè¿™ä¸ªé”™è¯¯åº”ç­”ï¼ŒåŒæ—¶mtopä¼šç”Ÿæˆtokenå†™å…¥cookieä¸­ï¼ˆresponse.cookiesï¼‰ã€‚ ç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œjsé€šè¿‡è¯»å–cookieä¸­çš„tokenå€¼ï¼ŒæŒ‰ç…§çº¦å®šçš„ç®—æ³•ç”Ÿæˆsign, signåœ¨mtopçš„è¯·æ±‚ä¸­å¸¦ä¸Šï¼Œmtopé€šè¿‡cookieä¸­å’Œtokenç”¨åŒæ ·çš„æ–¹å¼è®¡ç®—å‡ºsign,ä¸Žè¯·æ±‚çš„signè¿›è¡Œæ¯”è¾ƒï¼Œæ£€æŸ¥é€šè¿‡å°†è¿”å›žapiçš„åº”ç­”ï¼Œå¤±è´¥æç¤ºâ€œFAIL_SYS_ILLEGAL_ACCESS:: éžæ³•è¯·æ±‚â€ cookieä¸­çš„tokenæ˜¯æœ‰æ—¶æ•ˆæ€§çš„ï¼Œé‡åˆ°tokenå¤±æ•ˆæ—¶ï¼Œå°†æ”¶åˆ°åº”ç­”â€FAIL_SYS_TOKEN_EXOIRED:: ä»¤ç‰Œè¿‡æœŸâ€, åŒæ—¶ä¼šå†™å…¥æ–°çš„token,jsåˆ©ç”¨æ–°çš„tokené‡æ–°è®¡ç®—signå¹¶é‡å‘è¯·æ±‚ã€‚ å…³äºŽcookieä¸­çš„tokençš„è‡ªæˆ‘æ£€æŸ¥ï¼Œç”±äºŽtokenåœ¨cookieä¸­æ˜¯æ˜Žæ–‡çš„ï¼Œå¯èƒ½ä¼šè¢«ä»¿å†’ï¼Œåœ¨è¾“å‡ºçš„cookieä¸­åŒ…å«ä¸€ä¸ªç”¨éžå¯¹ç§°å¯†é’¥çš„å…¬é’¥åŠ å¯†åŽçš„token, MTOPåœ¨æ¯æ¬¡è¯·æ±‚æ—¶ä¼šå…ˆæ£€æŸ¥cookieä¸­çš„tokenæ˜¯å¦æ˜¯ç”±æœåŠ¡ç«¯åˆ†é…å‡ºåŽ»çš„ï¼ˆåˆ©ç”¨åŠ å¯†åŽçš„tokenå’Œç§é’¥è¿˜åŽŸtokenï¼Œä¸Žå›žä¼ çš„æ˜Žæ–‡tokenæ¯”è¾ƒï¼‰ sign ç”Ÿæˆå…³äºŽsignçš„ç”Ÿæˆå…¬å¼ï¼š md5Hex(token&amp;t&amp;appKey&amp;data) å¦‚ï¼šmd5Hex(â€œ645d1f414d4914297dfaab40f3f76016 &amp;1234&amp;4272&amp;{â€œitemNumIdâ€:â€1500011132496â€}â€) sign=d2b2f818a03496b296b899a230c03abd tokenå…³äºŽcookieçš„æœ‰æ•ˆæ—¶é•¿ï¼Œcookieçš„æœ‰æ•ˆæ—¶é•¿ä¸º7å¤©ï¼Œä½†æ˜¯tokençš„æœ‰æ•ˆæ—¶é•¿ç›®å‰ä¸º60åˆ†é’Ÿ_m_h5_tk: æ ¼å¼ä¸º æ˜Žæ–‡token_expireTime, ä»Žresponse.cookieså¤„èŽ·å–ï¼Œå¦‚ï¼š 2fcd2baa62fc60f73c0487a9f8a0a9d1_1362559577301 tokenå°±æ˜¯2fcd2baa62fc60f73c0487a9f8a0a9d1 tå¾ˆç®€å•ï¼Œå³æ—¶é—´æˆ³ int(time.time()*1000) appKeyä¸€èˆ¬æ˜¯å›ºå®šæ•°å€¼ dataä¸€èˆ¬æ˜¯æäº¤çš„å‚æ•° example1234567891011121314151617181920212223242526import requestsheaders = &#123; 'accept-encoding': 'gzip, deflate, br', 'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8,zh-TW;q=0.7', 'user-agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X) AppleWebKit/602.1.50 (KHTML, like Gecko) CriOS/56.0.2924.75 Mobile/14E5239e Safari/602.1', 'accept': '*/*', 'referer': 'https://h5.m.taobao.com/?sprefer=sypc00', 'authority': 'h5api.m.taobao.com', 'cookie': 't=cff5759b3198bafb639030a7296d6bff; cna=OOz3EwDBHU8CAS9eVNkZGaaY; thw=cn; _m_h5_tk=4dab06478749cf71bcb31296c169e46f_1534260967070; _m_h5_tk_enc=eb5abdfc8a3e52d0f7982d2ab34eb471; isg=BH9_A4W7GMQHLxzbVJKP32QcDlqleywDp44sWxFMGy51IJ-iGTRjVv02ZvbeeKt-',&#125;params = ( ('jsv', '2.4.11'), ('appKey', '12574478'), ('t', '1534253767277'), ('sign', '12c6fac6a03cf98c8f912413feeaeaaf'), ('api', 'mtop.taobao.wireless.home.load'), ('v', '1.0'), ('type', 'jsonp'), ('dataType', 'jsonp'), ('callback', 'mtopjsonp2'), ('data', '&#123;"containerId":"main","ext":"&#123;\\"h5_platform\\":\\"h5\\",\\"h5_ttid\\":\\"60000@taobao_h5_1.0.0\\"&#125;"&#125;'),)response = requests.get('https://h5api.m.taobao.com/h5/mtop.taobao.wireless.home.load/1.0/', headers=headers, params=params) å¦‚ä½•å¯»æ‰¾çœ‹ä¸‹é¢è¿™æ®µjs 1234567891011121314151617# https://g.alicdn.com/hollywood/hollywood-lib/2.0.2/mtop.jsif (d.H5Request === !0) &#123; var f = "//" + (d.prefix ? d.prefix + "." : "") + (d.subDomain ? d.subDomain + "." : "") + d.mainDomain + "/h5/" + c.api.toLowerCase() + "/" + c.v.toLowerCase() + "/" , g = c.appKey || ("waptest" === d.subDomain ? "4272" : "12574478") , i = (new Date).getTime() , j = h(d.token + "&amp;" + i + "&amp;" + g + "&amp;" + c.data) , k = &#123; jsv: w, appKey: g, t: i, sign: j &#125; , l = &#123; data: c.data, ua: c.ua &#125;; ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚ä½•å¯»æ‰¾ï¼Œç­”æ¡ˆæ˜¯jsæ–­ç‚¹ï¼Œä¸€æ­¥æ­¥è°ƒè¯•ã€‚ æœ‰å…´è¶£çš„å¯ä»¥æŒç»­å…³æ³¨ï¼Œä»¥åŽä¼šæ·±å…¥ã€‚ å¥½ä¹…éƒ½æ²¡æ³•ä¸œè¥¿äº†ï¼Œä¸»è¦æ˜¯æœ€è¿‘å¤ªå¿™ï¼ŒåŠ ç­æ¯”è¾ƒå¤šï¼›è‡ªå·±ä¹Ÿå˜æ‡’äº†ï¼Œä¹Ÿåœ¨å­¦ä¸€äº›æ–°ä¸œè¥¿ï¼Œå°±ä¸çŸ¥é“å†™ä»€ä¹ˆå¥½ï¼Œä»¥åŽè¿˜æ˜¯å‹¤å¿«ç‚¹å§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonå¤šçº¿ç¨‹ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2018%2F07%2F28%2FPython%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
      <content type="text"><![CDATA[1è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  è®°å½•è‡ªå·±å¯¹å¤šçº¿ç¨‹çš„ç†è§£ (à¹‘â€¢ . â€¢à¹‘) çº¿ç¨‹ä¸Žå½±åˆ†èº«å¤šçº¿ç¨‹å°±æ˜¯é¸£äººçš„å½±åˆ†èº«ä¹‹æœ¯ï¼Œå¯èƒ½ä¸å¤§æ°å½“ï¼Œä½†æ˜¯éžå¸¸å®¹æ˜“ç†è§£ã€‚ å¹³æ—¶ä¸€ä¸ªé¸£äººä¼šä¸€ä¸ªäººï¼Œä½†æ˜¯é‡åˆ°å¼ºæ•Œæ—¶ï¼Œä»–ä¼šä½¿ç”¨å½±åˆ†èº«ä¹‹æœ¯ï¼Œå¬å”¤è‡ªå·±çš„å…„å¼Ÿæ¥å¸®åŠ©ä»–ä¸€èµ·æ¥æˆ˜æ–—ã€‚è¿™æ ·ï¼Œä»–å°±ä»Žä¸€ä¸ªäººæˆ˜æ–—å˜æˆå¤šä¸ªäººæˆ˜æ–—ã€‚ å¤šçº¿ç¨‹ä¹Ÿæ˜¯è¿™æ ·ï¼Œå¹³æ—¶ä¸€ä¸ªçº¿ç¨‹åŽ»åšæŸä»¶äº‹ï¼Œå½“ä½¿ç”¨å¤šçº¿ç¨‹åŽï¼Œå°±ä¼šæœ‰å¾ˆå¤šä¸ªçº¿ç¨‹æŒ‰ç…§å‘½ä»¤åŽ»åšäº‹ï¼Œå°±åƒå½±åˆ†èº«ä¸€æ ·ã€‚ Pythonä½¿ç”¨é¸£äººå’Œä½¿ç”¨éœ€è¦å…ˆç»“å° Python ä¸­éœ€è¦å…ˆè°ƒç”¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 123456789import threadingdef shadow(num): print('äº§ç”Ÿäº†ç¬¬&#123;&#125;ä¸ªåˆ†èº«...'.format(num))for i in range(1, 6): t = threading.Thread(target=shadow, args=(i,)) t.start() t.join() Output 12345äº§ç”Ÿäº†ç¬¬1ä¸ªåˆ†èº«...äº§ç”Ÿäº†ç¬¬2ä¸ªåˆ†èº«...äº§ç”Ÿäº†ç¬¬3ä¸ªåˆ†èº«...äº§ç”Ÿäº†ç¬¬4ä¸ªåˆ†èº«...äº§ç”Ÿäº†ç¬¬5ä¸ªåˆ†èº«... å¯ä»¥çœ‹å‡ºç”¨æ³•éžå¸¸ç®€å•ï¼Œåªéœ€è¦å…ˆå¯¼å…¥threadingæ¨¡å—ï¼Œç„¶åŽå®žä¾‹åŒ–ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œæ³¨æ„argsæ˜¯å…ƒç¥– t = threading.Thread(target=shadow, args=(i,)) çº¿ç¨‹è¢«åˆ›å»ºä¹‹åŽå¹¶ä¸ä¼šé©¬ä¸Šè¿è¡Œï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ start() ï¼Œ join() è®©è°ƒç”¨å®ƒçš„çº¿ç¨‹ä¸€ç›´ç­‰å¾…ç›´åˆ°æ‰§è¡Œç»“æŸï¼š 12t.start()t.join() æŸ¥çœ‹çº¿ç¨‹åå­—ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªçŸ¥é“äº§ç”Ÿäº†å¤šä¸ªçº¿ç¨‹ï¼Œä½†è¿˜æ˜¯å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œå¦‚æžœæŸä¸ªçº¿ç¨‹å‡ºé”™äº†ï¼Œæˆ‘ä»¬æ²¡æ³•åŽ»è¿½è¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™çº¿ç¨‹åŠ ä¸Šåå­—ã€‚ 123456789import threadingdef shadow(num): print('&#123;&#125;äº§ç”Ÿäº†ç¬¬&#123;&#125;ä¸ªåˆ†èº«...'.format(threading.currentThread().getName(), num))for i in range(1, 6): t = threading.Thread(target=shadow, args=(i,), name='ç¬¬&#123;&#125;ä¸ªé¸£äºº'.format(i)) t.start() t.join() Out: 12345ç¬¬1ä¸ªé¸£äººäº§ç”Ÿäº†ç¬¬1ä¸ªåˆ†èº«...ç¬¬2ä¸ªé¸£äººäº§ç”Ÿäº†ç¬¬2ä¸ªåˆ†èº«...ç¬¬3ä¸ªé¸£äººäº§ç”Ÿäº†ç¬¬3ä¸ªåˆ†èº«...ç¬¬4ä¸ªé¸£äººäº§ç”Ÿäº†ç¬¬4ä¸ªåˆ†èº«...ç¬¬5ä¸ªé¸£äººäº§ç”Ÿäº†ç¬¬5ä¸ªåˆ†èº«... å½“ç„¶ï¼Œä½ å¯ä»¥è¿™æ · 1234567891011import threadingdef shadow(num): print('&#123;&#125;äº§ç”Ÿäº†ç¬¬&#123;&#125;ä¸ªåˆ†èº«...'.format(threading.currentThread().getName(), num))for i in range(1, 6): t = threading.Thread(target=shadow, args=(i,)) t.start() t.join()print(threading.currentThread().getName()) Out 123456Thread-1äº§ç”Ÿäº†ç¬¬1ä¸ªåˆ†èº«...Thread-2äº§ç”Ÿäº†ç¬¬2ä¸ªåˆ†èº«...Thread-3äº§ç”Ÿäº†ç¬¬3ä¸ªåˆ†èº«...Thread-4äº§ç”Ÿäº†ç¬¬4ä¸ªåˆ†èº«...Thread-5äº§ç”Ÿäº†ç¬¬5ä¸ªåˆ†èº«...MainThread ä½ å¯ä»¥çœ‹åˆ°åœ¨æ‰€æœ‰åˆ›å»ºçš„çº¿ç¨‹ç»“æŸåŽï¼Œæˆ‘ä»¬æ‰“å°å½“å‰çº¿ç¨‹åå­—ï¼Œå°±æ˜¯ä¸»çº¿ç¨‹MainThread ä»€ä¹ˆæ—¶å€™ä½¿ç”¨joinåˆšå¼€å§‹å­¦å¤šçº¿ç¨‹æ—¶ï¼Œæœ‰ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¾ˆä¹…ï¼Œå°±æ˜¯ä»€ä¹ˆæ—¶å€™ä½¿ç”¨join() ç¼•ä¸€ç¼•æ­¥éª¤ï¼š ä¸»çº¿ç¨‹ä¸­åˆ›å»ºå­çº¿ç¨‹t å¼€å§‹çº¿ç¨‹t.star() è°ƒç”¨t.join() é˜»å¡žï¼šç­‰å¾…å­çº¿ç¨‹tç»“æŸåŽï¼Œå†æ‰§è¡ŒæŽ¥ä¸‹æ¥çš„ä»»åŠ¡ ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨äº†join()åŽä¼šé˜»å¡žå½“å‰çš„çº¿ç¨‹ï¼Œåªæœ‰è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åŽæ‰ä¼šæŽ¥ç€èµ°ã€‚è¦æ˜¯ä¸€ç›´ä¸ç»“æŸå‘¢ï¼Ÿä½ å¯ä»¥åŠ ä¸Šè¶…æ—¶æ—¶é—´ï¼Œå¦‚t.join(timeout=10) åŽç»­é¸£äººä½¿ç”¨å½±åˆ†èº«åŽï¼Œäº§ç”Ÿäº†Aã€Bã€Cä¸‰ä¸ªå°é¸£äººï¼Œé¸£äººå¯ä»¥ä½¿ç”¨join()æ–¹æ³•ï¼Œè®©Båœ¨Aè€—å°½æŸ¥å…‹æ‹‰ä¹‹åŽå†è¿›è¡Œæ”»å‡»ï¼Œå¦‚æžœæ²¡æœ‰ä½¿ç”¨join()ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¯è¿™æ ·çš„åœºæ™¯ï¼Œå¤§å®¶ä¸€èµ·ä¸Š è¿™ä¸ªæ—¶å€™å¦‚æžœé¸£äººå‘½ä»¤Aã€BåŒæ—¶åŽ»å†™å®¶åº­ä½œä¸šï¼Œé‚£ä¹ˆå¯èƒ½ä¼šäº§ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼ŸAå…ˆå†™è¿˜æ˜¯Bå…ˆå†™ï¼Œå¤§å®¶å¯ä»¥æƒ³æƒ³ã€‚ ä¸‹ä¸€æœŸä¼šè¯´è¯´ é”]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸ºä»€ä¹ˆSeleniumç‚¹ä¸åˆ°å…ƒç´ ]]></title>
      <url>%2F2018%2F07%2F24%2F%E4%B8%BA%E4%BB%80%E4%B9%88Selenium%E7%82%B9%E4%B8%8D%E5%88%B0%E5%85%83%E7%B4%A0%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­åç¯‡åŽŸåˆ›æ–‡ç«  æ˜Žæ˜Žå¯ä»¥æ˜¾ç¤ºï¼Œä¸ºä»€ä¹ˆå°±æ˜¯ç‚¹ä¸åˆ°å‘¢ (à¹‘â€¢ . â€¢à¹‘) æœ€è¿‘åšäº†è®¸å¤šç™»é™†é¡¹ç›®ï¼Œæˆ‘ä¼šä¼˜å…ˆé€‰æ‹©ä½¿ç”¨requestsæ¥æ¨¡æ‹Ÿè¯·æ±‚ï¼Œä½†æ˜¯æœ‰äº›å‚æ•°å®žåœ¨æ˜¯å¾ˆéš¾èŽ·å–ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä¼šä½¿ç”¨Seleniumï¼Œä¹Ÿè¿˜æ˜¯é‡åˆ°äº†å„ç§å‘ï¼Œä¹Ÿç®—æ˜¯è§è¯†åˆ°äº†å¾ˆå¤šçš„éªŒè¯æŽªæ–½ã€‚ ä»Šå¤©è¯´è¯´å¦‚ä½•è§£å†³seleniumç‚¹é€‰ä¸åˆ°æ•°æ®çš„é—®é¢˜ã€‚ ç­‰å¾…è¿™è¿˜æ˜¯æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µï¼ŒæŽ¨èæœ€å¤šçš„æ˜¯ä½¿ç”¨æ˜¾ç¤ºç­‰å¾…ï¼š 12345678910111213from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as ECdriver = webdriver.Firefox()driver.get("http://somedomain/url_that_delay_loading")try: element = WebDriverWait(driver,10).until( EC.presence_of_element_located((By.ID,"myDynamicElement")) )finally: driver.quit() è¿™æ®µä»£ç ä¼šç­‰å¾…10ç§’ï¼Œå¦‚æžœ10ç§’å†…æ‰¾åˆ°å…ƒç´ åˆ™ç«‹å³è¿”å›žï¼Œå¦åˆ™ä¼šæŠ›å‡ºTimeoutExceptionå¼‚å¸¸ã€‚ ä½†æ˜¯æˆ‘æ¯”è¾ƒæ‡’ï¼Œå› ä¸ºtime.sleep()å¯ä»¥è¾¾åˆ°åŒæ ·æ•ˆæžœã€‚ é¼ æ ‡äº‹ä»¶å®˜æ–¹æŠŠå®ƒå«åšâ€œè¡Œä¸ºé“¾â€ã€‚ActionChainså¯ä»¥å®Œæˆç®€å•çš„äº¤äº’è¡Œä¸ºï¼Œä¾‹å¦‚é¼ æ ‡ç§»åŠ¨ï¼Œé¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼Œé”®ç›˜è¾“å…¥ï¼Œä»¥åŠå†…å®¹èœå•äº¤äº’ã€‚ 123456789101112131415161718192021222324252627282930click(on_element=None) â€”â€”å•å‡»é¼ æ ‡å·¦é”®click_and_hold(on_element=None) â€”â€”ç‚¹å‡»é¼ æ ‡å·¦é”®ï¼Œä¸æ¾å¼€context_click(on_element=None) â€”â€”ç‚¹å‡»é¼ æ ‡å³é”®double_click(on_element=None) â€”â€”åŒå‡»é¼ æ ‡å·¦é”®drag_and_drop(source, target) â€”â€”æ‹–æ‹½åˆ°æŸä¸ªå…ƒç´ ç„¶åŽæ¾å¼€drag_and_drop_by_offset(source, xoffset, yoffset) â€”â€”æ‹–æ‹½åˆ°æŸä¸ªåæ ‡ç„¶åŽæ¾å¼€key_down(value, element=None) â€”â€”æŒ‰ä¸‹æŸä¸ªé”®ç›˜ä¸Šçš„é”®key_up(value, element=None) â€”â€”æ¾å¼€æŸä¸ªé”®move_by_offset(xoffset, yoffset) â€”â€”é¼ æ ‡ä»Žå½“å‰ä½ç½®ç§»åŠ¨åˆ°æŸä¸ªåæ ‡move_to_element(to_element) â€”â€”é¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ªå…ƒç´ move_to_element_with_offset(to_element, xoffset, yoffset) â€”â€”ç§»åŠ¨åˆ°è·æŸä¸ªå…ƒç´ ï¼ˆå·¦ä¸Šè§’åæ ‡ï¼‰å¤šå°‘è·ç¦»çš„ä½ç½®perform() â€”â€”æ‰§è¡Œé“¾ä¸­çš„æ‰€æœ‰åŠ¨ä½œrelease(on_element=None) â€”â€”åœ¨æŸä¸ªå…ƒç´ ä½ç½®æ¾å¼€é¼ æ ‡å·¦é”®send_keys(*keys_to_send) â€”â€”å‘é€æŸä¸ªé”®åˆ°å½“å‰ç„¦ç‚¹çš„å…ƒç´ send_keys_to_element(element, *keys_to_send) â€”â€”å‘é€æŸä¸ªé”®åˆ°æŒ‡å®šå…ƒç´  æ·±å…¥äº†è§£å¯ä»¥å‚è€ƒ https://blog.csdn.net/huilan_same/article/details/52305176 move_to_element_with_offsetå’Œclick_and_holdä¼šç»å¸¸ç”¨åˆ°ç ´è§£éªŒè¯ç ä¸­ã€‚ è§¦æ‘¸æ“ä½œ (TouchAction)è¯¥äº‹ä»¶ä»…ä»…é’ˆå¯¹ç§»åŠ¨ç«¯ã€è§¦å±ç‰ˆ 12345678910111213flick_element(on_element, xoffset, yoffset, speed) # ä»¥å…ƒç´ ä¸ºèµ·ç‚¹ä»¥ä¸€å®šé€Ÿåº¦å‘ä¸‹æ»‘åŠ¨scroll_from_element(on_element xoffset yoffset) #ä»¥å…ƒç´ ä¸ºèµ·ç‚¹å‘ä¸‹æ»‘åŠ¨double_tap(on_element) #åŒå‡» flick_element(on_element, xoffset, yoffset, speed) #ä»Žå…ƒç´ å¼€å§‹ä»¥æŒ‡å®šçš„é€Ÿåº¦ç§»åŠ¨long_press(on_element) #é•¿æŒ‰ä¸é‡Šæ”¾move(xcoord, ycoord) #ç§»åŠ¨åˆ°æŒ‡å®šçš„ä½ç½®perform() #æ‰§è¡Œé“¾ä¸­çš„æ‰€æœ‰åŠ¨ä½œrelease(xcoord, ycoord) #åœ¨æŸä¸ªä½ç½®æ¾å¼€æ“ä½œscroll(xoffset, yoffset) #æ»šåŠ¨åˆ°æŸä¸ªä½ç½®scroll_from_element(on_element, xoffset, yoffset) #ä»ŽæŸå…ƒç´ å¼€å§‹æ»šåŠ¨åˆ°æŸä¸ªä½ç½®tap(on_element) #å•å‡»tap_and_hold(xcoord, ycoord) #æŸç‚¹æŒ‰ä½ ä¸ºä»€ä¹ˆè¦è¯´åˆ°ç§»åŠ¨ç«¯ï¼Œåœ¨åšç™»é™†æ—¶ï¼Œç§»åŠ¨ç«¯å¾€å¾€ä¼šæ›´åŠ ç®€å•ï¼Œä½†æ˜¯è§¦å±ç‰ˆçš„ç‚¹å‡»å’ŒPCç«¯æ—¶å®Œå…¨ä¸åŒçš„ï¼Œç‚¹å‡»ä¸ŽæŒ‰ä½æ—¶ä¸åŒçš„ã€‚ åœ¨æŸä¸ªé¡¹ç›®æˆ‘æ¢æˆTouchActionåŽï¼Œç¥žå¥‡çš„å‘çŽ°ï¼Œæ³¨å†Œä¸å†éœ€è¦å¤„ç†éªŒè¯ç äº†ï¼ŒçœŸæ˜¯å¤ªæ£’äº†ã€‚ ä½¿ç”¨jså½“ä½ ä½¿ç”¨æµè§ˆå™¨å·²ç»æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œä½¿ç”¨click()æ–¹æ³•ä½†æ˜¯ä¸èµ·ä½œç”¨æ—¶ï¼Œè¿™ä¸ªæ—¶å€™å»ºè®®å°è¯•jsï¼Œä¾‹å¦‚åœ¨æˆ‘çš„ä¸»é¡µ https://www.zhihu.com/people/cuishite/activitiesï¼Œç‚¹å‡» â€œæŸ¥çœ‹è¯¦ç»†èµ„æ–™â€ 12js = 'document.getElementsByClassName("Button ProfileHeader-expandButton Button--plain")[0].click();'driver.execute_script(js) ä½ å¯ä»¥å…ˆåœ¨æŽ§åˆ¶å°è°ƒè¯• jsé€šå¸¸å¯ä»¥è§£å†³ç»å¤§å¤šæ˜¯é—®é¢˜ï¼Œå¦‚æžœè¿˜æ˜¯è§£å†³ä¸äº†ï¼Œé‚£ä½ å¯èƒ½å’Œæˆ‘é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼Œæˆ‘åœ¨å¤„ç†æŸç§»åŠ¨ç«¯ç½‘ç«™ç™»é™†ï¼Œå¤„ç†å¦‚ä¸‹éªŒè¯ç æ—¶ï¼Œæˆ‘ä¼šä½¿ç”¨åˆ°move_to_element_with_offsetï¼Œè¯¥æ–¹æ³•æ˜¯â€œç§»åŠ¨åˆ°è·æŸä¸ªå…ƒç´ ï¼ˆå·¦ä¸Šè§’åæ ‡ï¼‰å¤šå°‘è·ç¦»çš„ä½ç½®â€ã€‚ è®¡ç®—å‡ºåæ ‡åŽï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚action.move_to_element_with_offset(element, width, height).click().perform()ï¼Œç„¶è€Œå®žé™…ä¸Šé—®é¢˜å¹¶æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå¤šæ¬¡ç‚¹å‡»å¤±æ•ˆã€‚å…·ä½“çš„æœ‰æ—¶é—´å†è¯´ã€‚ å®žç”¨æ–¹æ³•æå–seleniumçš„cookies ä»‹ç»æŠŠseleniumçš„cookiesèˆ¹ä½“ç»™requestsä½¿ç”¨çš„æ–¹æ³•ï¼š 12345cookies = driver.get_cookies()s = requests.Session()for cookie in cookies: s.cookies.set(cookie['name'], cookie['value']) How do I load session and cookies from Selenium browser to requests library in Python? å…ƒç´ æˆªå›¾æ–¹æ³• 1234567891011121314151617181920212223from selenium import webdriverfrom PIL import Imagefox = webdriver.Firefox()fox.get('https://stackoverflow.com/')# now that we have the preliminary stuff out of the way time to get that image :Delement = fox.find_element_by_id('hlogo') # find part of the page you want image oflocation = element.locationsize = element.sizefox.save_screenshot('screenshot.png') # saves screenshot of entire pagefox.quit()im = Image.open('screenshot.png') # uses PIL library to open image in memoryleft = location['x']top = location['y']right = location['x'] + size['width']bottom = location['y'] + size['height']im = im.crop((left, top, right, bottom)) # defines crop pointsim.save('screenshot.png') # saves new cropped image selenium cannot screenshot a web element æœ€åŽæŽ¨èä¸€ä¸ªç¥žå™¨ appium/python-client è‡³äºŽéªŒè¯ç éƒ¨åˆ†ï¼ŒçŽ°åœ¨ä¸»è¦è¿˜æ˜¯é ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œå¹¶æ²¡æœ‰è‡ªå·±å°è¯•æœºå™¨å­¦ä¹ ç­‰æ–¹æ³•å¤„ç†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨Seleniumä¸ŽRequestsæ¨¡æ‹Ÿç™»é™†]]></title>
      <url>%2F2018%2F07%2F17%2F%E4%BD%BF%E7%94%A8Selenium%E4%B8%8ERequests%E6%A8%A1%E6%8B%9F%E7%99%BB%E9%99%86%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åä¹ç¯‡åŽŸåˆ›æ–‡ç«  æ¨¡æ‹Ÿç™»é™†çš„ä¸¤ç§æ–¹å¼ï¼Œä½ å–œæ¬¢å“ªç§ (à¹‘â€¢ . â€¢à¹‘) æœ¬æœŸè®²ä¸€è®²æ¨¡æ‹Ÿç™»å½•ç›¸å…³çš„ä¸œè¥¿ï¼Œç›®æ ‡ç½‘ç«™æ˜¯Github ç®€å•çš„Selniumæƒ³è¯´è¯´ç®€å•çš„æ–¹æ³•ï¼Œä½¿ç”¨æµè§ˆå™¨ç™»å½•ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å‚»ç“œæ“ä½œäº†ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç™»å½•è®¾è®¡çš„å¾ˆç®€å•ï¼Œæ²¡æœ‰éªŒè¯ç ä»€ä¹ˆçš„ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122#!/usr/bin/env python# -*- coding: utf-8 -*-import timefrom selenium import webdriverdriver = webdriver.Chrome()driver.maximize_window()def login(account, password): driver.get('https://github.com/login') time.sleep(2) driver.find_element_by_id('login_field').send_keys(account) driver.find_element_by_id('password').send_keys(password) driver.find_element_by_xpath('//input[@class="btn btn-primary btn-block"]').click() # do whatever you wantif __name__ == '__main__': account, password = 'account', 'password' login(account, password) åˆ†æžè¯·æ±‚ä¹‹Requestsæ‰“å¼€F12ï¼Œä½¿ç”¨é”™è¯¯çš„è´¦å·å¯†ç ç™»å½•ï¼Œå¤åˆ¶curl 1curl 'https://github.com/session' -H 'Cookie: has_recent_activity=1; _octo=GH1.1.1477592343.1531820067; logged_in=no; _gh_sess=UEZzYnVCMVlhNkVOdE5rU1hWRFpDbmFlY0UyQ1Y2b3Z4TGw2NFlTMmJLUWk5VENVQ3Q4TWxiSWN5ckEyZXN0MUFkT29XVjQvbWJVbm9RV0JNQmc1TmU0UnBtK0taUXJpcElqUk5PNGZ5TjZOQ2ZPRVR4NU5WQXcrb2xWRnRBMnRPMkRWYzYvWmVGY0FrYU12Q3BVVTY3dXVSblliNG4rWjc2QXVwR2pjQ1pzZXM1MFk1MjU5OUw2WkFLTU1BMzJDWGlTeXliNzNaejlUaW43cWhFNzQ0MFFVVmJ1aEppbzdtQTZkRERmUm5mWExkRDlmWW5lNk9mdlFYb05MQUtubDZBbXFJWjV6eFhic3JiWlRtZ2QxZ2FqZUxnOGFheUgzaXJmc290b0Jma09pRTJZdHZySEVmdVdGZHVBU3ZTVTJRM0pESnE1N1VPRDM0ck9FZzNJZTN5VWljUktyZ3FZQU16THVBeFBXV3BNPS0tSDh4WVV6U2RSNjlBL3FNQ3VaRGxEUT09--71cf0886128d55b42c82cf6f7b76e007ebfdc77b; _ga=GA1.2.57857743.1531820085; _gat=1; tz=Asia%2FShanghai' -H 'Origin: https://github.com' -H 'Accept-Encoding: gzip, deflate, br' -H 'Accept-Language: zh-CN,zh;q=0.9,en;q=0.8' -H 'Upgrade-Insecure-Requests: 1' -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8' -H 'Cache-Control: max-age=0' -H 'Referer: https://github.com/login' -H 'Connection: keep-alive' --data 'commit=Sign+in&amp;utf8=%E2%9C%93&amp;authenticity_token=%2BtgUHwMIxnoHOHNMqQFkLak9mJzrxt%2B4yfFiZaf66WiMB5ZyRaVXq%2BFpZsM%2BtxgaRRX6Fzfezu1IdRqy%2BTGHwg%3D%3D&amp;login=123456788%40gmail.com&amp;password=123456788' --compressed è½¬ä¸ºPythonä»£ç ï¼Œ 12345678910111213141516171819202122232425262728293031323334import requestscookies = &#123; 'has_recent_activity': '1', '_octo': 'GH1.1.1477592343.1531820067', 'logged_in': 'no', '_gh_sess': 'UEZzYnVCMVlhNkVOdE5rU1hWRFpDbmFlY0UyQ1Y2b3Z4TGw2NFlTMmJLUWk5VENVQ3Q4TWxiSWN5ckEyZXN0MUFkT29XVjQvbWJVbm9RV0JNQmc1TmU0UnBtK0taUXJpcElqUk5PNGZ5TjZOQ2ZPRVR4NU5WQXcrb2xWRnRBMnRPMkRWYzYvWmVGY0FrYU12Q3BVVTY3dXVSblliNG4rWjc2QXVwR2pjQ1pzZXM1MFk1MjU5OUw2WkFLTU1BMzJDWGlTeXliNzNaejlUaW43cWhFNzQ0MFFVVmJ1aEppbzdtQTZkRERmUm5mWExkRDlmWW5lNk9mdlFYb05MQUtubDZBbXFJWjV6eFhic3JiWlRtZ2QxZ2FqZUxnOGFheUgzaXJmc290b0Jma09pRTJZdHZySEVmdVdGZHVBU3ZTVTJRM0pESnE1N1VPRDM0ck9FZzNJZTN5VWljUktyZ3FZQU16THVBeFBXV3BNPS0tSDh4WVV6U2RSNjlBL3FNQ3VaRGxEUT09--71cf0886128d55b42c82cf6f7b76e007ebfdc77b', '_ga': 'GA1.2.57857743.1531820085', '_gat': '1', 'tz': 'Asia%2FShanghai',&#125;headers = &#123; 'Origin': 'https://github.com', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36', 'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Cache-Control': 'max-age=0', 'Referer': 'https://github.com/login', 'Connection': 'keep-alive',&#125;data = [ ('commit', 'Sign in'), ('utf8', '\u2713'), ('authenticity_token', '+tgUHwMIxnoHOHNMqQFkLak9mJzrxt+4yfFiZaf66WiMB5ZyRaVXq+FpZsM+txgaRRX6Fzfezu1IdRqy+TGHwg=='), ('login', '123456788@gmail.com'), ('password', '123456788'),]response = requests.post('https://github.com/session', headers=headers, cookies=cookies, data=data) æ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼Œcookieså’Œå‚æ•°ï¼Œå…ˆæ¥çœ‹çœ‹å‚æ•°ï¼Œç¨å¾®ç‰¹åˆ«çš„å°±æ˜¯authenticity_tokenï¼Œæ„Ÿè§‰æ˜¯éªŒè¯ã€‚Ctrl+Shift+Fæ‰“å¼€æœç´¢ï¼Œæœ€ç»ˆåœ¨è¿”å›žçš„htmlä¸­æ‰¾åˆ° 1&lt;!-- '"` --&gt;&lt;!-- &lt;/textarea&gt;&lt;/xmp&gt; --&gt;&lt;/option&gt;&lt;/form&gt;&lt;form action="/session" accept-charset="UTF-8" method="post"&gt;&lt;input name="utf8" type="hidden" value="&amp;#x2713;" /&gt;&lt;input type="hidden" name="authenticity_token" value="CTujn/pHGMQBpEhYcJj9Mn6ChsNSkd5ul8rgNSP/6/KxdZlhS0ABKblsq1pLn6EaQvIGLMzl/IQawaDL8KFjDw==" /&gt; &lt;div class="auth-form-header p-0"&gt; authenticity_tokenè§£å†³äº†ï¼Œä¸‹ä¸€æ­¥æƒ³åŠžæ³•èŽ·å–cookies ç»§ç»­æœç´¢_gh_sessä¸Ž_octoå…³é”®å­—ï¼Œçœ‹åˆ°æœ‰è¿™æ ·ä¸€æ®µjs 1var e, t = void 0, r = void 0, n = this._getCookie("_octo"), a = []; çŒœæµ‹cookiesä¸æ˜¯æœ¬åœ°ç”Ÿæˆï¼ŒæŸ¥çœ‹æ‰“å¼€Githubé¦–é¡µçš„è¯·æ±‚ï¼Œæžœç„¶åœ¨Response Cookiesä¸­æ‰¾åˆ°äº†ç›¸å…³æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨Sessionå°±å¯ä»¥ç»´æŒä¼šè¯äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445#!/usr/bin/env python# -*- coding: utf-8 -*-import reimport requestsheaders = &#123; 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8', 'Connection': 'keep-alive', 'Host': 'github.com', 'Upgrade-Insecure-Requests': '1', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'&#125;s = requests.session()s.headers.update(headers)def get_token(): url = 'https://github.com/login' response = s.get(url) pat = 'name=\"authenticity_token\" value=\"(.*?)\"' authenticity_token = re.findall(pat, response.text)[0] return authenticity_tokendef login(authenticity_token, account, password): payload = &#123; 'commit': 'Sign in', 'utf8': '\u2713', 'authenticity_token': authenticity_token, 'login': account, 'password': password, &#125; url = 'https://github.com/session' response = s.post(url, data=payload) print(response) # do whatever you wantif __name__ == '__main__': account, password = 'account', 'password' authenticity_token = get_token() login(authenticity_token, account, password) å¯¹æ¯”Seleniumï¼š ä¼˜ç‚¹ï¼šç®€å•ã€æ— è„‘ï¼Œä¸ç”¨åˆ†æžå¤æ‚çš„ç½‘é¡µè¯·æ±‚ï¼Œä¸ç”¨ä¿æŒä¼šè¯çŠ¶æ€ ç¼ºç‚¹ï¼šé€Ÿåº¦æ…¢ï¼Œé€Ÿåº¦æ…¢ï¼Œé€Ÿåº¦æ…¢ï¼ˆæŸäº›æƒ…å†µä¸‹ä¼šå‡ºçŽ°jsåŠ è½½ä¸å…¨ï¼‰ Requestsï¼š ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œå¯ä»¥å¢žåŠ è‡ªå·±å¯¹cookiesç™»é™†çš„ç†è§£ ç¼ºç‚¹ï¼šéœ€è¦èŠ±æ—¶é—´å¯»æ‰¾ç›¸å…³å‚æ•° å¦‚æžœå¯¹Githubæ„Ÿå…´è¶£ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ Github API æœ€è¿‘åœ¨ä½¿ç”¨Seleniumå¤„ç†éªŒè¯ç ï¼Œå‘çŽ°å¾ˆå¼ºå¤§ï¼Œå¦‚æžœæ¨¡æ‹Ÿè¯·æ±‚ï¼Œéš¾åº¦ä¼šéžå¸¸å¤§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[è¯´è¯´æœ€è¿‘é‡åˆ°çš„åçˆ¬]]></title>
      <url>%2F2018%2F07%2F10%2F%E8%AF%B4%E8%AF%B4%E6%9C%80%E8%BF%91%E9%81%87%E5%88%B0%E7%9A%84%E5%8F%8D%E7%88%AC%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åå…«ç¯‡åŽŸåˆ›æ–‡ç«  çˆ¬è™«ä¸Žåçˆ¬ (à¹‘â€¢ . â€¢à¹‘) å‚æ•°åŠ å¯†å‚æ•°åŠ å¯†æŒ‡çš„æ˜¯åœ¨è¯·æ±‚ä¸­éœ€è¦åŠ ä¸Šç±»ä¼¼tokenã€uuid å­—æ®µï¼Œä¾‹å¦‚åœ¨æŸä¸ªè¯·æ±‚ä¸­query string parametersä¸­æœ‰_tokenå’Œuuidã€customerKeyç­‰å­—æ®µï¼Œ 123_token:eJyN0l9L40AQAPDvsg8+hWZ2uuid:59851b5e-92b4-f1f5-19e2-d8148bf7ecustomerKey:0356982437 è§£å†³æ–¹æ³• åˆšå¼€å§‹é‡åˆ°è¿™ä¸ªæ˜¯ä¸€è„¸æ‡µé€¼çš„ï¼ŒéªŒè¯å‘çŽ°æœ‰äº›å‚æ•°ä¸æ˜¯å¿…é¡»çš„ï¼Œæ¯”å¦‚uuidï¼Œuuidåœ¨ç»´åŸºç™¾ç§‘ä¸Šæ˜¯ï¼šé€šç”¨å”¯ä¸€è¯†åˆ«ç ï¼Œä¼°è®¡æ²¡å•¥ä½œç”¨ï¼Œpythonä¹Ÿæœ‰å†…ç½®çš„uuidç”Ÿæˆåº“ uuid â€” UUID objects according to RFC 4122 é—®äº†å‰ç«¯å¤§ä½¬ï¼Œå¾—çŸ¥éœ€è¦åœ¨jsä¸­æ‰“æ–­ç‚¹ï¼Œä¸€ç‚¹ç‚¹è°ƒè¯•ï¼Œæœ€åŽç»ˆäºŽè§£å†³ï¼Œ_tokenæ˜¯äºŒæ¬¡åŠ å¯†çš„ã€‚ ç»™å¤§å®¶çœ‹ä¸€ä¸‹è¯¥ç½‘ç«™çš„éƒ¨åˆ†ä»£ç ã€‚çœ‹çœ‹æè¿°ï¼šèŽ·å¾—åçˆ¬è™«çš„_toke 123456789101112131415161718192021222324252627/** * èŽ·å¾—åçˆ¬è™«çš„_token * @param &#123;*&#125; url * @param &#123;*&#125; queryParams */function getRohrToken(host, queryParams) &#123; if (window.Rohr_Opt &amp;&amp; window.Rohr_Opt.reload) &#123; var rohr = window.Rohr_Opt; var _token = ''; var params = queryParams if (typeof params == 'string' &amp;&amp; params.indexOf('_fb_=') !== -1) &#123; params = '' &#125; var queryString = toQueryString(params); var _url = location.protocol + host + '?' + queryString; try &#123; _token = rohr.reload(_url) || ''; &#125; catch (e) &#123; console.log('èŽ·å–tokenå¤±è´¥:' + e) &#125; return _token; &#125;;&#125; å…³äºŽå¦‚ä½•è°ƒè¯•ï¼Œè¿™é‡Œæœ‰æ•™ç¨‹ï¼Œè°ƒè¯• JavaScript è„šæœ¬ è¿™é‡Œè¿˜æœ‰å¦ä¸€ç§appæŠ“åŒ…åŠ å¯†æƒ…å†µï¼Œæš‚æ—¶è¿˜æ²¡æŽ¥è§¦è¿‡ï¼Œå¬è¿‡æ˜¯éœ€è¦åç¼–è¯‘apkåŒ…ï¼Œç„¶åŽé˜…è¯»ä»£ç ã€‚ ç™»å½•é—®é¢˜å¾ˆå¤šç½‘ç«™æ•°æ®æ˜¯ç™»å½•å¯è§ï¼Œé‚£ä¹ˆå°±å¿…é¡»è¦å¼€å‘è¯¥ç½‘ç«™çš„ç™»å½•ç³»ç»Ÿäº†ã€‚ ç™»å½•å¯èƒ½ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼š ç™»å½•è¿‡ç¨‹ä¸­é‡åˆ°çš„éªŒè¯ç ï¼ˆä¸‹é¢ä¼šè¯´ï¼‰ cookiesæŒä¹…åŒ–é—®é¢˜ è´¦å·è¢«å°ç¦é—®é¢˜ è§£å†³æ–¹æ³• ç™»å½•è´¦å·èŽ·å¾—cookiesåŽï¼Œç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œcookieså°±å¯èƒ½ä¼šå¤±æ•ˆï¼Œå…·ä½“ç½‘ç«™æƒ…å†µä¸åŒï¼Œè¿™æ—¶å€™å°±å¿…é¡»æœ‰ä¸ªè„šæœ¬ï¼Œæ¥ä¿è¯cookiesæœ‰æ•ˆ è´¦å·åšå‡ºä¸€äº›è·Ÿæ­£å¸¸ç”¨æˆ·ä¸åŒçš„æ“ä½œå°±ä¼šäº§ç”Ÿå¼‚å¸¸ï¼Œåˆ«äººå¾ˆå®¹æ˜“å°±å‘çŽ°ã€‚æ‰€ä»¥å°±è®©ä½ çš„è´¦å·åƒæ­£å¸¸äººä¸€æ ·ã€‚ æœ€è¿‘çœ‹åˆ°æœ‰äººå†é—®è±†ç“£ç™»å½•é‡‡é›†å½±è¯„å¯¼è‡´è¢«å°å·çš„äº‹æƒ…ï¼Œè±†ç“£æˆ‘ä»¥å‰ä¹Ÿè¢«å°è¿‡ï¼Œåˆ°çŽ°åœ¨ä¹Ÿæ²¡æœ‰è§£å° 12ä¾æ®ç”¨æˆ·ç®¡ç†ç»†åˆ™ï¼Œæ­¤å¸å·å·²è¢«æ°¸ä¹…åœç”¨ã€‚åœç”¨æ—¶é—´:2017-09-29å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‘é€é‚®ä»¶åˆ°help@douban.com æˆ‘çš„å»ºè®®æ˜¯ï¼š æœ‰èƒ½åŠ›çš„å¤šæ³¨å†Œè´¦å·ï¼Œè´¦å·è¢«å°äº†å°±å†åŽ»æ³¨å†Œå‘— æ‰‹æœºappæŠ“åŒ…ï¼Œappä¸éœ€è¦ç™»å½•ï¼Œè€Œä¸”å¯ä»¥æŒç»­æŠ“æœ€æ–°è¯„è®º å›¾å½¢éªŒè¯ç éªŒè¯ç ä¸€ç›´æ˜¯åçˆ¬è™«åˆ©å™¨ï¼Œä»Žç®€å•çš„æ•°å­—è¯†åˆ«ï¼Œåˆ°å¤æ‚çš„æ»‘åŠ¨æ‹¼å›¾ã€å›¾ç‰‡ç‚¹é€‰ç­‰ç­‰ã€‚æœ‰å…´è¶£çš„æ¥è¯•è¯•ç ´è§£ ç½‘æ˜“äº‘æ˜“ç›¾ï¼Œæ„Ÿè§‰å¾ˆå¤´ç–¼ã€‚ è§£å†³æ–¹æ³• ä¾‹å¦‚ä¸Šå›¾ï¼Œè¿™æ˜¯æˆ‘çŽ°åœ¨é‡åˆ°çš„ä¸€ç§éªŒè¯ç æƒ…å†µï¼Œä¾æ¬¡ç‚¹å‡»å‡ ä¸ªæ–‡å­—ã€‚ å¦‚æžœæ˜¯è‡ªå·±æ¥åšçš„è¯ï¼Œä¼šè€ƒè™‘è¿™æ ·ï¼š å°†éªŒè¯ç å›¾ç‰‡éƒ¨åˆ†æˆªå›¾æˆ–ä¸‹è½½å›žæ¥ å¯¹å›¾ç‰‡è¿›è¡ŒOCRï¼Œæå–æ–‡å­— æ–‡å­—è¯†åˆ«ï¼ŒèŽ·å–åæ ‡ ä½¿ç”¨seleniumæ ¹æ®åæ ‡ç‚¹å‡» è¿™åªæ˜¯åˆæ­¥æ€è·¯ï¼Œä½†æƒ³æ³•å¾ˆå®¹æ˜“ï¼Œåšèµ·æ¥å´æ²¡é‚£ä¹ˆç®€å•ã€‚ åœ¨Githubä¸Šæ‰¾åˆ°å¤§ä½¬å†™çš„æ–¹æ³• captcha_crackï¼ŒçŸ¥ä¹Žä¸Šä¹Ÿæœ‰ ä½¿ç”¨æ·±åº¦å­¦ä¹ ç ´è§£ç‚¹å‡»éªŒè¯ç  é‚£ä¹ˆå¦‚æžœç›´æŽ¥æŽ¥å…¥ç¬¬ä¸‰æ–¹æ‰“ç å¹³å°æ¥ï¼Œé‚£å°±ä¼šç®€å•å¾ˆå¤šï¼Œåœ¨å®žé™…å¼€å‘ä¸­ä¸ºäº†æé«˜å‡†ç¡®æ€§ï¼Œæ›´å¤šä¼šä½¿ç”¨æ‰“ç å¹³å°ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¿«é€Ÿå†™ä¸€ä¸ªçˆ¬è™«]]></title>
      <url>%2F2018%2F07%2F03%2F%E5%BF%AB%E9%80%9F%E5%86%99%E4%B8%80%E4%B8%AA%E7%88%AC%E8%99%AB%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  å¿«ã€æ›´å¿« (à¹‘â€¢ . â€¢à¹‘) ç¼˜æ¥ä»Šå¤©ä¸‹ç­å‰ï¼Œè€æ¿è®©æˆ‘å¸®å¿™çˆ¬ä¸€ä¸ªæ•°æ®ï¼Œç®€å•çœ‹äº†ä¸‹ï¼Œéœ€è¦ç™»å½•ï¼Œçœ‹èµ·æ¥åº”è¯¥ä¸éš¾ã€‚å›žåˆ°å®¶ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œå¤åˆ¶urlï¼Œç„¶åŽç”¨postmanè½¬ä»£ç ï¼Œç®€å•æš´åŠ›ï¼Œç›´æŽ¥æ’¸ã€‚ è¿™é‡Œè¯´ä¸‹postmançš„ä¸€ä¸ªBUGï¼Œå‘é€è¯·æ±‚ä¸ä¼šèŽ·å¾—ä»»ä½•æ•°æ®ï¼Œå¦‚æžœä½ é‡åˆ°ï¼Œå»ºè®®å‡çº§postmanä¸ºæœ€æ–°ç‰ˆæœ¬ ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889#!/usr/bin/env python# -*- coding: utf-8 -*-import loggingimport pymongoimport requestsimport tracebackfrom concurrent import futuresfrom urllib.request import urljoinfrom scrapy.selector import Selectorlogging.basicConfig(level=logging.INFO)client = pymongo.MongoClient()coll = client['table']['collection']# coll.create_index('url', unique=True)url = "your urls"headers = &#123; 'user-agent': "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 " "(KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36", 'accept': "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8", 'accept-encoding': "gzip, deflate, br", 'accept-language': "zh-CN,zh;q=0.9,en;q=0.8", &#125;def fetch(page): try: proxies = &#123; 'http': proxy, 'https': proxy &#125; response = requests.get(url.format(page), headers=headers, timeout=20, proxies=proxies) if response.status_code == 200: s = Selector(text=response.text) for i in s.xpath('//*[@id="search-results"]/tbody/tr'): url_ = i.xpath('td[4]/a/@href').extract_first() detail_url = urljoin(url, url_) data = get_detail(detail_url) logging.info('success save data &#123;&#125; '.format(data['url'])) save_mongo(data) except Exception as e: logging.error(traceback.format_exc())def get_detail(detail_url): try: proxies = &#123; 'http': proxy, 'https': proxy &#125; response = requests.get(detail_url, headers=headers, timeout=20, proxies=proxies) if response.status_code == 200: s = Selector(text=response.text) data = dict() data['url'] = detail_url data['SMILES '] = s.xpath('//*[@id="smiles"]/text()').extract_first() img = s.xpath('//*[@id="molecule-image"]/img/@src').extract_first() data['img'] = urljoin(detail_url, img) data['formula'] = s.xpath('//*[@id="name-structure"]/tbody/tr[2]/td[2]/text()').extract_first() data['Mass'] = s.xpath('//*[@id="name-structure"]/tbody/tr[3]/td[2]/text()').extract_first() return data except Exception as e: logging.error(traceback.format_exc())def save_mongo(data): try: coll.insert(data) except pymongo.errors.DuplicateKeyError: passif __name__ == '__main__': # for i in range(1, 11): # fetch(str(i)) # if use Thread with futures.ThreadPoolExecutor(max_workers=50) as executor: to_do = [] for i in range(1, 51): future = executor.submit(fetch, str(i)) to_do.append(future) ä»£ç ç›¸å½“ç®€å•ï¼Œfetchå‡½æ•°ç”¨æ¥æŠ“å–åˆ—è¡¨é¡µï¼Œget_detailå‡½æ•°æŠ“å–è¯¦æƒ…é¡µï¼Œsave_mongoä¿å­˜æ•°æ®åº“ï¼Œéœ€è¦è¯´æ˜Žä¸‹çš„å°±æ˜¯æœ€åŽä½¿ç”¨çš„å¤šçº¿ç¨‹äº†ï¼Œè¿™é‡Œå·ä½¿ç”¨çš„æ˜¯futuresï¼Œå¹¶ä¸æƒ³è¯´å¾ˆå¤šå¤§é“ç†ï¼Œæ¥çœ‹çœ‹æ–‡æ¡£ æé«˜é€Ÿåº¦concurrent.futures æ˜¯python3æ–°å¢žåŠ çš„ä¸€ä¸ªåº“ï¼Œç”¨äºŽå¹¶å‘å¤„ç†ï¼Œæä¾›äº†å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„å¹¶å‘åŠŸèƒ½ çº¿ç¨‹æ±  1234567891011121314151617181920212223242526import concurrent.futuresimport urllib.requestURLS = ['http://www.foxnews.com/', 'http://www.cnn.com/', 'http://europe.wsj.com/', 'http://www.bbc.co.uk/', 'http://some-made-up-domain.com/']# Retrieve a single page and report the URL and contentsdef load_url(url, timeout): with urllib.request.urlopen(url, timeout=timeout) as conn: return conn.read()# We can use a with statement to ensure threads are cleaned up promptlywith concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor: # Start the load operations and mark each future with its URL future_to_url = &#123;executor.submit(load_url, url, 60): url for url in URLS&#125; for future in concurrent.futures.as_completed(future_to_url): url = future_to_url[future] try: data = future.result() except Exception as exc: print('%r generated an exception: %s' % (url, exc)) else: print('%r page is %d bytes' % (url, len(data))) è¿›ç¨‹æ±  12345678910111213141516171819202122232425262728import concurrent.futuresimport mathPRIMES = [ 112272535095293, 112582705942171, 112272535095293, 115280095190773, 115797848077099, 1099726899285419]def is_prime(n): if n % 2 == 0: return False sqrt_n = int(math.floor(math.sqrt(n))) for i in range(3, sqrt_n + 1, 2): if n % i == 0: return False return Truedef main(): with concurrent.futures.ProcessPoolExecutor() as executor: for number, prime in zip(PRIMES, executor.map(is_prime, PRIMES)): print('%d is prime: %s' % (number, prime))if __name__ == '__main__': main() å…³äºŽå…¥åº“æ–¹é¢ï¼Œå»ºè®®æ˜¯å¢žåŠ å”¯ä¸€ç´¢å¼•ï¼Œ coll.create_index(&#39;url&#39;, unique=True)ï¼Œä¸€ä¸ªæ˜¯åŽ»é‡ï¼Œä¸€ä¸ªæ˜¯æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Katalon + å‚»ç“œ == selenium]]></title>
      <url>%2F2018%2F06%2F25%2FKatalon-selenium-%E5%82%BB%E7%93%9C%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åå…­ç¯‡åŽŸåˆ›æ–‡ç«  ç®€ç›´æ˜¯ç¥žå™¨å•Š (à¹‘â€¢ . â€¢à¹‘) ä»Šå¤©åœ¨ç¿»èŽ«çƒ¦å¤§å¤§çš„åšå®¢æ—¶ï¼Œçœ‹åˆ°ä»–æåˆ°ä¸€ä¸ªå·¥å…·ï¼Œä¾¿åŽ»çœ‹äº†ä¸‹ï¼Œç¬¬ä¸€æ„Ÿå—æ˜¯ï¼Œå¤ªå¥½ç”¨äº†ã€çˆ±ä¸é‡Šæ‰‹ã€‚ ä¸‹é¢æ¥è¯´è¯´è¿™ä¸ªå·¥å…·ï¼šKatalon Recorder Katalon Recorderå®‰è£…åœ°å€ï¼šKatalon Recorder å®˜æ–¹ä»‹ç»æ˜¯ï¼š Best Selenium IDE record, play, debug app. Exports Selenium WebDriver code. Provides reports, logs, screenshots. Fast &amp; extensible. ç®€å•æ¥è¯´ï¼Œä»–å¯ä»¥è®°å½•ä½ åœ¨æµè§ˆå™¨ä¸Šçš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼ŒåŒ…æ‹¬ã€ç‚¹å‡»ã€è¾“å…¥ã€è¾“å…¥å­—ç¬¦ç­‰ç­‰ï¼Œæœ€åŽä¸€é”®è½¬åŒ–ä¸ºç¼–ç¨‹ä»£ç ï¼Œå¯ä»¥è½¬åŒ–çš„è¯­è¨€æœ‰ï¼š C# JAVA Katalon Studio Python2 Roboot Framework Ruby XML ä¾‹å¦‚ä¸‹å›¾å°±æ˜¯ç›´æŽ¥è½¬åŒ–ä¸º Python2çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950# -*- coding: utf-8 -*-from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.common.keys import Keysfrom selenium.webdriver.support.ui import Selectfrom selenium.common.exceptions import NoSuchElementExceptionfrom selenium.common.exceptions import NoAlertPresentExceptionimport unittest, time, reclass UntitledTestCase(unittest.TestCase): def setUp(self): self.driver = webdriver.Firefox() self.driver.implicitly_wait(30) self.base_url = "https://www.katalon.com/" self.verificationErrors = [] self.accept_next_alert = True def test_untitled_test_case(self): driver = self.driver driver.get("https://zhangslob.github.io/") driver.find_element_by_link_text(u"Cookiesæ± çš„åŽç»­è§£å†³æ–¹æ¡ˆ").click() driver.find_element_by_xpath("//main[@id='main']/div/div").click() def is_element_present(self, how, what): try: self.driver.find_element(by=how, value=what) except NoSuchElementException as e: return False return True def is_alert_present(self): try: self.driver.switch_to_alert() except NoAlertPresentException as e: return False return True def close_alert_and_get_its_text(self): try: alert = self.driver.switch_to_alert() alert_text = alert.text if self.accept_next_alert: alert.accept() else: alert.dismiss() return alert_text finally: self.accept_next_alert = True def tearDown(self): self.driver.quit() self.assertEqual([], self.verificationErrors)if __name__ == "__main__": unittest.main() è™½ç„¶è¯´ç”¨çš„æ˜¯Python2ï¼Œä½†æ˜¯å¹¶ä¸å½±å“ï¼Œç®€å•æ”¹ä¸€ä¸‹å°±å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸»è¦é€»è¾‘åœ¨test_untitled_test_caseå‡½æ•°ä¸­ï¼Œå¯ä»¥ç›´æŽ¥æ‹¿æ¥ä½¿ç”¨ã€‚ æ³¨æ„è¿™é‡Œä½¿ç”¨äº†unittestï¼Œä¸ç†Ÿæ‚‰çš„å¯ä»¥æ¥çœ‹çœ‹æ–‡æ¡£ 1234567891011121314151617181920import unittestclass TestStringMethods(unittest.TestCase): def test_upper(self): self.assertEqual('foo'.upper(), 'FOO') def test_isupper(self): self.assertTrue('FOO'.isupper()) self.assertFalse('Foo'.isupper()) def test_split(self): s = 'hello world' self.assertEqual(s.split(), ['hello', 'world']) # check that s.split fails when the separator is not a string with self.assertRaises(TypeError): s.split(2)if __name__ == '__main__': unittest.main() å®‰è£…æ–¹æ³•è¿™é‡Œå»ºè®®ç›´æŽ¥åœ¨Chromeåº”ç”¨å¸‚åœºå®‰è£…ï¼Œåœ°å€ Katalon Recorder è€ƒè™‘åˆ°æœ‰äº›åŒå­¦å¯èƒ½é‚£å•¥ï¼Œæ‰€ä»¥æˆ‘å·²ç»ä¸‹è½½å¥½äº†ã€‚å…¬ä¼—å·ï¼šPythonçˆ¬è™«ä¸Žç®—æ³•è¿›é˜¶ï¼Œå›žå¤ï¼šå‚»ç“œ æ„Ÿå—è¿™ä¸ªç›¸å½“äºŽæŒ‰é”®ç²¾çµï¼ŒæŠŠæˆ‘ä»¬å¯¹æµè§ˆå™¨çš„æ¯ä¸€æ­¥æ“ä½œéƒ½å®Œæˆäº†ï¼Œå¯ä»¥ç”¨æ¥ç”Ÿæˆä»£ç ï¼Œå’Œpostmanä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ‰ä¼šè¯´ Katalon + å‚»ç“œ == seleniumï¼Œå®Œå…¨æ˜¯å‚»ç“œæ“ä½œã€‚ æ¯”å¦‚æ¥åšä¸€äº›è‡ªåŠ¨åŒ–ç™»å½•ã€æ³¨å†Œç­‰æ¿å—ä¼šéžå¸¸çˆ½ï¼Œä½†æ˜¯éªŒè¯ç éƒ¨åˆ†è¿˜æ˜¯éœ€è¦è‡ªè¡Œè§£å†³ã€‚ ä½†æ˜¯è¯¥è½¯ä»¶ä¹Ÿæ˜¯æœ‰ä¸€äº›é—®é¢˜çš„ï¼Œå®ƒä¸èƒ½è¿›è¡Œå¤šé¡µé¢åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è‡ªåŠ¨åˆ‡æ¢åˆ°æ–°æ‰“å¼€çš„çª—å£ï¼Œä¼šæœ‰é”™è¯¯æç¤º# ERROR: Caught exception [ERROR: Unsupported command [selectWindow | win_ser_1 | ]]ï¼Œè¿™ä¸€æ­¥å¿…é¡»è‡ªå·±æ‰‹åŠ¨æ¥æ“ä½œï¼Œ 1234driver.current_window_handle èŽ·å–å½“å‰çª—å£handledriver.window_handles èŽ·å–æ‰€æœ‰çª—å£çš„handleï¼Œè¿”å›žliståˆ—è¡¨driver.switch_to.window(handle) åˆ‡æ¢åˆ°å¯¹åº”çš„çª—å£driver.close() å…³é—­å½“å‰çª—å£ æµ‹è¯•æ‰“å¼€å¤šçª—å£çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556# -*- coding: utf-8 -*-from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.common.keys import Keysfrom selenium.webdriver.support.ui import Selectfrom selenium.common.exceptions import NoSuchElementExceptionfrom selenium.common.exceptions import NoAlertPresentExceptionimport unittest, time, reclass Zhihu(unittest.TestCase): def setUp(self): self.driver = webdriver.Firefox() self.driver.implicitly_wait(30) self.base_url = "https://www.katalon.com/" self.verificationErrors = [] self.accept_next_alert = True def test_zhihu(self): driver = self.driver driver.get("https://www.zhihu.com/people/cuishite/activities") driver.find_element_by_xpath("//div[@id='ProfileMain']/div/ul/li[2]/a").click() driver.find_element_by_xpath("//div[@id='ProfileMain']/div/ul/li[4]/a/span").click() driver.find_element_by_link_text(u"Cookiesæ± çš„åŽç»­è§£å†³æ–¹æ¡ˆ").click() # ERROR: Caught exception [ERROR: Unsupported command [selectWindow | win_ser_1 | ]] driver.find_element_by_xpath("//img[contains(@src,'https://pic4.zhimg.com/v2-7ff26e52e6c82c080f62d8e9291e532b_b.jpg')]").click() driver.find_element_by_link_text(u"Cookiesæ± çš„åŽç»­è§£å†³æ–¹æ¡ˆ").click() # ERROR: Caught exception [ERROR: Unsupported command [selectWindow | win_ser_2 | ]] driver.find_element_by_xpath("//div[@id='js_article']/div[2]").click() def is_element_present(self, how, what): try: self.driver.find_element(by=how, value=what) except NoSuchElementException as e: return False return True def is_alert_present(self): try: self.driver.switch_to_alert() except NoAlertPresentException as e: return False return True def close_alert_and_get_its_text(self): try: alert = self.driver.switch_to_alert() alert_text = alert.text if self.accept_next_alert: alert.accept() else: alert.dismiss() return alert_text finally: self.accept_next_alert = True def tearDown(self): self.driver.quit() self.assertEqual([], self.verificationErrors)if __name__ == "__main__": unittest.main() æ‰€ä»¥åªéœ€è¦è¿™ä¸€ç‚¹å°±å¯ä»¥å®Œå–„ä»£ç ï¼ŒåŒæ—¶å¯ä»¥çœ‹çœ‹ä»–ä»¬çš„å®˜ç½‘ KATALON - Best automated testing tool for web, mobile, APIï¼Œä»–ä»¬ä¸»è¦æ˜¯æä¾›æµ‹è¯•å·¥å…·ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Cookiesæ± çš„åŽç»­è§£å†³æ–¹æ¡ˆ]]></title>
      <url>%2F2018%2F06%2F16%2FCookies%E6%B1%A0%E7%9A%84%E5%90%8E%E7%BB%AD%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åäº”ç¯‡åŽŸåˆ›æ–‡ç«  ç»ˆäºŽæœ‰æ–¹æ³•äº† (à¹‘â€¢ . â€¢à¹‘) ä½œä¸ºä¸€åç½—å¹,å…ˆå¹ä¸€æ³¢Cç½—ç‰›çš®,ç®€ç›´å¤ªå¸…äº†äº†äº† çž§çž§è¿™ä¸ªçœ¼ç¥žå»ºè®®å¤§å®¶å¯ä»¥çœ‹çœ‹è¿™åœºæ¯”èµ›ï¼Œè¥¿ç­ç‰™VSè‘¡è„ç‰™ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¼šçˆ±ä¸Šè¶³çƒçš„ æ­£æ–‡å¼€å§‹åœ¨ä¸Šä¸€ç¯‡æ–‡ç« : ç®€å•è¯´æ˜Žäº†è‡ªå·±å¯¹äºŽè¯¥ç½‘ç«™çš„æƒ³æ³•,åœ¨ç»è¿‡ä¸¤å¤©çš„æµ‹è¯•ä¸Žç ”ç©¶ä¹‹åŽ,æˆ‘æœ‰äº†æ›´å¤šçš„æƒ³æ³•. æƒ³æ³•ä¸€: ä¸ºæ¯ä¸ªCookiesç»‘å®šå”¯ä¸€IPä½ ä½œä¸ºä¸€ä¸ªæ™®é€šç”¨æˆ·,å¦‚æžœå¯¹æ–¹ç½‘ç«™æ£€æµ‹åˆ°ä½ ä¸åœåœ°å˜æ¢IPä»Žä¸åŒåœ°æ–¹æ¥å‘é€è¯·æ±‚,é‚£ä»–è‚¯å®šä¼šæœ‰è¯†åˆ«.é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸€ä¸ªCookiesåˆ†é…å”¯ä¸€çš„IPä»£ç†,ä¹Ÿå°±æ˜¯ä½ è¿™ä¸ªCookieså‘é€è¯·æ±‚çš„ä»£ç†å§‹ç»ˆæ˜¯å”¯ä¸€çš„. ä½†æ˜¯è¿™ç§æ–¹æ³•çš„å®žçŽ°æ–¹å¼è¿˜æ²¡æœ‰æƒ³å‡ºæ¥,ä¸çŸ¥é“è¯¥ä½¿ç”¨å“ªäº›æŠ€æœ¯æ ˆæ¥å®žçŽ°è¿™ä¸ªæƒ³æ³• æƒ³æ³•äºŒ: è§£å†³éªŒè¯ç å¥½,æ—¢ç„¶ä½ å¼¹å‡ºéªŒè¯ç ,é‚£æˆ‘å°±è§£å†³å®ƒ! è§£å†³æ–¹æ³•æ˜¯: è¯¥ç½‘ç«™çš„éªŒè¯ç å›¾ç‰‡æ˜¯base64,ç”¨pythonè½¬ä¸€ä¸‹,æŽ¥ä¸Šç¬¬ä¸‰æ–¹å°±OK åŒæ—¶è¯¥ç½‘ç«™å‚æ•°ä¸­è¿˜å¸¦æœ‰tokenå‚æ•°,ç»è¿‡å‰ç«¯å¤§ä½¬çš„æ–­ç‚¹è°ƒè¯•,å‘çŽ°æ˜¯å¯¹å¤šä¸ªå­—æ®µçš„ä¸¤æ¬¡åŠ å¯† ä¿æŒä¼šè¯session.ä½ éœ€è¦è®©å¯¹æ–¹ç½‘ç«™çŸ¥é“æ˜¯ä½ è¿™ä¸ªç”¨æˆ·,æ‰€ä»¥ä½ çš„cookies,ip,headersç›¸å…³ä¿¡æ¯å¿…é¡»ä¿æŒä¸€è‡´,æˆ‘å½“æ—¶çš„æƒ³æ³•æ˜¯ä½¿ç”¨requestsçš„sessionæ¥å®Œæˆè¿™ä¸€æ­¥æ“ä½œ,ä½†æ˜¯å¾ˆéš¾å®Œå…¨æ¨¡æ‹Ÿ,å› ä¸ºæ•´ä¸ªçˆ¬è™«ä½¿ç”¨scrapyæ¥å†™,å¤„ç†éªŒè¯ç ä½¿ç”¨requestsæ¥åš,sessionè¿™éƒ¨åˆ†ä¸å¤§å¥½æ¨¡æ‹Ÿ. é™„ä¸Šä¸€äº›ä¸ºsessionæ·»åŠ ä¿¡æ¯çš„ä»£ç  12345def __init__(self, my_cookie, proxy, headers): self.session = requests.session() self.session.cookies.update(my_cookie) self.session.headers.update(&#123;'User-Agent': headers&#125;) self.session.update(proxy) æƒ³æ³•ä¸‰: ä¸è§£å†³éªŒè¯é—®é¢˜,æ— è„‘é‡è¯•è¿™æ˜¯æœ€è ¢çš„åŠžæ³•,ä¹Ÿæ˜¯æˆ‘ç›®å‰åœ¨ä½¿ç”¨çš„æ–¹æ³•. /(ã„’oã„’)/~~ æ€è·¯æ˜¯: å°†cookiesä¿å­˜åˆ°mongoDBåšæŒä¹…åŒ–,å†å†™ä¸€ä¸ªè„šæœ¬,æŒç»­çš„å‘redisä¸­æ·»åŠ cookieså’Œstart_urls,ç„¶åŽå¯¹è¿™äº›start_urlsä¸åœåœ°é‡è¯•,å¯¹,å°±æ˜¯ä¸åœåœ°é‡è¯•,ç›´åˆ°æŠŠæ‰€æœ‰çš„é“¾æŽ¥è·‘å®Œ.æœ¬æ¬¡éœ€è¦é‡‡é›†çš„é“¾æŽ¥å¹¶ä¸å¤š,è´¨é‡è¦æ±‚ä¸é«˜,åªéœ€è¦æˆ‘é‡‡é›†åˆ°æ•°æ®å°±å¥½. éœ€è¦æ³¨æ„çš„æ˜¯: éœ€è¦ä¸ºä½ çš„è¡¨å¢žåŠ å”¯ä¸€é”®,ä¸ç„¶ä¼šæœ‰é‡å¤æ•°æ® æ¯æ¡è¯·æ±‚æ·»åŠ dont_filter=True,ä¸ç„¶åŽ»é‡ä¼šå½±å“çˆ¬å– æ·»åŠ cookieså’Œstart_urlsä»£ç  12345678910111213# add cookies and start_urls to local_rediswhile True: if local_redis.scard('spider:cookies') &lt; 10: for i in cookies_list: local_redis.sadd('spider:cookies', i) print("cookies Done") if local_redis.scard('spider:start_urls') &lt; 10: for i in url_list: local_redis.sadd('spider:start_urls', i) print("start_urls Done") time.sleep(10) æ•ˆæžœæˆ‘æ˜¯ç”¨çš„æ˜¯ç¬¬ä¸‰ç§æ–¹æ³•,ç›®å‰çœ‹æ¥æ•ˆæžœè¿˜è¡Œ,æ•°æ®å·²ç»çˆ¬å–äº†å¤§åŠ,ç›¸ä¿¡ä¸‰å¤©å‡è¿‡åŽ»äº†åº”è¯¥å°±æ²¡é—®é¢˜äº†. å¦‚æžœä»¥åŽè¦é•¿æœŸåšè¿™ä¸ªé¡¹ç›®çš„è¯,æœ€å¥½çš„åŠžæ³•åº”è¯¥è¿˜æ˜¯ç¬¬äºŒç§,ä»Žæ ¹æœ¬åŽ»è§£å†³é—®é¢˜. æœ¬æ¬¡åšè¿™ä¸ªé¡¹ç›®ä¹Ÿæ”¶èŽ·é¢‡å¤š,å¯¹äºŽcookiesä½¿ç”¨æ›´åŠ æœ‰ç»éªŒ;æ„Ÿè§‰æœ€å¥½çŽ©çš„æ˜¯tokençš„åŠ å¯†ä¸Žè§£å¯†å®žçŽ°,å¯¹è¿™æ–¹é¢æ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸‹è¿™ä¸ª: zlib â€” Compression compatible with gzip]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»Žcookieæ± æ­å»ºè¯´èµ·]]></title>
      <url>%2F2018%2F06%2F14%2F%E4%BB%8Ecookie%E6%B1%A0%E6%90%AD%E5%BB%BA%E8%AF%B4%E8%B5%B7%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åå››ç¯‡åŽŸåˆ›æ–‡ç«  æˆ‘å¿«ç»æœ›äº† (à¹‘â€¢ . â€¢à¹‘) è¿™å‡ å¤©æŽ¥æ‰‹äº†ä¸€ä¸ªå¾ˆæ€¥çš„é¡¹ç›®ï¼Œè¦åœ¨å‡ å¤©çˆ¬å–æŸç½‘ç«™çš„æ•°æ®ã€‚è¯¥ç«™æ˜¯æˆ‘çŸ¥é“å›½å†…åçˆ¬æ¯”è¾ƒä¸¥é‡çš„ç½‘ç«™ä¹‹ä¸€ï¼Œæˆ‘ä¹Ÿåšå¥½äº†å¿ƒç†å‡†å¤‡ã€‚ åˆ†æžè¯¥ç½‘ç«™æ•°æ®éœ€è¦ç™»å½•æ‰èƒ½æŸ¥çœ‹ï¼ŒAPPæŠ“åŒ…äº†ä½†æ˜¯æ²¡æœ‰å‘çŽ°ç›¸å…³æ•°æ®ï¼Œæ‰€ä»¥é€‰æ‹©ä»ŽPCç«™å…¥æ‰‹ã€‚ æ—¢ç„¶éœ€è¦ç™»å½•ï¼Œé‚£å°±éœ€è¦éªŒè¯ä¸€ä¸ªæ–°é²œçš„cookieså¯ä»¥è®¿é—®å¤šå°‘é“¾æŽ¥ï¼›éªŒè¯æ–¹æ³•æ˜¯ï¼š ç›´æŽ¥æ‹·è´å·²ç»ç™»å½•è¯¥ç½‘ç«™è¯·æ±‚çš„Curlï¼Œè½¬æ¢ä¸ºPythonä»£ç ï¼ŒåŠ ä¸€ä¸ªå¾ªçŽ¯ï¼Œæµ‹è¯•ï¼Œå•ä¸ªè´¦å·å¯ä»¥è·‘å¤šå°‘é¡µ ç»è¿‡10å¤šæ¬¡æµ‹è¯•ï¼Œå‘çŽ°å•ä¸ªCookieså¯ä»¥ä¸‹è½½ï¼Œè‡³å°‘50ä¸ªç½‘é¡µã€‚ é‚£ä¹ˆå°±å¾ˆå¥½åšäº†ï¼Œå¯ä»¥å¼€å§‹å†™æ€è·¯äº†ã€‚ æ€è·¯é¦–å…ˆæˆ‘ä»¬éœ€è¦å¤šä¸ªå¯ä»¥ç™»å½•çš„Cookiesï¼Œç„¶åŽåˆ©ç”¨è¿™äº›CookiesåŽ»ä¸‹è½½ç½‘é¡µï¼›ä¸€æ—¦è¿”å›žçŠ¶æ€ç ä¸æ˜¯200ï¼Œå°±æ‹‰é»‘è¯¥Cookiesã€‚ å…·ä½“çš„æ–¹æ³•çœ‹ä¸‹å›¾ï¼š æœ‰å‡ ç‚¹è¯´æ˜Žä¸‹ï¼š å¦‚ä½•æ¨¡æ‹Ÿæ³¨å†Œã€‚æœ‰ä¸¤ç§æ–¹æ³•ï¼Œæ¨¡æ‹Ÿè¯·æ±‚å’Œæµè§ˆå™¨æ¨¡æ‹Ÿã€‚æ¨¡æ‹Ÿè¯·æ±‚å°±æ˜¯åŽ»åˆ†æžæ³¨å†Œè¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥æ“ä½œï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯å‘é€éªŒè¯ç çš„ï¼Œé‚£ä¸ªæ˜¯æ³¨å†Œçš„ï¼Œæˆ‘ä¼˜å…ˆæŽ¨èè¯¥æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•é‡åˆ°ä¸€äº›æºå¸¦æœ‰å¤§é‡ç­¾åå‚æ•°çš„å˜æ€ç½‘ç«™æ—¶ï¼Œéš¾åº¦è¾ƒå¤§ï¼Œéœ€è¦è‡ªå·±ä¸€æ­¥æ­¥æ–­ç‚¹JavaScriptã€‚æµè§ˆå™¨æ¨¡æ‹Ÿå¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼ŒPythonä¸­å°±æ˜¯seleniumå‚»ç“œæ“ä½œï¼Œéœ€è¦å“ªé‡Œç‚¹å“ªé‡Œã€‚æ³¨æ„çš„å‘æ˜¯ä½•æ—¶åˆ‡æ¢iframe Cookiesçš„æ­å»ºã€‚å…¶å®žéžå¸¸ç®€å•ï¼Œè¿™é‡Œåˆ©ç”¨äº†redisçš„é›†åˆï¼Œå–Cookiesä½¿ç”¨spopå³å¯ã€‚è¿™é‡Œå¹¶æ²¡æœ‰åšéªŒæ´»ï¼Œå› ä¸ºåŸºæœ¬ä¸ŠCookiesäº§ç”Ÿä¹‹åŽå°±ä¼šè¢«ä½¿ç”¨ã€‚ æˆ‘è¦å´©æºƒäº†ä¸åšä¸çŸ¥é“ï¼Œä¸€åšå“ä¸€è·³ã€‚ ä½†æˆ‘ä»¥ä¸ºè¯¥ç½‘ç«™å¾ˆç®€å•ï¼Œæ­å»ºä¸€ä¸ªç®€å•çš„Cookiesæ± å°±å¯ä»¥è§£å†³ï¼Œä½†æ˜¯æˆ‘æ˜Žæ˜¾å¤ªå¹´è½»äº†ã€‚ æˆ‘å…ˆæŠŠé‡‡é›†é“¾æŽ¥æŽ¨åˆ°redisä¸­ï¼Œä½¿ç”¨äº†scrapy_redisã€‚ è¯¥ç½‘ç«™çš„åçˆ¬ï¼š ä»£ç†é—®é¢˜ã€‚å…¶å®žè¿™é‡Œæœ‰ä¸€ä¸ªæ‚–è®ºï¼Œåˆ°åº•è¯¥ä¸è¯¥ä½¿ç”¨ä»£ç†ã€‚é¦–å…ˆï¼Œæˆ‘ä¸ç”¨ä»£ç†ï¼Œåˆšå¼€å§‹è¿˜å¥½ï¼Œä½†æ˜¯å¾ˆå¿«æˆ‘çš„æœ¬åœ°ä»£ç†å°±è¢«æ‹‰é»‘äº†ï¼›é‚£å¥½ä¸Šä»£ç†ï¼Œä½†æ˜¯æŽ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œå¼€å§‹å‡ºçŽ°ä¸€ä¸ªä¸ªçš„éªŒè¯ç éœ€è¦å¡«äº†ï¼Œä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ï¼Œæˆ‘æ˜¯ä¸å¯èƒ½é¢‘ç¹çš„æ”¹å˜è‡ªå·±çš„IPåŽ»è®¿é—®ç½‘ç«™çš„ï¼Œè§£å†³æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼ŒCookieså’Œä»£ç†ç»‘å®šï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•çœŸçš„ä¸å¥½å®žçŽ°ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨Scrapyå¼€å‘çš„çˆ¬è™«ã€‚ éªŒè¯ç é—®é¢˜ã€‚æ—¢ç„¶å‡ºçŽ°äº†éªŒè¯ç ï¼Œé‚£å°±åŽ»è§£å†³å®ƒã€‚éªŒè¯ç ä¸€èˆ¬æ˜¯å’ŒCookiesç»‘å®šçš„ï¼Œé‚£ä¹ˆæˆ‘éœ€è¦æŠŠè®¿é—®è¯¥è´¦å·çš„IPã€User-Agentã€Cookieså…¨éƒ¨æ‹¿å‡ºæ¥ï¼Œå†åŽ»å‘é€æ–°çš„è¯·æ±‚ï¼Œè€Œä¸”éœ€è¦æ³¨æ„ï¼Œæ­¤è¿‡ç¨‹ä¸­ä¸èƒ½å†è¿›è¡ŒIPçš„å˜åŒ–ã€‚ æœ€åŽä»Šå¤©äº†å¤§æ¦‚ä¸¤å¤©çš„æ–—æ™ºæ–—å‹‡ï¼ŒçŽ°åœ¨åŸºæœ¬ä¸Šå¯ä»¥çˆ¬åˆ°æ•°æ®äº†ï¼Œå¸Œæœ›æ˜Žå¤©å¯ä»¥äº¤å·®ï¼Œä¸ç„¶ç«¯åˆå°±è¦åŠ ç­äº†ã€‚ å¸Œæœ›è¿™åªå°çŒ«å’ªå¯ä»¥ç»™æˆ‘å¸¦æ¥å¥½è¿œã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸ºäº†çŸ¥é“èƒ¡æ­Œç²‰ä¸çš„ç”·å¥³æ¯”çŽ‡ï¼Œçˆ¬äº†ä¸‰ç™¾ä¸‡å¾®åšæ•°æ®]]></title>
      <url>%2F2018%2F06%2F07%2F%E8%83%A1%E6%AD%8C%E7%94%B7%E7%B2%89%E5%A4%9A%E8%BF%98%E6%98%AF%E5%A5%B3%E7%B2%89%E5%A4%9A-%E7%88%AC%E7%88%AC%E5%BE%AE%E5%8D%9A%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  è€èƒ¡å¥½å¸… (à¹‘â€¢ . â€¢à¹‘) æœ€è¿‘å¶ç„¶é—´çœ‹åˆ°ä¸€æ¡æ–°é—»ï¼Œæ ‡é¢˜æ˜¯ï¼šâ€œèƒ¡æ­Œä½œä¸ºä¸€ä¸ªç”·æ€§æ˜Žæ˜Ÿï¼Œç”·ç²‰ä¸æ¯”å¥³ç²‰ä¸è¿˜å¤šï¼Œè¿™ä¸ç§‘å­¦ï¼â€ æ–‡ä¸­è¿™æ ·è¯´é“â€œèƒ¡æ­Œåœ¨å¾®åšä¸Šçš„ç²‰ä¸å°±å·²ç»è¾¾åˆ°äº†5748.9398ä¸‡äººï¼Œå¹¶ä¸”é€šè¿‡æŸ¥çœ‹ç²‰ä¸å¯ä»¥å‘çŽ°è®¸å¤šéƒ½æ˜¯ç”·æ€§ç²‰ä¸ï¼Œè¿™ä¸å¾—ä¸è¯´è¿™æ˜¯ç‹¬ä¸€æ— äºŒäº†â€ å½“æ—¶æˆ‘å°±éœ‡æƒŠäº†ï¼Œâ€œé€šè¿‡æŸ¥çœ‹ç²‰ä¸â€ï¼Ÿï¼Ÿï¼Ÿè¿™æ˜¯ä»€ä¹ˆæ“ä½œï¼ŒçŽ°åœ¨çš„UCå°ç¼–è¶Šæ¥è¶Šå¤šäº†å—ï¼Ÿ æˆ‘ä½œä¸ºä¸€åè€èƒ¡çš„ç²‰ä¸ï¼Œç®€ç›´æ˜¯ä¸èƒ½å¿ï¼Œè¿™å®Œå…¨æ˜¯åœ¨çžŽå†™å•Šã€‚ æ‰€ä»¥æˆ‘æœ‰ä¸ªæƒ³æ³•ï¼ŒæŠŠèƒ¡æ­Œå¾®åšä¸Šå…­åƒä¸‡ç²‰ä¸æ•°æ®çˆ¬å–ä¸‹æ¥ï¼Œçœ‹çœ‹åˆ°åº•ç”·ç²‰ä¸å¤šè¿˜æ˜¯å¥³ç²‰ä¸å¤šã€‚ å¤§å®¶å¯ä»¥åœ¨è‡ªå·±å¿ƒä¸­çŒœæµ‹ä¸€ä¸ªç­”æ¡ˆï¼Œåˆ°åº•ç”·ç²‰å¤šè¿˜æ˜¯å¥³ç²‰å¤šå‘¢ï½žï½žã€‚æˆ‘çš„ç­”æ¡ˆæ˜¯ç”·æ€§æ¯”è¾ƒå¤šã€‚ åˆ†æžé—®é¢˜ è¿™é‡Œå¯ä»¥çœ‹åˆ°èƒ¡æ­Œå¾®åšç²‰ä¸æ€»æ•°çº¦6åƒä¸‡ï¼Œæœ¬æ¬¡æˆ‘çš„ç›®æ ‡å°±æ˜¯å°½åŠ›åŽ»æ‰¾åˆ°èƒ¡æ­Œæ´»è·ƒç²‰ä¸çš„ç”·å¥³æ¯”ä¾‹ã€‚ ä½†æ˜¯æˆ‘ä»¬çŸ¥é“å¾®åšæ˜¯æœ‰é™åˆ¶çš„ï¼Œå¾®åšä¸ä¼šæŠŠæ‰€æœ‰æ•°æ®éƒ½å±•ç¤ºå‡ºæ¥ï¼Œå¦‚å›¾ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘è¦æ€Žæ ·æ‰èƒ½å°½å¯èƒ½å¤šçš„æŠ“åˆ°ç²‰ä¸æ•°æ®ï¼Ÿ è¿™é‡Œæˆ‘å°±æƒ³è¦å°½å¯èƒ½å¤šçš„æŠ“å–åˆ°è€èƒ¡çš„æ´»è·ƒç²‰ä¸ï¼Œ æ‰€è°“æ´»è·ƒç²‰ä¸ï¼ŒæŒ‡çš„æ˜¯é™¤åŽ»â€œä¸è½¬å‘ã€ä¸è¯„è®ºã€ä¸ç‚¹èµžâ€è¿™äº›â€œä¸‰ä¸â€ç”¨æˆ·ï¼Œæ˜¯æ´»è·ƒçš„ã€æœ‰å‚ä¸Žçš„ç”¨æˆ·ã€‚è¿™äº›ç”¨æˆ·æ‰æ˜¯çœŸæ­£æœ‰ä»·å€¼çš„ï¼Œæ­£å¥½åŽ»é™¤äº†åƒµå°¸ç²‰ã€‚ ä¸¤ç§æ€è·¯é‡‡é›†å¾®åšç²‰ä¸ï¼Œç›®å‰æˆ‘æœ‰ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œï¼š å…¨é‡é‡‡é›†ã€‚é‡‡é›†å¾®åšæ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼ŒåŒ…æ‹¬å…³æ³¨ã€ç²‰ä¸ç­‰ã€‚é€šè¿‡ç²‰ä¸çš„ç²‰ä¸ã€å…³æ³¨çš„å…³æ³¨ã€ç”¨æˆ·åˆ†ç±»ã€æŽ¨èç­‰ç­‰å„ç§æ–¹æ³•æ‹¿åˆ°å¾®åšå…¨é‡ç”¨æˆ·æ•°æ®ã€‚ é‡‡æ ·ã€‚é‡‡é›†èƒ¡æ­Œçš„æ‰€æœ‰å¾®åšä¸‹æœ‰è¯„è®ºã€ç‚¹èµžã€è½¬å‘çš„ç”¨æˆ·ï¼Œå‡¡æ˜¯æœ‰å‚ä¸Žè¿‡çš„äº²å¯†å€¼åŠ ä¸€ï¼Œå½“è¿™ä¸ªå€¼è¶…è¿‡ä¸€å®šé™åº¦æ—¶ï¼ˆæ¯”å¦‚è¯´5æˆ–è€…10ï¼‰ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¯¥ç”¨æˆ·æ˜¯èƒ¡æ­Œçš„ç²‰ä¸ã€‚ æƒ³äº†æƒ³ï¼Œç¬¬ä¸€ç§æ–¹æ³•çŸ­æ—¶é—´å†…æ˜¯ä¸çŽ°å®žçš„ï¼Œæ–¹æ³•2å€’æ˜¯å¯ä»¥å°è¯•ä¸€æ³¢ã€‚ çˆ¬è™«é€»è¾‘çˆ¬è™«åˆ†ä¸ºä¸‰æ­¥ï¼š é‡‡é›†èƒ¡æ­Œæ‰€æœ‰å¾®åš é‡‡é›†æ¯æ¡å¾®åšçš„ä¸‰ç±»æ•°æ®ï¼ˆè½¬å‘ã€è¯„è®ºã€ç‚¹èµžï¼‰ æ•°æ®æ¸…æ´— å¥½äº†ï¼ŒçŽ°åœ¨å·²ç»éžå¸¸æ¸…æ™°äº†ï¼Œä¸‹é¢å°±å¼€å§‹åŽ»å¯»æ‰¾çˆ¬å–æ–¹æ³•ã€‚ å¾®åšæŽ¥å£æ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œweibo.cn å’Œ m.weibo.cn æ˜¯æœ€ç®€å•çˆ¬å–çš„ï¼Œweibo.com æ˜¯æœ€éš¾çš„ã€‚è¿™æ¬¡æˆ‘ä»¬ä»Ž m.weibo.cn å…¥æ‰‹ï¼Œåˆ†æžå¯ä»¥å¾—åˆ°èƒ¡æ­Œå¾®åšçš„æŽ¥å£ï¼Œè€Œä¸”æ˜¯æ— éœ€ç™»å½•çš„ï¼ï¼ï¼å¾ˆé‡è¦ã€‚å…¶ä»–å…¥å£éƒ½éœ€è¦è§£å†³ç™»å½•éš¾é¢˜ï¼ https://m.weibo.cn/api/container/getIndex?containerid=1076031223178222&amp;page={} è¿”å›žæ•°æ®ï¼š 1234567cardlistInfo: &#123;containerid: "1076031223178222",v_p: 42,show_style: 1,total: 3643,page: 2&#125;, è¿™é‡Œå‘Šè¯‰æˆ‘ä»¬æ€»å…±æœ‰3643æ¡æ•°æ®ï¼Œæ¯é¡µ10æ¡ï¼Œé‚£ä¹ˆç¿»é¡µå°±å¾ˆæ¸…æ™°äº†ã€‚ å…¶ä»–æŽ¥å£12345è½¬å‘ï¼šhttps://m.weibo.cn/api/statuses/repostTimeline?id=4238119278366780&amp;page=&#123;&#125;è¯„è®ºï¼šhttps://m.weibo.cn/api/comments/show?id=4238119278366780&amp;page=&#123;&#125;ç‚¹èµžï¼šhttps://m.weibo.cn/api/attitudes/show?id=4238119278366780&amp;page=&#123;&#125; ï¼ˆæƒ³è¦çˆ¬å…¶ä»–äººï¼Œæ›¿æ¢è¿™é‡Œçš„idå³å¯ï¼‰ æš‚æ—¶ä¸æ¸…æ¥šæ€»å…±æœ‰å¤šå°‘é¡µï¼Œè™½ç„¶è¿”å›žçš„æ•°æ®ä¸­æœ‰ total_number ï¼Œä½†æ˜¯æ­¤æ•°å­—å¹¶ä¸å‡†ç¡®ï¼Œè¿˜éœ€è¦æ›´å¤šæµ‹è¯•ã€‚ 123total_number: 19526897,hot_total_number: 0,max: 1952690 ï¼ˆç®€å•æµ‹åŽå‘çŽ°æ€»é¡µæ•°ä¸ºtotal_number//55ï¼‰ é‡‡é›†ç”¨æˆ·ä¿¡æ¯æŽ¥å£https://m.weibo.cn/api/container/getIndex?type=uid&amp;value=6114792181 å…¶å®žä¸éœ€è¦è¿™ä¸€æ¬¡è¯·æ±‚ï¼Œå› ä¸ºåœ¨è½¬å‘æŽ¥å£ä¸­å·²ç»æœ‰æˆ‘ä»¬æƒ³è¦çš„æ•°æ®äº†ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526user: &#123;id: 6431898981,screen_name: "è±ªæ°”superiority",profile_image_url: "https://tvax2.sinaimg.cn/crop.9.0.220.220.180/0071hAK9ly8fmdxpea2vxj306n064glj.jpg",profile_url: "https://m.weibo.cn/u/6431898981?uid=6431898981&amp;featurecode=20000320",statuses_count: 7255,verified: false,verified_type: -1,close_blue_v: false,description: "",gender: "m",mbtype: 0,urank: 4,mbrank: 0,follow_me: false,following: false,followers_count: 2,follow_count: 62,cover_image_phone: "https://tva1.sinaimg.cn/crop.0.0.640.640.640/549d0121tw1egm1kjly3jj20hs0hsq4f.jpg",avatar_hd: "https://wx2.sinaimg.cn/orj480/0071hAK9ly8fmdxpea2vxj306n064glj.jpg",like: false,like_me: false,badge: &#123;user_name_certificate: 1,wenchuan_10th: 1&#125; å¾ˆè›‹ç–¼çš„æ˜¯ï¼Œç‚¹èµžå’Œè¯„è®ºæŽ¥å£ä¸­å¹¶æ²¡æœ‰ç›¸å…³æ•°æ®ï¼Œæ‰€ä»¥ç‚¹èµžå’Œè¯„è®ºéƒ¨åˆ†è¦é‡æ–°çˆ¬å–ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617&#123;id: 4247512245791226,created_at: "5åˆ†é’Ÿå‰",source: "å¾®åš weibo.com",user: &#123;id: 6114792181,screen_name: "Ming_54456",profile_image_url: "https://tvax1.sinaimg.cn/crop.367.164.918.918.180/006FP2Mlly8fjs2mf3x6pj319x0yoqbo.jpg",verified: false,verified_type: -1,mbtype: 12,profile_url: "https://m.weibo.cn/u/6114792181?uid=6114792181&amp;featurecode=20000320",remark: "",following: false,follow_me: false&#125;&#125;, å¾®åšå®˜æ–¹APIåŒæ ·æä¾›ç›¸åº”æ•°æ® ï¼Œå»ºè®®ä½¿ç”¨å‰ä»”ç»†é˜…è¯» æŽ¥å£è®¿é—®é¢‘æ¬¡æƒé™ çˆ¬è™«ä»£ç çˆ¬è™«å®Œæ•´ä»£ç å¯ä»¥åŽ»æˆ‘çš„å…¬ä¼—å·ï¼ˆPythonçˆ¬è™«ä¸Žç®—æ³•è¿›é˜¶ï¼‰ï¼Œå›žå¤â€œå¾®åšâ€èŽ·å¾—ã€‚ çˆ¬è™«è¯­è¨€æ˜¯Python3ï¼Œä½¿ç”¨Scrapyæ¡†æž¶ï¼Œæ•°æ®ä¿å­˜åœ¨mongoï¼Œæ²¡æœ‰ä½¿ç”¨åˆ†å¸ƒå¼ï¼Œå•æœº3å¤©è·‘å®Œã€‚ å› ä¸ºå¾®åšçš„åçˆ¬ï¼Œéœ€è¦å¤§é‡ä»£ç†æ”¯æ’‘ã€‚ 1234567891011121314# code is far away from bugs with the god animal protecting I love animals. They taste delicious. â”â”“ â”â”“ â”â”›â”»â”â”â”â”›â”»â”“ â”ƒ â˜ƒ â”ƒ â”ƒ â”³â”› â”—â”³ â”ƒ â”ƒ â”» â”ƒ â”—â”â”“ â”â”â”› â”ƒ â”—â”â”â”â”“ â”ƒ ç¥žå…½ä¿ä½‘ â”£â”“ â”ƒ æ°¸æ— BUGï¼ â”â”› â”—â”“â”“â”â”â”³â”“â”â”› â”ƒâ”«â”« â”ƒâ”«â”« â”—â”»â”› â”—â”»â”› çˆ¬å–çš„æ•°æ®å®žä¾‹ï¼š 1234567891011&#123; "_id" : ObjectId("5b162d10e0eafb1d6e63b460"), "id" : NumberLong(5372682651), "statuses_count" : 10599, "screen_name" : "ç”¨æˆ·5372682651", "profile_url" : "https://m.weibo.cn/u/5372682651?uid=5372682651", "description" : "æš‚æ— æ•°æ®", "gender" : "f", "followers_count" : 80, "follow_count" : 1060&#125; ç®€å•æ•°æ®æ¸…æ´—æœ€ç»ˆè·‘å®Œä¸€æ¬¡çˆ¬åˆ°çš„æ•°æ®æœ‰3889285ï¼Œå› ä¸ºæœ‰å¤§é‡é¡µé¢ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œå¯¹è¿™äº›è¯·æ±‚åšä¸€ä¸ªé‡è¯•æ•ˆæžœä¼šå¥½äº›ã€‚ æ•°æ®æ¸…æ´—å¯¹æˆ‘æ¥è¯´çœŸçš„æ˜¯ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼Œæ‰¾äº†å¾ˆå¤šç›¸å…³èµ„æ–™ï¼Œæœ€åŽä½¿ç”¨äº†mongoçš„aggregateæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œä¸‹é¢æ˜¯ä»£ç ï¼š 1234567891011db.getCollection('Weibo').aggregate( [ &#123;"$group" : &#123;_id:&#123;id:"$id",gender:"$gender"&#125;, count:&#123;$sum:1&#125;&#125;&#125;, &#123;$sort:&#123;"count":-1&#125;&#125;, &#123; $out:"result"&#125;, ], &#123; allowDiskUse:true, cursor:&#123;&#125; &#125; ) ç»“æžœäº§ç”Ÿäº†ä¸€å¼ æ–°çš„è¡¨ï¼Œå¯¹æ¯ä¸ªIDè¿›è¡Œç»Ÿè®¡ï¼Œå¹¶æŽ’åºï¼Œå¦‚ä¸‹ï¼š 1234567891011121314&#123; "_id" : &#123; "id" : NumberLong(5737668415), "gender" : "f" &#125;, "count" : 106701.0&#125;&#123; "_id" : &#123; "id" : NumberLong(5909154992), "gender" : "m" &#125;, "count" : 72298.0&#125; å‚ä¸Žæ¬¡æ•°è¾¾åˆ°åä¸‡æ¬¡ï¼Œå¤©å‘ï¼Œè¶…çº§çœŸçˆ±ç²‰ï¼Œç¼˜æ¥æ˜¯å¥¹ï¼Œç–¯ç‹‚åˆ·å±æœ‰æ²¡æœ‰ å¥½äº†ï¼ŒçŽ°åœ¨å¼€å§‹çœ‹çœ‹çœŸæ­£çš„æ•°æ®å§ã€‚ æœ¬æ¬¡å…±é‡‡é›†ç”¨æˆ·æ•°æ®3889285æ¡ï¼Œï¼ŒåŽŸå§‹æ•°æ®ä¸­ç”·æ€§å æ¯”%33.68ï¼Œå¥³æ€§å æ¯”%66.32ï¼Œå¥½å§ï¼Œçœ‹æ¥å¥³æ€§ç²‰ä¸æ›´å¤šï¼›åŽ»é‡ä¹‹åŽæ•°æ®å…±æœ‰1129035ï¼Œç”·æ€§å æ¯”%29.58ï¼Œå¥³æ€§å æ¯”%70.42ï¼Œæ€Žä¹ˆçœ‹ç€å¥³æ€§ç²‰ä¸è¿˜æ˜¯æ›´å¤šå‘¢ã€‚ã€‚ æˆ‘ä»¬å†æ¥è®¡ç®—ä¸€ä¸ªæ•°æ®ï¼Œäº²å¯†åº¦å¤§äºŽ10çš„ç²‰ä¸å…±æœ‰16486ä½ï¼Œå…¶ä¸­ç”·æ€§å æ¯”%24.05ï¼Œå¥³æ€§å æ¯”%75.95ï¼ŒäºŽæ˜¯æœ‰ä¸‹é¢è¿™å¼ è¡¨æ ¼ã€‚ äº²å¯†åº¦ ç”·æ€§å æ¯” å¥³æ€§å æ¯” ç²‰ä¸æ€»æ•° å¤§äºŽ0 29.58% 70.42% 1129035 å¤§äºŽ10 24.05% 75.95% 16486 å¤§äºŽ50 32.77% 67.23% 4285 å¤§äºŽ100 36.77% 63.23% 2578 å¤§äºŽ1000 40.18% 59.82% 331 å¤§äºŽ10000 37.5% 62.5% 24 Top10 30.00% 70.00% 10 è¿™ä¸ªæ•°æ®æŒºæœ‰æ„æ€çš„ï¼Œç”»å¼ è¡¨çž§çž§ ç²‰ä¸æ˜µç§°è¯äº‘ ï¼ˆæ„Ÿè°¢BDPï¼‰ ç»“è®ºçœ‹äº†è¿™äº›æ•°æ®ï¼Œç›¸ä¿¡å¤§å®¶è‡ªå·±å¿ƒä¸­å·²ç»æœ‰äº†ç­”æ¡ˆã€‚ èƒ¡æ­Œä½œä¸ºä¸€ä¸ªçŽ‰æ ‘ä¸´é£Žã€ è‹±ä¿Šæ½‡æ´’ã€ é£Žæµå€œå‚¥ã€ ä¸€è¡¨äººæ‰ã€ é«˜å¤§å¨çŒ›ã€ æ°”å®‡ä¸å‡¡ã€ æ¸©æ–‡å°”é›…ã€ å“è²Œéžå‡¡ã€ ä»ªè¡¨ä¸å‡¡çš„ç”·äººï¼Œå¥³ç²‰ä¸æ¯”è¾ƒå¤šæ˜¯å¾ˆæ­£å¸¸çš„ã€‚ä½†æ˜¯ä¸ºå•¥å¤§å®¶éƒ½ä¼šæœ‰ä¸€ç§ç”·ç²‰ä¸æ¯”å¥³ç²‰ä¸å¤šçš„é”™è§‰å‘¢ï¼Œæˆ‘è§‰å¾—æ˜¯å¯¹æ¯”äº§ç”Ÿçš„æ„Ÿè§‰ã€‚æˆ‘æ‹¿èƒ¡æ­Œä¸Žå…¶ä»–å°é²œè‚‰ä½œå¯¹æ¯”ï¼Œè‚¯å®šä¼šè·Ÿæ¬£èµèƒ¡æ­Œã€‚ä½ è¯´å‘¢ï¼Ÿ æœ¬æ–‡å¹¶ä¸æ˜¯ä¸ºäº†è¯æ˜Žä»€ä¹ˆï¼Œåªæ˜¯ä½œä¸ºä¸€åæ™®é€šç²‰ä¸æƒ³åŽ»çœ‹çœ‹æ›´å¤šä¸œè¥¿ã€‚å…¶å®žæœ¬æ¬¡æ•°æ®çˆ¬å–æœ‰å¾ˆå¤šåœ°æ–¹éœ€è¦ä¼˜åŒ–ï¼Œå¤§å®¶ä¸ç”¨å¤ªè¿‡å½“çœŸã€‚å¦‚æžœä½ æœ‰æ›´å¥½çš„åˆ†æžæ•°æ®çš„æƒ³æ³•ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚ è€å¤§é•‡æ¥¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[zsh(+fish)=å®Œç¾Žç»ˆç«¯]]></title>
      <url>%2F2018%2F06%2F05%2Fzsh-fish-%E5%AE%8C%E7%BE%8E%E7%BB%88%E7%AB%AF%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åäºŒç¯‡åŽŸåˆ›æ–‡ç«  å¥½çœ‹ã€å¥½ç”¨ (à¹‘â€¢ . â€¢à¹‘) è‡ªä»Žç”¨äº†æ·±åº¦ï¼Œæœ‰ä¸€ä¸ªéžå¸¸æ˜Žæ˜¾çš„å˜åŒ–å°±æ˜¯ç»ˆç«¯çš„æ”¹å˜ï¼Œå®žåœ¨æ˜¯æ¯”windowsçš„å¥½ç”¨ä¸€ç™¾å€ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ä¸€äº›å·¥å…·ã€‚ä¸‹é¢è¯´è¯´æˆ‘çŽ°åœ¨çš„é…ç½®ã€‚ å¦‚ä¸‹å›¾ï¼Œæ˜¯æˆ‘ç›®å‰æ­£åœ¨ä½¿ç”¨çš„ç»ˆç«¯ï¼Œé›†æˆäº†zshå’Œfishçš„åŠŸèƒ½ï¼Œç›®å‰ç”¨ç€æœ€é¡ºæ‰‹çš„ã€‚ https://github.com/robbyrussell/oh-my-zsh å®‰è£…zshä¸€èˆ¬æ¥è¯´ï¼Œç›´æŽ¥è¿è¡Œsudo apt-get install zshå³å¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸‹è½½æºDownload zsh sourceï¼Œä½¿ç”¨curlå®‰è£…curl -L &lt;https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh&gt; | sh æŠŠzshè®¾ç½®ä¸ºé»˜è®¤ç»ˆç«¯chsh -s $(which zsh) æ›´å¤šç»†èŠ‚å‚è€ƒInstalling ZSH å…ˆæ¬£èµä¸‹zshçš„æ•ˆæžœã€‚æ¥è‡ªå®˜ç½‘ ä¿®æ”¹zshä¸»é¢˜vi ~/.zshrcï¼Œç„¶åŽæ‰¾åˆ°ZSH_THEMEï¼Œé»˜è®¤çš„æ˜¯ZSH_THEME=robbyrussellï¼Œå°±åƒæˆ‘è¿™æ ·ï¼Œå› ä¸ºæˆ‘è¿™é‡Œç”¨çš„æ˜¯æ·±åº¦ç»ˆç«¯ï¼Œè€Œä¸”ä¹Ÿä¿®æ”¹äº†ç»ˆç«¯ä¸»é¢˜ å½“ç„¶ï¼Œä½ å¯ä»¥æ¥è¿™é‡Œçœ‹çœ‹ï¼Œé€‰ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ Themes agnosterä¹Ÿå¾ˆå¥½çœ‹ã€‚ æ®è¯´å¤§ç¥žéƒ½ç”¨randomï¼Œæ˜¯çœŸçš„å—ï¼Ÿ å®‰è£… fishæœ‰å¥è¯è¿™æ ·è¯´ äºŒé€¼é’å¹´ç”¨ bashï¼Œæ™®é€šé’å¹´ç”¨ zshï¼Œæ–‡è‰ºé’å¹´ç”¨ fish æˆ‘æœ€å–œæ¬¢ fishçš„ä¸€ç‚¹å°±æ˜¯ æ ¹æ®åŽ†å²è¾“å…¥è‡ªåŠ¨è¡¥å…¨ï¼Œæ¥çœ‹å›¾ï¼Œåªè¦æ˜¯åŽ†å²æœ‰è¾“å…¥çš„ï¼Œéƒ½ä¼šæœ‰è®°å½•æœ‰æç¤ºï¼Œå¯¹äºŽä¸€äº›å¾ˆé•¿çš„å‘½ä»¤ï¼Œç®€ç›´è¶…çº§çˆ½ï¼Œå†ä¹Ÿä¸ç”¨æ‰‹åŠ¨å¤åˆ¶ç²˜è´´äº†ã€‚ ä½†æ˜¯fishå’Œzshå¥½åƒä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ’ä»¶å¯ä»¥åœ¨zshä¸Šè¾¾åˆ°å’ŒfishåŒæ ·çš„æ•ˆæžœã€‚ åœ°å€åœ¨è¿™é‡Œ zsh-autosuggestions é¦–å…ˆä¸‹è½½ä¸‹æ¥ git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions ç„¶åŽvi ~/.zshrcï¼Œæ·»åŠ zsh-autosuggestionsåˆ°pluginsä¸­ï¼Œgitæ˜¯é»˜è®¤å°±æœ‰çš„ã€‚ç„¶åŽæ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå°±å¯ä»¥è¾¾åˆ°fishæœ‰çš„ä½ æ˜¯æç¤ºåŠŸèƒ½äº†ã€‚ è¿˜å¯ä»¥å®‰è£…è¯­æ³•é«˜äº®æ’ä»¶ zsh-syntax-highlightingï¼Œå®‰è£…æ–¹æ³•å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œåœ¨pluginsä¸­æ·»åŠ zsh-syntax-highlightingå³å¯ã€‚ è¿™äº›æ˜¯æˆ‘ç›®å‰å‘çŽ°çš„æ¯”è¾ƒå¥½ç”¨çš„æ’ä»¶å’Œå·¥å…·ï¼Œå¤§å®¶æœ‰ä»€ä¹ˆæŽ¨èçš„å—ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çˆ¬è™«å­¦åˆ°ä»€ä¹ˆç¨‹åº¦å¯ä»¥åŽ»æ‰¾å·¥ä½œ]]></title>
      <url>%2F2018%2F05%2F29%2F%E7%88%AC%E8%99%AB%E5%AD%A6%E5%88%B0%E4%BB%80%E4%B9%88%E7%A8%8B%E5%BA%A6%E5%8F%AF%E4%BB%A5%E5%8E%BB%E6%89%BE%E5%B7%A5%E4%BD%9C%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  åˆ†äº«ä¸‹æˆ‘çš„ç»éªŒä¸Žæ•™è®­ (à¹‘â€¢ . â€¢à¹‘) æœ€è¿‘å¾ˆå¤šæœ‹å‹é—®æˆ‘ï¼Œæˆ‘åœ¨è‡ªå­¦çˆ¬è™«ï¼Œå­¦åˆ°ä»€ä¹ˆç¨‹åº¦å¯ä»¥åŽ»æ‰¾å·¥ä½œå‘¢ï¼Ÿ è¿™ç¯‡æ–‡ç« ä¼šè¯´è¯´æˆ‘è‡ªå·±çš„å¿ƒå¾—ä½“éªŒï¼Œå…³äºŽçˆ¬è™«ã€å…³äºŽå·¥ä½œï¼Œä»…ä¾›å‚è€ƒã€‚ å­¦åˆ°å“ªç§ç¨‹åº¦æš‚ä¸”æŠŠç›®æ ‡å®šä½åˆçº§çˆ¬è™«å·¥ç¨‹å¸ˆï¼Œç®€å•åˆ—ä¸€ä¸‹å§ï¼š ï¼ˆå¿…è¦éƒ¨åˆ†ï¼‰ è¯­è¨€é€‰æ‹©ï¼šä¸€èˆ¬æ˜¯äº†è§£Pythonã€Javaã€Golangä¹‹ä¸€ ç†Ÿæ‚‰å¤šçº¿ç¨‹ç¼–ç¨‹ã€ç½‘ç»œç¼–ç¨‹ã€HTTPåè®®ç›¸å…³ å¼€å‘è¿‡å®Œæ•´çˆ¬è™«é¡¹ç›®ï¼ˆæœ€å¥½æœ‰å…¨ç«™çˆ¬è™«ç»éªŒï¼Œè¿™ä¸ªä¸‹é¢ä¼šè¯´åˆ°ï¼‰ åçˆ¬ç›¸å…³ï¼Œcookieã€ipæ± ã€éªŒè¯ç ç­‰ç­‰ ç†Ÿç»ƒä½¿ç”¨åˆ†å¸ƒå¼ ï¼ˆéžå¿…è¦ï¼Œå»ºè®®ï¼‰ äº†è§£æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¦‚RabbitMQã€Kafkaã€Redisç­‰ å…·æœ‰æ•°æ®æŒ–æŽ˜ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€ä¿¡æ¯æ£€ç´¢ã€æœºå™¨å­¦ä¹ ç»éªŒ ç†Ÿæ‚‰APPæ•°æ®é‡‡é›†ã€ä¸­é—´äººä»£ç† å¤§æ•°æ®å¤„ç†ï¼ˆHive/MR/Spark/Stormï¼‰ æ•°æ®åº“Mysqlï¼Œredisï¼Œmongdb ç†Ÿæ‚‰Gitæ“ä½œã€linuxçŽ¯å¢ƒå¼€å‘ è¯»æ‡‚jsä»£ç ï¼Œè¿™ä¸ªçœŸçš„å¾ˆé‡è¦ å¦‚ä½•æå‡éšä¾¿çœ‹çœ‹çŸ¥ä¹Žä¸Šçš„æ•™ç¨‹å°±å¯ä»¥å…¥é—¨äº†ï¼Œå°±Pythonè€Œè¨€ï¼Œä¼šrequestså½“ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦äº†è§£scrapyå’Œpyspiderè¿™ä¸¤ä¸ªæ¡†æž¶ï¼Œscrapy_redisä¹Ÿæ˜¯éœ€è¦ç†è§£åŽŸç†çš„ã€‚ åˆ†å¸ƒå¼å¦‚ä½•æ­å»ºã€å¦‚ä½•è§£å†³å…¶ä¸­é‡åˆ°å†…å­˜ã€é€Ÿåº¦é—®é¢˜ã€‚ å‚è€ƒ scrapy-redis å’Œ scrapy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ä»€ä¹ˆå«å…¨ç«™çˆ¬å–æœ€ç®€å•çš„æ‹¿æ‹‰é’©æ¥ä¸¾ä¾‹ï¼Œæœç´¢å…³é”®è¯ï¼Œæœ‰30é¡µï¼Œä¸è¦ä»¥ä¸ºæŠŠè¿™30é¡µçˆ¬å®Œå°±æ˜¯å…¨ç«™çˆ¬å–äº†ï¼Œä½ åº”è¯¥æƒ³æ–¹æ³•æŠŠæ‰€æœ‰æ•°æ®å…¨éƒ¨çˆ¬ä¸‹æ¥ã€‚ ä»€ä¹ˆåŠžæ³•ï¼Œé€šè¿‡ç­›é€‰ç¼©å°èŒƒå›´ï¼Œæ…¢æ…¢æ¥å°±OKäº†ã€‚ åŒæ—¶ï¼Œæ¯ä¸ªèŒä½è¿˜ä¼šæœ‰æŽ¨èèŒä½ï¼Œå†å†™ä¸€ä¸ªé‡‡é›†æŽ¨èçš„çˆ¬è™«ã€‚ è¿™ä¸ªè¿‡ç¨‹éœ€è¦æ³¨æ„çš„æ˜¯å¦‚ä½•åŽ»é‡ï¼ŒMongoå¯ä»¥ã€redisä¹Ÿå¯ä»¥ å‚è€ƒ Scrapyä¸­å¦‚ä½•æé«˜æ•°æ®çš„æ’å…¥é€Ÿåº¦ å®žé™…é¡¹ç›®ç»éªŒè¿™ä¸ªé¢è¯•ä¸­è‚¯å®šä¼šè¢«äººé—®é“ï¼Œå¦‚ï¼š ä½ çˆ¬è¿‡å“ªäº›ç½‘ç«™ æ—¥å‡æœ€å¤§é‡‡é›†é‡æ˜¯å¤šå°‘ ä½ é‡åˆ°å“ªäº›æ£˜æ‰‹é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ ç­‰ç­‰ é‚£ä¹ˆæ€Žä¹ˆæ‰¾é¡¹ç›®å‘¢ï¼Ÿæ¯”å¦‚æˆ‘è¦çˆ¬å¾®åšæ•°æ®ï¼ŒåŽ»Githubä¸­æœç´¢ä¸‹ï¼Œé¡¹ç›®è¿˜ç®—å°‘å—ï¼Ÿ è¯­è¨€é€‰æ‹©æˆ‘è‡ªå·±å»ºè®®æ˜¯Pythonã€Javaã€Golangæœ€å¥½éƒ½äº†è§£ï¼ŒJavaçˆ¬è™«çš„ä¹Ÿå¾ˆå¤šï¼Œä½†æ˜¯ç½‘ä¸Šæ•™ç¨‹å‡ ä¹Žéƒ½æ˜¯Pythonçš„ï¼Œæ‚²å“€ã€‚ æœ€åŽè¯´ä¸‹Golangï¼ŒGolangçœŸçš„å¾ˆç‰›é€¼ï¼Œè¯´ä¸ªæ•°å­—ï¼ŒGolangå¯ä»¥æ¯åˆ†é’Ÿä¸‹è½½ç½‘é¡µæ•°é‡ 2W ï¼ŒPythonå¯ä»¥å—~~ å®£ä¼ ä¸‹è‡ªå·±çš„åˆ·é¢˜é¡¹ç›® Leetcode Solutions By All Language å…³äºŽåçˆ¬å¸¸è§çš„ UAã€Referç­‰éœ€è¦äº†è§£æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæœ‰äº›éªŒè¯çš„IDå¦‚ä½•äº§ç”Ÿçš„ï¼Œæ˜¯å¦å¿…è¦ï¼›å…³äºŽIPæ± è¿™å—æˆ‘ä¸äº†è§£ï¼Œä¸å¤šè¯´ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¦‚ä½•è®¾è®¡æ‹‰é»‘æœºåˆ¶ï¼›æ¨¡æ‹Ÿç™»é™†ä¹Ÿæ˜¯å¿…è¦çš„ï¼Œfuck-login å¯ä»¥ç ”ç©¶ä¸‹ä»£ç ï¼Œæˆ–è€…æPRã€‚ æ¨¡æ‹Ÿç™»é™†å…¶å®žå°±æ˜¯ä¸€æ­¥æ­¥çš„è¯·æ±‚ï¼Œä¿å­˜cookieä¼šè¯ å¦‚ä½•åˆ¤æ–­èƒ½åŠ›è¶³å¤Ÿå¾ˆç®€å•ï¼Œç»™ä¸ªä»»åŠ¡ï¼Œçˆ¬å–çŸ¥ä¹Žä¸Šæ‰€æœ‰é—®é¢˜ã€‚ ä½ ä¼šå¦‚ä½•æ€è€ƒå¹¶è®¾è®¡è¿™ä¸ªé¡¹ç›®ï¼Ÿ æ¬¢è¿Žç•™è¨€æŒ‡å‡º ä»¥ä¸Šä»…ä¸ºä¸ªäººçœ‹æ³•ï¼Œè‹¥æœ‰ä¸è¶³ä¹‹å¤„è¯·æŒ‡å‡ºã€‚å¸Œæœ›å¯ä»¥å¸®åŠ©ä½ ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½ å†™è¿‡å“ªäº›è®©ä½ ç¡ä¸å¥½è§‰çš„BUG]]></title>
      <url>%2F2018%2F05%2F28%2F%E4%BD%A0%E5%86%99%E8%BF%87%E5%93%AA%E4%BA%9B%E8%AE%A9%E4%BD%A0%E7%9D%A1%E4%B8%8D%E5%A5%BD%E8%A7%89%E7%9A%84BUG%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”åç¯‡åŽŸåˆ›æ–‡ç«  ä½ å†™è¿‡ä»€ä¹ˆæœ‰è¶£çš„BUGï¼Ÿ (à¹‘â€¢ . â€¢à¹‘) ä»Šå¤©ï¼ŒèŠèŠ BUGã€‚ ä»Šå¤©ä¸‹åˆå‘çŽ°ç¨‹åºä¸­ä¸€ä¸ªBUGï¼Œç´§æ€¥ä¿®å¤ä¹‹åŽé‡æ–°ä¸Šçº¿ï¼Œdebugä¸Šæµ‹è¯•æ²¡æ¯›ç—…ï¼ŒOKä¸Šæ­£å¼çŽ¯å¢ƒã€‚buildå®Œä¹‹åŽï¼Œç¨‹åºä¸€ç›´æœ‰é—®é¢˜ï¼Œæ²¡æ³•è¯»æ•°æ®ï¼Œå¤´ç–¼å•Šï¼Œè‡ªå·±çœ‹çš„çœ¼ç›éƒ½è¦çžŽäº†ï¼Œæ‰¾ä¸åˆ°åŽŸå› ã€‚ å¢žåŠ æ›´å¤šæ—¥å¿—ï¼Œç»™å‡ºé”™çš„åœ°æ–¹æ¯ä¸€æ¡éƒ½æ‰“å°å‡ºæ—¥å¿—æ¥ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚æ”¹å®Œï¼Œä¸Šdebugï¼Œå¥½çš„æ²¡æ¯›ç—…ï¼Œä¸Šæ­£å¼çŽ¯å¢ƒï¼Œæ ¹æ®æ—¥å¿—æˆ‘å¤§æ¦‚åˆ¤æ–­å‡ºæ˜¯é‚£é‡Œçš„é—®é¢˜äº†ï¼Œæ”¹ï¼Œçº¿ä¸‹æµ‹è¯•ï¼Œdebugæµ‹è¯•ï¼Œéƒ½æ²¡é—®é¢˜ï¼Œå†ä¸Šæ­£å¼ç‰ˆï¼Œè¿˜æ˜¯ä¸è¡Œã€‚ è¿™ä¸ªæ—¶å€™å·²ç»ç²¾ç–²åŠ›ç«­äº†ï¼Œæƒ³ç ¸ç”µè„‘ï¼ï¼ï¼ ä¸ºä»€ä¹ˆdebugçŽ¯å¢ƒå¯ä»¥ï¼Œæ­£å¼çŽ¯å¢ƒä¸è¡Œå•Šï¼Ÿï¼Ÿ ç„¶åŽç¨‹åºå°±è·‘èµ·æ¥äº†ï¼Œæ˜¯çš„ï¼Œå°±è·‘èµ·æ¥äº†ã€‚ä¸‹ç­ï¼Œå›žå®¶ã€‚ï¼ˆå·²ç»å¿«10ç‚¹äº†ï¼‰ å›žåˆ°å®¶ï¼Œæ´—å®Œæ¾¡ï¼Œå†™å®Œè¿™ç¯‡æ–‡ç« ï¼Œå†åŽ»æ£€æŸ¥æ—¥å¿—ï¼Œso far so goodï¼ï¼å¼€å¿ƒ~ çŽ°åœ¨æˆ‘å†ä»”ç»†æƒ³äº†æƒ³ï¼Œå¯èƒ½æ˜¯è¿™æ ·ï¼šçº¿ä¸ŠæœåŠ¡å™¨å’Œæ•°æ®åº“åŽ‹åŠ›æ¯”è¾ƒå¤§ï¼Œç¨‹åºå­çº¿ç¨‹æ²¡æœ‰è·‘èµ·æ¥ã€æˆ–è€…æ•°æ®åº“æ²¡å»ºç´¢å¼•ã€æŸ¥è¯¢æ—¶é—´è¿‡ä¹…ï¼ˆæ˜Žå¤©åŽ»éªŒè¯ä¸‹ï¼Œå› ä¸ºä¹‹å‰ä¸€ç›´æ²¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼‰ ä¸ç®¡äº†ï¼Œæˆ‘è¦ç¡è§‰äº†ã€‚ æ¥è®¨è®ºä¸‹ï¼Œä½ å†™è¿‡ä»€ä¹ˆè®©ä½ ç¡ä¸å¥½è§‰çš„BUGï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[gitå¤§æ³•å¥½ï¼Œpushéœ€è°¨æ…Ž]]></title>
      <url>%2F2018%2F05%2F26%2Fgit%E5%A4%A7%E6%B3%95%E5%A5%BD%EF%BC%8Cpush%E9%9C%80%E8%B0%A8%E6%85%8E%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åä¹ç¯‡åŽŸåˆ›æ–‡ç«  æ³¨æ„è‡ªå·±çš„è´¦å·å®‰å…¨ (à¹‘â€¢ . â€¢à¹‘) åœ¨æ¯æ¬¡git pushå‰ï¼Œè¯·æ£€æŸ¥ä½ çš„æäº¤æ–‡ä»¶ æ•…äº‹æ˜¯è¿™æ ·æ¥çš„ã€‚ï¼ˆæˆ‘åˆå¼€å§‹è®²æ•…äº‹äº†ï¼‰ å‰å‡ å¤©åœ¨ Githubä¸Šæ‰¾ä¸€äº›èµ„æ–™ï¼Œç¢°å·§çœ‹åˆ°ä¸€ä¸ªåˆé€‚çš„ï¼Œå°±æŠŠä»– clone ä¸‹æ¥ï¼Œå‡†å¤‡åœ¨æœ¬åœ°è·‘ç€è¯•è¯•çœ‹æ•ˆæžœï¼Œä½†æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™å´å‘çŽ°æç¤ºé”™è¯¯ï¼Œæ ¹ç»é”™è¯¯æç¤ºåŽŸå› æˆ‘å‘çŽ°æ˜¯ç¼ºå°‘äº†ä¸€ä¸ªåä¸ºconfig.pyçš„æ–‡ä»¶ã€‚ ç»éªŒå‘Šè¯‰æˆ‘ï¼Œè¿™åº”è¯¥æ˜¯ä¸€ä¸ªå†™æœ‰ç›¸å…³é…ç½®çš„æ–‡ä»¶ã€‚çŽ°åœ¨ç¼ºå°‘äº†è¿™ä¸ªæ–‡ä»¶ï¼Œæ•´ä¸ªç¨‹åºå°±æ²¡æ³•è¿è¡Œï¼Œè‡ªå·±å†™çš„è¯åˆä¸çŸ¥é“æ ¼å¼ä»€ä¹ˆçš„ã€‚ é‚£æˆ‘è¯¥æ€Žä¹ˆåŠžï¼Ÿ æœ€åŽæˆ‘è¿˜æ˜¯æ‰¾åˆ°äº†ï¼Œåœ¨Githubä¸Šã€‚æˆ‘åŽ»è¯¥é¡¹ç›®ä¸Šçœ‹åˆ°ä½œè€…æäº¤äº†å¾ˆå¤šæ¬¡çš„commitï¼Œä»ŽåŽ†å²çš„æäº¤ä¸­æˆ‘æ‰¾åˆ°äº†ç›¸å…³ä¿¡æ¯ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«æœ‰ä½œè€…ç›¸å…³æ•°æ®åº“çš„æ–‡ä»¶ï¼Œæˆ‘å·²ç»é€šçŸ¥ä½œè€…ï¼Œè®©ä»–åŽ»åˆ é™¤æ­¤é¡¹ç›®ã€‚ çœ‹ä¸‹å›¾ï¼Œæ¯ä¸ªå¼€æºé¡¹ç›®éƒ½ä¼šæ˜¾ç¤ºæ‰€æœ‰çš„commitsï¼Œæ¯æ¬¡æäº¤éƒ½ä¼šæŠŠgitå·¥ä½œç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æäº¤ï¼ˆå½“ç„¶ä½ å¯ä»¥æŒ‡å®šå…·ä½“çš„æ–‡ä»¶ï¼Œæˆ‘ä¹ æƒ¯git add .ï¼‰ã€‚å³ä½¿ä½ ä¸‹ä»Šå¤©æŠŠå¯†ç åˆ é™¤äº†ï¼Œä½†æ˜¯ä½ æ˜¨å¤©æäº¤çš„å¯†ç è¿˜æ˜¯ä¼šä¿å­˜åˆ°commitsä¸­ï¼Œåˆ«äººè¿˜æ˜¯å¯ä»¥æ‰¾åˆ°ã€‚ ä¾‹å¦‚ä½ çŽ°åœ¨çœ‹åˆ°çš„é¡¹ç›® Leetcode-Solutions ï¼Œä½ å¯ä»¥ä»Žcommitä¸­è¿›å…¥ï¼ŒæŸ¥çœ‹åˆ°åŽ†å²contributorsçš„æ¯ä¸€æ¬¡æäº¤çš„å®Œæ•´æ–‡ä»¶ï¼Œ å¦‚ï¼šå¾ˆä¹…ä¹‹å‰çš„æäº¤ æ‰€ä»¥çœ‹åˆ°è¿™é‡Œï¼Œä½ å°±æœ‰å¿…è¦æƒ³æƒ³è‡ªå·±æœ‰æ²¡æœ‰æŠŠä»»ä½•ä¸ªäººéšç§æ•°æ®æäº¤åˆ° Github ä¸Šï¼Œå¦‚æžœæœ‰ï¼Œå»ºè®®è¿˜æ˜¯åˆ é™¤é¡¹ç›®å§ã€‚ å½“ç„¶ï¼Œè¿™æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ä½ çš„é¡¹ç›®æ˜¯å…¬å¼€çš„ï¼ˆPublicï¼‰ï¼Œå¦‚æžœæ˜¯ç§æœ‰çš„ï¼ˆPrivateï¼‰ï¼Œå°±ä¸ç”¨è€ƒè™‘äº†ã€‚ åˆ›å»ºç§æœ‰é¡¹ç›®æ˜¯æ”¶è´¹çš„ï¼Œä¸€èˆ¬é€‚åˆå…¬å¸å’Œç»„ç»‡ã€‚ æœ€åŽé¦–å°¾å‘¼åº”ï¼š gitå¤§æ³•å¥½ï¼Œpushéœ€è°¨æ…Ž]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonæœ€å‡çš„åº“ï¼šFaker]]></title>
      <url>%2F2018%2F05%2F22%2FPython%E6%9C%80%E5%81%87%E7%9A%84%E5%BA%93%EF%BC%9AFaker%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åå…«ç¯‡åŽŸåˆ›æ–‡ç«  å¥½å‡å•Š (à¹‘â€¢ . â€¢à¹‘) å…ˆç”³æ˜Žä¸‹ï¼Œè¿™é‡Œè¯´çš„Fakerå’ŒLOLçš„å¤§é­”çŽ‹æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªæ˜¯æ°å¥½é‡åè€Œå·²ã€‚ æ•…äº‹ç”±æ¥æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®æ—¶éœ€è¦éšæœºç”Ÿæˆäººçš„åå­—ï¼Œç™¾åº¦ä¹‹åŽï¼Œæˆ‘æ˜¯è¿™æ ·å†™çš„ 123456789101112131415def random_first_name(): """ç™¾å®¶å§“ä¸­é€‰æ‹©ä¸€ä¸ª""" name = ['èµµ', 'é’±', 'å­™', 'æŽ', 'å‘¨', 'å´', 'éƒ‘', 'çŽ‹', 'å†¯', 'é™ˆ', 'è¤š', 'å«', 'è’‹', 'æ²ˆ', 'éŸ©', 'æ¨', 'æœ±', 'ç§¦', 'å°¤', 'è®¸', 'ä½•', 'å•', 'æ–½', 'å¼ ', 'å­”', 'æ›¹', 'ä¸¥', 'åŽ', 'é‡‘', 'é­', 'é™¶', 'å§œ', 'æˆš', 'è°¢', 'é‚¹', 'å–»', 'æŸ', 'æ°´', 'çª¦', 'ç« ', 'äº‘', 'è‹', 'æ½˜', 'è‘›', 'å¥š', 'èŒƒ', 'å½­', 'éƒŽ', 'é²', 'éŸ¦', 'æ˜Œ', 'é©¬', 'è‹—', 'å‡¤', 'èŠ±', 'æ–¹', 'ä¿ž', 'ä»»', 'è¢', 'æŸ³'] return random.choice(name)def random_last_name(): """ç”Ÿæˆéšæœºæ±‰è¯­""" head = random.randint(0xb0, 0xf7) body = random.randint(0xa1, 0xf9) # åœ¨headåŒºå·ä¸º55çš„é‚£ä¸€å—æœ€åŽ5ä¸ªæ±‰å­—æ˜¯ä¹±ç ,ä¸ºäº†æ–¹ä¾¿ç¼©å‡ä¸‹èŒƒå›´ val = f'&#123;head:x&#125;&#123;body:x&#125;' str_ = bytes.fromhex(val).decode('gb2312') return str_name = random_first_name() + random_last_name() å‰è¾ˆåœ¨reviewçš„æ—¶å€™è¯´æ€Žä¹ˆè¿™ä¹ˆå¤æ‚ï¼ŒPythonä¸­æœ‰ä¸€ä¸ªä¸“é—¨ç”Ÿæˆå„ç±»å‡æ•°æ®çš„åº“ï¼šFakerï¼Œä½ åŽ»äº†è§£ä¸‹ã€‚ Fakeré¡¹ç›®åœ°å€ï¼šfaker å®‰è£…ï¼špip install Faker ä¸­æ–‡ç”Ÿæˆå‡æ•°æ®ï¼šLanguage zh_CN é‚£ä¹ˆFakerèƒ½ç”Ÿæˆé‚£äº›å‡æ•°æ®äº†ï¼Ÿ 1234from faker import Fakerfake = Faker(locale='zh_CN')# åˆå§‹åŒ– åœ°å€1234567891011121314fake.street_name()# 'å¹¿å·žè¡—fake.city_suffix()# 'åŽ¿'fake.street_address()# 'é¦™æ¸¯è·¯Båº§'fake.longitude()# -98.702031fake.district()# 'ç’§å±±' æ±½è½¦12fake.license_plate()# HZL 767 é“¶è¡Œ12345678fake.bban()# 'KLUX5928618542924'fake.bank_country()# 'GB'fake.iban()# 'GB04BPNH0448315286040' æ¡å½¢ç 12345678fake.ean(length=13)# '0994331656275'fake.ean8()# '51309350'fake.ean13()# '8336323543385' å…¬å¸1234567891011fake.company_prefix()# 'é¸¿ç¿æ€åš'fake.bs()# 'embrace strategic schemas'fake.company_suffix()# 'ç§‘æŠ€æœ‰é™å…¬å¸'fake.company()# 'æ˜‚æ­Œä¿¡æ¯ç½‘ç»œæœ‰é™å…¬å¸' ä¿¡ç”¨å¡1234567891011121314fake.credit_card_security_code(card_type=None)# '360'fake.credit_card_full(card_type=None)# 'Diners Club / Carte Blanche\næž— èŽ˜\n30311852484679 10/19\nCVC: 388\n'fake.credit_card_number(card_type=None)# '30240280288941'fake.credit_card_expire(start="now", end="+10y", date_format="%m/%y")# '11/26'fake.credit_card_provider(card_type=None)# 'Maestro' äº’è”ç½‘1234567891011121314151617181920212223242526fake.domain_word(*args, **kwargs)# 'jin'fake.company_email(*args, **kwargs)# 'zoulei@hou.com'fake.free_email(*args, **kwargs)# 'vxu@yahoo.com'fake.ipv4_private(network=False, address_class=None)# '10.202.214.57'fake.ascii_safe_email(*args, **kwargs)# 'baiyan@example.net'fake.email(*args, **kwargs)# 'minggao@gmail.com'fake.image_url(width=None, height=None)# 'https://www.lorempixel.com/817/102'fake.uri_page()# 'category'fake.ipv4_network_class()# 'c' å§“å1234567891011121314151617181920212223242526272829303132333435363738394041fake.first_name_female()# 'ç§€åŽ'fake.name_male()# 'éƒæ°'fake.suffix_female()# ''fake.first_name()# 'ä¸œ'fake.prefix_female()# ''fake.last_name_male()# 'æ‰¶'fake.last_name()# 'è£'fake.name_female()# 'æ›¹çº¢'fake.suffix_male()# ''fake.last_name_female()# 'è¾›'fake.last_romanized_name()# 'Zhang'fake.first_romanized_name()# 'Min'fake.romanized_name()# 'Xiuying Qiao'fake.name()# 'é’Ÿæƒ³' ç”µè¯12345678fake.phone_number()# '18874465626'fake.msisdn()# '8086764507444'fake.phonenumber_prefix()# 155 user_agentè¿™ä¸ªå¤§å®¶åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œå¸¸ç”¨çš„å°±æ˜¯ fake-useragentè¿™ä¸ªåº“12345678910111213141516171819202122232425262728293031323334353637fake.mac_platform_token()# 'Macintosh; Intel Mac OS X 10_12_1'fake.firefox()# ('Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_9_4; rv:1.9.4.20) '# 'Gecko/2012-05-03 04:16:34 Firefox/3.6.10')fake.windows_platform_token()# 'Windows 95'fake.safari()# ('Mozilla/5.0 (iPod; U; CPU iPhone OS 3_1 like Mac OS X; sat-IN) '# 'AppleWebKit/533.2.4 (KHTML, like Gecko) Version/3.0.5 Mobile/8B113 '# 'Safari/6533.2.4')fake.chrome(version_from=13, version_to=63, build_from=800, build_to=899)# ('Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/5331 (KHTML, like Gecko) '# 'Chrome/52.0.838.0 Safari/5331')fake.opera()# 'Opera/8.83.(X11; Linux i686; ce-RU) Presto/2.9.169 Version/10.00'fake.mac_processor()# 'Intel'fake.user_agent()# ('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_9 rv:3.0; pa-IN) '# 'AppleWebKit/532.47.6 (KHTML, like Gecko) Version/4.0.1 Safari/532.47.6')fake.linux_platform_token()# 'X11; Linux x86_64'fake.linux_processor()# 'i686'fake.internet_explorer()# 'Mozilla/5.0 (compatible; MSIE 5.0; Windows NT 5.01; Trident/3.1)' è¿™é‡Œä¸¾ä¾‹çš„éƒ½æ˜¯ä¸­æ–‡çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–è¯­è¨€çš„ï¼Œå°ä¼™ä¼´å¯ä»¥åŽ»å®˜ç½‘çœ‹çœ‹ã€‚ æœ€è¿‘åœ¨å’Œå°ä¼™ä¼´åˆ·é¢˜ï¼Œæ¬¢è¿ŽåŠ å…¥ Leetcode Solutions By All Language]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¼ºå¤§çš„å¼‚æ­¥çˆ¬è™« with aiohttp]]></title>
      <url>%2F2018%2F05%2F16%2F%E5%BC%BA%E5%A4%A7%E7%9A%84%E5%BC%82%E6%AD%A5%E7%88%AC%E8%99%AB-aiohttp%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  å¼‚æ­¥äº†è§£ä¸‹ (à¹‘â€¢ . â€¢à¹‘) çœ‹åˆ°çŽ°åœ¨ç½‘ç»œä¸Šå¤§å¤šè®²çš„éƒ½æ˜¯requestsã€scrapyï¼Œå´æ²¡æœ‰è¯´åˆ°çˆ¬è™«ä¸­çš„ç¥žå™¨ï¼šaiohttp aiohttp ä»‹ç»aiohttpæ˜¯ä»€ä¹ˆï¼Œå®˜ç½‘ä¸Šæœ‰è¿™æ ·ä¸€å¥è¯ä»‹ç»ï¼šAsync HTTP client/server for asyncio and Pythonï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ asyncioå’ŒPythonçš„å¼‚æ­¥HTTPå®¢æˆ·ç«¯/æœåŠ¡å™¨ ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š æ”¯æŒå®¢æˆ·ç«¯å’ŒHTTPæœåŠ¡å™¨ã€‚ æ— éœ€ä½¿ç”¨Callback Hellå³å¯æ”¯æŒServer WebSocketså’ŒClient WebSocketsã€‚ WebæœåŠ¡å™¨å…·æœ‰ä¸­é—´ä»¶ï¼Œä¿¡å·å’Œå¯æ’æ‹”è·¯ç”±ã€‚ emmmmï¼Œå¥½å§ï¼Œè¿˜æ˜¯æ¥çœ‹ä»£ç å§ Client example: 1234567891011121314import aiohttpimport asyncioasync def fetch(session, url): async with session.get(url) as response: return await response.text()async def main(): async with aiohttp.ClientSession() as session: html = await fetch(session, 'http://httpbin.org/headers') print(html)loop = asyncio.get_event_loop()loop.run_until_complete(main()) output: 1&#123;"headers":&#123;"Accept":"*/*","Accept-Encoding":"gzip, deflate","Connection":"close","Host":"httpbin.org","User-Agent":"Python/3.6 aiohttp/3.2.1"&#125;&#125; Server example: 123456789101112from aiohttp import webasync def handle(request): name = request.match_info.get('name', "Anonymous") text = "Hello, " + name return web.Response(text=text)app = web.Application()app.add_routes([web.get('/', handle), web.get('/&#123;name&#125;', handle)])web.run_app(app) output: 12======== Running on http://0.0.0.0:8080 ========(Press CTRL+C to quit) aiohttp ä¸Ž requestsåŽ»ç¿»ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ Client Quickstartï¼Œè®©æˆ‘æ„Ÿè§‰éžå¸¸ç†Ÿæ‚‰ï¼Œå¾ˆå¤šç”¨æ³•å’Œrequestsç›¸ä¼¼ã€‚ 1234async with aiohttp.ClientSession() as session: async with session.get('http://httpbin.org/get') as resp: print(resp.status) print(await resp.text()) é¦–å…ˆï¼Œå®˜æ–¹æŽ¨èä½¿ç”¨ClientSessionæ¥ç®¡ç†ä¼šè¯ï¼Œè¿™ä¸å°±æ˜¯requestsä¸­çš„sessionå—ï¼Ÿç”¨æ³•ä¹Ÿç±»ä¼¼ï¼Œä½¿ç”¨session.get()åŽ»å‘é€getè¯·æ±‚ï¼Œè¿”å›žçš„respä¸­å°±æœ‰æˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®äº†ï¼Œç”¨æ³•ä¹Ÿå’Œrequestsä¸€æ ·ï¼Œtextï¼ˆï¼‰æ–‡æœ¬ï¼Œ.json()ç›´æŽ¥æ‰“å°è¿”å›žçš„jsonæ•°æ®ï¼Œheadersä»€ä¹ˆçš„ä¹Ÿä¸€æ ·ï¼Œæ›´å¤šå†…å®¹å‚è€ƒå®˜æ–¹æ–‡æ¡£Response object æ—¢ç„¶å·²ç»æœ‰requestsäº†ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦è¯´aiohttpäº†ï¼Ÿé‡ç‚¹æ¥äº†ï¼Œaiohttpæ˜¯å¼‚æ­¥çš„ã€‚åœ¨python3.5ä¸­ï¼ŒåŠ å…¥äº†asyncio/await å…³é”®å­—ï¼Œä½¿å¾—å›žè°ƒçš„å†™æ³•æ›´åŠ ç›´è§‚å’Œäººæ€§åŒ–ã€‚è€Œaiohttpæ˜¯ä¸€ä¸ªæä¾›å¼‚æ­¥webæœåŠ¡çš„åº“ï¼Œasyncioå¯ä»¥å®žçŽ°å•çº¿ç¨‹å¹¶å‘IOæ“ä½œã€‚ requestså†™çˆ¬è™«æ˜¯åŒæ­¥çš„ï¼Œæ˜¯ç­‰å¾…ç½‘é¡µä¸‹è½½å¥½æ‰ä¼šæ‰§è¡Œä¸‹é¢çš„è§£æžã€å…¥åº“æ“ä½œï¼Œå¦‚æžœåœ¨ä¸‹è½½ç½‘é¡µæ—¶é—´å¤ªé•¿ä¼šå¯¼è‡´é˜»å¡žï¼Œä½¿ç”¨multiprocessingæˆ–è€… threadingåŠ é€Ÿçˆ¬è™«ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ã€‚ æˆ‘ä»¬çŽ°åœ¨ä½¿ç”¨çš„aiohttpæ˜¯å¼‚æ­¥çš„ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸éœ€è¦ç­‰å¾…ï¼Œä½ å°½ç®¡åŽ»ä¸‹è½½ç½‘é¡µå°±å¥½äº†ï¼Œæˆ‘ä¸ç”¨å‚»å‚»çš„ç­‰å¾…ä½ å®Œæˆæ‰è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œæˆ‘è¿˜æœ‰åˆ«çš„æ´»è¦å¹²ã€‚è¿™æ ·å°±æžå¤§çš„æé«˜äº†ä¸‹è½½ç½‘é¡µçš„æ•ˆçŽ‡ã€‚ å¦å¤–ï¼ŒScrapyä¹Ÿæ˜¯å¼‚æ­¥çš„ï¼Œæ˜¯åŸºäºŽTwistedäº‹ä»¶é©±åŠ¨çš„ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œéƒ½ä¸è¦å†™é˜»å¡žçš„ä»£ç ã€‚é˜»å¡žçš„ä»£ç åŒ…æ‹¬ï¼š è®¿é—®æ–‡ä»¶ã€æ•°æ®åº“æˆ–è€…Web äº§ç”Ÿæ–°çš„è¿›ç¨‹å¹¶éœ€è¦å¤„ç†æ–°è¿›ç¨‹çš„è¾“å‡ºï¼Œå¦‚è¿è¡Œshellå‘½ä»¤ æ‰§è¡Œç³»ç»Ÿå±‚æ¬¡æ“ä½œçš„ä»£ç ï¼Œå¦‚ç­‰å¾…ç³»ç»Ÿé˜Ÿåˆ— ä»£ç å®žä¾‹è¿™é‡Œæ˜¯ä½¿ç”¨aiohttpçš„ä¸€ä¸ªçˆ¬è™«å®žä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import asyncioimport aiohttpfrom bs4 import BeautifulSoupimport loggingclass AsnycGrab(object): def __init__(self, url_list, max_threads): self.urls = url_list self.results = &#123;&#125; self.max_threads = max_threads def __parse_results(self, url, html): try: soup = BeautifulSoup(html, 'html.parser') title = soup.find('title').get_text() except Exception as e: raise e if title: self.results[url] = title async def get_body(self, url): async with aiohttp.ClientSession() as session: async with session.get(url, timeout=30) as response: assert response.status == 200 html = await response.read() return response.url, html async def get_results(self, url): url, html = await self.get_body(url) self.__parse_results(url, html) return 'Completed' async def handle_tasks(self, task_id, work_queue): while not work_queue.empty(): current_url = await work_queue.get() try: task_status = await self.get_results(current_url) except Exception as e: logging.exception('Error for &#123;&#125;'.format(current_url), exc_info=True) def eventloop(self): q = asyncio.Queue() [q.put_nowait(url) for url in self.urls] loop = asyncio.get_event_loop() tasks = [self.handle_tasks(task_id, q, ) for task_id in range(self.max_threads)] loop.run_until_complete(asyncio.wait(tasks)) loop.close()if __name__ == '__main__': async_example = AsnycGrab(['http://edmundmartin.com', 'https://www.udemy.com', 'https://github.com/', 'https://zhangslob.github.io/', 'https://www.zhihu.com/'], 5) async_example.eventloop() print(async_example.results) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ éœ€è¦æ—¶åˆ»åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œä½ å¦‚æžœåœ¨ä»£ç ä¸­ä½¿ç”¨åŒæ­¥æ“ä½œï¼Œçˆ¬è™«å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯é€Ÿåº¦å¯èƒ½ä¼šå—å½±å“ã€‚ å…¶ä»–å¼‚æ­¥åº“å› ä¸ºçˆ¬è™«ä¸ä»…ä»…åªæœ‰ä¸‹è½½è¿™å—ï¼Œè¿˜ä¼šæœ‰æ“ä½œæ•°æ®åº“ï¼Œè¿™é‡Œæä¾›ä¸¤ä¸ªå¼‚æ­¥åº“ï¼šaioredisã€motor 123456789101112131415import asyncioimport aioredisloop = asyncio.get_event_loop()async def go(): conn = await aioredis.create_connection( 'redis://localhost', loop=loop) await conn.execute('set', 'my-key', 'value') val = await conn.execute('get', 'my-key') print(val) conn.close() await conn.wait_closed()loop.run_until_complete(go())# will print 'value' æ–‡æ¡£ï¼šaioredis 123456789101112131415import motor.motor_asyncioclient = motor.motor_asyncio.AsyncIOMotorClient('mongodb://localhost:27017')db = client['test_database']collection = db['test_collection']async def do_insert(): document = &#123;'key': 'value'&#125; result = await db.test_collection.insert_one(document) print('result %s' % repr(result.inserted_id)) async def do_find_one(): document = await db.test_collection.find_one(&#123;'i': &#123;'$lt': 1&#125;&#125;) pprint.pprint(document) æ–‡æ¡£ï¼šmotor æœ¬æ–‡ä»…ä»…ä»‹ç»äº†aiohttpä½œä¸ºClientçš„ç”¨æ³•ï¼Œ æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åŽ»ç ”ç©¶ä¸‹ä½œä¸ºServerçš„ç”¨æ³•ï¼ŒåŒæ ·å¾ˆå¼ºå¤§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode Solutionsï¼ˆä¸€ï¼‰ two-sum]]></title>
      <url>%2F2018%2F05%2F15%2FLeetcode%20Solutions%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åå…­ç¯‡åŽŸåˆ›æ–‡ç«  å¼€å§‹åˆ·é¢˜å’¯ (à¹‘â€¢ . â€¢à¹‘) Two Sum é¢˜ç›®ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ‰¾å‡ºæ•°ç»„ä¸­å’Œä¸ºç›®æ ‡å€¼çš„ä¸¤ä¸ªæ•°ã€‚ ä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”ä¸€ç§ç­”æ¡ˆï¼Œä¸”åŒæ ·çš„å…ƒç´ ä¸èƒ½è¢«é‡å¤åˆ©ç”¨ã€‚ ç¤ºä¾‹:1234ç»™å®š nums = [2, 7, 11, 15], target = 9å› ä¸º nums[0] + nums[1] = 2 + 7 = 9æ‰€ä»¥è¿”å›ž [0, 1] è§£é¢˜æ€è·¯Goa + b = target ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ a = target - b åœ¨map[æ•´æ•°]æ•´æ•°çš„åºå·ä¸­ï¼Œå¯ä»¥æŸ¥è¯¢åˆ°açš„åºå·ã€‚è¿™æ ·å°±ä¸ç”¨åµŒå¥—ä¸¤ä¸ªforå¾ªçŽ¯äº†ã€‚ 12345678910func twoSum(nums []int, target int) []int &#123; m := make(map[int]int, len(nums)) for i, b := range nums &#123; if j, ok := m[target-b]; ok &#123; return []int&#123;j, i&#125; &#125; m[nums[i]] = i &#125; return nil&#125; Python ç”±äºŽè¦æ‰¾åˆ°ç¬¦åˆé¢˜æ„çš„æ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ï¼Œæ‰€ä»¥å…ˆè¦å°†åŽŸæ¥çš„æ•°ç»„æ·±æ‹·è´ä¸€ä»½ï¼Œç„¶åŽæŽ’åºã€‚ ç„¶åŽåœ¨æŽ’åºåŽçš„æ•°ç»„ä¸­æ‰¾ä¸¤ä¸ªæ•°ä½¿å®ƒä»¬ç›¸åŠ ä¸ºtargetã€‚è¿™ä¸ªæ€è·¯æ¯”è¾ƒæ˜Žæ˜¾ï¼šä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å¤´ï¼Œä¸€ä¸ªæŒ‡å‘å°¾ï¼Œä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨å¹¶æ£€æŸ¥ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ•°çš„å’Œæ˜¯å¦ä¸ºtargetã€‚å¦‚æžœæ‰¾åˆ°äº†è¿™ä¸¤ä¸ªæ•°ï¼Œå†å°†è¿™ä¸¤ä¸ªæ•°åœ¨åŽŸæ•°ç»„ä¸­çš„ä½ç½®æ‰¾å‡ºæ¥å°±å¯ä»¥äº†ã€‚ è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šåœ¨åŽŸæ¥æ•°ç»„ä¸­æ‰¾ä¸‹æ ‡æ—¶ï¼Œéœ€è¦ä¸€ä¸ªä»Žå¤´æ‰¾ï¼Œä¸€ä¸ªä»Žå°¾æ‰¾ï¼Œè¦ä¸æ— æ³•é€šè¿‡ã€‚å¦‚è¿™ä¸ªä¾‹å­ï¼šnumbers=[0,1,2,0]; target=0ã€‚å¦‚æžœéƒ½ä»Žå¤´å¼€å§‹æ‰¾ï¼Œå°±ä¼šæœ‰é—®é¢˜ã€‚ 12345678910class Solution: def twoSum(self, nums, target): if len(nums) &lt;= 1: return False d = dict() for i in range(len(nums)): if nums[i] in d: return [d[nums[i]], i] else: d[target - nums[i]] = i]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å‘Šåˆ«win10ï¼Œæ‹¥æŠ±linux]]></title>
      <url>%2F2018%2F05%2F12%2F%E5%91%8A%E5%88%ABwin10%EF%BC%8C%E6%8B%A5%E6%8A%B1linux%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åäº”ç¯‡åŽŸåˆ›æ–‡ç«  å®‰è£…linuxæ“ä½œç³»ç»Ÿ (à¹‘â€¢ . â€¢à¹‘) win10 å‡çº§å…ˆé—®ä½ ä¸€ä¸ªé—®é¢˜ï¼Œä½ è®¨åŽŒwin10å‡çº§ç³»ç»Ÿå—ï¼Ÿ æˆ‘çš„å›žç­”ï¼šæ˜¯ï¼Œæ˜Žæ˜Žå·²ç»æŠŠè‡ªåŠ¨æ›´æ–°å…³é—­äº†ï¼Œå¯æ˜¯è¿˜æ˜¯ä¼šæœ‰â€œæ˜“å‡â€ï¼Œwin10æ˜“å‡ä¸€ç›´å¸è½½ä¸æŽ‰ã€‚æ‰€ä»¥å°±æƒ³è¯•è¯•åˆ«çš„ç³»ç»Ÿã€‚ linuxæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚é»‘è‹¹æžœæš‚æ—¶ä¸è€ƒè™‘ã€‚ å–œæ¬¢linuxçš„ç†ç”± æ·±åº¦æ¡Œé¢ æ·±åº¦ç»ˆç«¯ï¼ˆé…åˆzshè¶…èµžçš„ï¼‰ é™¤äº†é¢œå€¼å¤–ï¼Œç¨‹åºå…¼å®¹æ€§ä¼šæ›´å¥½ï¼Œå®‰è£…å„ç§ä¸œè¥¿ä¼šå¾ˆæ–¹ä¾¿ã€‚ä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œç†Ÿæ‚‰linuxä¸‹åŸºæœ¬æ“ä½œä¹Ÿæ˜¯å¿…è¦çš„ã€‚ æˆ‘è‡ªå·±è¯•è¿‡ï¼Œçˆ¬è™«ä¼šè·‘çš„æ›´å¿«ã€‚ æ‰‹åŠ¨æ»‘ç¨½ é€‰æ‹©linuxå“ªä¸ªç‰ˆæœ¬ç›®å‰æˆ‘ä½¿ç”¨è¿‡deepinå’Œubuntu18ï¼Œå¯¹äºŽå®Œå…¨çš„å°ç™½æ¥è¯´ï¼Œæˆ‘æŽ¨èdeepinä¹Ÿå°±æ˜¯æ·±åº¦æ“ä½œç³»ç»Ÿï¼Œæ·±åº¦å•†åº—æ”¶å…¥çš„åº”ç”¨å¯ä»¥åŸºæœ¬æ»¡è¶³ï¼Œubuntuå¾ˆå¤šåº”ç”¨å®‰è£…èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æžœä½ å–œæ¬¢æŠ˜è…¾ï¼Œé‚£å°±ä¸Šæ‰‹ubuntuå§ã€‚ å¦‚æžœä½ å’Œæˆ‘ä¸€æ · å–œæ¬¢xxxï¼Œé‚£å°±è¯•è¯•deepinå’Œubuntu18å…±å­˜ã€‚ æˆ‘çŽ°åœ¨çš„å¼€æœºç•Œé¢ï¼ˆæ¸£æ¸£åƒç´ ï¼‰ å¦‚ä½•å®‰è£…linuxå®‰è£…deepinä½¿ç”¨Uç›˜å®‰è£… å…ˆåŽ»ä¸‹è½½ï¼š ISOæ–‡ä»¶ æ·±åº¦å¯åŠ¨ç›˜åˆ¶ä½œå·¥å…· ç„¶åŽå®‰è£…å¯åŠ¨ç›˜åˆ¶ä½œå·¥å…·ï¼Œç„¶åŽé€‰æ‹©åˆšæ‰ä¸‹è½½çš„ISOæ–‡ä»¶ï¼Œä¸‹ä¸€æ­¥é€‰æ‹©ä½ çš„Uç›˜ï¼Œç„¶åŽå°±å¼€å§‹å®‰è£…äº†ã€‚ ä¸‹ä¸€æ­¥ï¼Œé‡å¯ç”µè„‘ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”µè„‘é»˜è®¤æ˜¯ä»Žç¡¬ç›˜å¯åŠ¨ï¼Œå› æ­¤ï¼Œåœ¨ä½¿ç”¨Uç›˜å®‰è£…ç³»ç»Ÿä¹‹å‰ï¼Œæ‚¨éœ€è¦å…ˆè¿›å…¥ç”µè„‘çš„BIOSç•Œé¢å°†Uç›˜è®¾ç½®ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚ å°å¼æœºä¸€èˆ¬ä¸º Delete é”®ã€ç¬”è®°æœ¬ä¸€èˆ¬ä¸º F2 æˆ– F10 æˆ– F12 é”®ï¼Œå³å¯è¿›å…¥ BIOS è®¾ç½®ç•Œé¢ã€‚ å°†æ·±åº¦æ“ä½œç³»ç»Ÿå…‰ç›˜æ’å…¥ç”µè„‘å…‰é©±ä¸­ã€‚ å¯åŠ¨ç”µè„‘ï¼Œå°†å…‰ç›˜è®¾ç½®ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚ è¿›å…¥å®‰è£…ç•Œé¢ï¼Œé€‰æ‹©éœ€è¦å®‰è£…çš„è¯­è¨€ã€‚ å¦‚æžœè¿˜ä¸ä¼šï¼Œè¿™é‡Œæœ‰å®˜æ–¹å½•åˆ¶çš„è§†é¢‘å“¦ æ·±åº¦å®‰è£…å™¨+æ·±åº¦æŽ¢ç´¢é¢‘é“ç¬¬ä¸ƒæœŸ+æ·±åº¦æ“ä½œç³»ç»Ÿå®˜æ–¹å‡ºå“ è¿˜æœ‰ä¸€ç§æ›´åŠ ç®€å•çš„æ–¹å¼å°±æ˜¯ä¸‹è½½ æ·±åº¦ç³»ç»Ÿå®‰è£…å™¨ ç„¶åŽå°±æ˜¯å‚»ç“œæ“ä½œäº†ï¼Œè®°å¾—å…³é—­ä¸‹ å®‰å…¨å¯åŠ¨ å°æ­ªå¹¶ä¸æŽ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼å®‰è£…ï¼Œåœ¨ç¬”è®°æœ¬ä¸Šæ€Žä¹ˆéƒ½æ²¡æœ‰æ•ˆæžœï¼Œåœ¨å°å¼ä¸Šä¸€æ¬¡æˆåŠŸã€‚æ‰€ä»¥å¤§å®¶æœ‰Uç›˜çš„å°½é‡ä½¿ç”¨Uç›˜å§ å®‰è£…ubuntuéœ€è¦ç”¨åˆ°ä¸Šé¢æåˆ°è¿‡çš„æ·±åº¦å¯åŠ¨ç›˜åˆ¶ä½œå·¥å…·ï¼Œç„¶åŽåŽ»ä¸‹è½½ ISOæ–‡ä»¶ï¼Œç„¶åŽå°±æ˜¯å’Œä¸Šé¢å®‰è£…æ–¹æ³•ä¸€æ ·çš„ï¼Œè¿›è¡Œæ“ä½œå³å¯ã€‚ æœ‰æ²¡æœ‰å¾ˆç®€å•ã€‚ æˆ‘çš„ubuntuç•Œé¢ï¼Œç”¨å¾—å°‘ï¼Œæ‰€ä»¥æ²¡ç¾ŽåŒ– æ„Ÿå—æˆ‘ä½¿ç”¨deepinæœ‰ä¸€ä¸ªæœˆäº†ï¼Œå†™ä»£ç ç”¨deepinï¼Œå®¶é‡Œçš„å°å¼è¿˜æ˜¯win7ï¼Œå› ä¸ºdeepinè™½ç„¶æœ‰steamï¼Œä½†æ˜¯åƒé¸¡ä¸æ”¯æŒåœ¨linuxä¸‹è¿è¡Œã€‚ deepinå®Œå…¨å¯ä»¥æ»¡è¶³æˆ‘çš„åŠžå…¬éœ€æ±‚ï¼ŒPycharmã€sublimeã€typoraã€chromeã€ç½‘æ˜“äº‘éŸ³ä¹ç­‰ç­‰éƒ½æœ‰ï¼Œç”¨èµ·æ¥å¾ˆèˆ’æœï¼Œè‡³å°‘çŽ°åœ¨æ˜¯è¿™æ ·æ„Ÿè§‰ã€‚ä½†æ˜¯æœ‰æ—¶å€™deepinä¹Ÿä¼šå¡æ­»ã€‚ å¼ºçƒˆå»ºè®®ä¸Šæ‰‹linuxï¼Œå¯ä»¥å­¦åˆ°å¾ˆå¤šå‘½ä»¤è¡Œæ“ä½œï¼Œå®‰è£…deepinå°±å¥½ï¼Œåˆ°æ—¶å€™ä½ çš„ç”µè„‘ä¼šWindowsä¸Ždeepinå…±å­˜ï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©ç³»ç»Ÿã€‚ æœ‰æ—¶é—´å†™ä¸€ç¯‡deepinç¾ŽåŒ–ä¸Žå®‰è£…åº”ç”¨ç›¸å…³çš„ä¸œè¥¿ï¼Œçœ‹åˆ°è¿™ä¸€å®šè¦ç‚¹èµžå“¦ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[linuxä¸‹å®‰è£…python3.6]]></title>
      <url>%2F2018%2F05%2F11%2Flinux%E4%B8%8B%E5%AE%89%E8%A3%85python3-6%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åå››ç¯‡åŽŸåˆ›æ–‡ç«  linuxæ“ä½œ (à¹‘â€¢ . â€¢à¹‘) 1234567891011121314151617181920212223sudo sed -i 's\archive.ubuntu.com\mirrors.aliyun.com\g' /etc/apt/sources.listsudo apt-get updatecd /home/sudo apt-get install gcc make zlib1g-dev -ysudo apt-get install libbz2-dev libsqlite3-dev libxml2-dev libffi-dev libssl-dev -ysudo apt install wget -ywget http://mirrors.sohu.com/python/3.6.2/Python-3.6.2.tgz # å¯ä»¥æ¢æˆä½ æƒ³è¦çš„ç‰ˆæœ¬tar -xvf Python-3.6.2.tgzcd Python-3.6.2./configure --prefix=/home/usr/python36/sudo makesudo make installcd ../usr/python36/bin/sudo mkdir -p ~/.pip/sudo cat &lt;&lt; EOF &gt; ~/.pip/pip.conf[global]trusted-host=mirrors.aliyun.comindex-url=http://mirrors.aliyun.com/pypi/simple/EOFsudo apt-get install libmysqlclient-dev -yln -s /home/usr/python36/bin/pip3 /usr/bin/pip36ln -s /home/usr/python36/bin/python3 /usr/bin/python36 ä»¥åŽå°±å¯ä»¥ä½¿ç”¨ pip36 python36æ¥è¿›è¡Œæ“ä½œã€‚ å¦‚æžœåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥scrapyæç¤ºæ²¡è¿™ä¸ªå‘½ä»¤ï¼Œå¯ä»¥è¯•è¯•python36 -m scrapy]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æŠ¤çœ¼ç¥žå™¨äº†è§£ä¸‹]]></title>
      <url>%2F2018%2F05%2F08%2F%E6%8A%A4%E7%9C%BC%E7%A5%9E%E5%99%A8%E4%BA%86%E8%A7%A3%E4%B8%8B%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  ä¿æŠ¤çœ¼ç› (à¹‘â€¢ . â€¢à¹‘) æ•´å¤©é¢å¯¹å±å¹•ï¼ŒæŠ¤çœ¼æ˜¯å¿…é¡»çš„ï¼Œä¸‹é¢æŽ¨èå‡ æ¬¾å°æ­ªä½¿ç”¨è¿‡çš„è½¯ä»¶ã€‚ fluxå®˜ç½‘ï¼šhttps://justgetflux.com/ ä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ï¼Œæ˜¯æˆ‘ä¹‹å‰éžå¸¸å–œæ¬¢çš„ä¸€æ¬¾äº§å“ï¼Œä¼šéšç€ä¸€å¤©ä¹‹å†…å…‰çº¿å¼ºå¼±æ”¹å˜å±å¹•çš„é¢œè‰²ã€‚ä½†æ˜¯åœ¨linuxä¸Šä¼¼ä¹Žä¸èµ·ä½œç”¨ï¼Œå®‰è£…ä¹‹åŽï¼Œå±å¹•é¢œè‰²æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–ï¼ŒäºŽæ˜¯æˆ‘æ”¾å¼ƒäº†ï¼Œé€‰æ‹©å¦ä¸€æ¬¾è½¯ä»¶ == redshiftç½‘ç«™ï¼šhttps://github.com/jonls/redshift Ubuntuä¸‹sudo apt-get install redshiftå°±å¯ä»¥å®‰è£…ï¼Œæ‰“å¼€æ–¹å¼æ˜¯åœ¨å‘½ä»¤è¡Œè¾“å…¥redshift -v -t 4500:2500ï¼Œç„¶åŽé¢œè‰²å°±ä¼šå˜å¾—éžå¸¸èˆ’æœã€‚ å¦‚æžœåœ¨ä½ çš„ç”µè„‘ä¸Š redshift æœ‰æ—¶ä¸å·¥ä½œï¼Œæ£€æŸ¥æ˜¯å¦å¼€å¯äº†å¤šä¸ª redshiftã€‚ Safe Eyesç½‘ç«™ï¼šhttp://slgobinath.github.io/SafeEyes/ è¿™æ¬¾åº”ç”¨ä¼šè‡ªåŠ¨å…³é—­å±å¹•ï¼Œé—´éš”ä¸€æ®µæ—¶é—´ä¼šæœ‰ä¼‘æ¯ï¼Œè¿™ä¸ªæ˜¯å¦å¥½å¥½æ”¾æ¾ä¸‹è‡ªå·±çš„çœ¼ç›ã€‚ è¿™ä¸ªå¥½åƒåªèƒ½å®‰è£…åœ¨linuxä¸Š å¤§å®¶è¿˜æœ‰ä»€ä¹ˆæŽ¨èçš„å‘¢ï¼Ÿæ¬¢è¿Žè¯„è®ºæŒ‡å‡º]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[awesome_crawl(ä¸€)ï¼šè…¾è®¯æ–°é—»]]></title>
      <url>%2F2018%2F05%2F01%2Fawesome-crawl-%E4%B8%80-%EF%BC%9A%E8%85%BE%E8%AE%AF%E6%96%B0%E9%97%BB%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åäºŒç¯‡åŽŸåˆ›æ–‡ç«  awesome (à¹‘â€¢ . â€¢à¹‘) é¡¹ç›®åœ°å€ï¼šhttps://github.com/zhangslob/awesome_crawl awesome_crawlï¼ˆä¼˜ç¾Žçš„çˆ¬è™«ï¼‰1ã€è…¾è®¯æ–°é—»çš„å…¨ç«™çˆ¬è™«é‡‡é›†ç­–ç•¥ ä»Žç½‘ç«™åœ°å›¾å‡ºå‘ï¼Œæ‰¾å‡ºæ‰€æœ‰å­åˆ†ç±»ï¼Œä»Žæ¯ä¸ªå­åˆ†ç±»ä¸­å†å¯»æ‰¾è¯¦æƒ…é¡µé¢çš„é“¾æŽ¥ã€‚ é¦–å…ˆå¯»æ‰¾æ¯æ¡æ–°é—»çš„IDï¼Œç„¶åŽç§»åŠ¨ç«¯é‡‡é›†å…·ä½“å†…å®¹ã€‚ å†åŽ»æ‰¾ä¸€äº›æŽ¨èæ–°é—»çš„æŽ¥å£ï¼Œåšä¸€ä¸ªâ€œæ³›çˆ¬è™«â€ã€‚ è¯´æ˜Ž æ•´å¥—ç³»ç»Ÿä¸­åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€å¥—æ˜¯ç”Ÿäº§è€…ï¼Œä¸“é—¨åŽ»é‡‡é›†qqæ–°é—»çš„é“¾æŽ¥ï¼Œç„¶åŽå­˜æ”¾åˆ°redisä¸­ï¼Œä¸€å¥—æ˜¯æ¶ˆè´¹è€…ï¼Œä»Žredisä¸­è¯»å–è¿™äº›é“¾æŽ¥ï¼Œè§£æžè¯¦æƒ…æ•°æ®ã€‚æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½æ˜¯çˆ¬è™«ä¸­çš„custom_settingsä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰ã€‚ å¦‚æžœéœ€è¦è®¾ç½®ä»£ç†ï¼Œè¯·åœ¨middlewares.ProxyMiddlewareä¸­è®¾ç½®ã€‚ qq_list: è¿™ä¸ªçˆ¬è™«æ˜¯ç”Ÿäº§è€…ã€‚è¿è¡Œä¹‹åŽï¼Œåœ¨ä½ çš„redisæœåŠ¡å™¨ä¸­ä¼šå‡ºçŽ°qq_detail:start_urlsï¼Œå³ç§å­é“¾æŽ¥ qq_detail: è¿™ä¸ªçˆ¬è™«æ˜¯ç”Ÿæ¶ˆè´¹è€…ï¼Œè¿è¡Œä¹‹åŽä¼šæ¶ˆè´¹redisé‡Œé¢çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾ï¼š ä½ å¯ä»¥è‡ªè¡Œæ·»åŠ æ›´å¤šçˆ¬è™«åŽ»é‡‡é›†ç§å­é“¾æŽ¥ï¼Œå¦‚ä»Žé¦–é¡µè¿›å…¥åŒ¹é…ï¼Œä»ŽæŽ¨èå…¥å£ï¼š 12345678910111213141516171819import requestsurl = "https://pacaio.match.qq.com/xw/recommend"querystring = &#123;"num":"10^","callback":"__jp0"&#125;headers = &#123; 'accept-encoding': "gzip, deflate, br", 'accept-language': "zh-CN,zh;q=0.9,en;q=0.8", 'user-agent': "Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1", 'accept': "*/*", 'referer': "https://xw.qq.com/m/recommend/", 'authority': "pacaio.match.qq.com", 'cache-control': "no-cache", &#125;response = requests.request("GET", url, headers=headers, params=querystring)print(response.text) ç­‰ç­‰ï¼Œä½ æ‰€éœ€è¦åšçš„ä»…ä»…æ˜¯æŠŠè¿™äº›æŠ“åˆ°çš„ç§å­é“¾æŽ¥å¡žåˆ°redisé‡Œé¢ï¼Œä¹Ÿå°±æ˜¯å¯ç”¨qq_news.pipelines.RedisStartUrlsPipelineè¿™ä¸ªä¸­é—´ä»¶ã€‚ TODO å¢žåŠ æ›´å¤šæ–°é—»é“¾æŽ¥çš„åŒ¹é…ï¼Œä»ŽæŽ¨èæŽ¥å£å¤„èŽ·å¾—æ›´å¤šç§å­é“¾æŽ¥ å¢žåŠ â€œæ³›çˆ¬è™«â€ï¼Œé‡‡é›†ç§å­é“¾æŽ¥ æ•°æ®åº“å­—æ®µæ£€éªŒ redisä¸­æ•°æ®ä¸ºç©ºçˆ¬è™«è‡ªåŠ¨å…³é—­ï¼ˆç›®å‰redisæ•°æ®è¢«æ¶ˆè´¹å®Œä¹‹åŽçˆ¬è™«å¹¶ä¸ä¼šè‡ªåŠ¨å…³é—­ï¼Œå¦‚ä¸‹å›¾ï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[scrapy-redis å’Œ scrapy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>
      <url>%2F2018%2F04%2F21%2F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  åˆ†å¸ƒå¼çˆ¬è™« (à¹‘â€¢ . â€¢à¹‘) æœ€è¿‘åœ¨å·¥ä½œä¸­ä¸€ç›´ä½¿ç”¨ redis æ¥ç®¡ç†åˆ†å‘çˆ¬è™«ä»»åŠ¡ï¼Œè®©æˆ‘å¯¹ scrapy-redis æœ‰å¾ˆæ·±åˆ»çš„ç†è§£ï¼Œä¸‹é¢è®©æˆ‘æ…¢æ…¢è¯´æ¥ã€‚ åœ¨æ‰€æœ‰çš„é—®é¢˜å¼€å§‹ä¹‹å‰ï¼Œè¦å…ˆæœ‰ä¸€ä¸ªå‰æï¼šä½ ä½¿ç”¨ Scrapy æ¡†æž¶åšå¼€å‘ ç»“è®ºscrapy-redis ä¸Ž Scrapyçš„å…³ç³»å°±åƒç”µè„‘ä¸Žå›ºæ€ç¡¬ç›˜ä¸€æ ·ï¼Œæ˜¯ç”µè„‘ä¸­çš„ä¸€ä¸ªæ’ä»¶ï¼Œèƒ½è®©ç”µè„‘æ›´å¿«çš„è¿è¡Œã€‚ Scrapy æ˜¯ä¸€ä¸ªçˆ¬è™«æ¡†æž¶ï¼Œscrapy-redis åˆ™æ˜¯è¿™ä¸ªæ¡†æž¶ä¸Šå¯ä»¥é€‰æ‹©çš„æ’ä»¶ï¼Œå®ƒå¯ä»¥è®©çˆ¬è™«è·‘çš„æ›´å¿«ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ scrapy-redisé¦–å…ˆï¼Œåœ¨å®žé™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ€»ä¼šå¯¹çˆ¬è™«é€Ÿåº¦è¡¨ç¤ºä¸æ»¡ï¼Œä¸ºå•¥è¿™ä¹ˆæ…¢ï¼Œèƒ½ä¸èƒ½è·‘å¿«ç‚¹ã€‚é™¤äº†çˆ¬è™«æœ¬èº«çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å°±è¦å¼•å…¥åˆ†å¸ƒå¼çˆ¬è™«çš„æ¦‚å¿µã€‚ æˆ‘è‡ªå·±å¯¹åˆ†å¸ƒå¼çˆ¬è™«çš„ç†è§£å°±æ˜¯ï¼šå¤šä¸ªçˆ¬è™«æ‰§è¡ŒåŒä¸€ä¸ªä»»åŠ¡ è¿™é‡Œè¯´ä¸‹ï¼ŒScrapyæœ¬èº«æ˜¯ä¸æ”¯æŒåˆ†å¸ƒå¼çš„ï¼Œå› ä¸ºå®ƒçš„ä»»åŠ¡ç®¡ç†å’ŒåŽ»é‡å…¨éƒ¨æ˜¯åœ¨æœºå™¨å†…å­˜ä¸­å®žçŽ°çš„ã€‚ åœ¨ Scrapy ä¸­æœ€å‡ºåçš„åˆ†å¸ƒå¼æ’ä»¶å°±æ˜¯scrapy-redisäº†ï¼Œscrapy-redisçš„ä½œç”¨å°±æ˜¯è®©ä½ çš„çˆ¬è™«å¿«ã€æ›´å¿«ã€è¶…çº§å¿«ã€‚ scrapy-redis å¦‚ä½•å·¥ä½œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨redisæ›¿æ¢æœºå™¨å†…å­˜ï¼Œé‚£ä¹ˆå…·ä½“å¦‚ä½•æ“ä½œå‘¢ï¼Ÿéžå¸¸ç®€å•ï¼Œä½ åªéœ€è¦åœ¨ settings.py ä¸­åŠ ä¸Šä¸‰ä»£ç ï¼Œå°±èƒ½è®©ä½ çš„çˆ¬è™«å˜ä¸ºåˆ†å¸ƒå¼ã€‚ 12345SCHEDULER = "scrapy_redis.scheduler.Scheduler"DUPEFILTER_CLASS = "scrapy_redis.dupefilter.RFPDupeFilter"REDIS_START_URLS_AS_SET = True SCHEDULER æ˜¯ä»»åŠ¡åˆ†å‘ä¸Žè°ƒåº¦ï¼ŒæŠŠæ‰€æœ‰çš„çˆ¬è™«å¼€å§‹çš„è¯·æ±‚éƒ½æ”¾åœ¨redisé‡Œé¢ï¼Œæ‰€æœ‰çˆ¬è™«éƒ½åŽ»redisé‡Œé¢è¯»å–è¯·æ±‚ã€‚DUPEFILTER_CLASS æ˜¯åŽ»é‡é˜Ÿåˆ—ï¼Œè´Ÿè´£æ‰€æœ‰è¯·æ±‚çš„åŽ»é‡ï¼ŒREDIS_START_URLS_AS_SETæŒ‡çš„æ˜¯ä½¿ç”¨redisé‡Œé¢çš„setç±»åž‹ï¼ˆç®€å•å®ŒæˆåŽ»é‡ï¼‰ï¼Œå¦‚æžœä½ æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤ä¼šé€‰ç”¨listã€‚ å¦‚æžœä½ çŽ°åœ¨è¿è¡Œä½ çš„çˆ¬è™«ï¼Œä½ å¯ä»¥åœ¨redisä¸­çœ‹åˆ°å‡ºçŽ°äº†è¿™ä¸¤ä¸ªkey: 12spider_name:dupefilterspider_name:requests æ ¼å¼æ˜¯setï¼Œå³ä¸ä¼šæœ‰é‡å¤æ•°æ®ã€‚å‰è€…å°±æ˜¯redisçš„åŽ»é‡é˜Ÿåˆ—ï¼Œå¯¹åº”DUPEFILTER_CLASSï¼ŒåŽè€…æ˜¯redisçš„è¯·æ±‚è°ƒåº¦ï¼ŒæŠŠé‡Œé¢çš„è¯·æ±‚åˆ†å‘ç»™çˆ¬è™«ï¼Œå¯¹åº”SCHEDULERã€‚ï¼ˆé‡Œé¢çš„æ•°æ®ä¸ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œå¦‚æžœä½ ç¬¬äºŒæ¬¡è·‘ï¼Œéœ€è¦æå‰æ¸…ç©ºé‡Œé¢çš„æ•°æ®ï¼‰ scrapy-redis ä¼˜ç‚¹é€Ÿåº¦å¿«scrapy-redis ä½¿ç”¨redisè¿™ä¸ªé€Ÿåº¦éžå¸¸å¿«çš„éžå…³ç³»åž‹ï¼ˆNoSQLï¼‰å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œé€Ÿåº¦å¿«æ˜¯æœ€é‡è¦åŽŸå› ï¼ˆä½†æ˜¯ä¹Ÿä¼šäº§ç”Ÿè´Ÿé¢æƒ³è¿‡ï¼Œä¸‹é¢ä¼šè¯´åˆ°ï¼‰ã€‚ ä¸ºä»€ä¹ˆæ˜¯scrapy-redisè€Œä¸æ˜¯scrapy-mongoå‘¢ï¼Œå¤§å®¶å¯ä»¥ä»”ç»†æƒ³æƒ³ã€‚ ç”¨æ³•ç®€å•å‰äººå·²ç»é€ å¥½è½®å­äº†ï¼Œscrapy-redisã€‚æˆ‘ä»¬ç›´æŽ¥æ‹¿æ¥ç”¨å°±å¥½ï¼Œè€Œç”¨æ³•ä¹Ÿåƒä¸Šé¢æåˆ°çš„åœ¨ settings.py æ–‡ä»¶ä¸­é…ç½®ã€‚åœ¨æ–‡æ¡£ä¸­è¿˜æœ‰å¦ä¸€ç§ç”¨æ³•ï¼Œå³Feeding a Spider from Redis run the spider:scrapy runspider myspider.py push urls to redis:redis-cli lpush myspider:start_urls http://google.comï¼ˆå»ºè®®æŠŠlpushæ¢ä¸ºzsetï¼‰ å…¶å®žè¿™ç§ç”¨æ³•å°±æ˜¯å…ˆæ‰“å¼€ä¸€ä¸ªçˆ¬è™«ï¼Œä»–ä¼šä¸€ç›´åœ¨redisé‡Œé¢å¯»æ‰¾keyä¸º myspider:start_urlsï¼Œå¦‚æžœå­˜åœ¨ï¼Œå°±æå–é‡Œé¢çš„urlã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨çˆ¬è™«ä¸­æŒ‡å®šredis_keyï¼Œé»˜è®¤çš„æ˜¯çˆ¬è™«çš„åå­—åŠ ä¸Š:start_urls åŽ»é‡ç®€å•çˆ¬è™«ä¸­åŽ»é‡æ˜¯ä¸€ä»¶å¤§äº‹ï¼Œä½¿ç”¨äº†scrapy-redisåŽå°±å¾ˆç®€å•äº†ã€‚ä¸Šé¢æåˆ°è¿‡ä½¿ç”¨redisçš„setç±»åž‹å°±å¯ä»¥å¾ˆå®¹æ˜“è¾¾åˆ°è¿™ä¸ªç›®æ ‡äº†ï¼Œå³REDIS_START_URLS_AS_SET = Trueã€‚ scrapy-redis ç¼ºç‚¹å†…å­˜é—®é¢˜ä¸ºä»€ä¹ˆä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«ï¼Œå½“ç„¶æ˜¯å› ä¸ºä¼šæœ‰å¾ˆå¤šé“¾æŽ¥éœ€è¦è·‘ï¼Œæˆ–è€…è¯´ä¼šå­˜æ”¾å¾ˆå¤šä¸ªmyspider:start_urlsåˆ°redisä¸­ï¼ŒRedisæ˜¯key-valueæ•°æ®åº“ï¼Œé¢å¯¹keyçš„å†…å­˜æœç´¢ï¼Œä¼˜åŠ¿æ˜Žæ˜¾ï¼Œä½†æ˜¯Redisåƒçš„æ˜¯çº¯å†…å­˜ï¼Œmyspider:start_urlsæ˜¯ä¸€ä¸ªæœ‰ä¸€ä¸ªåƒhttps://www.zhihu.com/people/cuishiteçš„é“¾æŽ¥ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ã€‚ä¹‹å‰å°±å› ä¸ºè¿™ä¸ªåŽŸå› rediså´©æºƒè¿‡æ— æ•°æ¬¡ï¼Œé‚£ä¹ˆå¦‚ä½•ä¼˜åŒ–ï¼Ÿ ç½‘ç»œä¸Šæœ‰çš„æ–¹æ³•æ˜¯ scrapy_redisåŽ»é‡ä¼˜åŒ–ï¼ˆå·²æœ‰7äº¿æ¡æ•°æ®ï¼‰ï¼Œé™„Demoç¦åˆ©ï¼Œå¯ä»¥å‚è€ƒä¸‹ã€‚å¦‚æžœä½ æœ‰å¥½çš„è§£å†³æ–¹æ³•ï¼Œæ¬¢è¿Žç§ä¿¡å‘Šè¯‰æˆ‘ã€‚ï¼ˆä¿å¯†åŽŸå› å°±ä¸ä»‹ç»æˆ‘ä»¬çš„å¤„ç†æ–¹æ³•äº†ï¼‰ Usageè¿™ä¸ªå…¶å®žä¸ç®—åšé—®é¢˜ï¼Œåªæ˜¯å®˜æ–¹æ–‡æ¡£ä¸Šæˆ‘è§‰å¾—çš„å°BUGï¼Œåœ¨è¿™é‡Œ Usage 1234# Store scraped item in redis for post-processing.ITEM_PIPELINES = &#123; 'scrapy_redis.pipelines.RedisPipeline': 300&#125; Pipelineæ˜¯è¿™æ ·å†™çš„1234567891011121314def _process_item(self, item, spider): key = self.item_key(item, spider) data = self.serialize(item) self.server.rpush(key, data) return itemdef item_key(self, item, spider): """Returns redis key based on given spider. Override this function to use a different key depending on the item and/or spider. """ return self.key % &#123;'spider': spider.name&#125; çœ‹ä¸æ‡‚ä¸ºä»€ä¹ˆè¦æŠŠæ•°æ®å‚¨å­˜åœ¨redisé‡Œé¢ï¼Œè¿™ä¸åˆåŠ å¤§rediså‚¨å­˜è´Ÿæ‹…å—ï¼Ÿå¯¹äºŽæ–°æ‰‹æ¥è¯´çœŸçš„ä¸å‹å¥½ï¼Œæˆ–è®¸å¯ä»¥è€ƒè™‘æä¸€ä¸ªprã€‚ rediså¯è§†åŒ–å·¥å…·æœ€åŽä»‹ç»ä¸¤ä¸ªrediså¯è§†åŒ–å·¥å…· RedisDesktopManager æ¯”è¾ƒå‡ºåçš„å·¥å…·ï¼Œä½†æ˜¯ç»å¸¸ä¼šå´©æºƒ kedis å›½äººå¼€å‘çš„å…è´¹å·¥å…·ï¼Œè¿™ä¸ªç•Œé¢è¿˜æ˜¯å¯ä»¥çš„]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ¥codewarsä¸Žæˆ‘ä¸€èµ·çŽ©è€å§]]></title>
      <url>%2F2018%2F04%2F12%2F%E6%9D%A5codewars%E4%B8%8E%E6%88%91%E4%B8%80%E8%B5%B7%E7%8E%A9%E8%80%8D%E5%90%A7%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››åç¯‡åŽŸåˆ›æ–‡ç«  å¹¶è‚©ä½œæˆ˜ (à¹‘â€¢ . â€¢à¹‘) å…ˆçœ‹ä¸€é“é¢˜ç›®å¦‚ä½•ä½¿ç”¨ä»£ç è¡¨ç¤ºâ€œçŸ³å¤´ã€å‰ªåˆ€ã€å¸ƒâ€ä¹‹é—´çš„å…³ç³»ã€‚ å³ï¼šçŸ³å¤´ &gt; å‰ªåˆ€ï¼Œå‰ªåˆ€ &gt; å¸ƒï¼Œ å‰ªåˆ€ &gt; å¸ƒ å½“æ—¶æˆ‘æƒ³äº†å¾ˆå¤šï¼Œæž„é€ ä¸€ä¸ªå­—å…¸ï¼Œå’Œæ•°å­—å¯¹åº”ï¼Œä½†æ˜¯åº”è¯¥å¦‚ä½•è¡¨ç¤ºâ€œå¤§å°â€å…³ç³»å‘¢ï¼Ÿæƒ³ç ´è„‘è¢‹éƒ½æƒ³ä¸å‡ºæ¥ï¼Œæœ€åŽçœ‹äº†ç­”æ¡ˆï¼Œå½¢å¦‚ dict = {&#39;a&#39;: &#39;b&#39;, &#39;b&#39;: &#39;c&#39;, &#39;c&#39;: &#39;a&#39;} ç®€ç›´æ˜¯å¦™å•Šï¼ï¼ï¼ åŽŸé¢˜åœ¨è¿™é‡Œï¼ŒRock Paper Scissors!ï¼Œå¯ä»¥è‡ªå·±è¯•è¯•çœ‹ã€‚ æˆ‘è§‰å¾—å¾ˆå¦™çš„è§£æ³• CodeWarsè¿™æ˜¯CodeWarsä¸Šçš„ä¸€é¢˜ï¼Œæˆ‘è§‰å¾—æŒºæœ‰æ„æ€çš„ã€‚CodeWarså…¶å®žå’Œleetcodeå·®ä¸å¤šï¼Œä½†æ˜¯æˆ‘æ›´å–œæ¬¢æœ‰è¿™å‡ ç‚¹ã€‚ ç•Œé¢ çœ‹ç€æŒºèˆ’æœçš„ï¼ŒåŒæ—¶æä¾›äº†æµ‹è¯•ä»£ç ã€‚ å¤Ÿç®€å•çœŸçš„ï¼ŒCodeWarsä¸Šæœ‰äº›é¢˜ç›®çœŸçš„å¾ˆç®€å•ï¼Œé€‚åˆæˆ‘è¿™ç§æ–°æ‰‹ï¼Œå“ˆå“ˆï¼Œæ¯”å¦‚ï¼š 123456# Complete the solution so that it reverses the string value passed into it.## solution('world') # returns 'dlrow'def solution(string): return string[::-1] è¿˜å¯ä»¥é€‰æ‹©é—®é¢˜ç±»åž‹ã€‚ å¯ä»¥è‡ªå·±å‡ºé¢˜ï¼Œè¿˜å¯ä»¥é‚€è¯·é˜Ÿå‹www.codewars.com/r/UsAiUQcodewars ç‚¹ä¸€ä¸‹ï¼Œå°±å¯ä»¥æˆä¸ºæˆ‘çš„ç›Ÿå‹ã€‚ ç‚¹ä¸€ä¸‹ï¼ŒçŽ©ä¸€å¹´ï¼Œè£…é€¼ä¸èŠ±ä¸€åˆ†é’±ï¼ å¯ä»¥ä¸Šæ¦œleaderboard ç¬¬äºŒåç«Ÿç„¶æ˜¯å›½äººå”‰ï¼Œä¸çŸ¥æ˜¯å“ªä½å¤§ä½¬ã€‚å¸Œæœ›æœ‰æ›´å¤šä¸­å›½äººå¯ä»¥å‡ºçŽ°åœ¨ä¸Šé¢ã€‚ åŽè¯ç›®å‰æˆ‘ä¹Ÿè¿˜æ˜¯ä¸€ä¸ªèŒæ–°ï¼Œå¸Œæœ›å¤§ä½¬èƒ½å¸¦å¸¦æˆ‘ã€‚ æˆ‘åœ¨Githubä¸Šå¼€äº†ä¸€ä¸ªä»“åº“ï¼Œcodewars_python é‡Œé¢éƒ½æ˜¯ç”¨ pythonçš„è§£é¢˜æ–¹æ³•ï¼Œä½†æ˜¯çŽ°åœ¨è¿˜åªæœ‰å‡ é¢˜è€Œå·²ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥ä¸€èµ·æ¥å‚ä¸Žï¼Œå¤šæprã€‚ 1234567891011121314151617181920212223# -*- coding: utf-8 -*-# ATM machines allow 4 or 6 digit PIN codes and PIN codes cannot contain anything but exactly 4 digits or exactly 6 digits.# If the function is passed a valid PIN string, return true, else return false.# eg:# validate_pin("1234") == True# validate_pin("12345") == False# validate_pin("a234") == False# My Solutiuondef validate_pin(pin): #return true or false return pin.isdigit() if len(pin) == 4 or len(pin) == 6 else False # Wonderful Solutiuon def validate_pin(pin): return len(pin) in (4, 6) and pin.isdigit()]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyä¸­å¦‚ä½•æé«˜æ•°æ®çš„æ’å…¥é€Ÿåº¦]]></title>
      <url>%2F2018%2F03%2F28%2FScrapy%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%92%E5%85%A5%E9%80%9F%E5%BA%A6%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åä¹ç¯‡åŽŸåˆ›æ–‡ç«  é•¿æœŸæ›´æ–° (à¹‘â€¢ . â€¢à¹‘) é€Ÿåº¦é—®é¢˜æœ€è¿‘å·¥ä½œä¸­é‡åˆ°è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œå…¨ç«™æŠ“å–æ—¶é‡‡ç”¨åˆ†å¸ƒå¼ï¼šçˆ¬è™«Aä¸Žçˆ¬è™«Bï¼Œçˆ¬è™«Aç»™çˆ¬è™«Bå–‚é¥¼ï¼Œçˆ¬è™«Bç”±äºŽå„ç§åŽŸå› è¿è¡Œçš„æ¯”è¾ƒæ…¢ï¼Œè¾¾ä¸åˆ°é¢„æœŸæ•ˆæžœï¼Œæ‰€ä»¥å¿…é¡»å¯¹çˆ¬è™«Bè¿›è¡Œä¼˜åŒ–ã€‚ æå‡Scrapyè¿è¡Œé€Ÿåº¦æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå›½å¤–æœ‰å¤§ä½¬è¯´è¿‡ Speed up web scraper Hereâ€™s a collection of things to try: use latest scrapy version (if not using already) check if non-standard middlewares are used try to increase CONCURRENT_REQUESTS_PER_DOMAIN, CONCURRENT_REQUESTS settings (docs)turn off logging LOG_ENABLED = False (docs) try yielding an item in a loop instead of collecting items into the items list and returning themuse local cache DNS (see this thread) check if this site is using download threshold and limits your download speed (see this thread)log cpu and memory usage during the spider run - see if there are any problems there try run the same spider under scrapyd service see if grequests + lxml will perform better (ask if you need any help with implementing this solution) try running Scrapy on pypy, see Running Scrapy on PyPy å¤§è‡´çœ‹äº†ä¸‹ï¼Œç¡®å®žå¯ä»¥æé«˜çˆ¬è™«è¿è¡Œé€Ÿåº¦ï¼Œä½†æ˜¯å¯¹äºŽæµ·é‡æ•°æ®ï¼ˆè¿™é‡Œè¯´çš„æ˜¯ç™¾ä¸‡çº§ï¼‰è¿˜éœ€è¦è€ƒè™‘ä¸€ç‚¹çš„å°±æ˜¯æ•°æ®æ’å…¥é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Mongoã€‚ å®˜æ–¹ç¤ºä¾‹è®©æˆ‘ä»¬å…ˆä»Žå®˜æ–¹æ–‡æ¡£å¼€å§‹ Write items to MongoDB 123456789101112131415161718192021222324252627import pymongoclass MongoPipeline(object): collection_name = 'scrapy_items' def __init__(self, mongo_uri, mongo_db): self.mongo_uri = mongo_uri self.mongo_db = mongo_db @classmethod def from_crawler(cls, crawler): return cls( mongo_uri=crawler.settings.get('MONGO_URI'), mongo_db=crawler.settings.get('MONGO_DATABASE', 'items') ) def open_spider(self, spider): self.client = pymongo.MongoClient(self.mongo_uri) self.db = self.client[self.mongo_db] def close_spider(self, spider): self.client.close() def process_item(self, item, spider): self.db[self.collection_name].insert_one(dict(item)) return item æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œæ’å…¥ä½¿ç”¨çš„æ–¹æ³•æ˜¯ insert_oneï¼Œç»§ç»­æ–‡æ¡£ï¼š insert_one(document, bypass_document_validation=False, session=None) Insert a single document.1234567&gt;&gt;&gt; db.test.count(&#123;'x': 1&#125;)0&gt;&gt;&gt; result = db.test.insert_one(&#123;'x': 1&#125;)&gt;&gt;&gt; result.inserted_idObjectId('54f112defba522406c9cc208')&gt;&gt;&gt; db.test.find_one(&#123;'x': 1&#125;)&#123;u'x': 1, u'_id': ObjectId('54f112defba522406c9cc208')&#125; ä»¥å‰ç»å¸¸ä½¿ç”¨çš„ insert æ–¹æ³•ï¼Œå·²ç»ä¸è¢«èµžåŒ insert(doc_or_docs, manipulate=True, check_keys=True, continue_on_error=False, **kwargs) Insert a document(s) into this collection.123DEPRECATED - Use insert_one() or insert_many() instead.Changed in version 3.0: Removed the safe parameter. Pass w=0 for unacknowledged write operations. insert ç®€å•ç†è§£å°±æ˜¯æ’å…¥ï¼ŒæŠŠæˆ‘ä»¬é‡‡é›†åˆ°çš„ item æ’å…¥åˆ°æ•°æ®åº“ï¼Œè¿™æ ·å­˜åœ¨ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯åŽ»é‡ åŽ»é‡æ™šä¸Šæœ‰ä¸€ç§å¾ˆæµè¡Œçš„å†™æ³•ï¼Œä½¿ç”¨ updateå‘½ä»¤ï¼Œå¦‚ï¼š self.db[self.collection_name].update({&#39;id&#39;: item[&#39;id&#39;]}, {&#39;$set&#39;: dict(item)}, True) è§£é‡Šä¸ºï¼š æ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹å°±åœ¨äºŽprocess_itemï¼Œåœ¨è¿™é‡Œä½¿ç”¨äº†updateæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥æŸ¥è¯¢æ¡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯idï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥å­—å…¸ç±»åž‹çš„å¯¹è±¡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„itemï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥Trueï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ï¼Œå¦‚æžœæŸ¥è¯¢æ•°æ®å­˜åœ¨çš„è¯å°±æ›´æ–°ï¼Œä¸å­˜åœ¨çš„è¯å°±æ’å…¥ã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯åŽ»é‡äº†ã€‚ è¿™ç¡®å®žæ˜¯ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•ï¼Œå…¶å®žåŽŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨æ¯æ¬¡æ’å…¥æ•°æ®å‰ï¼Œå¯¹æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œæ˜¯å¦æœ‰è¯¥ IDï¼Œå¦‚æžœæ²¡æœ‰å°±æ’å…¥ï¼Œå¦‚æžœæœ‰å°±æ”¾å¼ƒã€‚ å¯¹äºŽæ•°æ®é‡æ¯”è¾ƒå°‘çš„é¡¹ç›®ï¼Œè¿™ç¡®å®žæ˜¯ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•ï¼Œå¾ˆç®€å•å°±å®Œæˆäº†ç›®æ ‡ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä»¬çŽ°åœ¨è¯´çš„æ˜¯ç™¾ä¸‡çº§æ•°æ®ï¼Œå¦‚æžœæ¯ä¸€æ¡æ•°æ®åœ¨æ’å…¥å‰ï¼Œéƒ½éœ€è¦åŽ»æŸ¥è¯¢è¯¥æ•°æ®æ˜¯å¦åœ¨æ•°æ®åº“ï¼Œé‚£ä¼šå¤šä¹ˆè€—æ—¶ï¼Œæ•ˆçŽ‡ä¼šå¤§å¤§è¾ƒä½Žï¼Œé‚£ä¹ˆè¿˜æœ‰ä»€ä¹ˆå¥½åŠžæ³•å‘¢ï¼Ÿ ç´¢å¼•MongoDB ç´¢å¼•ç´¢å¼•èƒ½å¤Ÿå®žçŽ°é«˜æ•ˆåœ°æŸ¥è¯¢ã€‚æ²¡æœ‰ç´¢å¼•ï¼ŒMongoDB å°±å¿…é¡»æ‰«æé›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£ï¼Œæ‰èƒ½æ‰¾åˆ°åŒ¹é…æŸ¥è¯¢è¯­å¥çš„æ–‡æ¡£ã€‚è¿™ç§æ‰«ææ¯«æ— æ•ˆçŽ‡å¯è¨€ï¼Œéœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ã€‚ ç´¢å¼•æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æž„ï¼Œå°†ä¸€å°å—æ•°æ®é›†ä¿å­˜ä¸ºå®¹æ˜“éåŽ†çš„å½¢å¼ã€‚ç´¢å¼•èƒ½å¤Ÿå­˜å‚¨æŸç§ç‰¹æ®Šå­—æ®µæˆ–å­—æ®µé›†çš„å€¼ï¼Œå¹¶æŒ‰ç…§ç´¢å¼•æŒ‡å®šçš„æ–¹å¼å°†å­—æ®µå€¼è¿›è¡ŒæŽ’åºã€‚ æˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç´¢å¼•ï¼Œä½¿ç”¨ insert_oneæ–¹æ³•æé«˜æ•ˆçŽ‡ã€‚ä»£ç å®žçŽ°ï¼š 123456789101112131415161718class MongoDBPipeline(object): def open_spider(self, spider): self.client = mongodb_client self.db = self.client.get_database() self.collection = self.db['test'] # æ·»åŠ å”¯ä¸€ç´¢å¼• self.collection.create_index('id', unique=True) def close_spider(self, spider): self.client.close() def process_item(self, item, spider): try: self.collection.insert_one(dict(item)) return item except DuplicateKeyError: spider.logger.debug(' duplicate key error collection') return item å…¶å®žå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ open_spiderå…ˆåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œç„¶åŽå†æ’å…¥æ•°æ®ã€‚æ³¨æ„éœ€è¦åœ¨process_itemä¸­ä½¿ç”¨å¼‚å¸¸å¤„ç†ï¼Œå› ä¸ºå¾ˆæœ‰å¯èƒ½æ’å…¥é‡å¤æ•°æ®ï¼Œåˆ°æ—¶å€™å°±ä¼šè¾“å‡ºæ—¥å¿—ã€‚ å…¶ä»–æ–¹æ³•mongo é™¤äº† insert_oneæ–¹æ³•è¿˜æœ‰ä¸€ç§ï¼Œinsert_many insert_many(documents, ordered=True, bypass_document_validation=False, session=None) Insert an iterable of documents.1234567&gt;&gt;&gt; db.test.count()0&gt;&gt;&gt; result = db.test.insert_many([&#123;'x': i&#125; for i in range(2)])&gt;&gt;&gt; result.inserted_ids[ObjectId('54f113fffba522406c9cc20e'), ObjectId('54f113fffba522406c9cc20f')]&gt;&gt;&gt; db.test.count()2 è¿™æ ·æ’å…¥çš„æ•°æ®ä¸å†æ˜¯ä¸€æ¡ï¼Œè€Œæ˜¯å¾ˆå¤šï¼Œ Whatâ€™s the difference between insert(), insertOne() and insertMany() methods on MongoDB å¤§ä½¬æœ‰å†™åˆ°ï¼Œå¯ä»¥åŽ»çœ‹çœ‹ã€‚ åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®ï¼Œå‡è½»æ•°æ®åº“åŽ‹åŠ›ã€‚ä½†æ˜¯è¿™ä¸ªâ€œå¤šâ€åˆ°åº•è¿˜æ˜¯å¤šå°‘ï¼Œç›®å‰ä¸å¾—è€ŒçŸ¥ã€‚ ç»“è¯­é™¤äº†æ›´å¤šæœºå™¨å’Œæ›´å¤šèŠ‚ç‚¹ï¼Œè¿˜æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥æå‡ Scrapyè¿è¡Œé€Ÿåº¦ã€‚ ä»Šå¤©è¯´åˆ°çš„æ˜¯ç®¡é“é˜»å¡žé—®é¢˜ï¼Œè¿˜æœ‰å…¶ä»–åœ°æ–¹ä¹Ÿå¯ä»¥ä¼˜åŒ–ï¼Œè¿˜éœ€è¦åŠªåŠ›ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hiï¼Œè¿™é‡Œæ˜¯æˆ‘çš„çˆ¬è™«ç¬”è®°]]></title>
      <url>%2F2018%2F03%2F25%2FHi%EF%BC%8C%E8%BF%99%E9%87%8C%E6%98%AF%E6%88%91%E7%9A%84%E7%88%AC%E8%99%AB%E7%AC%94%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åå…«ç¯‡åŽŸåˆ›æ–‡ç«  é•¿æœŸæ›´æ–° (à¹‘â€¢ . â€¢à¹‘) å¹³æ—¶æœ‰ä¸ªä¹ æƒ¯ï¼Œä¼šæŠŠè‡ªå·±çš„ç¬”è®°å†™åœ¨æœ‰é“äº‘é‡Œé¢ï¼ŒçŽ°åœ¨åšä¸ªæ•´ç†ã€‚ä¼šé•¿æœŸæ›´æ–°ï¼Œå› ä¸ºæˆ‘æ˜¯BUGåˆ¶é€ æœºã€‚ è§£æžxpathæå–æ‰€æœ‰èŠ‚ç‚¹æ–‡æœ¬1&lt;div id=&quot;test3&quot;&gt;æˆ‘å·¦é’é¾™ï¼Œ&lt;span id=&quot;tiger&quot;&gt;å³ç™½è™Žï¼Œ&lt;ul&gt;ä¸Šæœ±é›€ï¼Œ&lt;li&gt;ä¸‹çŽ„æ­¦ã€‚&lt;/li&gt;&lt;/ul&gt;è€ç‰›åœ¨å½“ä¸­ï¼Œ&lt;/span&gt;é¾™å¤´åœ¨èƒ¸å£ã€‚&lt;div&gt; ä½¿ç”¨xpathçš„string(.) 123456789101112#!/usr/bin/env python# -*- coding: utf-8 -*-from scrapy.selector import Selectortext = '&lt;div id="test3"&gt;æˆ‘å·¦é’é¾™ï¼Œ&lt;span id="tiger"&gt;å³ç™½è™Žï¼Œ&lt;ul&gt;ä¸Šæœ±é›€ï¼Œ&lt;li&gt;ä¸‹çŽ„æ­¦ã€‚&lt;/li&gt;&lt;/ul&gt;è€ç‰›åœ¨å½“ä¸­ï¼Œ&lt;/span&gt;é¾™å¤´åœ¨èƒ¸å£ã€‚&lt;div&gt;'s = Selector(text=text)data = s.xpath('//div[@id="test3"]')info = data.xpath('string(.)').extract()[0]print(info)# output: æˆ‘å·¦é’é¾™ï¼Œå³ç™½è™Žï¼Œä¸Šæœ±é›€ï¼Œä¸‹çŽ„æ­¦ã€‚è€ç‰›åœ¨å½“ä¸­ï¼Œé¾™å¤´åœ¨èƒ¸å£ã€‚ å¦‚ä½•è§£å†³è¯¦æƒ…é¡µé¢å…ƒç´ æ”¹å˜è¿™ä¸ªé—®é¢˜æ˜¯è¿™æ ·äº§ç”Ÿçš„ï¼Œåœ¨å¾ˆå¤šPCç«™ï¼Œæ¯”å¦‚é“¾å®¶ï¼Œè¿™ä¸ªé¡µé¢æœ‰è¿™äº›å­—æ®µAï¼Œä½†æ˜¯ä¸‹ä¸ªé¡µé¢è¿™ä¸ªå­—æ®µAæ²¡äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å­—æ®µBï¼Œåœ¨xpathå®šä½æ—¶å°±å¤±æ•ˆäº†ã€‚è¿™ä¸ªé—®é¢˜å¾ˆå¸¸è§ï¼Œå¤§ä½“æ€è·¯æ˜¯è¿™æ ·çš„ã€‚ åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å­—æ®µçš„dict: data = {}.fromkeys((&#39;url&#39;, &#39;price&#39;, &#39;address&#39;)) ç„¶åŽæ ¹æ®ç½‘é¡µä¸­æ˜¯å¦æœ‰å­—æ®µæ¥å–å€¼ï¼Œä¾‹å¦‚ï¼Œæœ‰â€™urlâ€™å°±å–å¯¹åº”çš„valueï¼Œæ²¡æœ‰åˆ™ä¸ºç©º è¿™æ ·å°±å¯ä»¥å®Œç¾Žè§£å†³åŒ¹é…ä¸å…¨é—®é¢˜ Scrapy ç›¸å…³æ–‡ä»¶ç¼–å†™é€»è¾‘æ–‡ä»¶å’Œè§£æžéƒ¨åˆ†åˆ†å¼€å†™ï¼ŒåŒ¹é…æ–‡ä»¶ç›®å½•æ˜¯utils/parse/ï¼Œçˆ¬è™«æ–‡ä»¶ç›®å½•æ˜¯spiders/ Scrapy ä¸­æ–‡ä¹±ç åœ¨ setting æ–‡ä»¶ä¸­è®¾ç½®ï¼šFEED_EXPORT_ENCODING = &#39;utf-8&#39; Scrapy ä½¿ç”¨Mongopipelines.py é¦–å…ˆæˆ‘ä»¬è¦ä»Žsettingsæ–‡ä»¶ä¸­è¯»å–æ•°æ®çš„åœ°å€ã€ç«¯å£ã€æ•°æ®åº“åç§°ã€‚ æ‹¿åˆ°æ•°æ®åº“çš„åŸºæœ¬ä¿¡æ¯åŽè¿›è¡Œè¿žæŽ¥ã€‚ å°†æ•°æ®å†™å…¥æ•°æ®åº“ï¼ˆupdateåˆ¶å®šå”¯ä¸€é”®ï¼‰ å…³é—­æ•°æ®åº“ æ³¨æ„ï¼šåªæœ‰æ‰“å¼€å’Œå…³é—­æ˜¯åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œå†™å…¥æ“ä½œä¼šæ ¹æ®å…·ä½“çš„å†™å…¥æ¬¡æ•°è€Œå®šã€‚Redis æ— éœ€å…³é—­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import pymongo class MongoDBPipeline(object): """ 1ã€è¿žæŽ¥æ•°æ®åº“æ“ä½œ """ def __init__(self,mongourl,mongoport,mongodb): ''' åˆå§‹åŒ–mongodbæ•°æ®çš„urlã€ç«¯å£å·ã€æ•°æ®åº“åç§° :param mongourl: :param mongoport: :param mongodb: ''' self.mongourl = mongourl self.mongoport = mongoport self.mongodb = mongodb @classmethod def from_crawler(cls,crawler): """ 1ã€è¯»å–settingsé‡Œé¢çš„mongodbæ•°æ®çš„urlã€portã€DBã€‚ :param crawler: :return: """ return cls( mongourl = crawler.settings.get("MONGO_URL"), mongoport = crawler.settings.get("MONGO_PORT"), mongodb = crawler.settings.get("MONGO_DB") ) def open_spider(self,spider): ''' 1ã€è¿žæŽ¥mongodbæ•°æ® :param spider: :return: ''' self.client = pymongo.MongoClient(self.mongourl,self.mongoport) self.db = self.client[self.mongodb] def process_item(self,item,spider): ''' 1ã€å°†æ•°æ®å†™å…¥æ•°æ®åº“ :param item: :param spider: :return: ''' name = item.__class__.__name__ # self.db[name].insert(dict(item)) self.db['user'].update(&#123;'url_token':item['url_token']&#125;,&#123;'$set':item&#125;,True) return item def close_spider(self,spider): ''' 1ã€å…³é—­æ•°æ®åº“è¿žæŽ¥ :param spider: :return: ''' self.client.close() scrapyå›¾ç‰‡ä¸‹è½½12345678910111213141516import scrapyfrom scrapy.pipelines.images import ImagesPipelinefrom scrapy.exceptions import DropItemclass MyImagesPipeline(ImagesPipeline): def get_media_requests(self, item, info): for image_url in item['image_urls']: yield scrapy.Request(image_url) def item_completed(self, results, item, info): image_paths = [x['path'] for ok, x in results if ok] if not image_paths: raise DropItem("Item contains no images") item['image_paths'] = image_paths return item scrapy æš‚åœçˆ¬è™«scrapy crawl somespider -s JOBDIR=crawls/somespider-1 scrapy_redis åˆ†å¸ƒå¼ä½¿ç”¨é˜Ÿåˆ—ä¸ŽåŽ»é‡å³å¯å®Œæˆåˆ†å¸ƒå¼éœ€æ±‚ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ Redis æ ¼å¼ï¼Œé»˜è®¤é‡‡ç”¨çš„æ˜¯ listï¼Œ å¯ä»¥åœ¨ settings.py æ–‡ä»¶ä¸­è®¾ç½® REDIS_START_URLS_AS_SET = Trueï¼Œä½¿ç”¨ Redisçš„ setç±»åž‹ï¼ˆåŽ»é‡ç§å­é“¾æŽ¥ï¼‰ å®‰è£…è¶…æ—¶é—®é¢˜è‡ªå®šä¹‰è¶…æ—¶æ—¶é—´ sudo pip3 --default-timeout=100 install -U scrapy æˆ–è€… ä½¿ç”¨å…¶ä»–æº sudo pip3 install scrapy -i https://pypi.tuna.tsinghua.edu.cn/simple æƒé™é—®é¢˜å®‰è£…æŸæ¨¡å—æ—¶ï¼ŒæŠ¥é”™ï¼šPermissionError: [WinError 5] æ‹’ç»è®¿é—®ã€‚: &#39;c:\\program files\\python35\\Lib\\sit e-packages\\lxml&#39; æœ€ç®€å•æ–¹æ³•ï¼špip install --user lxml Pycharm ç›¸å…³.gitignore æ–‡ä»¶å®‰è£…æ’ä»¶ï¼š Preferences &gt; Plugins &gt; Browse repositories... &gt; Search for &quot;.ignore&quot; &gt; Install Plugin ç„¶åŽå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ·»åŠ åˆ° .gitignore æ˜¾ç¤ºå‡½æ•° ç‚¹å‡» Show Membersï¼ŒæŸ¥çœ‹ç›®å½•ï¼Œä¼šæ˜¾ç¤ºç›¸åº”çš„ç±»å’Œå‡½æ•° æ¿€æ´»ç  http://idea.liyang.io http://xidea.online æ•°æ®Mongoå¯¼å‡ºå‘½ä»¤Î» mongoexport -d test -c set --type=csv -f name,age -o set.csv Î» mongoexport -h 10.10.10.11 -d test -c test --type=csv -f url,id,title -o data.csv å…¶ä»–requirements.txt æ–‡ä»¶å°æç¤ºï¼šä½¿ç”¨ pigar å¯ä»¥ä¸€é”®ç”Ÿæˆ requirements.txt æ–‡ä»¶ Installationï¼špip install pigar Usageï¼špigar å¥½äº†ï¼Œä»Šå¤©å…ˆå†™è¿™ç‚¹ï¼Œä»¥åŽå†è¡¥ä¸Šã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å­¦ä¹ Gitï¼ˆäºŒï¼‰åŸºæœ¬æ“ä½œ]]></title>
      <url>%2F2018%2F03%2F19%2F%E5%AD%A6%E4%B9%A0Git%EF%BC%88%E4%BA%8C%EF%BC%89%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  ç»§ç»­è¡¥åŸºç¡€ (à¹‘â€¢ . â€¢à¹‘) Git åŸºç¡€æ“ä½œ1. åˆ›å»ºç‰ˆæœ¬åº“ä»€ä¹ˆæ˜¯ç‰ˆæœ¬åº“å‘¢ï¼Ÿç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡å repositoryï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢« Git ç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGit éƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªåŽ†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŽŸâ€ã€‚ æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éžå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š 1234$ mkdir learngit$ cd learngit$ pwd/Users/learngit pwdå‘½ä»¤ç”¨äºŽæ˜¾ç¤ºå½“å‰ç›®å½•ã€‚ å¦‚æžœä½ ä½¿ç”¨ Windows ç³»ç»Ÿï¼Œä¸ºäº†é¿å…é‡åˆ°å„ç§èŽ«åå…¶å¦™çš„é—®é¢˜ï¼Œè¯·ç¡®ä¿ç›®å½•åï¼ˆåŒ…æ‹¬çˆ¶ç›®å½•ï¼‰ä¸åŒ…å«ä¸­æ–‡ã€‚ ç¬¬äºŒæ­¥ï¼Œé€šè¿‡git initå‘½ä»¤æŠŠè¿™ä¸ªç›®å½•å˜æˆ Git å¯ä»¥ç®¡ç†çš„ä»“åº“ï¼š 12$ git initInitialized empty Git repository in /Users/learngit/.git/ çž¬é—´ Git å°±æŠŠä»“åº“å»ºå¥½äº†ï¼Œè€Œä¸”å‘Šè¯‰ä½ æ˜¯ä¸€ä¸ªç©ºçš„ä»“åº“ï¼ˆempty Git repositoryï¼‰ ç”¨ls -ahå‘½ä»¤å°±å¯ä»¥çœ‹è§å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª.gitçš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯ Git æ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“çš„ï¼Œæ²¡äº‹åƒä¸‡ä¸è¦æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œä¸ç„¶æ”¹ä¹±äº†ï¼Œå°±æŠŠ Git ä»“åº“ç»™ç ´åäº†ã€‚ ä¸€å®šè¦æ”¾åˆ° learngit ç›®å½•ä¸‹æˆ–å­ç›®å½•ä¸‹ 1$ git status # éšæ—¶ç”¨git status æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ ä¸€ä¸ªæ–‡ä»¶æ”¾åˆ° Git ä»“åº“åªéœ€è¦ä¸¤æ­¥ã€‚ ç”¨å‘½ä»¤git addå‘Šè¯‰ Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“ï¼š 1$ git add . # æŠŠæ‰€æœ‰æ–‡ä»¶éƒ½æ·»åŠ åˆ°ä»“åº“ æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œè¿™å°±å¯¹äº†ï¼ŒUnix çš„å“²å­¦æ˜¯â€œæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯â€ï¼Œè¯´æ˜Žæ·»åŠ æˆåŠŸã€‚ï¼ˆå› ä¸ºæ²¡æœ‰æ·»åŠ ä»»ä½•æ–‡ä»¶ï¼Œå¦‚æžœæ·»åŠ ç»“æžœä¸åŒï¼Œå¯ä»¥ä½¿ç”¨ git status éšæ—¶æŸ¥çœ‹ Git çŠ¶æ€ï¼‰ ç”¨å‘½ä»¤git commitå‘Šè¯‰ Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼š 1234$ git commit abc/aaa.py -m&quot;chore:wrote a readme file&quot;[master (root-commit) cb926e7] wrote a readme file 1 file changed, 2 insertions(+) create mode 100644 aaa.py commit å¿…é¡»éµå¾ªcommitè§„èŒƒ123456789**git commitè§„èŒƒ**- featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰- fixï¼šä¿®è¡¥bug- docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰- styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰- refactorï¼šé‡æž„ï¼ˆå³ä¸æ˜¯æ–°å¢žåŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰- testï¼šå¢žåŠ æµ‹è¯•- choreï¼šæž„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ 2. æ–°æœºå™¨é…ç½® Git åˆ›å»º SSH Keyã€‚åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æžœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰id_rsaå’Œid_rsa.pubè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æžœå·²ç»æœ‰äº†ï¼Œå¯ç›´æŽ¥è·³åˆ°ç¬¬2æ­¥ã€‚å¦‚æžœæ²¡æœ‰ï¼Œæ‰“å¼€ Shellï¼ˆWindows ä¸‹æ‰“å¼€ Git Bashï¼‰ï¼Œåˆ›å»º SSH Keyï¼š 1$ ssh-keygen -t rsa -C &quot;ä½ çš„githubé‚®ç®±&quot; æŠŠé‚®ä»¶åœ°å€æ¢æˆä½ è‡ªå·±çš„é‚®ä»¶åœ°å€ï¼Œä¸€è·¯å›žè½¦ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯ï¼Œæ— éœ€è®¾ç½®å¯†ç ã€‚ å¦‚æžœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°.sshç›®å½•ï¼Œé‡Œé¢æœ‰ id_rsa å’Œ id_rsa.pub ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯ SSH Key çš„ç§˜é’¥å¯¹ï¼Œid_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºåŽ»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚ ç™»é™† GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ï¼š ç„¶åŽï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„ Titleï¼Œåœ¨ Key æ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹ï¼š ç‚¹â€œAdd Keyâ€ï¼Œä½ å°±åº”è¯¥çœ‹åˆ°å·²ç»æ·»åŠ çš„ Key å½“ç„¶ï¼ŒGitHub å…è®¸ä½ æ·»åŠ å¤šä¸ª Keyã€‚å‡å®šä½ æœ‰è‹¥å¹²ç”µè„‘ï¼Œä½ ä¸€ä¼šå„¿åœ¨å…¬å¸æäº¤ï¼Œä¸€ä¼šå„¿åœ¨å®¶é‡Œæäº¤ï¼Œåªè¦æŠŠæ¯å°ç”µè„‘çš„ Key éƒ½æ·»åŠ åˆ° GitHubï¼Œå°±å¯ä»¥åœ¨æ¯å°ç”µè„‘ä¸Šå¾€ GitHub æŽ¨é€äº†ã€‚ 3. å…³è”è¿œç¨‹åº“ å¦‚æžœå…¬å¸å·²åˆ›å»ºè¯¥é¡¹ç›®çš„è¿œç¨‹åº“ï¼Œæœ¬åœ°è¿˜æ²¡æœ‰ï¼Œclone è¯¥é¡¹ç›®åœ°å€: clone with ssh 1$ git clone git@github.com:xxxx/xxx.git SSH è­¦å‘Š å½“ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ Git çš„ clone æˆ–è€… push å‘½ä»¤è¿žæŽ¥ GitHub æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼š 123The authenticity of host &apos;github.com (xx.xx.xx.xx)&apos; can&apos;t be established.RSA key fingerprint is xx.xx.xx.xx.xx.Are you sure you want to continue connecting (yes/no)? è¿™æ˜¯å› ä¸º Git ä½¿ç”¨ SSH è¿žæŽ¥ï¼Œè€Œ SSH è¿žæŽ¥åœ¨ç¬¬ä¸€æ¬¡éªŒè¯ GitHub æœåŠ¡å™¨çš„ Key æ—¶ï¼Œéœ€è¦ä½ ç¡®è®¤ GitHub çš„ Key çš„æŒ‡çº¹ä¿¡æ¯æ˜¯å¦çœŸçš„æ¥è‡ª GitHub çš„æœåŠ¡å™¨ï¼Œè¾“å…¥ yes å›žè½¦å³å¯ã€‚ Git ä¼šè¾“å‡ºä¸€ä¸ªè­¦å‘Šï¼Œå‘Šè¯‰ä½ å·²ç»æŠŠ GitHub çš„ Key æ·»åŠ åˆ°æœ¬æœºçš„ä¸€ä¸ªä¿¡ä»»åˆ—è¡¨é‡Œäº†ï¼š 1Warning: Permanently added &apos;github.com&apos; (RSA) to the list of known hosts. è¿™ä¸ªè­¦å‘Šåªä¼šå‡ºçŽ°ä¸€æ¬¡ï¼ŒåŽé¢çš„æ“ä½œå°±ä¸ä¼šæœ‰ä»»ä½•è­¦å‘Šäº†ã€‚ â€‹ å¦‚æžœå·²ç»åœ¨æœ¬åœ°åˆ›å»ºäº†ä¸€ä¸ª Git ä»“åº“åŽï¼Œå…¬å¸ä¹Ÿå·²åœ¨ GitHub åˆ›å»ºä¸€ä¸ª Git ä»“åº“ï¼Œ å®žçŽ°è®©è¿™ä¸¤ä¸ªä»“åº“è¿›è¡Œè¿œç¨‹åŒæ­¥ 1$ git remote add origin git@github.com:xxxx/xxxx.git ä¸‹ä¸€æ­¥ï¼Œå°±å¯ä»¥æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æŽ¨é€åˆ°è¿œç¨‹åº“ä¸Š 1$ git push -u origin master æŠŠæœ¬åœ°åº“çš„å†…å®¹æŽ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤ï¼Œå®žé™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯ master æŽ¨é€åˆ°è¿œç¨‹ã€‚ ç”±äºŽè¿œç¨‹åº“æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æŽ¨é€ master åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Šäº†-uå‚æ•°ï¼ŒGit ä¸ä½†ä¼šæŠŠæœ¬åœ°çš„ master åˆ†æ”¯å†…å®¹æŽ¨é€çš„è¿œç¨‹æ–°çš„ master åˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„ master åˆ†æ”¯å’Œè¿œç¨‹çš„ master åˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åŽçš„æŽ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ã€‚ æŽ¨é€æˆåŠŸåŽï¼Œå¯ä»¥ç«‹åˆ»åœ¨ GitHub é¡µé¢ä¸­çœ‹åˆ°è¿œç¨‹åº“çš„å†…å®¹å·²ç»å’Œæœ¬åœ°ä¸€æ¨¡ä¸€æ · ä»ŽçŽ°åœ¨èµ·ï¼Œåªè¦æœ¬åœ°ä½œäº†æäº¤ï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä»¤ï¼š $ git push origin master æŠŠæœ¬åœ°masteråˆ†æ”¯çš„æœ€æ–°ä¿®æ”¹æŽ¨é€è‡³GitHub ä¸€èˆ¬æˆ‘ä»¬åœ¨developåˆ†æ”¯å¼€å‘ å¦‚æžœgithubä¸Šæ²¡æœ‰developåˆ†æ”¯ é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°åˆ›å»º develop åˆ†æ”¯ï¼Œç„¶åŽåˆ‡æ¢åˆ° develop åˆ†æ”¯ï¼š 12$ git checkout -b developSwitched to a new branch &apos;develop&apos; git checkoutå‘½ä»¤åŠ ä¸Š-bå‚æ•°è¡¨ç¤ºåˆ›å»ºå¹¶åˆ‡æ¢ï¼Œç›¸å½“äºŽä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š 123$ git branch develop$ git checkout developSwitched to branch &apos;develop&apos; ç„¶åŽï¼Œç”¨git branchå‘½ä»¤æŸ¥çœ‹å½“å‰åˆ†æ”¯ï¼š 123$ git branch* develop master git branchå‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å· å‘å¸ƒdevelopåˆ†æ”¯ å‘å¸ƒdevåˆ†æ”¯æŒ‡çš„æ˜¯åŒæ­¥developåˆ†æ”¯çš„ä»£ç åˆ°è¿œç¨‹æœåŠ¡å™¨ 12git push origin develop:develop # è¿™æ ·è¿œç¨‹ä»“åº“ä¹Ÿæœ‰ä¸€ä¸ªdevelopåˆ†æ”¯äº† æˆ–è€…git push origin develop # è¿™ä¸¤ç§åº”è¯¥éƒ½å¯ä»¥ å¦‚æžœgithubå·²ç»æœ‰masteråˆ†æ”¯å’Œdevelopåˆ†æ”¯ åœ¨æœ¬åœ° git checkout -b develop æ–°å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°developåˆ†æ”¯ git pull origin develop æœ¬åœ°developåˆ†æ”¯ä¸Žè¿œç¨‹developåˆ†æ”¯ç›¸å…³è” Git æ€»ç»“1234567891011121314151617git add . # æ·»åŠ æ‰€æœ‰æ”¹åŠ¨çš„æ–‡ä»¶åˆ°ä»“åº“git commit æ–‡ä»¶è·¯å¾„ -m&apos;fix:ä¿®å¤xx bug&apos;# githubä¸Šå·²ç»æœ‰masteråˆ†æ”¯ å’Œdevåˆ†æ”¯åœ¨æœ¬åœ°git checkout -b dev # åˆ›å»º+åˆ‡æ¢åˆ†æ”¯devgit pull origin dev # æœ¬åœ°åˆ†æ”¯ä¸Žè¿œç¨‹åˆ†æ”¯ç›¸å…³è”dev# githubæ— devåˆ†æ”¯ï¼Œåœ¨æœ¬åœ°æ–°å»ºåˆ†æ”¯å¹¶æŽ¨é€åˆ°è¿œç¨‹git checkout -b devgit push origin dev:dev # è¿™æ ·è¿œç¨‹ä»“åº“ä¸­ä¹Ÿå°±åˆ›å»ºäº†ä¸€ä¸ªdevåˆ†æ”¯git branch # æŸ¥çœ‹æœ¬åœ°æœ‰å¤šå°‘åˆ†æ”¯git branch åˆ†æ”¯åå­— # åˆ›å»ºåˆ†æ”¯git checkout dev # åˆ‡æ¢åˆ°devåˆ†æ”¯è¿›è¡Œå¼€å‘git push # æäº¤åˆ°è¿œç¨‹git branch -d dev # åˆ é™¤æœ¬åœ°devåˆ†æ”¯git merge dev # åˆå¹¶devåˆ°å½“å‰åˆ†æ”¯(master) git remote æ·±å…¥ç ”ç©¶ git-remote - Manage set of tracked repositories 12345678910111213git remote [-v | --verbose]git remote add [-t &lt;branch&gt;] [-m &lt;master&gt;] [-f] [--[no-]tags] [--mirror=&lt;fetch|push&gt;] &lt;name&gt; &lt;url&gt;git remote rename &lt;old&gt; &lt;new&gt;git remote remove &lt;name&gt;git remote set-head &lt;name&gt; (-a | --auto | -d | --delete | &lt;branch&gt;)git remote set-branches [--add] &lt;name&gt; &lt;branch&gt;â€¦â€‹git remote get-url [--push] [--all] &lt;name&gt;git remote set-url [--push] &lt;name&gt; &lt;newurl&gt; [&lt;oldurl&gt;]git remote set-url --add [--push] &lt;name&gt; &lt;newurl&gt;git remote set-url --delete [--push] &lt;name&gt; &lt;url&gt;git remote [-v | --verbose] show [-n] &lt;name&gt;â€¦â€‹git remote prune [-n | --dry-run] &lt;name&gt;â€¦â€‹git remote [-v | --verbose] update [-p | --prune] [(&lt;group&gt; | &lt;remote&gt;)â€¦â€‹] æŸ¥çœ‹è¿œç¨‹ä»“åº“å¦‚æžœæƒ³æŸ¥çœ‹ä½ å·²ç»é…ç½®çš„è¿œç¨‹ä»“åº“æœåŠ¡å™¨ï¼Œå¯ä»¥è¿è¡Œ git remote å‘½ä»¤ã€‚ å®ƒä¼šåˆ—å‡ºä½ æŒ‡å®šçš„æ¯ä¸€ä¸ªè¿œç¨‹æœåŠ¡å™¨çš„ç®€å†™ã€‚ å¦‚æžœä½ å·²ç»å…‹éš†äº†è‡ªå·±çš„ä»“åº“ï¼Œé‚£ä¹ˆè‡³å°‘åº”è¯¥èƒ½çœ‹åˆ° origin - è¿™æ˜¯ Git ç»™ä½ å…‹éš†çš„ä»“åº“æœåŠ¡å™¨çš„é»˜è®¤åå­—ï¼š 12345678910$ git clone https://github.com/schacon/ticgitCloning into &apos;ticgit&apos;...remote: Reusing existing pack: 1857, done.remote: Total 1857 (delta 0), reused 0 (delta 0)Receiving objects: 100% (1857/1857), 374.35 KiB | 268.00 KiB/s, done.Resolving deltas: 100% (772/772), done.Checking connectivity... done.$ cd ticgit$ git remoteorigin ä½ ä¹Ÿå¯ä»¥æŒ‡å®šé€‰é¡¹ -vï¼Œä¼šæ˜¾ç¤ºéœ€è¦è¯»å†™è¿œç¨‹ä»“åº“ä½¿ç”¨çš„ Git ä¿å­˜çš„ç®€å†™ä¸Žå…¶å¯¹åº”çš„ URLã€‚123$ git remote -vorigin https://github.com/schacon/ticgit (fetch)origin https://github.com/schacon/ticgit (push) å¦‚æžœä½ çš„è¿œç¨‹ä»“åº“ä¸æ­¢ä¸€ä¸ªï¼Œè¯¥å‘½ä»¤ä¼šå°†å®ƒä»¬å…¨éƒ¨åˆ—å‡ºã€‚ ä¾‹å¦‚ï¼Œä¸Žå‡ ä¸ªåä½œè€…åˆä½œçš„ï¼Œæ‹¥æœ‰å¤šä¸ªè¿œç¨‹ä»“åº“çš„ä»“åº“çœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š 123456789101112$ cd grit$ git remote -vbakkdoor https://github.com/bakkdoor/grit (fetch)bakkdoor https://github.com/bakkdoor/grit (push)cho45 https://github.com/cho45/grit (fetch)cho45 https://github.com/cho45/grit (push)defunkt https://github.com/defunkt/grit (fetch)defunkt https://github.com/defunkt/grit (push)koke git://github.com/koke/grit.git (fetch)koke git://github.com/koke/grit.git (push)origin git@github.com:mojombo/grit.git (fetch)origin git@github.com:mojombo/grit.git (push) è¿™æ ·æˆ‘ä»¬å¯ä»¥è½»æ¾æ‹‰å–å…¶ä¸­ä»»ä½•ä¸€ä¸ªç”¨æˆ·çš„è´¡çŒ®ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬å¤§æ¦‚è¿˜ä¼šæœ‰æŸäº›è¿œç¨‹ä»“åº“çš„æŽ¨é€æƒé™ï¼Œè™½ç„¶æˆ‘ä»¬ç›®å‰è¿˜ä¸ä¼šåœ¨æ­¤ä»‹ç»ã€‚ æ³¨æ„è¿™äº›è¿œç¨‹ä»“åº“ä½¿ç”¨äº†ä¸åŒçš„åè®®ï¼›æˆ‘ä»¬å°†ä¼šåœ¨ åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Git ä¸­äº†è§£å…³äºŽå®ƒä»¬çš„æ›´å¤šä¿¡æ¯ã€‚ æ·»åŠ è¿œç¨‹ä»“åº“è¿è¡Œ git remote add &lt;shortname&gt; &lt;url&gt; æ·»åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ Git ä»“åº“ï¼ŒåŒæ—¶æŒ‡å®šä¸€ä¸ªä½ å¯ä»¥è½»æ¾å¼•ç”¨çš„ç®€å†™ï¼š12345678$ git remoteorigin$ git remote add pb https://github.com/paulboone/ticgit$ git remote -vorigin https://github.com/schacon/ticgit (fetch)origin https://github.com/schacon/ticgit (push)pb https://github.com/paulboone/ticgit (fetch)pb https://github.com/paulboone/ticgit (push) çŽ°åœ¨ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨å­—ç¬¦ä¸² pb æ¥ä»£æ›¿æ•´ä¸ª URLã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœä½ æƒ³æ‹‰å– Paul çš„ä»“åº“ä¸­æœ‰ä½†ä½ æ²¡æœ‰çš„ä¿¡æ¯ï¼Œå¯ä»¥è¿è¡Œ git fetch pbï¼š12345678$ git fetch pbremote: Counting objects: 43, done.remote: Compressing objects: 100% (36/36), done.remote: Total 43 (delta 10), reused 31 (delta 5)Unpacking objects: 100% (43/43), done.From https://github.com/paulboone/ticgit * [new branch] master -&gt; pb/master * [new branch] ticgit -&gt; pb/ticgit çŽ°åœ¨ Paul çš„ master åˆ†æ”¯å¯ä»¥åœ¨æœ¬åœ°é€šè¿‡ pb/master è®¿é—®åˆ° - ä½ å¯ä»¥å°†å®ƒåˆå¹¶åˆ°è‡ªå·±çš„æŸä¸ªåˆ†æ”¯ä¸­ï¼Œæˆ–è€…å¦‚æžœä½ æƒ³è¦æŸ¥çœ‹å®ƒçš„è¯ï¼Œå¯ä»¥æ£€å‡ºä¸€ä¸ªæŒ‡å‘è¯¥ç‚¹çš„æœ¬åœ°åˆ†æ”¯ã€‚ ##ä»Žè¿œç¨‹ä»“åº“ä¸­æŠ“å–ä¸Žæ‹‰å–å°±å¦‚åˆšæ‰æ‰€è§ï¼Œä»Žè¿œç¨‹ä»“åº“ä¸­èŽ·å¾—æ•°æ®ï¼Œå¯ä»¥æ‰§è¡Œï¼š $ git fetch [remote-name]è¿™ä¸ªå‘½ä»¤ä¼šè®¿é—®è¿œç¨‹ä»“åº“ï¼Œä»Žä¸­æ‹‰å–æ‰€æœ‰ä½ è¿˜æ²¡æœ‰çš„æ•°æ®ã€‚ æ‰§è¡Œå®ŒæˆåŽï¼Œä½ å°†ä¼šæ‹¥æœ‰é‚£ä¸ªè¿œç¨‹ä»“åº“ä¸­æ‰€æœ‰åˆ†æ”¯çš„å¼•ç”¨ï¼Œå¯ä»¥éšæ—¶åˆå¹¶æˆ–æŸ¥çœ‹ã€‚ å¦‚æžœä½ ä½¿ç”¨ clone å‘½ä»¤å…‹éš†äº†ä¸€ä¸ªä»“åº“ï¼Œå‘½ä»¤ä¼šè‡ªåŠ¨å°†å…¶æ·»åŠ ä¸ºè¿œç¨‹ä»“åº“å¹¶é»˜è®¤ä»¥ â€œoriginâ€ ä¸ºç®€å†™ã€‚ æ‰€ä»¥ï¼Œgit fetch origin ä¼šæŠ“å–å…‹éš†ï¼ˆæˆ–ä¸Šä¸€æ¬¡æŠ“å–ï¼‰åŽæ–°æŽ¨é€çš„æ‰€æœ‰å·¥ä½œã€‚ å¿…é¡»æ³¨æ„ git fetch å‘½ä»¤ä¼šå°†æ•°æ®æ‹‰å–åˆ°ä½ çš„æœ¬åœ°ä»“åº“ - å®ƒå¹¶ä¸ä¼šè‡ªåŠ¨åˆå¹¶æˆ–ä¿®æ”¹ä½ å½“å‰çš„å·¥ä½œã€‚ å½“å‡†å¤‡å¥½æ—¶ä½ å¿…é¡»æ‰‹åŠ¨å°†å…¶åˆå¹¶å…¥ä½ çš„å·¥ä½œã€‚ å¦‚æžœä½ æœ‰ä¸€ä¸ªåˆ†æ”¯è®¾ç½®ä¸ºè·Ÿè¸ªä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨ git pull å‘½ä»¤æ¥è‡ªåŠ¨çš„æŠ“å–ç„¶åŽåˆå¹¶è¿œç¨‹åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚ è¿™å¯¹ä½ æ¥è¯´å¯èƒ½æ˜¯ä¸€ä¸ªæ›´ç®€å•æˆ–æ›´èˆ’æœçš„å·¥ä½œæµç¨‹ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œgit clone å‘½ä»¤ä¼šè‡ªåŠ¨è®¾ç½®æœ¬åœ° master åˆ†æ”¯è·Ÿè¸ªå…‹éš†çš„è¿œç¨‹ä»“åº“çš„ master åˆ†æ”¯ï¼ˆæˆ–ä¸ç®¡æ˜¯ä»€ä¹ˆåå­—çš„é»˜è®¤åˆ†æ”¯ï¼‰ã€‚ è¿è¡Œ git pull é€šå¸¸ä¼šä»Žæœ€åˆå…‹éš†çš„æœåŠ¡å™¨ä¸ŠæŠ“å–æ•°æ®å¹¶è‡ªåŠ¨å°è¯•åˆå¹¶åˆ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯ã€‚ æŽ¨é€åˆ°è¿œç¨‹ä»“åº“å½“ä½ æƒ³åˆ†äº«ä½ çš„é¡¹ç›®æ—¶ï¼Œå¿…é¡»å°†å…¶æŽ¨é€åˆ°ä¸Šæ¸¸ã€‚ è¿™ä¸ªå‘½ä»¤å¾ˆç®€å•ï¼šgit push [remote-name] [branch-name]ã€‚ å½“ä½ æƒ³è¦å°† master åˆ†æ”¯æŽ¨é€åˆ° origin æœåŠ¡å™¨æ—¶ï¼ˆå†æ¬¡è¯´æ˜Žï¼Œå…‹éš†æ—¶é€šå¸¸ä¼šè‡ªåŠ¨å¸®ä½ è®¾ç½®å¥½é‚£ä¸¤ä¸ªåå­—ï¼‰ï¼Œé‚£ä¹ˆè¿è¡Œè¿™ä¸ªå‘½ä»¤å°±å¯ä»¥å°†ä½ æ‰€åšçš„å¤‡ä»½åˆ°æœåŠ¡å™¨ï¼š $ git push origin masteråªæœ‰å½“ä½ æœ‰æ‰€å…‹éš†æœåŠ¡å™¨çš„å†™å…¥æƒé™ï¼Œå¹¶ä¸”ä¹‹å‰æ²¡æœ‰äººæŽ¨é€è¿‡æ—¶ï¼Œè¿™æ¡å‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆã€‚ å½“ä½ å’Œå…¶ä»–äººåœ¨åŒä¸€æ—¶é—´å…‹éš†ï¼Œä»–ä»¬å…ˆæŽ¨é€åˆ°ä¸Šæ¸¸ç„¶åŽä½ å†æŽ¨é€åˆ°ä¸Šæ¸¸ï¼Œä½ çš„æŽ¨é€å°±ä¼šæ¯«æ— ç–‘é—®åœ°è¢«æ‹’ç»ã€‚ ä½ å¿…é¡»å…ˆå°†ä»–ä»¬çš„å·¥ä½œæ‹‰å–ä¸‹æ¥å¹¶å°†å…¶åˆå¹¶è¿›ä½ çš„å·¥ä½œåŽæ‰èƒ½æŽ¨é€ã€‚ æŸ¥çœ‹è¿œç¨‹ä»“åº“å¦‚æžœæƒ³è¦æŸ¥çœ‹æŸä¸€ä¸ªè¿œç¨‹ä»“åº“çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ git remote show [remote-name] å‘½ä»¤ã€‚ å¦‚æžœæƒ³ä»¥ä¸€ä¸ªç‰¹å®šçš„ç¼©å†™åè¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¾‹å¦‚ originï¼Œä¼šå¾—åˆ°åƒä¸‹é¢ç±»ä¼¼çš„ä¿¡æ¯ï¼š123456789101112$ git remote show origin* remote origin Fetch URL: https://github.com/schacon/ticgit Push URL: https://github.com/schacon/ticgit HEAD branch: master Remote branches: master tracked dev-branch tracked Local branch configured for &apos;git pull&apos;: master merges with remote master Local ref configured for &apos;git push&apos;: master pushes to master (up to date) å®ƒåŒæ ·ä¼šåˆ—å‡ºè¿œç¨‹ä»“åº“çš„ URL ä¸Žè·Ÿè¸ªåˆ†æ”¯çš„ä¿¡æ¯ã€‚ è¿™äº›ä¿¡æ¯éžå¸¸æœ‰ç”¨ï¼Œå®ƒå‘Šè¯‰ä½ æ­£å¤„äºŽ master åˆ†æ”¯ï¼Œå¹¶ä¸”å¦‚æžœè¿è¡Œ git pullï¼Œå°±ä¼šæŠ“å–æ‰€æœ‰çš„è¿œç¨‹å¼•ç”¨ï¼Œç„¶åŽå°†è¿œç¨‹ master åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ° master åˆ†æ”¯ã€‚ å®ƒä¹Ÿä¼šåˆ—å‡ºæ‹‰å–åˆ°çš„æ‰€æœ‰è¿œç¨‹å¼•ç”¨ã€‚ è¿™æ˜¯ä¸€ä¸ªç»å¸¸é‡åˆ°çš„ç®€å•ä¾‹å­ã€‚ å¦‚æžœä½ æ˜¯ Git çš„é‡åº¦ä½¿ç”¨è€…ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥é€šè¿‡ git remote show çœ‹åˆ°æ›´å¤šçš„ä¿¡æ¯ã€‚1234567891011121314151617181920$ git remote show origin* remote origin URL: https://github.com/my-org/complex-project Fetch URL: https://github.com/my-org/complex-project Push URL: https://github.com/my-org/complex-project HEAD branch: master Remote branches: master tracked dev-branch tracked markdown-strip tracked issue-43 new (next fetch will store in remotes/origin) issue-45 new (next fetch will store in remotes/origin) refs/remotes/origin/issue-11 stale (use &apos;git remote prune&apos; to remove) Local branches configured for &apos;git pull&apos;: dev-branch merges with remote dev-branch master merges with remote master Local refs configured for &apos;git push&apos;: dev-branch pushes to dev-branch (up to date) markdown-strip pushes to markdown-strip (up to date) master pushes to master (up to date) è¿™ä¸ªå‘½ä»¤åˆ—å‡ºäº†å½“ä½ åœ¨ç‰¹å®šçš„åˆ†æ”¯ä¸Šæ‰§è¡Œ git push ä¼šè‡ªåŠ¨åœ°æŽ¨é€åˆ°å“ªä¸€ä¸ªè¿œç¨‹åˆ†æ”¯ã€‚ å®ƒä¹ŸåŒæ ·åœ°åˆ—å‡ºäº†å“ªäº›è¿œç¨‹åˆ†æ”¯ä¸åœ¨ä½ çš„æœ¬åœ°ï¼Œå“ªäº›è¿œç¨‹åˆ†æ”¯å·²ç»ä»ŽæœåŠ¡å™¨ä¸Šç§»é™¤äº†ï¼Œè¿˜æœ‰å½“ä½ æ‰§è¡Œ git pull æ—¶å“ªäº›åˆ†æ”¯ä¼šè‡ªåŠ¨åˆå¹¶ã€‚ è¿œç¨‹ä»“åº“çš„ç§»é™¤ä¸Žé‡å‘½åå¦‚æžœæƒ³è¦é‡å‘½åå¼•ç”¨çš„åå­—å¯ä»¥è¿è¡Œ git remote rename åŽ»ä¿®æ”¹ä¸€ä¸ªè¿œç¨‹ä»“åº“çš„ç®€å†™åã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦å°† pb é‡å‘½åä¸º paulï¼Œå¯ä»¥ç”¨ git remote rename è¿™æ ·åšï¼š1234$ git remote rename pb paul$ git remoteoriginpaul å€¼å¾—æ³¨æ„çš„æ˜¯è¿™åŒæ ·ä¹Ÿä¼šä¿®æ”¹ä½ çš„è¿œç¨‹åˆ†æ”¯åå­—ã€‚ é‚£äº›è¿‡åŽ»å¼•ç”¨ pb/master çš„çŽ°åœ¨ä¼šå¼•ç”¨ paul/masterã€‚ å¦‚æžœå› ä¸ºä¸€äº›åŽŸå› æƒ³è¦ç§»é™¤ä¸€ä¸ªè¿œç¨‹ä»“åº“ - ä½ å·²ç»ä»ŽæœåŠ¡å™¨ä¸Šæ¬èµ°äº†æˆ–ä¸å†æƒ³ä½¿ç”¨æŸä¸€ä¸ªç‰¹å®šçš„é•œåƒäº†ï¼Œåˆæˆ–è€…æŸä¸€ä¸ªè´¡çŒ®è€…ä¸å†è´¡çŒ®äº† - å¯ä»¥ä½¿ç”¨ git remote rm ï¼š123$ git remote rm paul$ git remoteorigin å›žé¡¾ï¼šå­¦ä¹ Gitï¼ˆä¸€ï¼‰èµ·æ­¥]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å­¦ä¹ Gitï¼ˆä¸€ï¼‰èµ·æ­¥]]></title>
      <url>%2F2018%2F03%2F14%2F%E5%AD%A6%E4%B9%A0Git%EF%BC%88%E4%B8%80%EF%BC%89%E8%B5%B7%E6%AD%A5%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åå…­ç¯‡åŽŸåˆ›æ–‡ç«  å¼€å§‹è¡¥åŸºç¡€ (à¹‘â€¢ . â€¢à¹‘) ä»€ä¹ˆæ˜¯Gitåœ¨Gitå®˜ç½‘ä¸Šæ‰¾åˆ°è¿™æ ·ä¸€æ®µæè¿° Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency. é‡ç‚¹æ˜¯ version control system (VCS)ï¼Œç¿»è¯‘è¿‡æ¥ä¹Ÿå°±æ˜¯ ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€‚ï¼ˆPycharmä¸­æœ‰ä¸€ä¸ªï¼‰ å…³äºŽç‰ˆæœ¬æŽ§åˆ¶ç‰ˆæœ¬æŽ§åˆ¶æ˜¯ä¸€ç§è®°å½•ä¸€ä¸ªæˆ–è‹¥å¹²æ–‡ä»¶å†…å®¹å˜åŒ–ï¼Œä»¥ä¾¿å°†æ¥æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬ä¿®è®¢æƒ…å†µçš„ç³»ç»Ÿã€‚ ï¼ˆæˆ‘çš„ç†è§£å°±æ˜¯ä¸€ä¸ªä¸œè¥¿ä¼šæœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œå°±åƒåƒé¸¡ï¼Œå¸¸å¸¸æ›´æ–°ï¼Œæ¯æ›´æ–°ä¸€æ¬¡å°±æ˜¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æžœåˆšå‘è¡Œçš„ç‰ˆæœ¬å‡ºçŽ°æ¯’åœˆä¸æŽ‰è¡€ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç‰ˆæœ¬å›žé€€ã€‚ã€‚ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿå°±ä½“çŽ°ä½œç”¨äº†ï¼‰ ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿåˆåˆ†ä¸ºï¼šæœ¬åœ°ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€é›†ä¸­åŒ–çš„ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿã€‚ æœ¬åœ°ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ é›†ä¸­åŒ–çš„ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ æ›´å¤šä»‹ç»å¯ä»¥æ¥çœ‹ 1.1 èµ·æ­¥ - å…³äºŽç‰ˆæœ¬æŽ§åˆ¶ è°å¼€å‘äº† Git2002 å¹´ï¼ŒLinux å†…æ ¸å¼€æºé¡¹ç›®ç»„å¼€å§‹å¯ç”¨ä¸€ä¸ªä¸“æœ‰çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿ BitKeeper æ¥ç®¡ç†å’Œç»´æŠ¤ä»£ç ã€‚ ä½†æ˜¯åˆ°äº† 2005 å¹´ï¼Œå¼€å‘ BitKeeper çš„å•†ä¸šå…¬å¸åŒ Linux å†…æ ¸å¼€æºç¤¾åŒºçš„åˆä½œå…³ç³»ç»“æŸï¼Œä»–ä»¬æ”¶å›žäº† Linux å†…æ ¸ç¤¾åŒºå…è´¹ä½¿ç”¨ BitKeeper çš„æƒåŠ›ã€‚ è¿™å°±è¿«ä½¿ Linux å¼€æºç¤¾åŒºï¼ˆç‰¹åˆ«æ˜¯ Linux çš„ç¼”é€ è€… Linus Torvaldsï¼‰åŸºäºŽä½¿ç”¨ BitKeeper æ—¶çš„ç»éªŒæ•™è®­ï¼Œå¼€å‘å‡ºè‡ªå·±çš„ç‰ˆæœ¬ç³»ç»Ÿã€‚ ä»–ä»¬å¯¹æ–°çš„ç³»ç»Ÿåˆ¶è®¢äº†è‹¥å¹²ç›®æ ‡ï¼š é€Ÿåº¦ ç®€å•çš„è®¾è®¡ å¯¹éžçº¿æ€§å¼€å‘æ¨¡å¼çš„å¼ºåŠ›æ”¯æŒï¼ˆå…è®¸æˆåƒä¸Šä¸‡ä¸ªå¹¶è¡Œå¼€å‘çš„åˆ†æ”¯ï¼‰ å®Œå…¨åˆ†å¸ƒå¼ æœ‰èƒ½åŠ›é«˜æ•ˆç®¡ç†ç±»ä¼¼ Linux å†…æ ¸ä¸€æ ·çš„è¶…å¤§è§„æ¨¡é¡¹ç›®ï¼ˆé€Ÿåº¦å’Œæ•°æ®é‡ï¼‰ Git ç‰¹ç‚¹Git å·¥ä½œæµåŸºæœ¬çš„ Git å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š å…‹éš† Git èµ„æºä½œä¸ºå·¥ä½œç›®å½•ã€‚ åœ¨å…‹éš†çš„èµ„æºä¸Šæ·»åŠ æˆ–ä¿®æ”¹æ–‡ä»¶ã€‚ å¦‚æžœå…¶ä»–äººä¿®æ”¹äº†ï¼Œä½ å¯ä»¥æ›´æ–°èµ„æºã€‚ åœ¨æäº¤å‰æŸ¥çœ‹ä¿®æ”¹ã€‚ æäº¤ä¿®æ”¹ã€‚ åœ¨ä¿®æ”¹å®ŒæˆåŽï¼Œå¦‚æžœå‘çŽ°é”™è¯¯ï¼Œå¯ä»¥æ’¤å›žæäº¤å¹¶å†æ¬¡ä¿®æ”¹å¹¶æäº¤ã€‚ è¿‘ä¹Žæ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ¬åœ°æ‰§è¡Œåœ¨ Git ä¸­çš„ç»å¤§å¤šæ•°æ“ä½œéƒ½åªéœ€è¦è®¿é—®æœ¬åœ°æ–‡ä»¶å’Œèµ„æºï¼Œä¸€èˆ¬ä¸éœ€è¦æ¥è‡ªç½‘ç»œä¸Šå…¶å®ƒè®¡ç®—æœºçš„ä¿¡æ¯ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œè¦æµè§ˆé¡¹ç›®çš„åŽ†å²ï¼ŒGit ä¸éœ€å¤–è¿žåˆ°æœåŠ¡å™¨åŽ»èŽ·å–åŽ†å²ï¼Œç„¶åŽå†æ˜¾ç¤ºå‡ºæ¥â€”â€”å®ƒåªéœ€ç›´æŽ¥ä»Žæœ¬åœ°æ•°æ®åº“ä¸­è¯»å–ã€‚ ä½ èƒ½ç«‹å³çœ‹åˆ°é¡¹ç›®åŽ†å²ã€‚ å¦‚æžœä½ æƒ³æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¸Žä¸€ä¸ªæœˆå‰çš„ç‰ˆæœ¬ä¹‹é—´å¼•å…¥çš„ä¿®æ”¹ï¼ŒGit ä¼šæŸ¥æ‰¾åˆ°ä¸€ä¸ªæœˆå‰çš„æ–‡ä»¶åšä¸€æ¬¡æœ¬åœ°çš„å·®å¼‚è®¡ç®—ï¼Œè€Œä¸æ˜¯ç”±è¿œç¨‹æœåŠ¡å™¨å¤„ç†æˆ–ä»Žè¿œç¨‹æœåŠ¡å™¨æ‹‰å›žæ—§ç‰ˆæœ¬æ–‡ä»¶å†æ¥æœ¬åœ°å¤„ç†ã€‚ Git ä¿è¯å®Œæ•´æ€§Git ä¸­æ‰€æœ‰æ•°æ®åœ¨å­˜å‚¨å‰éƒ½è®¡ç®—æ ¡éªŒå’Œï¼Œç„¶åŽä»¥æ ¡éªŒå’Œæ¥å¼•ç”¨ã€‚ è¿™æ„å‘³ç€ä¸å¯èƒ½åœ¨ Git ä¸çŸ¥æƒ…æ—¶æ›´æ”¹ä»»ä½•æ–‡ä»¶å†…å®¹æˆ–ç›®å½•å†…å®¹ã€‚ è¿™ä¸ªåŠŸèƒ½å»ºæž„åœ¨ Git åº•å±‚ï¼Œæ˜¯æž„æˆ Git å“²å­¦ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ã€‚ è‹¥ä½ åœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸¢å¤±ä¿¡æ¯æˆ–æŸåæ–‡ä»¶ï¼ŒGit å°±èƒ½å‘çŽ°ã€‚ Git ç”¨ä»¥è®¡ç®—æ ¡éªŒå’Œçš„æœºåˆ¶å«åš SHA-1 æ•£åˆ—ï¼ˆhashï¼Œå“ˆå¸Œï¼‰ã€‚ è¿™æ˜¯ä¸€ä¸ªç”± 40 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ0-9 å’Œ a-fï¼‰ç»„æˆå­—ç¬¦ä¸²ï¼ŒåŸºäºŽ Git ä¸­æ–‡ä»¶çš„å†…å®¹æˆ–ç›®å½•ç»“æž„è®¡ç®—å‡ºæ¥ã€‚ SHA-1 å“ˆå¸Œçœ‹èµ·æ¥æ˜¯è¿™æ ·ï¼š 24b9da6552252987aa493b52f8696cd6d3b00373 Git ä¸­ä½¿ç”¨è¿™ç§å“ˆå¸Œå€¼çš„æƒ…å†µå¾ˆå¤šï¼Œä½ å°†ç»å¸¸çœ‹åˆ°è¿™ç§å“ˆå¸Œå€¼ã€‚ å®žé™…ä¸Šï¼ŒGit æ•°æ®åº“ä¸­ä¿å­˜çš„ä¿¡æ¯éƒ½æ˜¯ä»¥æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼æ¥ç´¢å¼•ï¼Œè€Œä¸æ˜¯æ–‡ä»¶åã€‚ Git ä¸€èˆ¬åªæ·»åŠ æ•°æ®ä½ æ‰§è¡Œçš„ Git æ“ä½œï¼Œå‡ ä¹Žåªå¾€ Git æ•°æ®åº“ä¸­å¢žåŠ æ•°æ®ã€‚ å¾ˆéš¾è®© Git æ‰§è¡Œä»»ä½•ä¸å¯é€†æ“ä½œï¼Œæˆ–è€…è®©å®ƒä»¥ä»»ä½•æ–¹å¼æ¸…é™¤æ•°æ®ã€‚ åŒåˆ«çš„ VCS ä¸€æ ·ï¼Œæœªæäº¤æ›´æ–°æ—¶æœ‰å¯èƒ½ä¸¢å¤±æˆ–å¼„ä¹±ä¿®æ”¹çš„å†…å®¹ï¼›ä½†æ˜¯ä¸€æ—¦ä½ æäº¤å¿«ç…§åˆ° Git ä¸­ï¼Œå°±éš¾ä»¥å†ä¸¢å¤±æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å¦‚æžœä½ å®šæœŸçš„æŽ¨é€æ•°æ®åº“åˆ°å…¶å®ƒä»“åº“çš„è¯ã€‚ Git çš„ä¸‰ç§çŠ¶æ€ å·²æäº¤ï¼ˆcommittedï¼‰ï¼šæ•°æ®å·²ç»å®‰å…¨çš„ä¿å­˜åœ¨æœ¬åœ°æ•°æ®åº“ä¸­ã€‚ å·²ä¿®æ”¹ï¼ˆmodifiedï¼‰ ï¼šä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡ä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚ å·²æš‚å­˜ï¼ˆstagedï¼‰ ï¼šå¯¹ä¸€ä¸ªå·²ä¿®æ”¹æ–‡ä»¶çš„å½“å‰ç‰ˆæœ¬åšäº†æ ‡è®°ï¼Œä½¿ä¹‹åŒ…å«åœ¨ä¸‹æ¬¡æäº¤çš„å¿«ç…§ä¸­ã€‚ ç”±æ­¤å¼•å…¥ Git é¡¹ç›®çš„ä¸‰ä¸ªå·¥ä½œåŒºåŸŸçš„æ¦‚å¿µï¼šGit ä»“åº“ã€å·¥ä½œç›®å½•ä»¥åŠæš‚å­˜åŒºåŸŸã€‚ å®‰è£… Gitè¯´äº†é‚£ä¹ˆå¤šï¼ŒçŽ°åœ¨å¼€å§‹åŠ¨æ‰‹ï¼Œå®‰è£…Gitã€‚ Linux$ sudo yum install git æˆ–è€… $ sudo apt-get install git Macä¸‹è½½å®‰è£…åŒ… Downloading Git æˆ–è€… $ brew install git Windowsç›´æŽ¥ä¸‹è½½æ–‡ä»¶ Downloading Git æˆ–è€… å®‰è£… GitHub for Windows åˆæ¬¡è¿è¡Œ Git å‰çš„é…ç½®ç”¨æˆ·ä¿¡æ¯12$ git config --global user.name &quot;name&quot;$ git config --global user.email example@example.com å¦‚æžœä½¿ç”¨äº† --global é€‰é¡¹ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤åªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åŽæ— è®ºä½ åœ¨è¯¥ç³»ç»Ÿä¸Šåšä»»ä½•äº‹æƒ…ï¼Œ Git éƒ½ä¼šä½¿ç”¨é‚£äº›ä¿¡æ¯ã€‚ æ£€æŸ¥é…ç½®ä¿¡æ¯12345678$ git config --listuser.name=nameuser.email=example@example.comcolor.status=autocolor.branch=autocolor.interactive=autocolor.diff=auto... èŽ·å–å¸®åŠ©è‹¥ä½ ä½¿ç”¨ Git æ—¶éœ€è¦èŽ·å–å¸®åŠ©ï¼Œæœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥æ‰¾åˆ° Git å‘½ä»¤çš„ä½¿ç”¨æ‰‹å†Œï¼š123$ git help &lt;verb&gt;$ git &lt;verb&gt; --help$ man git-&lt;verb&gt; ä¾‹å¦‚ï¼Œè¦æƒ³èŽ·å¾— config å‘½ä»¤çš„æ‰‹å†Œï¼Œæ‰§è¡Œ $ git help config æ€»ç»“ä»¥å‰åªæ˜¯äº†è§£ Gitå¸¸è§çš„pushã€commitç­‰å‘½ä»¤ï¼Œä»Žæ²¡æœ‰å¯¹ Gitè¿›æ€§è¿‡ç³»ç»Ÿå­¦ä¹ ï¼ŒæŠ“ç´§æ—¶é—´å­¦ä¹ ã€‚ ç›®æ ‡ï¼šä¸¤å‘¨åŽï¼Œä¹Ÿå°±æ˜¯3æœˆ28æ—¥ï¼Œèƒ½ç†Ÿç»ƒä½¿ç”¨ Gitè¿›æ€§å¼€å‘ã€‚ è¿™ä¸€ç¯‡ä¸»è¦è®²äº†äº›èƒŒæ™¯çŸ¥è¯†å§ï¼Œä¸‹ä¸€ç¯‡å°±æ˜¯å®žé™…çš„æ“ä½œäº†ã€‚ ä¸»è¦ä»ŽGitæ–‡æ¡£ä¸Šæˆªå–è‡ªå·±è®¤ä¸ºé‡è¦çš„éƒ¨åˆ†ï¼Œæœ‰æ¡ä»¶å¯ä»¥åŽ»ä»”ç»†é˜…è¯»ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¤§ä½¬ï¼Œæˆ‘ä»£ç å“ªé”™äº†ï¼Ÿ]]></title>
      <url>%2F2018%2F03%2F13%2F%E5%A4%A7%E4%BD%AC%EF%BC%8C%E6%88%91%E4%BB%A3%E7%A0%81%E5%93%AA%E9%94%99%E4%BA%86%EF%BC%9F%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åäº”ç¯‡åŽŸåˆ›æ–‡ç«  åˆ°åº•å“ªé”™äº† (à¹‘â€¢ . â€¢à¹‘) é—®é¢˜æ— å¤„ä¸åœ¨æˆ‘ï¼š â€œå¤§ä½¬ï¼Œå¸®æˆ‘çœ‹çœ‹è¿™ä¸ªé—®é¢˜é”™åœ¨å“ªäº†ï¼Ÿâ€ å¤§ä½¬ï¼š â€œä½ çš„ä»£ç å‘¢ã€ä½ çš„é”™è¯¯æç¤ºå‘¢ï¼Ÿâ€ æˆ‘ï¼š â€œå¥½çš„ï¼Œæˆ‘å‘ç»™ä½ â€ å¤§ä½¬ï¼š â€œã€‚ã€‚ã€‚ å†è§â€ ç•™ä¸‹ä¸€è„¸æ‡µé€¼çš„æˆ‘ å¦‚ä½•è§£å†³é—®é¢˜æœ€ç®€å•çš„æ–¹æ³•æ˜¯æ ¹æ®é”™è¯¯æç¤ºï¼ŒæŸ¥çœ‹å¯¹åº”ä½ç½®çš„ä»£ç ï¼ŒPycharmä¼šæç¤ºå…·ä½“æ˜¯å“ªä¸€è¡Œä»£ç æœ‰é—®é¢˜ï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚ æ‰¾åˆ°é”™è¯¯é¦–å…ˆåº”è‡ªå·±æƒ³åŠžæ³•è§£å†³ï¼Œè‡ªå·±è§£å†³åˆåˆ†ä¸ºå‡ ç§ï¼šæœ‰ç»éªŒçš„å¤§ä½¬çœ‹åˆ°Errorå°±çŸ¥é“æ˜¯å“ªé‡Œæœ‰é—®é¢˜äº†ï¼Œæ²¡ç»éªŒæ€Žä¹ˆåŠžï¼Œé‚£å°±è‡ªå·±åŽ»æœç´¢äº†ã€‚ ä¸‹ä¸ªç»“è®ºï¼Œä½ é‡åˆ°çš„é—®é¢˜ï¼Œå‰äººä¸€å®šé‡åˆ°è¿‡ã€‚ æ‰€ä»¥ä½ åªéœ€è¦æŠŠä½ çš„é”™è¯¯æç¤ºæœç´¢å°±å¥½äº†ã€‚ æ³¨æ„ä¸‹é¢ï¼Œä½ æ‡‚çš„ã€‚ï¼ˆç»™è‡ªå·±ä¸€ä¸ªå¥½ç‚¹çš„çŽ¯å¢ƒï¼‰ Google &gt; ç™¾åº¦ stackoverflow &gt; çŸ¥ä¹Ž github &gt; CSDN Githubä¸Šæœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ trending ï¼Œå¯ä»¥æ˜¾ç¤ºä»Šå¤©æˆ–æœ¬å‘¨æˆ–æœ¬æœˆæœ€ç«çš„é¡¹ç›®ï¼Œä¾‹å¦‚ï¼š techGay/91porn Github ä½œä¸ºå…¨çƒæœ€å¤§çš„åŒæ€§äº¤å‹ç½‘ç«™ï¼Œä¸Šé¢æœ‰å¾ˆå¤šå€¼å¾—æˆ‘ä»¬å¥½å¥½å­¦ä¹ çš„ä¸œè¥¿ã€‚ å¦‚ä½•å‘åˆ«äººæé—®å¦‚æžœä½ çœŸçš„åƒä¸Šé¢å“ªæ ·ï¼Œå‘ä¸€å¼ ç…§ç‰‡ï¼Œä¼°è®¡å¤§ä½¬éƒ½è¦åè¡€äº†ã€‚ åœ¨è¿™é‡ŒæŽ¨èå¤§å®¶ä½¿ç”¨Githubä¸Šçš„ gist ï¼Œå¾ˆé€‚åˆåˆ†äº«ä»£ç ç‰‡æ®µã€‚ Instantly share code, notes, and snippets. ä¾‹å¦‚è¿™æ · Issue in FromRequest #3144 è¿™æ ·çœ‹èµ·æ¥æ˜¯ä¸æ˜¯èˆ’æœå¤šäº† å¦‚ä½•æ‰èƒ½ æ°¸æ— bug1ã€ä½›ç¥–ä¿ä½‘ æ°¸æ— bug12345678910111213141516171819202122232425262728293031// _ooOoo_// o8888888o// 88&quot; . &quot;88// (| -_- |)// O\ = /O// ____/`---&apos;\____// . &apos; \\| |// `.// / \\||| : |||// \// / _||||| -:- |||||- \// | | \\\ - /// | |// | \_| &apos;&apos;\---/&apos;&apos; | |// \ .-\__ `-` ___/-. /// ___`. .&apos; /--.--\ `. . __// .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.// | | : `- \`.;`\ _ /`;.`/ - ` : | |// \ \ `-. \_ __\ /__ _/ .-` / /// ======`-.____`-.___\_____/___.-`____.-&apos;======// `=---=&apos;//// .............................................// ä½›ç¥–é•‡æ¥¼ BUGè¾Ÿæ˜“// ä½›æ›°:// å†™å­—æ¥¼é‡Œå†™å­—é—´ï¼Œå†™å­—é—´é‡Œç¨‹åºå‘˜ï¼›// ç¨‹åºäººå‘˜å†™ç¨‹åºï¼Œåˆæ‹¿ç¨‹åºæ¢é…’é’±ã€‚// é…’é†’åªåœ¨ç½‘ä¸Šåï¼Œé…’é†‰è¿˜æ¥ç½‘ä¸‹çœ ï¼›// é…’é†‰é…’é†’æ—¥å¤æ—¥ï¼Œç½‘ä¸Šç½‘ä¸‹å¹´å¤å¹´ã€‚// ä½†æ„¿è€æ­»ç”µè„‘é—´ï¼Œä¸æ„¿éž èº¬è€æ¿å‰ï¼›// å¥”é©°å®é©¬è´µè€…è¶£ï¼Œå…¬äº¤è‡ªè¡Œç¨‹åºå‘˜ã€‚// åˆ«äººç¬‘æˆ‘å¿’ç–¯ç™«ï¼Œæˆ‘ç¬‘è‡ªå·±å‘½å¤ªè´±ï¼›// ä¸è§æ»¡è¡—æ¼‚äº®å¦¹ï¼Œå“ªä¸ªå½’å¾—ç¨‹åºå‘˜ï¼Ÿ 2ã€ä½›ç³»ç¼–ç¨‹ æ°¸æ— bugNo CodeNo code is the best way to write secure and reliable applications. Write nothing; deploy nowhere. Getting StartedStart by not writing any code. 12 This is just an example application, but imagine it doing anything you want. Adding new features is easy too: 12 The possibilities are endless. Building the ApplicationNow that you have not done anything itâ€™s time to build your application: 12 Yep. Thatâ€™s it. You should see the following output: 12 DeployingWhile you still have not done anything itâ€™s time to deploy your application. By running the following command you can deploy your application absolutely nowhere. 12 Itâ€™s that simple. And when it comes time to scale the application, all you have to do is: 12 I know right? ContributingYou donâ€™t.]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å­¦ç‚¹ç®—æ³•ä¹‹é˜Ÿåˆ—çš„å­¦ä¹ åŠåº”ç”¨]]></title>
      <url>%2F2018%2F03%2F06%2F%E5%AD%A6%E7%82%B9%E7%AE%97%E6%B3%95%E4%B9%8B%E9%98%9F%E5%88%97%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%8F%8A%E5%BA%94%E7%94%A8%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åå››ç¯‡åŽŸåˆ›æ–‡ç«  ä»Žçº¦ç‘Ÿå¤«é—®é¢˜å¼€å§‹è¯´èµ· (à¹‘â€¢ . â€¢à¹‘) çº¦ç‘Ÿå¤«é—®é¢˜çº¦ç‘Ÿå¤«é—®é¢˜ æœ‰ n ä¸ªå›šçŠ¯ç«™æˆä¸€ä¸ªåœ†åœˆï¼Œå‡†å¤‡å¤„å†³ã€‚é¦–å…ˆä»Žä¸€ä¸ªäººå¼€å§‹ï¼Œè¶Šè¿‡k-2ä¸ªäººï¼ˆå› ä¸ºç¬¬ä¸€ä¸ªäººå·²ç»è¢«è¶Šè¿‡ï¼‰ï¼Œå¹¶æ€æŽ‰ç¬¬kä¸ªäººã€‚æŽ¥ç€ï¼Œå†è¶Šè¿‡ k-1ä¸ªäººï¼Œå¹¶æ€æŽ‰ç¬¬kä¸ªäººã€‚è¿™ä¸ªè¿‡ç¨‹æ²¿ç€åœ†åœˆä¸€ç›´è¿›è¡Œï¼Œç›´åˆ°æœ€ç»ˆåªå‰©ä¸‹ä¸€ä¸ªäººç•™ä¸‹ï¼Œè¿™ä¸ªäººå°±å¯ä»¥ç»§ç»­æ´»ç€ã€‚ é—®é¢˜æ˜¯ï¼Œç»™å®šäº†nå’Œkï¼Œä¸€å¼€å§‹è¦ç«™åœ¨ä»€ä¹ˆåœ°æ–¹æ‰èƒ½é¿å…è¢«å¤„å†³ï¼Ÿ è¿™ä¸ªé—®é¢˜æ˜¯ä»¥å¼—æ‹‰ç»´å¥¥Â·çº¦ç‘Ÿå¤«å‘½åçš„ï¼Œå®ƒæ˜¯1ä¸–çºªçš„ä¸€åçŠ¹å¤ªåŽ†å²å­¦å®¶ã€‚ä»–åœ¨è‡ªå·±çš„æ—¥è®°ä¸­å†™é“ï¼Œä»–å’Œä»–çš„40ä¸ªæˆ˜å‹è¢«ç½—é©¬å†›é˜ŸåŒ…å›´åœ¨æ´žä¸­ã€‚ä»–ä»¬è®¨è®ºæ˜¯è‡ªæ€è¿˜æ˜¯è¢«ä¿˜ï¼Œæœ€ç»ˆå†³å®šè‡ªæ€ï¼Œå¹¶ä»¥æŠ½ç­¾çš„æ–¹å¼å†³å®šè°æ€æŽ‰è°ã€‚çº¦ç‘Ÿå¤«æ–¯å’Œå¦å¤–ä¸€ä¸ªäººæ˜¯æœ€åŽä¸¤ä¸ªç•™ä¸‹çš„äººã€‚çº¦ç‘Ÿå¤«æ–¯è¯´æœäº†é‚£ä¸ªäººï¼Œä»–ä»¬å°†å‘ç½—é©¬å†›é˜ŸæŠ•é™ï¼Œä¸å†è‡ªæ€ã€‚çº¦ç‘Ÿå¤«æ–¯æŠŠä»–çš„å­˜æ´»å½’å› äºŽè¿æ°”æˆ–å¤©æ„ï¼Œä»–ä¸çŸ¥é“æ˜¯å“ªä¸€ä¸ªã€‚ é˜Ÿåˆ—æ˜¯ä»€ä¹ˆè¿™é“é¢˜æœ‰å¤šç§è§£æ³•ï¼Œè¿™é‡Œå…ˆä¸è¯´åˆ«çš„ï¼Œè¦å¼•å‡ºä»Šå¤©çš„ä¸»è§’â€”â€”é˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å®šä¹‰å¾ˆå¥½ç†è§£ï¼š é˜Ÿåˆ—æ˜¯é¡¹çš„æœ‰åºç»“åˆï¼Œå…¶ä¸­æ·»åŠ æ–°é¡¹çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿå°¾ï¼Œç§»é™¤é¡¹çš„ä¸€ç«¯ç§°ä¸ºé˜Ÿé¦–ã€‚å½“ä¸€ä¸ªå…ƒç´ ä»Žé˜Ÿå°¾è¿›å…¥é˜Ÿåˆ—æ—¶ï¼Œä¸€ç›´å‘é˜Ÿé¦–ç§»åŠ¨ï¼Œç›´åˆ°å®ƒæˆä¸ºä¸‹ä¸€ä¸ªéœ€è¦ç§»é™¤çš„å…ƒç´ ä¸ºæ­¢ã€‚ é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»åž‹ç”±ä»¥ä¸‹ç»“æž„å’Œæ“ä½œå®šä¹‰ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œé˜Ÿåˆ—è¢«æž„é€ ä¸ºåœ¨é˜Ÿå°¾æ·»åŠ é¡¹çš„æœ‰åºé›†åˆï¼Œå¹¶ä¸”ä»Žé˜Ÿé¦–ç§»é™¤ã€‚é˜Ÿåˆ—ä¿æŒ FIFO æŽ’åºå±žæ€§ã€‚ é˜Ÿåˆ—æ“ä½œå¦‚ä¸‹ã€‚ Queue() åˆ›å»ºä¸€ä¸ªç©ºçš„æ–°é˜Ÿåˆ—ã€‚ å®ƒä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªç©ºé˜Ÿåˆ—ã€‚ enqueue(item) å°†æ–°é¡¹æ·»åŠ åˆ°é˜Ÿå°¾ã€‚ å®ƒéœ€è¦ item ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸è¿”å›žä»»ä½•å†…å®¹ã€‚ dequeue() ä»Žé˜Ÿé¦–ç§»é™¤é¡¹ã€‚å®ƒä¸éœ€è¦å‚æ•°å¹¶è¿”å›ž itemã€‚ é˜Ÿåˆ—è¢«ä¿®æ”¹ã€‚ isEmpty() æŸ¥çœ‹é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚å®ƒä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žå¸ƒå°”å€¼ã€‚ size() è¿”å›žé˜Ÿåˆ—ä¸­çš„é¡¹æ•°ã€‚å®ƒä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ•´æ•°ã€‚ é˜Ÿåˆ—çš„Pythonç®—æ³•å®žçŽ°ä¸ºäº†å®žçŽ°é˜Ÿåˆ—æŠ½è±¡æ•°æ®ç±»åž‹åˆ›å»ºä¸€ä¸ªæ–°ç±» pythonds/basic/queue.py 123456789101112131415class Queue: def __init__(self): self.items = [] def isEmpty(self): return self.items == [] def enqueue(self, item): self.items.insert(0,item) def dequeue(self): return self.items.pop() def size(self): return len(self.items) æƒ³æ˜Žç™½äº†å…¶å®žå°±æ˜¯å¯¹ list çš„ç®€å•æ“ä½œ å¦‚ä½•æ´»åˆ°æœ€åŽé‚£æˆ‘ä»¬å›žåˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œå¦‚æžœæ˜¯ä½ ï¼Œä½ è¦å¦‚ä½•é€‰æ‹©å¹¶æ´»åˆ°æœ€åŽå‘¢ï¼Ÿ æˆ‘ä»¬çš„ç¨‹åºå°†è¾“å…¥åç§°åˆ—è¡¨å’Œä¸€ä¸ªç§°ä¸º num å¸¸é‡ç”¨äºŽæŠ¥æ•°ã€‚å®ƒå°†è¿”å›žä»¥ num ä¸ºå•ä½é‡å¤æŠ¥æ•°åŽå‰©ä½™çš„æœ€åŽä¸€ä¸ªäººçš„å§“åã€‚ å‡è®¾ç¬¬ä¸€ä¸ªäººæ˜¯aã€‚ä»Žä»–å¼€å§‹è®¡æ•°ï¼Œaå°†å…ˆå‡ºåˆ—å†å…¥é˜Ÿåˆ—ï¼ŒæŠŠä»–æ”¾åœ¨é˜Ÿåˆ—çš„æœ€åŽã€‚ç»è¿‡ num æ¬¡çš„å‡ºé˜Ÿå…¥é˜ŸåŽï¼Œå‰é¢çš„äººå°†è¢«æ°¸ä¹…ç§»é™¤é˜Ÿåˆ—ã€‚å¹¶ä¸”å¦ä¸€ä¸ªå‘¨æœŸå¼€å§‹ï¼Œç»§ç»­æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°åªå‰©ä¸‹ä¸€ä¸ªåå­—ï¼ˆé˜Ÿåˆ—çš„å¤§å°ä¸º 1ï¼‰ã€‚ 12345678910111213141516171819from pythonds.basic.queue import Queuedef hotPotato(namelist, num): simqueue = Queue() for name in namelist: simqueue.enqueue(name) while simqueue.size() &gt; 1: for i in range(num): simqueue.enqueue(simqueue.dequeue()) simqueue.dequeue() return simqueue.dequeue()print(hotPotato(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'], 7))# output: f å…¶ä»–è§£æ³•æ¯”è¾ƒç®€å•çš„åšæ³•æ˜¯ç”¨å¾ªçŽ¯å•é“¾è¡¨æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(n*m)ã€‚å¦‚æžœåªæ˜¯æƒ³æ±‚å¾—æœ€åŽå‰©ä¸‹çš„äººï¼Œåˆ™å¯ä»¥ç”¨æ•°å­¦æŽ¨å¯¼çš„æ–¹å¼å¾—å‡ºå…¬å¼ã€‚å…ˆçœ‹çœ‹æ¨¡æ‹Ÿè¿‡ç¨‹çš„è§£æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334# -*- coding: utf-8 -*- class Node(object): def __init__(self, value): self.value = value self.next = Nonedef create_linkList(n): head = Node(1) pre = head for i in range(2, n+1): newNode = Node(i) pre.next= newNode pre = newNode pre.next = head return headn = 5 #æ€»çš„ä¸ªæ•°m = 2 #æ•°çš„æ•°ç›®if m == 1: #å¦‚æžœæ˜¯1çš„è¯ï¼Œç‰¹æ®Šå¤„ç†ï¼Œç›´æŽ¥è¾“å‡º print(n) else: head = create_linkList(n) pre = None cur = head while cur.next != cur: #ç»ˆæ­¢æ¡ä»¶æ˜¯èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æœ¬èº« for i in range(m-1): pre = cur cur = cur.next print(cur.value) pre.next = cur.next cur.next = None cur = pre.next print(cur.value) ä½œä¸šå‡è®¾å®žéªŒå®¤é‡Œæœ‰ä¸€å°æ‰“å°æœºä¾›å­¦ç”Ÿå…±æ€§ã€‚å½“å­¦ç”Ÿå‘å…±äº«æ‰“å°æœºå‘é€æ‰“å°ä»»åŠ¡æ—¶ï¼Œä»»åŠ¡è¢«æ”¾ç½®åœ¨é˜Ÿåˆ—ä¸­ä»¥ä¾¿ä»¥å…ˆæ¥å…ˆæœåŠ¡çš„æ–¹å¼è¢«å¤„ç†ã€‚å¦‚ä½•æ‰èƒ½é€šè¿‡pythonç¨‹åºæ¨¡æ‹Ÿçš„æ–¹å¼å¾—åˆ°æ¯æ¬¡æäº¤ä»»åŠ¡çš„å¹³å‡ç­‰å¾…æ—¶é—´å‘¢ï¼Ÿï¼ˆå¹³å‡ç­‰å¾…æ—¶é—´ä¸åŒ…æ‹¬æ‰“å°æœ¬èº«çš„æ—¶é—´ï¼Œä»…æŒ‡åœ¨é˜Ÿåˆ—ä¸­æŽ’é˜Ÿçš„æ—¶é—´ã€‚ï¼‰æˆ‘ä»¬å‡å®šï¼š å­¦ç”Ÿä»¬æ¯æ¬¡æ‰“å°çš„é¡µæ•°åœ¨1åˆ°20é¡µä¹‹é—´ã€‚ æ‰“å°æœºå¹³å‡æ¯å°æ—¶ä¼šæ”¶åˆ°20ä¸ªæ‰“å°è¯·æ±‚ï¼Œå³å¹³å‡æ¯180ç§’1ä¸ªè¯·æ±‚ã€‚ æ¯ç§’æ–°å¢žä»»åŠ¡çš„å¯èƒ½æ€§ç›¸ç­‰ï¼Œå³ä»»åŠ¡çš„äº§ç”Ÿä¸ºç‹¬ç«‹åŒåˆ†å¸ƒ æ‰“å°æœºçš„æ‰“å°é€Ÿåº¦æ’å®šã€‚ æŒ–å‘ï¼Œè¦ä¸€èµ·æ¥å¡«å—ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyæºç ï¼ˆ2ï¼‰â€”â€”çˆ¬è™«å¼€å§‹çš„åœ°æ–¹]]></title>
      <url>%2F2018%2F02%2F26%2FScrapy%E6%BA%90%E7%A0%81%EF%BC%882%EF%BC%89%E2%80%94%E2%80%94%E7%88%AC%E8%99%AB%E5%BC%80%E5%A7%8B%E7%9A%84%E5%9C%B0%E6%96%B9%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  å¼€å§‹å­¦ä¹ Scrapyæºç  (à¹‘â€¢ . â€¢à¹‘) Scrapyè¿è¡Œå‘½ä»¤ä¸€èˆ¬æ¥è¯´ï¼Œè¿è¡ŒScrapyé¡¹ç›®çš„å†™æ³•æœ‰ï¼Œï¼ˆè¿™é‡Œä¸è€ƒè™‘ä»Žè„šæœ¬è¿è¡ŒScrapyï¼‰ 1234567Usage examples:$ scrapy crawl myspider[ ... myspider starts crawling ... ]$ scrapy runspider myspider.py[ ... spider starts crawling ... ] ä½†æ˜¯æ›´å¥½çš„å†™æ³•æ˜¯ï¼Œæ–°å»ºä¸€ä¸ªPythonæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼Œï¼ˆä¾¿äºŽè°ƒè¯•ï¼‰123from scrapy import cmdlinecmdline.execute("scrapy crawl myspider".split()) å¾ˆå®¹æ˜“å°±å‘çŽ°ï¼ŒScrapyè¿è¡Œæ–‡ä»¶æ˜¯cmdline.pyæ–‡ä»¶é‡Œé¢çš„execute()å‡½æ•°ï¼Œä¸‹é¢å­¦ä¹ ä¸‹è¿™ä¸ªå‡½æ•°åœ¨åšä»€ä¹ˆã€‚ åˆ†æžæºç 12345678910def execute(argv=None, settings=None): if argv is None: argv = sys.argv # --- backwards compatibility for scrapy.conf.settings singleton --- if settings is None and 'scrapy.conf' in sys.modules: from scrapy import conf if hasattr(conf, 'settings'): settings = conf.settings # ------------------------------------------------------------------ å¯»æ‰¾ scrapy.confé…ç½®æ–‡ä»¶ï¼Œargvç›´æŽ¥å–sys.argv 123456789101112131415161718if settings is None: settings = get_project_settings() # set EDITOR from environment if available try: editor = os.environ['EDITOR'] except KeyError: pass else: settings['EDITOR'] = editorcheck_deprecated_settings(settings)# --- backwards compatibility for scrapy.conf.settings singleton ---import warningsfrom scrapy.exceptions import ScrapyDeprecationWarningwith warnings.catch_warnings(): warnings.simplefilter("ignore", ScrapyDeprecationWarning) from scrapy import conf conf.settings = settings# ------------------------------------------------------------------ set EDITOR from environment if available è¯»å–settingsè®¾ç½®æ–‡ä»¶ï¼Œå¯¼å…¥é¡¹ç›®ï¼Œè°ƒç”¨get_project_settings()å‡½æ•°ï¼Œæ­¤å¤„ä¸ºutilsæ–‡ä»¶å¤¹ä¸‹çš„project.pyæ–‡ä»¶ï¼š 1234def get_project_settings(): if ENVVAR not in os.environ: project = os.environ.get('SCRAPY_PROJECT', 'default') init_env(project) project.py init_env() å‡½æ•°å¦‚ä¸‹ï¼š 12345678910111213def init_env(project='default', set_syspath=True): """Initialize environment to use command-line tool from inside a project dir. This sets the Scrapy settings module and modifies the Python path to be able to locate the project module. """ cfg = get_config() if cfg.has_option('settings', project): os.environ['SCRAPY_SETTINGS_MODULE'] = cfg.get('settings', project) closest = closest_scrapy_cfg() if closest: projdir = os.path.dirname(closest) if set_syspath and projdir not in sys.path: sys.path.append(projdir) conf.py å¦‚æ³¨é‡Šæ‰€è¯´ï¼Œåˆå§‹åŒ–çŽ¯å¢ƒ,å¾ªçŽ¯é€’å½’æ‰¾åˆ°ç”¨æˆ·é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶settings.py,å¹¶ä¸”å°†å…¶è®¾ç½®åˆ°çŽ¯å¢ƒå˜é‡Scrapy settings moduleä¸­ã€‚ç„¶åŽä¿®æ”¹Pythonè·¯å¾„ï¼Œç¡®ä¿èƒ½æ‰¾åˆ°é¡¹ç›®æ¨¡å—ã€‚ 123456789101112131415161718settings = Settings()settings_module_path = os.environ.get(ENVVAR)if settings_module_path: settings.setmodule(settings_module_path, priority='project')# XXX: remove this hackpickled_settings = os.environ.get("SCRAPY_PICKLED_SETTINGS_TO_OVERRIDE")if pickled_settings: settings.setdict(pickle.loads(pickled_settings), priority='project')# XXX: deprecate and remove this functionalityenv_overrides = &#123;k[7:]: v for k, v in os.environ.items() if k.startswith('SCRAPY_')&#125;if env_overrides: settings.setdict(env_overrides, priority='project')return settings project.py è‡³æ­¤ï¼Œget_project_settings()è¯¥å‡½æ•°ç»“æŸï¼Œå¦‚å‡½æ•°åå­—ä¸€æ ·ï¼Œæœ€åŽè¿”å›žé¡¹ç›®é…ç½®ï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼ŒæŽ¥ç€å¾€ä¸‹çœ‹ 1234567891011inproject = inside_project()cmds = _get_commands_dict(settings, inproject)cmdname = _pop_command_name(argv)parser = optparse.OptionParser(formatter=optparse.TitledHelpFormatter(), \ conflict_handler='resolve')if not cmdname: _print_commands(settings, inproject) sys.exit(0)elif cmdname not in cmds: _print_unknown_command(settings, cmdname, inproject) sys.exit(2) å¯¼å…¥ç›¸åº”çš„moduleçˆ¬è™«æ¨¡å—ï¼ˆinside_projectï¼‰ æ‰§è¡ŒçŽ¯å¢ƒæ˜¯å¦åœ¨é¡¹ç›®ä¸­ï¼Œä¸»è¦æ£€æŸ¥scrapy.cfgé…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¯»å–commandsæ–‡ä»¶å¤¹ï¼ŒæŠŠæ‰€æœ‰çš„å‘½ä»¤ç±»è½¬æ¢ä¸º{cmd_name: cmd_instance}çš„å­—å…¸ 12345678cmd = cmds[cmdname]parser.usage = "scrapy %s %s" % (cmdname, cmd.syntax())parser.description = cmd.long_desc()settings.setdict(cmd.default_settings, priority='command')cmd.settings = settingscmd.add_options(parser)opts, args = parser.parse_args(args=argv[1:])_run_print_help(parser, cmd.process_options, args, opts) æ ¹æ®å‘½ä»¤åç§°æ‰¾åˆ°å¯¹åº”çš„å‘½ä»¤å®žä¾‹ï¼Œè®¾ç½®é¡¹ç›®é…ç½®å’Œçº§åˆ«ä¸ºcommandï¼Œæ·»åŠ è§£æžè§„åˆ™ï¼Œè§£æžå‘½ä»¤å‚æ•°ï¼Œå¹¶äº¤ç”±Scrapyå‘½ä»¤å®žä¾‹å¤„ç†ã€‚ æœ€åŽï¼Œçœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ã€‚ 123cmd.crawler_process = CrawlerProcess(settings)_run_print_help(parser, _run_command, cmd, args, opts)sys.exit(cmd.exitcode) åˆå§‹åŒ–CrawlerProcesså®žä¾‹ï¼Œå°†å¯¹åº”çš„å‘½ä»¤æ‰§è¡Œï¼Œè¿™é‡Œæ˜¯crawl 12345def _run_command(cmd, args, opts): if opts.profile: _run_command_profiled(cmd, args, opts) else: cmd.run(args, opts) çœ‹åˆ°è¿™ï¼Œæƒ³èµ·äº†æ–‡æ¡£ä¸­çš„ä»‹ç» Run Scrapy from a script 123456789101112131415# Hereâ€™s an example showing how to run a single spider with it.import scrapyfrom scrapy.crawler import CrawlerProcessclass MySpider(scrapy.Spider): # Your spider definition ...process = CrawlerProcess(&#123; 'USER_AGENT': 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)'&#125;)process.crawl(MySpider)process.start() # the script will block here until the crawling is finished æ‰€ä»¥Scrapyçˆ¬è™«è¿è¡Œéƒ½æœ‰ç”¨ä½¿ç”¨åˆ°CrawlerProcessï¼Œæƒ³è¦æ·±å…¥äº†è§£å¯ä»¥åŽ»çœ‹çœ‹æºç  scrapy/scrapy/crawler.py 123456789101112131415161718192021"""A class to run multiple scrapy crawlers in a process simultaneously.This class extends :class:`~scrapy.crawler.CrawlerRunner` by adding supportfor starting a Twisted `reactor`_ and handling shutdown signals, like thekeyboard interrupt command Ctrl-C. It also configures top-level logging.This utility should be a better fit than:class:`~scrapy.crawler.CrawlerRunner` if you aren't running anotherTwisted `reactor`_ within your application.The CrawlerProcess object must be instantiated with a:class:`~scrapy.settings.Settings` object.:param install_root_handler: whether to install root logging handler (default: True)This class shouldn't be needed (since Scrapy is responsible of using itaccordingly) unless writing scripts that manually handle the crawlingprocess. See :ref:`run-from-script` for an example.""" æœ€åŽï¼Œé™„ä¸ŠScrapyçš„è·¯å¾„å›¾ æ€»ç»“ç®€å•æ¥è¯´ï¼Œæœ‰è¿™ä¹ˆå‡ æ­¥ï¼š è¯»å–é…ç½®æ–‡ä»¶ï¼Œåº”ç”¨åˆ°çˆ¬è™«ä¸­ æŠŠæ‰€æœ‰çš„å‘½ä»¤ç±»è½¬æ¢åç§°ä¸Žå®žä¾‹å­—å…¸ åˆå§‹åŒ–CrawlerProcesså®žä¾‹ï¼Œè¿è¡Œçˆ¬è™« (çœ‹çš„å¤´ç–¼ï¼Œå¥½å¤šå‡½æ•°åè®°ä¸ä½) å›žé¡¾ï¼š Scrapyæºç ï¼ˆ1ï¼‰â€”â€”çˆ¬è™«æµç¨‹æ¦‚è§ˆ Scrapyæºç ï¼ˆ2ï¼‰â€”â€”çˆ¬è™«å¼€å§‹çš„åœ°æ–¹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyæºç ï¼ˆ1ï¼‰â€”â€”çˆ¬è™«æµç¨‹æ¦‚è§ˆ]]></title>
      <url>%2F2018%2F02%2F24%2FScrapy%E6%BA%90%E7%A0%81%EF%BC%881%EF%BC%89%E2%80%94%E2%80%94%E7%88%AC%E8%99%AB%E6%B5%81%E7%A8%8B%E6%A6%82%E8%A7%88%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åäºŒç¯‡åŽŸåˆ›æ–‡ç«  å¼€å§‹å­¦ä¹ Scrapyæºç  (à¹‘â€¢ . â€¢à¹‘) å‰è¨€ä½¿ç”¨ Scrapy å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œè§‰å¾—è‡ªå·±æœ‰å¿…è¦å¯¹æºç å¥½å¥½çš„å­¦ä¹ ä¸‹äº†ï¼Œæ‰€ä»¥å†™ä¸‹è®°å½•ï¼Œå¸Œæœ›èƒ½åŠ æ·±è‡ªå·±çš„ç†è§£ã€‚ Scrapy | A Fast and Powerful Scraping and Web Crawling Framework æŽ¥ä¸‹æ¥è¯´åˆ°çš„æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼š Scrapy 1.5ï¼Œæš‚ä¸”æŠŠ Spider ç§°ä¸º èœ˜è››ï¼Œè€Œä¸æ˜¯çˆ¬è™«ã€‚ ä»‹ç»Scrapyæ˜¯ä¸€ä¸ªå¼€æºçˆ¬è™«æ¡†æž¶ï¼Œç”¨äºŽæŠ“å–ç½‘ç«™å¹¶æå–æœ‰ç”¨çš„ç»“æž„åŒ–æ•°æ®ï¼Œå¦‚æ•°æ®æŒ–æŽ˜ï¼Œä¿¡æ¯å¤„ç†æˆ–åŽ†å²æ¡£æ¡ˆã€‚ å°½ç®¡Scrapyæœ€åˆæ˜¯ä¸ºç½‘é¡µæŠ“å–è®¾è®¡çš„ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨äºŽä½¿ç”¨APIï¼ˆå¦‚Amazon Associates Web Servicesï¼‰æˆ–ä½œä¸ºé€šç”¨ç½‘ç»œæŠ“å–å·¥å…·æå–æ•°æ®ã€‚ ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å†™è¿‡ 12345678910111213141516171819import scrapyclass QuotesSpider(scrapy.Spider): name = "quotes" start_urls = [ 'http://quotes.toscrape.com/tag/humor/', ] def parse(self, response): for quote in response.css('div.quote'): yield &#123; 'text': quote.css('span.text::text').extract_first(), 'author': quote.xpath('span/small/text()').extract_first(), &#125; next_page = response.css('li.next a::attr("href")').extract_first() if next_page is not None: yield response.follow(next_page, self.parse) ä¸€èˆ¬æ¥è¯´ï¼Œåˆ›å»ºä¸€ä¸ªScrapyé¡¹ç›®éœ€è¦å¦‚ä¸‹æµç¨‹ï¼š ä½¿ç”¨scrapy startproject spideråˆ›å»ºçˆ¬è™«æ¨¡æ¿ çˆ¬è™«ç±»ç»§æ‰¿scrapy.Spiderï¼Œé‡å†™parseæ–¹æ³•å’Œé€»è¾‘ parseæ–¹æ³•ä¸­yieldæˆ–returnå­—å…¸ã€Requestã€Item è‡ªå®šä¹‰Itemã€Middlewaresã€Pipelinesç­‰ ä½¿ç”¨scrapy crawl &lt;spider_name&gt;æˆ–æ–°å»ºæ–‡ä»¶cmdline.execute(&quot;scrapy crawl spider_name&quot;.split())è¿è¡Œï¼ˆä¾¿äºŽè°ƒè¯•ï¼‰ å…¶å®ƒ æž¶æž„æ¦‚è¿° è¿™æ˜¯ä¸€å¼ éžå¸¸ç»å…¸çš„å›¾ï¼ŒåŸºæœ¬ä¸Šè¯´åˆ°Scrapyéƒ½ä¼šç”¨åˆ°å®ƒï¼Œæ¥æºäºŽArchitecture overview æ ¸å¿ƒç»„ä»¶ï¼ˆComponentsï¼‰ Scrapy Engineï¼šå¼•æ“Žï¼Œè´Ÿè´£æŽ§åˆ¶ç³»ç»Ÿæ‰€æœ‰ç»„ä»¶ä¹‹é—´çš„æ•°æ®æµï¼Œå¹¶åœ¨å‘ç”ŸæŸäº›æ“ä½œæ—¶è§¦å‘äº‹ä»¶ï¼› Schedulerï¼šè°ƒåº¦å™¨ï¼ŒæŽ¥æ”¶æ¥è‡ªå¼•æ“Žçš„è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬æŽ’å…¥é˜Ÿåˆ—ï¼Œä»¥ä¾¿åœ¨å¼•æ“Žè¯·æ±‚å®ƒä»¬æ—¶å°†å®ƒä»¬æä¾›ç»™å®ƒä»¬ï¼ˆä¹Ÿæä¾›ç»™å¼•æ“Žï¼‰ï¼› Downloaderï¼šä¸‹è½½å™¨ï¼Œè´Ÿè´£ä»Žç½‘ç»œä¸ŠèŽ·å–ç½‘é¡µå¹¶å°†å®ƒä»¬è¿”å›žåˆ°å¼•æ“Žï¼Œç„¶åŽå¼•æ“Žå°†å®ƒä»¬è¿”å›žç»™èœ˜è››/spidersï¼› Spidersï¼šèœ˜è››ï¼Œæ˜¯ç”¨æˆ·ç¼–å†™çš„è‡ªå®šä¹‰ç±»ï¼Œç”¨äºŽè§£æžå“åº”å¹¶ä»Žä¸­æå–é¡¹ç›®ï¼ˆä¹Ÿç§°ä¸ºæŠ“å–çš„é¡¹ç›®ï¼‰æˆ–è¿½åŠ å…¶ä»–è¯·æ±‚ï¼› Item Pipelineï¼šç®¡é“ï¼Œè´Ÿè´£è¾“å‡ºç»“æž„åŒ–æ•°æ®ï¼Œå¯è‡ªå®šä¹‰è¾“å‡ºä½ç½®ï¼Œå…¸åž‹çš„ä»»åŠ¡åŒ…æ‹¬æ¸…ç†ï¼ŒéªŒè¯å’ŒæŒä¹…æ€§ï¼› Downloader middlewaresï¼šä¸‹è½½ä¸­é—´ä»¶ï¼Œä½äºŽå¼•æ“Žå’Œä¸‹è½½å™¨ä¹‹é—´çš„ç‰¹å®šé’©å­/hooksï¼Œå½“å®ƒä»¬ä»Žå¼•æ“Žä¼ é€’åˆ°ä¸‹è½½å™¨æ—¶å¤„ç†è¯·æ±‚ï¼Œä»¥åŠä»Žä¸‹è½½å™¨ä¼ é€’åˆ°å¼•æ“Žçš„å“åº”ï¼Œå¸¸ç”¨äºŽå¦‚ä¸‹æƒ…å†µï¼š åœ¨å°†è¯·æ±‚å‘é€åˆ°ä¸‹è½½å™¨ä¹‹å‰å¤„ç†è¯·æ±‚ï¼ˆå³åœ¨Scrapyå°†è¯·æ±‚å‘é€åˆ°ç½‘ç«™ä¹‹å‰ï¼‰; åœ¨å°†å…¶ä¼ é€’ç»™èœ˜è››ä¹‹å‰æ”¹å˜æŽ¥æ”¶åˆ°çš„å“åº”; å‘é€æ–°çš„è¯·æ±‚ï¼Œè€Œä¸æ˜¯å°†æŽ¥æ”¶åˆ°çš„å“åº”ä¼ é€’ç»™èœ˜è››; å‘èœ˜è››ä¼ é€’å“åº”è€Œä¸éœ€è¦èŽ·å–ç½‘é¡µ; é»˜é»˜åœ°æ”¾ä¸‹ä¸€äº›è¯·æ±‚ã€‚ Spider middlewaresï¼šSpiderä¸­é—´ä»¶ï¼Œç‰¹å®šçš„é’©å­ï¼Œä½äºŽå¼•æ“Žå’Œèœ˜è››ä¹‹é—´ï¼Œèƒ½å¤Ÿå¤„ç†èœ˜è››è¾“å…¥ï¼ˆå“åº”ï¼‰å’Œè¾“å‡ºï¼ˆé¡¹ç›®å’Œè¯·æ±‚ï¼‰ï¼Œå¸¸ç”¨äºŽå¦‚ä¸‹æƒ…å†µï¼š spiderå›žè°ƒçš„åŽå¤„ç†è¾“å‡º æ›´æ”¹/æ·»åŠ /åˆ é™¤è¯·æ±‚æˆ–items; åŽå¤„ç†start_requests; å¤„ç†èœ˜è››å¼‚å¸¸; æ ¹æ®å“åº”å†…å®¹ä¸ºä¸€äº›è¯·æ±‚è°ƒç”¨errbackè€Œä¸æ˜¯callbackã€‚ Event-driven networkingï¼šäº‹ä»¶é©±åŠ¨çš„ç½‘ç»œï¼ŒScrapyæ˜¯ç”¨Twistedç¼–å†™çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæµè¡Œçš„äº‹ä»¶é©±åŠ¨çš„Pythonç½‘ç»œæ¡†æž¶ã€‚ å› æ­¤ï¼Œå®ƒä½¿ç”¨éžé˜»å¡žï¼ˆåˆç§°å¼‚æ­¥ï¼‰ä»£ç æ¥å®žçŽ°å¹¶å‘ã€‚ Twisted is an event-driven networking engine written in Python and licensed under the open source â€‹MIT license. æ•°æ®æµï¼ˆData flowï¼‰Scrapyä¸­çš„æ•°æ®æµç”±æ‰§è¡Œå¼•æ“ŽæŽ§åˆ¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¼•æ“ŽèŽ·å–æœ€åˆçš„è¯·æ±‚ä»Žèœ˜è››æŠ“å–ï¼ˆstart_urlsï¼‰ã€‚ å¼•æ“Žåœ¨è°ƒåº¦ç¨‹åºä¸­è°ƒåº¦è¯·æ±‚ï¼Œå¹¶è¦æ±‚ä¸‹ä¸€ä¸ªè¯·æ±‚è¿›è¡Œé‡‡é›†ã€‚ è°ƒåº¦å™¨å°†ä¸‹ä¸€ä¸ªè¯·æ±‚è¿”å›žç»™å¼•æ“Žã€‚ å¼•æ“Žå°†è¯·æ±‚å‘é€åˆ°ä¸‹è½½å™¨ï¼Œé€šè¿‡ä¸‹è½½å™¨ä¸­é—´ä»¶ã€‚ ä¸€æ—¦é¡µé¢å®Œæˆä¸‹è½½ï¼ŒDownloaderä¼šç”Ÿæˆä¸€ä¸ªå“åº”ï¼ˆåŒ…å«è¯¥é¡µé¢ï¼‰å¹¶å°†å…¶å‘é€åˆ°å¼•æ“Žï¼Œå¹¶é€šè¿‡Downloader Middlewaresã€‚ å¼•æ“Žä»ŽDownloaderæ”¶åˆ°å“åº”å¹¶å°†å…¶å‘é€ç»™Spiderè¿›è¡Œå¤„ç†ï¼Œå¹¶é€šè¿‡Spider Middlewareä¼ é€’ã€‚ Spiderå¤„ç†å“åº”ï¼Œå¹¶é€šè¿‡Spiderä¸­é—´ä»¶å°†æŠ“å–çš„é¡¹ç›®å’Œæ–°çš„è¯·æ±‚ï¼ˆåŽç»­ï¼‰è¿”å›žç»™å¼•æ“Žã€‚ å¼•æ“Žå°†å¤„ç†åŽçš„é¡¹ç›®å‘é€åˆ°é¡¹ç›®ç®¡é“ï¼Œç„¶åŽå°†å¤„ç†åŽçš„è¯·æ±‚å‘é€åˆ°è°ƒåº¦ç¨‹åºï¼Œå¹¶è¦æ±‚å¯èƒ½çš„ä¸‹ä¸€ä¸ªè¯·æ±‚è¿›è¡Œé‡‡é›†ã€‚ è¯¥è¿‡ç¨‹é‡å¤ï¼ˆä»Žç¬¬1æ­¥å¼€å§‹ï¼‰ï¼Œç›´åˆ°è°ƒåº¦å™¨æ²¡æœ‰æ›´å¤šè¯·æ±‚ã€‚ æ‰¾åˆ°ä¸€å¼ å›¾ï¼Œä¾¿äºŽç†è§£ï¼š ç¬¬ä¸€æœŸå·®ä¸å¤šå°±åˆ°è¿™äº†ï¼Œæ²¡æœ‰è¯´å¾ˆå¤šä»£ç ï¼Œä¸»è¦æ˜¯å®è§‚ä¸Šæ¥è§‚å¯Ÿ Scrapy çš„æž¶æž„ï¼Œæ˜¯å¦‚ä½•è¿è¡Œã€‚ä¹‹åŽä¼šæ›´å¤šçš„æŸ¥çœ‹Scrapyçš„æºä»£ç ï¼Œå°±è¿‘æ˜¯å¦‚ä½•é‡‡é›†æ•°æ®çš„ã€‚ ï¼ˆå†…å¿ƒæœ‰ç‚¹å°ææ…Œï¼Œä¸çŸ¥é“ä¼šå†™æˆä»€ä¹ˆæ ·å­ã€‚ï¼‰ è¡¥å……å…³äºŽå¦‚ä½•é˜…è¯»é¡¹ç›®æºä»£ç ï¼Œæ‰¾åˆ°ä¸€ç¯‡ä¸é”™çš„æ–‡ç« ï¼Œå…±äº«ï¼šå¦‚ä½•é˜…è¯»å¼€æºé¡¹ç›® ä¸»è¦æ˜¯è¿™å‡ éƒ¨åˆ†ï¼š çœ‹ï¼šé™æ€å¯¹ä»£ç è¿›è¡Œåˆ†æžï¼Œçœ‹ç›¸å…³èµ„æ–™ï¼Œä»£ç é€»è¾‘ã€‚ è·‘ï¼šå°†é¡¹ç›®åœ¨IDEé‡Œé¢è·‘èµ·æ¥ï¼Œé€šè¿‡IDEè°ƒè¯•å‚æ•°ï¼ŒåŠ Logç­‰ã€‚ æŸ¥ï¼šé˜…è¯»è¿‡ç¨‹ä¸­è‚¯å®šä¼šé‡åˆ°ä¸æ‡‚çš„ï¼Œè¿™æ—¶å€™éœ€è¦é€šè¿‡æœç´¢å¼•æ“Žæ¥è§£å†³ä½ çš„ç–‘æƒ‘ã€‚ å›žé¡¾ï¼š Scrapyæºç ï¼ˆ1ï¼‰â€”â€”çˆ¬è™«æµç¨‹æ¦‚è§ˆ Scrapyæºç ï¼ˆ2ï¼‰â€”â€”çˆ¬è™«å¼€å§‹çš„åœ°æ–¹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[PEP8è§„åˆ™åŠPycharmåº”ç”¨]]></title>
      <url>%2F2018%2F02%2F08%2FPEP8%E8%A7%84%E5%88%99%E5%8F%8APycharm%E5%BA%94%E7%94%A8%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  å­¦ä¹ ä¸‹ Pythonå¢žå¼ºå»ºè®®ä¹¦ (à¹‘â€¢ . â€¢à¹‘) PEP8 PEPæ˜¯ Python Enhancement Proposal çš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ Pythonå¢žå¼ºå»ºè®®ä¹¦ PEP8 æ˜¯ä»€ä¹ˆå‘¢ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ç§ç¼–ç è§„èŒƒï¼Œæ˜¯ä¸ºäº†è®©ä»£ç â€œæ›´å¥½çœ‹â€ï¼Œæ›´å®¹æ˜“è¢«é˜…è¯»ã€‚ å…·ä½“æœ‰è¿™äº›è§„èŒƒï¼Œå‚è€ƒ PEP 8 â€“ Style Guide for Python Code For example 1234567891011121314151617181920Yes: import os import sysNo: import sys, osYes:i = i + 1submitted += 1x = x*2 - 1hypot2 = x*x + y*yc = (a+b) * (a-b)No:i=i+1submitted +=1x = x * 2 - 1hypot2 = x * x + y * yc = (a + b) * (a - b) å¯¹äºŽåˆå­¦è€…ï¼ˆä¾‹å¦‚æˆ‘ï¼‰æ¥è¯´ï¼Œè¿™äº›æ ‡å‡†å¤ªå¤šï¼Œåœ¨å®žé™…codingä¸­å¯èƒ½å¾ˆéš¾è®°ä½æ‰€æœ‰çš„ã€‚ä¹‹å‰æ‹›è˜çˆ¬è™«å·¥ç¨‹å¸ˆï¼Œä¼šPEP8ä¹Ÿä¼šåŠ åˆ†ï¼Œæ‰€ä»¥å­¦ä¹ ä¸‹PEP8è¿˜æ˜¯æœ‰å¸®åŠ©çš„ã€‚ Pycharm è®¾ç½®PyCharm é…ç½® PEP 8 ä»£ç æç¤º ç›´æŽ¥åœ¨å³ä¸‹è§’è°ƒæ•´ Highlighting Level ä¸º Inspections å°±èƒ½è‡ªåŠ¨ PEP 8æç¤º (ä¸€èˆ¬é»˜è®¤å°±æ˜¯è¿™ä¸ª) For example é¼ æ ‡ç§»åˆ°ä¸Šæ–¹ä¼šæç¤ºï¼š PEP 8: expected 2 blank lines, found 1ï¼Œæˆ‘ä»¬å†å¢žåŠ ä¸€ä¸ªç©ºæ ¼å°±å¥½äº†ï¼Œä½ çš„ä»£ç ä¸­æœ‰ä»»ä½•ä¸ç¬¦åˆ PEP8 è§„èŒƒçš„åœ°æ–¹éƒ½ä¼šæœ‰â€œ~â€æç¤º è¿™æ˜¯ä¸€ä¸ªå›°æ‰°äº†æˆ‘å¾ˆä¹…çš„é—®é¢˜ï¼Œæˆ‘ä¸€ç›´ä¸çŸ¥é“æ˜¯å“ªé‡Œå‡ºäº†é”™ï¼Œçœ‹è‹±æ–‡ä¹Ÿä¸æ‡‚ï¼Œæœ€åŽåŽ»Googleæ‰çŸ¥é“ï¼Œåˆ›å»ºå­—å…¸çš„å†™æ³•ä¸è§„èŒƒï¼Œåº”è¯¥è¿™æ ·å†™ï¼š item = dict() å…¶ä»–å·¥å…·é™¤äº†Pycharmï¼Œè¿˜æœ‰å…¶ä»–å·¥å…·å¯ä»¥æç¤º Google å¼€æºçš„ Python æ–‡ä»¶æ ¼å¼åŒ–å·¥å…·ï¼šgithub.com/google/yapf pyflakes, pylint ç­‰å·¥å…·åŠå„ç§ç¼–è¾‘å™¨çš„æ’ä»¶ æ­£æ–‡å¥½å§ï¼Œè¿™é‡Œæ‰æ˜¯æ­£æ–‡ï¼Œæ­£ç¡®çš„è§„èŒƒå¦‚ä¸‹ï¼š ç¼©è¿› ä¸è¦ä½¿ç”¨ tab ç¼©è¿› ä½¿ç”¨ä»»ä½•ç¼–è¾‘å™¨å†™ Pythonï¼Œè¯·æŠŠä¸€ä¸ª tab å±•å¼€ä¸º 4 ä¸ªç©ºæ ¼ ç»å¯¹ä¸è¦æ··ç”¨ tab å’Œç©ºæ ¼ï¼Œå¦åˆ™å®¹æ˜“å‡ºçŽ° IndentationError ç©ºæ ¼ åœ¨ list, dict, tuple, set, å‚æ•°åˆ—è¡¨çš„ , åŽé¢åŠ ä¸€ä¸ªç©ºæ ¼ åœ¨ dict çš„ : åŽé¢åŠ ä¸€ä¸ªç©ºæ ¼ åœ¨æ³¨é‡Šç¬¦å· # åŽé¢åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä½†æ˜¯ #!/usr/bin/python çš„ # åŽä¸èƒ½æœ‰ç©ºæ ¼ æ“ä½œç¬¦ä¸¤ç«¯åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œå¦‚ +, -, *, /, |, &amp;, = æŽ¥ä¸Šä¸€æ¡ï¼Œåœ¨å‚æ•°åˆ—è¡¨é‡Œçš„ = ä¸¤ç«¯ä¸éœ€è¦ç©ºæ ¼ æ‹¬å·ï¼ˆ(), {}, []ï¼‰å†…çš„ä¸¤ç«¯ä¸éœ€è¦ç©ºæ ¼ ç©ºè¡Œ function å’Œ class é¡¶ä¸Šä¸¤ä¸ªç©ºè¡Œ class çš„ method ä¹‹é—´ä¸€ä¸ªç©ºè¡Œ å‡½æ•°å†…é€»è¾‘æ— å…³çš„æ®µè½ä¹‹é—´ç©ºä¸€è¡Œï¼Œä¸è¦è¿‡åº¦ä½¿ç”¨ç©ºè¡Œ ä¸è¦æŠŠå¤šä¸ªè¯­å¥å†™åœ¨ä¸€è¡Œï¼Œç„¶åŽç”¨ ; éš”å¼€ if/for/while è¯­å¥ä¸­ï¼Œå³ä½¿æ‰§è¡Œè¯­å¥åªæœ‰ä¸€å¥ï¼Œä¹Ÿè¦å¦èµ·ä¸€è¡Œ æ¢è¡Œ æ¯ä¸€è¡Œä»£ç æŽ§åˆ¶åœ¨ 80 å­—ç¬¦ä»¥å†… ä½¿ç”¨ \ æˆ– () æŽ§åˆ¶æ¢è¡Œï¼Œä¸¾ä¾‹ï¼š12345678def foo(first, second, third, fourth, fifth, sixth, and_some_other_very_long_param): user = User.objects.filter_by(first=first, second=second, third=third) \ .skip(100).limit(100) \ .all()text = ('Long strings can be made up ' 'of several shorter strings.') å‘½å ä½¿ç”¨æœ‰æ„ä¹‰çš„ï¼Œè‹±æ–‡å•è¯æˆ–è¯ç»„ï¼Œç»å¯¹ä¸è¦ä½¿ç”¨æ±‰è¯­æ‹¼éŸ³ package/module åä¸­ä¸è¦å‡ºçŽ° - å„ç§ç±»åž‹çš„å‘½åè§„èŒƒï¼š import æ‰€æœ‰ import å°½é‡æ”¾åœ¨æ–‡ä»¶å¼€å¤´ï¼Œåœ¨ docstring ä¸‹é¢ï¼Œå…¶ä»–å˜é‡å®šä¹‰çš„ä¸Šé¢ ä¸è¦ä½¿ç”¨ from foo imort * import éœ€è¦åˆ†ç»„ï¼Œæ¯ç»„ä¹‹é—´ä¸€ä¸ªç©ºè¡Œï¼Œæ¯ä¸ªåˆ†ç»„å†…çš„é¡ºåºå°½é‡é‡‡ç”¨å­—å…¸åºï¼Œåˆ†ç»„é¡ºåºæ˜¯ï¼š æ ‡å‡†åº“ ç¬¬ä¸‰æ–¹åº“ æœ¬é¡¹ç›®çš„ package å’Œ module ä¸è¦ä½¿ç”¨éšå¼çš„ç›¸å¯¹å¯¼å…¥ï¼ˆimplicit relative importsï¼‰ï¼Œå¯æ˜¯ä½¿ç”¨æ˜¾ç¤ºçš„ç›¸å¯¹å¯¼å…¥ï¼ˆexplicit relative importsï¼‰ï¼Œå¦‚ from ..utils import parseï¼Œæœ€å¥½ä½¿ç”¨å…¨è·¯å¾„å¯¼å…¥ï¼ˆabsolute importsï¼‰ å¯¹äºŽä¸åŒçš„ packageï¼Œä¸€ä¸ª import å•ç‹¬ä¸€è¡Œï¼ŒåŒä¸€ä¸ª package/module ä¸‹çš„å†…å®¹å¯ä»¥å†™ä¸€èµ·ï¼š 12345678910# badimport sys, os, time# goodimport osimport sysimport time# okfrom flask import Flask, render_template, jsonify ä¸ºäº†é¿å…å¯èƒ½å‡ºçŽ°çš„å‘½åå†²çªï¼Œå¯ä»¥ä½¿ç”¨ as æˆ–å¯¼å…¥ä¸Šä¸€çº§å‘½åç©ºé—´ ä¸è¦å‡ºçŽ°å¾ªçŽ¯å¯¼å…¥(cyclic import) æ³¨é‡Š æ–‡æ¡£å­—ç¬¦ä¸² docstring, æ˜¯ package, module, class, method, function çº§åˆ«çš„æ³¨é‡Šï¼Œå¯ä»¥é€šè¿‡ doc æˆå‘˜è®¿é—®åˆ°ï¼Œæ³¨é‡Šå†…å®¹åœ¨ä¸€å¯¹ â€œâ€â€ ç¬¦å·ä¹‹é—´ function, method çš„æ–‡æ¡£å­—ç¬¦ä¸²åº”å½“æè¿°å…¶åŠŸèƒ½ã€è¾“å…¥å‚æ•°ã€è¿”å›žå€¼ï¼Œå¦‚æžœæœ‰å¤æ‚çš„ç®—æ³•å’Œå®žçŽ°ï¼Œä¹Ÿéœ€è¦å†™æ¸…æ¥š ä¸è¦å†™é”™è¯¯çš„æ³¨é‡Šï¼Œä¸è¦æ— è°“çš„æ³¨é‡Š 12345# bad æ— è°“çš„æ³¨é‡Šx = x + 1 # increase x by 1# bad é”™è¯¯çš„æ³¨é‡Šx = x - 1 # increase x by 1 ä¼˜å…ˆä½¿ç”¨è‹±æ–‡å†™æ³¨é‡Šï¼Œè‹±æ–‡ä¸å¥½å…¨éƒ¨å†™ä¸­æ–‡ï¼Œå¦åˆ™æ›´åŠ çœ‹ä¸æ‡‚ å¼‚å¸¸ ä¸è¦è½»æ˜“ä½¿ç”¨ try/except except åŽé¢éœ€è¦æŒ‡å®šæ•æ‰çš„å¼‚å¸¸ï¼Œè£¸éœ²çš„ except ä¼šæ•æ‰æ‰€æœ‰å¼‚å¸¸ï¼Œæ„å‘³ç€ä¼šéšè—æ½œåœ¨çš„é—®é¢˜ å¯ä»¥æœ‰å¤šä¸ª except è¯­å¥ï¼Œæ•æ‰å¤šç§å¼‚å¸¸ï¼Œåˆ†åˆ«åšå¼‚å¸¸å¤„ç† ä½¿ç”¨ finally å­å¥æ¥å¤„ç†ä¸€äº›æ”¶å°¾æ“ä½œ try/except é‡Œçš„å†…å®¹ä¸è¦å¤ªå¤šï¼Œåªåœ¨å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„åœ°æ–¹ä½¿ç”¨ï¼Œå¦‚ï¼š 123456789101112131415161718192021222324252627282930# badtry: user = User() user.name = "leon" user.age = int(age) # å¯èƒ½æŠ›å‡ºå¼‚å¸¸ user.created_at = datetime.datetime.utcnow() db.session.add(user) db.session.commit() # å¯èƒ½æŠ›å‡ºå¼‚å¸¸except: db.session.rollback()# bettertry: age = int(age)except (TypeError, ValueError): return # æˆ–åˆ«çš„æ“ä½œuser = User()user.name = "leon"user.age = ageuser.created_at = datetime.datetime.utcnow()db.session.add(user)try: db.session.commit()except sqlalchemy.exc.SQLAlchemyError: # æˆ–è€…æ›´å…·ä½“çš„å¼‚å¸¸ db.session.rollback()finally: db.session.close() ä»Ž Exception è€Œä¸æ˜¯ BaseException ç»§æ‰¿è‡ªå®šä¹‰çš„å¼‚å¸¸ç±» Classï¼ˆç±»ï¼‰ æ˜¾ç¤ºçš„å†™æ˜Žçˆ¶ç±»ï¼Œå¦‚æžœä¸æ˜¯ç»§æ‰¿è‡ªåˆ«çš„ç±»ï¼Œå°±ç»§æ‰¿è‡ª object ç±» ä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• æ”¯æŒå¤šç»§æ‰¿ï¼Œå³åŒæ—¶æœ‰å¤šä¸ªçˆ¶ç±»ï¼Œå»ºè®®ä½¿ç”¨ Mixin ç¼–ç å»ºè®® å­—ç¬¦ä¸² ä½¿ç”¨å­—ç¬¦ä¸²çš„ join æ–¹æ³•æ‹¼æŽ¥å­—ç¬¦ä¸² ä½¿ç”¨å­—ç¬¦ä¸²ç±»åž‹çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ string æ¨¡å—çš„æ–¹æ³• ä½¿ç”¨ startswith å’Œ endswith æ–¹æ³•æ¯”è¾ƒå‰ç¼€å’ŒåŽç¼€ ä½¿ç”¨ format æ–¹æ³•æ ¼å¼åŒ–å­—ç¬¦ä¸² æ¯”è¾ƒ ç©ºçš„ list, str, tuple, set, dict å’Œ 0, 0.0, None éƒ½æ˜¯ False ä½¿ç”¨ if some_list è€Œä¸æ˜¯ if len(some_list) åˆ¤æ–­æŸä¸ª list æ˜¯å¦ä¸ºç©ºï¼Œå…¶ä»–ç±»åž‹åŒç† ä½¿ç”¨ is å’Œ is not ä¸Žå•ä¾‹ï¼ˆå¦‚ Noneï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œè€Œä¸æ˜¯ç”¨ == å’Œ != ä½¿ç”¨ if a is not None è€Œä¸æ˜¯ if not a is None ç”¨ isinstance è€Œä¸æ˜¯ type åˆ¤æ–­ç±»åž‹ ä¸è¦ç”¨ == å’Œ != ä¸Ž True å’Œ False æ¯”è¾ƒï¼ˆé™¤éžæœ‰ç‰¹æ®Šæƒ…å†µï¼Œå¦‚åœ¨ sqlalchemy ä¸­å¯èƒ½ç”¨åˆ°ï¼‰ ä½¿ç”¨ in æ“ä½œï¼š ç”¨ key in dict è€Œä¸æ˜¯ dict.has_key() 1234567# badif d.has_key(k): do_something()# goodif k in d: do_something() 2.ç”¨ set åŠ é€Ÿ â€œå­˜åœ¨æ€§â€ æ£€æŸ¥ï¼Œlist çš„æŸ¥æ‰¾æ˜¯çº¿æ€§çš„ï¼Œå¤æ‚åº¦ O(n)ï¼Œset åº•å±‚æ˜¯ hash table, å¤æ‚åº¦ O(1)ï¼Œä½†ç”¨ set éœ€è¦æ¯” list æ›´å¤šå†…å­˜ç©ºé—´ å…¶ä»– ä½¿ç”¨åˆ—è¡¨è¡¨è¾¾å¼ï¼ˆlist comprehensionï¼‰ï¼Œå­—å…¸è¡¨è¾¾å¼(dict comprehension, Python 2.7+) å’Œç”Ÿæˆå™¨(generator) dict çš„ get æ–¹æ³•å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œä½†æœ‰äº›æ—¶å€™åº”è¯¥ç”¨ [] æ“ä½œï¼Œä½¿å¾—å¯ä»¥æŠ›å‡º KeyError ä½¿ç”¨ for item in list è¿­ä»£ list, for index, item in enumerate(list) è¿­ä»£ list å¹¶èŽ·å–ä¸‹æ ‡ ä½¿ç”¨å†…å»ºå‡½æ•° sorted å’Œ list.sort è¿›è¡ŒæŽ’åº é€‚é‡ä½¿ç”¨ map, reduce, filter å’Œ lambdaï¼Œä½¿ç”¨å†…å»ºçš„ all, any å¤„ç†å¤šä¸ªæ¡ä»¶çš„åˆ¤æ–­ ä½¿ç”¨ defaultdict (Python 2.5+), Counter(Python 2.7+) ç­‰ â€œå†·é—¨â€ ä½†å¥½ç”¨çš„æ ‡å‡†åº“ç®—æ³•å’Œæ•°æ®ç»“æž„ ä½¿ç”¨è£…é¥°å™¨(decorator) ä½¿ç”¨ with è¯­å¥å¤„ç†ä¸Šä¸‹æ–‡ æœ‰äº›æ—¶å€™ä¸è¦å¯¹ç±»åž‹åšå¤ªè¿‡ä¸¥æ ¼çš„é™åˆ¶ï¼Œåˆ©ç”¨ Python çš„é¸­å­ç±»åž‹ï¼ˆDuck Typeï¼‰ç‰¹æ€§ ä½¿ç”¨ logging è®°å½•æ—¥å¿—ï¼Œé…ç½®å¥½æ ¼å¼å’Œçº§åˆ« äº†è§£ Python çš„ Magic Methodï¼šA Guide to Pythonâ€™s Magic Methods, Python é­”æœ¯æ–¹æ³•æŒ‡å— é˜…è¯»ä¼˜ç§€çš„å¼€æºä»£ç ï¼Œå¦‚ Flask æ¡†æž¶, Requests for Humans ä¸è¦é‡å¤é€ è½®å­ï¼ŒæŸ¥çœ‹æ ‡å‡†åº“ã€PyPiã€Githubã€Google ç­‰ä½¿ç”¨çŽ°æœ‰çš„ä¼˜ç§€çš„è§£å†³æ–¹æ¡ˆ åæ€å†™ç¨‹åºçš„å¥½ä¹ æƒ¯åœ¨äºŽç†è§£ã€åšæŒï¼Œç„¶åŽå°±æ˜¯è¿ç”¨è‡ªå¦‚ï¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å­¦ç‚¹ç®—æ³•ä¹‹æ ˆçš„å­¦ä¹ ä¸Žåº”ç”¨]]></title>
      <url>%2F2018%2F02%2F05%2F%E5%AD%A6%E7%82%B9%E7%AE%97%E6%B3%95%E4%B9%8B%E6%A0%88%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%8E%E5%BA%94%E7%94%A8%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰åç¯‡åŽŸåˆ›æ–‡ç«  åœ¨å­¦ä¹ æ ˆå‰ï¼Œè„‘æµ·ä¸­å¯¹è¿™ä¸ªè¯åªæœ‰ä¸€ä¸ªå°è±¡ï¼šå®¢æ ˆ (à¹‘â€¢ . â€¢à¹‘) æ ˆæ˜¯ä»€ä¹ˆæ ˆï¼ˆæœ‰æ—¶ç§°ä¸ºâ€œåŽè¿›å…ˆå‡ºæ ˆâ€ï¼‰æ˜¯ä¸€ä¸ªé¡¹çš„æœ‰åºé›†åˆï¼Œå…¶ä¸­æ·»åŠ ç§»é™¤æ–°é¡¹æ€»å‘ç”Ÿåœ¨åŒä¸€ç«¯ã€‚ è¿™æ®µè¯åˆå­¦è€…æ˜¯æ‡µé€¼çš„ï¼Œåˆ«æ€¥ï¼Œå¾€ä¸‹çœ‹ã€‚ å¯¹æ ˆçš„ä¸€èˆ¬æ“ä½œï¼š Stack() åˆ›å»ºä¸€ä¸ªç©ºçš„æ–°æ ˆã€‚ å®ƒä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªç©ºæ ˆã€‚ push(item)å°†ä¸€ä¸ªæ–°é¡¹æ·»åŠ åˆ°æ ˆçš„é¡¶éƒ¨ã€‚å®ƒéœ€è¦ item åšå‚æ•°å¹¶ä¸è¿”å›žä»»ä½•å†…å®¹ã€‚ pop() ä»Žæ ˆä¸­åˆ é™¤é¡¶éƒ¨é¡¹ã€‚å®ƒä¸éœ€è¦å‚æ•°å¹¶è¿”å›ž item ã€‚æ ˆè¢«ä¿®æ”¹ã€‚ peek() ä»Žæ ˆè¿”å›žé¡¶éƒ¨é¡¹ï¼Œä½†ä¸ä¼šåˆ é™¤å®ƒã€‚ä¸éœ€è¦å‚æ•°ã€‚ ä¸ä¿®æ”¹æ ˆã€‚ isEmpty() æµ‹è¯•æ ˆæ˜¯å¦ä¸ºç©ºã€‚ä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žå¸ƒå°”å€¼ã€‚ size() è¿”å›žæ ˆä¸­çš„ item æ•°é‡ã€‚ä¸éœ€è¦å‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ•´æ•°ã€‚ ä¾‹å¦‚ï¼Œs æ˜¯å·²ç»åˆ›å»ºçš„ç©ºæ ˆï¼Œä¸‹å›¾å±•ç¤ºäº†æ ˆæ“ä½œåºåˆ—çš„ç»“æžœã€‚æ ˆä¸­ï¼Œé¡¶éƒ¨é¡¹åˆ—åœ¨æœ€å³è¾¹ã€‚ è‡ªå·±åœ¨å¿ƒé‡Œè¿‡ä¸€éå°±å¾ˆå¥½ç†è§£äº† Pythonå®žçŽ°æ ˆå…¶å®žçœ‹åˆ°ä¸Šé¢é‚£å¼ å›¾ï¼Œå°±æƒ³èµ·äº†Pythonä¸­ list çš„ä¸€äº›ç”¨æ³•ï¼Œappendã€popç­‰ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨ Python æ¥å®žçŽ°æ ˆï¼Œä¹Ÿéžå¸¸ç®€å•ï¼š 123456789101112131415161718class Stack: def __init__(self): self.items = [] def isEmpty(self): return self.items == [] def push(self, item): self.items.append(item) def pop(self): return self.items.pop() def peek(self): return self.items[len(self.items)-1] def size(self): return len(self.items) pythonds/basic/stack.py æ ˆçš„åº”ç”¨ï¼šç®€å•æ‹¬å·åŒ¹é…ï¼ˆä¸€ï¼‰æœ‰ä¸€äº›æ­£ç¡®åŒ¹é…çš„æ‹¬å·å­—ç¬¦ä¸²ï¼š 12345(()()()())(((())))(()((())())) å¯¹æ¯”é‚£äº›ä¸åŒ¹é…çš„æ‹¬å·ï¼š12345((((((())()))(()()(() å…·æœ‰æŒ‘æˆ˜çš„æ˜¯å¦‚ä½•ç¼–å†™ä¸€ä¸ªç®—æ³•ï¼Œèƒ½å¤Ÿä»Žå·¦åˆ°å³è¯»å–ä¸€ä¸²ç¬¦å·ï¼Œå¹¶å†³å®šç¬¦å·æ˜¯å¦å¹³è¡¡ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€ä¸ªé‡è¦çš„è§‚å¯Ÿã€‚ä»Žå·¦åˆ°å³å¤„ç†ç¬¦å·æ—¶ï¼Œæœ€è¿‘å¼€å§‹ç¬¦å·å¿…é¡»ä¸Žä¸‹ä¸€ä¸ªå…³é—­ç¬¦å·ç›¸åŒ¹é…ã€‚æ­¤å¤–ï¼Œå¤„ç†çš„ç¬¬ä¸€ä¸ªå¼€å§‹ç¬¦å·å¿…é¡»ç­‰å¾…ç›´åˆ°å…¶åŒ¹é…æœ€åŽä¸€ä¸ªç¬¦å·ã€‚ç»“æŸç¬¦å·ä»¥ç›¸åçš„é¡ºåºåŒ¹é…å¼€å§‹ç¬¦å·ã€‚ä»–ä»¬ä»Žå†…åˆ°å¤–åŒ¹é…ã€‚è¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ ˆè§£å†³é—®é¢˜çš„çº¿ç´¢ã€‚ 12345678910111213141516171819202122232425from pythonds.basic.stack import Stackdef parChecker(symbolString): s = Stack() balanced = True index = 0 while index &lt; len(symbolString) and balanced: symbol = symbolString[index] if symbol == "(": s.push(symbol) else: if s.isEmpty(): balanced = False else: s.pop() index = index + 1 if balanced and s.isEmpty(): return True else: return Falseprint(parChecker('((()))'))print(parChecker('(()')) output12TrueFalse ä¸€æ—¦ä½ è®¤ä¸ºæ ˆæ˜¯ä¿å­˜æ‹¬å·çš„æ°å½“çš„æ•°æ®ç»“æž„ï¼Œç®—æ³•æ˜¯å¾ˆç›´æŽ¥çš„ã€‚ ä»Žç©ºæ ˆå¼€å§‹ï¼Œä»Žå·¦åˆ°å³å¤„ç†æ‹¬å·å­—ç¬¦ä¸²ã€‚å¦‚æžœä¸€ä¸ªç¬¦å·æ˜¯ä¸€ä¸ªå¼€å§‹ç¬¦å·ï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªä¿¡å·ï¼Œå¯¹åº”çš„ç»“æŸç¬¦å·ç¨åŽä¼šå‡ºçŽ°ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æžœç¬¦å·æ˜¯ç»“æŸç¬¦å·ï¼Œå¼¹å‡ºæ ˆï¼Œåªè¦å¼¹å‡ºæ ˆçš„å¼€å§‹ç¬¦å·å¯ä»¥åŒ¹é…æ¯ä¸ªç»“æŸç¬¦å·ï¼Œåˆ™æ‹¬å·ä¿æŒåŒ¹é…çŠ¶æ€ã€‚å¦‚æžœä»»ä½•æ—¶å€™æ ˆä¸Šæ²¡æœ‰å‡ºçŽ°ç¬¦åˆå¼€å§‹ç¬¦å·çš„ç»“æŸç¬¦å·ï¼Œåˆ™å­—ç¬¦ä¸²ä¸åŒ¹é…ã€‚æœ€åŽï¼Œå½“æ‰€æœ‰ç¬¦å·éƒ½è¢«å¤„ç†åŽï¼Œæ ˆåº”è¯¥æ˜¯ç©ºçš„ã€‚ å¦‚æžœæœ‰å’Œæˆ‘ä¸€æ ·ä¸èƒ½å¾ˆå¥½ç†è§£çš„ï¼Œä½¿ç”¨pycharmçš„debugæ¨¡å¼ï¼Œå¯ä»¥ä¸€æ­¥æ­¥æ¥ï¼Œçœ‹çœ‹ç¨‹åºå°±è¿‘åœ¨åšä»€ä¹ˆã€‚ æ‹¬å·é…å¯¹é—®é¢˜ï¼ˆäºŒï¼‰æ¥çœ‹çœ‹ç¬¬äºŒç§åŒ¹é…é—®é¢˜ã€‚Pythonç¨‹åºé‡Œå­˜åœ¨å¾ˆå¤šæ‹¬å·ï¼šå¦‚åœ†æ‹¬å·ã€æ–¹æ‹¬å·å’ŒèŠ±æ‹¬å·ï¼Œæ¯ç§æ‹¬å·éƒ½æœ‰å¼€æ‹¬å·å’Œé—­æ‹¬å·ã€‚ 123456789101112131415161718192021222324252627282930from pythonds.basic.stack import Stackpares = "()[]&#123;&#125;"def pare_theses(text): i, text_len = 0, len(text) while True: while i &lt; text_len and text[i] not in pares: i += 1 if i &gt;= text_len: return yield text[i], i i += 1def check_pares(text): open_pares = "([&#123;" opposite = &#123;')': '(', ']': '[', '&#125;': '&#123;'&#125; # è¡¨ç¤ºé…å¯¹å…³ç³»çš„å­—å…¸ s = Stack() for pr, i in pare_theses(text): if pr in open_pares: # å¼€æ‹¬å·ï¼ŒåŽ‹è¿›æ ˆå¹¶ç»§ç»­ s.push(pr) elif s.pop() != opposite[pr]: # ä¸åŒ¹é…å°±æ˜¯å¤±è´¥ï¼Œé€€å‡º print('Unmatching is found at', i, 'for', pr) return False # else æ˜¯ä¸€æ¬¡æ‹¬å·é…å¯¹æˆåŠŸï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œç»§ç»­ print("All paretheses are correctly matched.") return Truecheck_pares('([]&#123;&#125;]')check_pares('([]&#123;&#125;)') output 12Unmatching is found at 5 for ]All paretheses are correctly matched. ç”Ÿæˆå™¨ï¼ˆå›žå¿†ä¸€ä¸‹ï¼‰ï¼š ç”¨ yield è¯­å¥äº§ç”Ÿç»“æžœ å¯ä»¥ç”¨åœ¨éœ€è¦è¿­ä»£å™¨çš„åœ°æ–¹ å‡½æ•°ç»“æŸå¯¼è‡´è¿­ä»£ç»“æŸ å‚è€ƒ http://interactivepython.org/runestone/static/pythonds/BasicDS/TheStackAbstractDataType.html http://www.math.pku.edu.cn/teachers/qiuzy/ds_python/courseware/index.htm]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸ºä»€ä¹ˆä¸æŽ¨èSeleniumå†™çˆ¬è™«]]></title>
      <url>%2F2018%2F02%2F02%2F%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%8E%A8%E8%8D%90Selenium%E5%86%99%E7%88%AC%E8%99%AB%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåä¹ç¯‡åŽŸåˆ›æ–‡ç«  å¦‚æžœå¯ä»¥ä½¿ç”¨ Requests å®Œæˆçš„ï¼Œåˆ«ç”¨ Selenium (à¹‘â€¢ . â€¢à¹‘) æœ€è¿‘åœ¨ç¾¤é‡Œç»å¸¸ä¼šçœ‹åˆ°æœ‰äº›æœ‹å‹è¯´ï¼Œä½¿ç”¨SeleniumåŽ»é‡‡é›†ç½‘ç«™ï¼Œæˆ‘çœ‹åˆ°å…¶å®žå†…å¿ƒæ˜¯å¾ˆéš¾å—çš„ï¼Œå“Žï¼ä¸ºä»€ä¹ˆè¦ç”¨Seleniumå‘¢ï¼Ÿ æˆ‘æƒ³è¯´ä¸‹è‡ªå·±çš„çœ‹æ³•ï¼Œæ¬¢è¿Žå„ä½å¤§ä½¬æ‰¹è¯„ã€‚ è§‚ç‚¹å¦‚æžœå¯ä»¥ä½¿ç”¨ Requests å®Œæˆçš„ï¼Œåˆ«ç”¨ Selenium æ•°æ®é‡‡é›†çš„é¡ºåºæŽ¥åˆ°ä¸€ä¸ªé¡¹ç›®æˆ–è€…æœ‰ä¸€ä¸ªé‡‡é›†éœ€æ±‚æ—¶ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æ˜Žç¡®è‡ªå·±çš„éœ€æ±‚ã€‚ç»å¸¸ä¼šé‡åˆ°åŠè·¯æ”¹éœ€æ±‚çš„äº‹æƒ…ï¼ŒçœŸçš„å¾ˆéš¾å—ã€‚ ç¬¬äºŒæ­¥å°±æ˜¯åŽ»åˆ†æžè¿™ä¸ªç½‘ç«™ï¼Œè¿™ä¸ªåœ¨ä¹‹å‰æœ‰æåˆ°è¿‡ é‡‡é›†æ–¹æ¡ˆç­–ç•¥ä¹‹AppæŠ“åŒ… : é¦–å…ˆå¤§çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æƒ³æŠ“å–æŸä¸ªæ•°æ®æºï¼Œæˆ‘ä»¬è¦çŸ¥é“å¤§æ¦‚æœ‰å“ªäº›è·¯å¾„å¯ä»¥èŽ·å–åˆ°æ•°æ®æºï¼ŒåŸºæœ¬ä¸Šæ— å¤–ä¹Žä¸‰ç§ï¼šPCç«¯ç½‘ç«™é’ˆå¯¹ç§»åŠ¨è®¾å¤‡å“åº”å¼è®¾è®¡çš„ç½‘ç«™ï¼ˆä¹Ÿå°±æ˜¯å¾ˆå¤šäººè¯´çš„H5, è™½ç„¶ä¸ä¸€å®šæ˜¯H5ï¼‰ï¼›ç§»åŠ¨AppåŽŸåˆ™æ˜¯èƒ½æŠ“ç§»åŠ¨Appçš„ï¼Œæœ€å¥½æŠ“ç§»åŠ¨Appï¼Œå¦‚æžœæœ‰é’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„ç½‘ç«™ï¼Œå°±æŠ“é’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„ç½‘ç«™ï¼Œæœ€åŽè€ƒè™‘PCç½‘ç«™ã€‚å› ä¸ºç§»åŠ¨AppåŸºæœ¬éƒ½æ˜¯APIå¾ˆç®€å•ï¼Œè€Œç§»åŠ¨è®¾å¤‡è®¿é—®ä¼˜åŒ–çš„ç½‘ç«™ä¸€èˆ¬æ¥è®²éƒ½æ˜¯ç»“æž„ç®€å•æ¸…æ™°çš„HTMLï¼Œè€ŒPCç½‘ç«™è‡ªç„¶æ˜¯æœ€å¤æ‚çš„äº†ï¼›é’ˆå¯¹PCç«¯ç½‘ç«™å’Œç§»åŠ¨ç½‘ç«™çš„åšæ³•ä¸€æ ·ï¼Œåˆ†æžæ€è·¯å¯ä»¥ä¸€èµ·è®²ï¼Œç§»åŠ¨Appå•ç‹¬åˆ†æžã€‚ è¿™ä¸ªæ—¶å€™å¯ä»¥å€Ÿç”¨ postman æ¥åˆ†æžè¯·æ±‚ï¼Œå‚è€ƒ æˆ–è®¸ä½ åº”è¯¥å­¦å­¦ postman ç„¶åŽä¸‹ä¸€æ­¥å¯èƒ½å°±æ˜¯å·¥ç¨‹å¼€å§‹ï¼Œå„ç§é…ç½®ï¼Œä»¥åŠé€‰æ‹©å“ªç§é‡‡é›†æ–¹å¼ï¼Œä¸€èˆ¬æ¥è¯´ Scrapy æ˜¯æœ€å¥½ç”¨ã€ä¹Ÿæ˜¯æœ€å¸¸è§çš„æ¡†æž¶ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ requests + xpath æˆ–è€… Selenium ã€‚ä¸‹é¢å°±æˆ‘è‡ªå·±çš„çœ‹æ³•æ¥è¯´è¯´è¿™ä¸‰ç§é‡‡é›†æ–¹å¼ã€‚ ä¸‰ç§é‡‡é›†å·®å¼‚Scrapyåœ¨ Scrapy å®˜ç½‘ ä¸Šæ˜¯è¿™æ ·å†™çš„ï¼š Scrapy | A Fast and Powerful Scraping and Web Crawling Framework å…³é”®è¯æ˜¯ Fast å’Œ Powerfulï¼Œä½¿ç”¨è¿‡ç¡®å®žæ„Ÿè§‰å¦‚æ­¤ã€‚æˆ‘æ„Ÿè§‰ Scrapy å°±æ˜¯ä¸€ä¸ªå…¨å®¶æ¡¶ï¼Œå®ƒæŠŠçˆ¬è™«æ‰€éœ€è¦çš„å¤§éƒ¨åˆ†ä¸œè¥¿ï¼ˆä¸ºä»€ä¹ˆä¸æ˜¯å…¨éƒ¨ï¼Œä¸‹é¢ä¼šè¯´åˆ°ï¼‰éƒ½é›†æˆåˆ°è¿™ä¸ªæ¡†æž¶ä¸­ï¼Œå¦‚ï¼šä¸‹è½½å™¨ã€ä¸­é—´ä»¶ã€è°ƒåº¦å™¨ã€Spiderã€è°ƒè¯•ã€æ•°æ®æµç­‰ç­‰æ‰€æœ‰åŠŸèƒ½å…¨éƒ¨éƒ½åœ¨è¿™ä¸€ä¸ªæ¡†æž¶ä¸­ï¼Œä½ æ‰€éœ€è¦åšçš„åªæ˜¯åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼šscrapy startproject yourproject Scrapy çš„ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šä¸æ”¯æŒåˆ†å¸ƒå¼ã€‚scrapyä¸­scheduleræ˜¯è¿è¡Œåœ¨é˜Ÿåˆ—ä¸­çš„ï¼Œè€Œé˜Ÿåˆ—æ˜¯åœ¨å•æœºå†…å­˜ä¸­çš„ï¼ŒæœåŠ¡å™¨ä¸Šçˆ¬è™«æ˜¯æ— æ³•åˆ©ç”¨å†…å­˜çš„é˜Ÿåˆ—åšä»»ä½•å¤„ç†ã€‚ä½†æ˜¯ä¹Ÿæœ‰è§£å†³åŠžæ³•ï¼Œå‚è§rmax/scrapy-redis Requestsæ¥çœ‹çœ‹ Requestsçš„æ–‡æ¡£ Requests å”¯ä¸€çš„ä¸€ä¸ªéžè½¬åŸºå› çš„ Python HTTP åº“ï¼Œäººç±»å¯ä»¥å®‰å…¨äº«ç”¨ã€‚ è­¦å‘Šï¼šéžä¸“ä¸šä½¿ç”¨å…¶ä»– HTTP åº“ä¼šå¯¼è‡´å±é™©çš„å‰¯ä½œç”¨ï¼ŒåŒ…æ‹¬ï¼šå®‰å…¨ç¼ºé™·ç—‡ã€å†—ä½™ä»£ç ç—‡ã€é‡æ–°å‘æ˜Žè½®å­ç—‡ã€å•ƒæ–‡æ¡£ç—‡ã€æŠ‘éƒã€å¤´ç–¼ã€ç”šè‡³æ­»äº¡ã€‚ ä½œè€…çœŸå¹½é»˜ urllib2 VS requests 12345678910111213141516171819202122232425#!/usr/bin/env python# -*- coding: utf-8 -*-import urllib2gh_url = 'https://api.github.com'req = urllib2.Request(gh_url)password_manager = urllib2.HTTPPasswordMgrWithDefaultRealm()password_manager.add_password(None, gh_url, 'user', 'pass')auth_manager = urllib2.HTTPBasicAuthHandler(password_manager)opener = urllib2.build_opener(auth_manager)urllib2.install_opener(opener)handler = urllib2.urlopen(req)print handler.getcode()print handler.headers.getheader('content-type')# ------# 200# 'application/json' 12345678910111213#!/usr/bin/env python# -*- coding: utf-8 -*-import requestsr = requests.get('https://api.github.com', auth=('user', 'pass'))print r.status_codeprint r.headers['content-type']# ------# 200# 'application/json' ç®€å•å¯¹æ¯”å‘çŽ° requests çš„å¥½ç”¨ä¹‹å¤„äº†ï¼Œåˆšå¼€å§‹å­¦ä¹ çˆ¬è™«çš„æ—¶å€™ä¹Ÿæ˜¯ä»Ž urllib å¼€å§‹ï¼Œå½“çœ‹åˆ° requests æžœæ–­æŠ›å¼ƒï¼Œå°±åƒçœ‹åˆ° xpath æŠ›å¼ƒ bs4 ä¸€æ · æ‰€ä»¥å¦‚æžœä½ æ˜¯åˆå­¦è€…ï¼Œé‚£ä¹ˆè¯·æ¯«ä¸çŠ¹è±«çš„é€‰æ‹© requests Seleniumæœ€åŽæ¥åˆ°ä»Šå¤©çš„ä¸»è§’ Seleniumï¼Œ é¦–å…ˆçœ‹çœ‹å®˜æ–¹æ€Žä¹ˆè¯´ What is Selenium?Selenium automates browsers. Thatâ€™s it! What you do with that power is entirely up to you. Primarily, it is for automating web applications for testing purposes, but is certainly not limited to just that. Boring web-based administration tasks can (and should!) be automated as well. Selenium has the support of some of the largest browser vendors who have taken (or are taking) steps to make Selenium a native part of their browser. It is also the core technology in countless other browser automation tools, APIs and frameworks. é‡ç‚¹æ˜¯ï¼šit is for automating web applications for testing purposes, but is certainly not limited to just thatï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šå®ƒæ˜¯ç”¨äºŽè‡ªåŠ¨åŒ–Webåº”ç”¨ç¨‹åºçš„æµ‹è¯•ç›®çš„ï¼Œä½†è‚¯å®šä¸ä»…é™äºŽæ­¤ï¼Œç®€å•æ¥è¯´ï¼ŒSelenium æ˜¯webè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·é›†ï¼Œå¦‚æžœä½ åŽ»Googleä¸Šæœç´¢ Selenium ï¼Œå¤§å¤šç»“æžœéƒ½æ˜¯ åˆ©ç”¨Selenium è‡ªåŠ¨åŒ–web æµ‹è¯•ç›¸å…³å†…å®¹ï¼Œæ¯”è¾ƒå‡ºåçš„æœ‰åšå®¢å›­çš„è™«å¸ˆï¼Œå†™çš„ä¸¤æœ¬ä¹¦ä¹Ÿéƒ½æ˜¯å…³äºŽè‡ªåŠ¨åŒ–æµ‹è¯•æ–¹é¢çš„ è‡³äºŽä¸ºå•¥çˆ¬è™«è¦ç”¨seleniumï¼Œæˆ‘åœ¨æŸäº›åšå®¢ä¸Šæ‰¾åˆ°æœ‰äººè¿™æ ·è¯´ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ€Žä¹ˆè¯´ å¯¹äºŽä¸€èˆ¬ç½‘ç«™æ¥è¯´scrapyã€requestsã€beautifulsoupç­‰éƒ½å¯ä»¥çˆ¬å–ï¼Œä½†æ˜¯æœ‰äº›ä¿¡æ¯éœ€è¦æ‰§è¡Œjsæ‰èƒ½æ˜¾çŽ°ï¼Œè€Œä¸”ä½ è‚‰çœ¼æ‰€èƒ½çœ‹åˆ°çš„åŸºæœ¬éƒ½èƒ½çˆ¬å–ä¸‹æ¥ï¼Œåœ¨å­¦ä¹ ä¸­é‡åˆ°äº†ï¼Œå°±è®°å½•ä¸‹æ¥æ–¹ä¾¿ä»¥åŽæŸ¥çœ‹ã€‚ webdriveæ˜¯seleniumä¸­ä¸€ä¸ªå‡½æ•°ï¼š from selenium import webdriverdriver = webdriver.Chrome()driver.get(â€˜ç½‘å€â€™) å…¶ä¸­PhantomJSåŒæ—¶å¯ä»¥æ¢æˆChromeã€Firefoxã€Ieç­‰ç­‰ï¼Œä½†æ˜¯PhantomJSæ˜¯ä¸€ä¸ªæ— å¤´çš„æµè§ˆå™¨ï¼Œè¿è¡Œæ˜¯ä¸ä¼šè·³å‡ºç›¸åº”çš„æµè§ˆå™¨ï¼Œè¿è¡Œç›¸å¯¹æ•ˆçŽ‡è¾ƒé«˜ã€‚åœ¨è°ƒè¯•ä¸­å¯ä»¥å…ˆæ¢æˆChromeï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œæœ€åŽå†æ¢æˆPhantomJSå³å¯ã€‚ ä¸‹é¢æ˜¯åæ§½æ—¶é—´ï¼Œè¯´ä¸€è¯´ Selenium çš„ç¼ºç‚¹ï¼š é€Ÿåº¦æ…¢ã€‚æ¯æ¬¡è¿è¡Œçˆ¬è™«éƒ½æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¦‚æžœæ²¡æœ‰è®¾ç½®ï¼Œè¿˜ä¼šåŠ è½½å›¾ç‰‡ã€JSç­‰ç­‰ä¸€å¤§å †ä¸œè¥¿ï¼› å ç”¨èµ„æºå¤ªå¤šã€‚æœ‰äººè¯´ï¼ŒæŠŠChromeæ¢æˆæ— å¤´æµè§ˆå™¨PhantomJSï¼ŒåŽŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ‰“å¼€æµè§ˆå™¨ï¼Œè€Œä¸”å¾ˆå¤šç½‘ç«™ä¼šéªŒè¯å‚æ•°ï¼Œå¦‚æžœå¯¹æ–¹çœ‹åˆ°ä½ æ˜¯ä»¥PhantomJSåŽ»è®¿é—®ï¼Œä¼šBANæŽ‰ä½ çš„è¯·æ±‚ï¼Œç„¶åŽä½ åˆè¦è€ƒè™‘æ›´æ¢è¯·æ±‚å¤´çš„äº‹æƒ…ï¼Œäº‹æƒ…å¤æ‚ç¨‹åº¦ä¸çŸ¥é“å¤šäº†å¤šå°‘ï¼Œä¸ºå•¥å­¦Pythonï¼Ÿå› ä¸ºPythonç®€å•å•Šï¼Œå¦‚æžœæœ‰æ›´å¿«ã€æ›´ç®€å•çš„åº“å¯ä»¥å®žçŽ°åŒæ ·çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆä¸åŽ»ä½¿ç”¨å‘¢ï¼Ÿ å¯¹ç½‘ç»œçš„è¦æ±‚ä¼šæ›´é«˜ã€‚ Selenium åŠ è½½äº†å¾ˆå¤šå¯èƒ½å¯¹æ‚¨æ²¡æœ‰ä»·å€¼çš„è¡¥å……æ–‡ä»¶ï¼ˆå¦‚cssï¼Œjså’Œå›¾åƒæ–‡ä»¶ï¼‰ã€‚ ä¸Žä»…ä»…è¯·æ±‚æ‚¨çœŸæ­£éœ€è¦çš„èµ„æºï¼ˆä½¿ç”¨å•ç‹¬çš„HTTPè¯·æ±‚ï¼‰ç›¸æ¯”ï¼Œè¿™å¯èƒ½ä¼šäº§ç”Ÿæ›´å¤šçš„æµé‡ã€‚ çˆ¬å–è§„æ¨¡ä¸èƒ½å¤ªå¤§ã€‚ä½ æœ‰çœ‹åˆ°å“ªå®¶å…¬å¸ç”¨Seleniumä½œä¸ºç”Ÿäº§çŽ¯å¢ƒå—ï¼Ÿ éš¾ã€‚å­¦ä¹ Seleniumçš„æˆæœ¬å¤ªé«˜ï¼Œåªæœ‰æˆ‘ä¸€ä¸ªäººè§‰å¾—Seleniumæ¯”Requestséš¾ä¸€ç™¾å€å—ï¼Ÿ æˆ‘èƒ½æƒ³åˆ°çš„å°±è¿™ä¹ˆå¤šäº†ï¼Œæ¬¢è¿Žå„ä½å¤§ä½¬è¡¥å……ã€‚æ‰€ä»¥ï¼Œå¦‚æžœå¯ä»¥ä½¿ç”¨ Requests å®Œæˆçš„ï¼Œåˆ«ç”¨ Seleniumï¼ŒOKï¼Œæ´—è„‘å®Œæˆã€‚ ä¹‹å‰é¢è¯•çˆ¬è™«å·¥ç¨‹å¸ˆæœ‰ä¸€é¢˜å°±æ˜¯ï¼šå¦‚ä½•å¤„ç†ç½‘ç«™çš„ç™»å½•ç³»ç»Ÿï¼Ÿ A.æµè§ˆå™¨æ¨¡æ‹Ÿ B.HTTPè¯·æ±‚ å¦‚æžœä½ æƒ³åšæµ‹è¯•å·¥ç¨‹å¸ˆï¼Œé‚£è‚¯å®šéœ€è¦å­¦ä¼š Seleniumï¼Œå…¬å¸ä¸€ä¸ªå¦¹å­å°±æ˜¯æµ‹è¯•ï¼ŒçŽ°åœ¨å­¦äº† Seleniumï¼Œå·¥ä½œè½»æ¾äº†å¥½å¤šã€‚ æœ€åŽï¼Œæ— è€»çš„æ¥ä¸ªå¹¿å‘Šï¼Œæœ¬å…¬å¸æ‹›è˜çˆ¬è™«å·¥ç¨‹å¸ˆï¼Œå¸Œæœ›å’Œä½ æˆä¸ºé˜Ÿå‹!]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æˆ–è®¸ä½ åº”è¯¥å­¦å­¦ postman]]></title>
      <url>%2F2018%2F01%2F31%2F%E6%88%96%E8%AE%B8%E4%BD%A0%E5%BA%94%E8%AF%A5%E5%AD%A6%E5%AD%A6-postman%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåå…«ç¯‡åŽŸåˆ›æ–‡ç«  ç®€å•æ¨¡æ‹Ÿè¯·æ±‚çš„å·¥å…· (à¹‘â€¢ . â€¢à¹‘) ä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­å¤åˆ¶ Copy as cURL ï¼Œç„¶åŽæŠŠæ•°æ®å¯¼å…¥ postmanï¼Œç„¶åŽ send ï¼Œæ”¶å·¥ã€‚ æˆ‘ä»¬è¿™é‡Œæ‹¿ çŸ¥ä¹Žé¦–é¡µ ä¸¾ä¾‹ åœ¨å¯¹åº”çš„è¯·æ±‚ä¸‹å¤åˆ¶ cURL æ‰“å¼€ postman ï¼Œ ç‚¹å‡»å·¦ä¸Šè§’çš„ Import ï¼Œ é€‰æ‹©Paste Raw Text ï¼Œæœ€åŽ Importï¼Œç‚¹å‡» sendå‘é€è¯·æ±‚ å‘é€è¯·æ±‚ä¹‹åŽå°±å¯ä»¥æŸ¥çœ‹äº†ï¼Œå¦‚ä¸‹å›¾ï¼Œæ ‡ç®­å¤´çš„åœ°æ–¹å¯ä»¥æ‰“å¼€çœ‹æ›´å¤šã€‚æ¯”å¦‚å¯ä»¥é¢„è§ˆwebç•Œé¢ï¼ŒæŸ¥çœ‹ Headers ä¿¡æ¯ï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼Œå¤åˆ¶ä»£ç ã€‚ åŒæ—¶å¯ä»¥æ‰“å¼€ Headers ï¼Œç”¨æ¥è°ƒè¯•ï¼Œå“ªäº›æ˜¯éœ€è¦çš„ï¼Œå“ªäº›ä¸éœ€è¦ æœ€æ–¹ä¾¿çš„ä¸€ç‚¹æ˜¯ï¼Œå¯ä»¥ç›´æŽ¥ç”Ÿæˆå¯¹åº”çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶å¤åˆ¶ï¼Œä¾‹å¦‚Pythonçš„requestsæ–¹æ³•ï¼š å¥½äº†ï¼Œåˆ°è¿™é‡Œ postman çš„ç®€å•åŠŸèƒ½å°±è¯´å®Œäº†ï¼Œä»–çš„å…¨éƒ¨åŠŸèƒ½å½“ç„¶ä¸æ­¢è¿™ä¸€ç‚¹ï¼Œæ›´å¤šçš„å°±åŽ»çœ‹ æ–‡æ¡£å•¦ é—®é¢˜åœ¨æˆ‘çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°äº† postman çš„ä¸€äº›é—®é¢˜ï¼Œå¦‚ï¼šå¯¼å…¥é”™è¯¯ï¼Œå‚æ•°é”™è¯¯ï¼Œè¯·æ±‚å¤±è¯¯ã€‚ å¯¼å…¥é”™è¯¯ä¾‹å¦‚çŸ¥ä¹Žè¿™ä¸ªä¾‹å­ï¼Œå¦‚æžœæˆ‘ä»¬å¤åˆ¶çš„æ˜¯ Copy as cURL (cmd) ï¼Œå¯èƒ½ä½ ä¼šé‡åˆ°ä¸‹é¢çš„é”™è¯¯ è¿™ä¸ªæ—¶å€™é€‰ç”¨ Copy as cURL (bush) å°±å¥½äº†ï¼Œå…·ä½“åŽŸå› æ˜¯å•¥ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚æˆ‘åœ¨è¿™é‡Œæ‰¾åˆ°äº†åˆ«äººçš„æè¿° There is no difference between the two cURL command because there is a difference between â€ and â€˜. Refer : Use cURL to get the same results as a web browser å‚æ•°é”™è¯¯ä¸¾ä¸ªä¾‹å­ï¼Œä»Šå¤©åœ¨å¸®æœ‹å‹æŸ¥çœ‹ è¿™ä¸ªç½‘ç«™ çš„ç¿»é¡µï¼Œå¤åˆ¶ç”¨postmanæ‰“å¼€ï¼Œ copy cURL å†…å®¹æ˜¯ 1234567891011121314151617curl &quot;https://www.crunchbase.com/v4/data/entities/organizations/56e40f50-97c7-2a77-255d-1d97d5f30646/overrides?field_ids=^%^5B^%^22identifier^%^22,^%^22layout_id^%^22,^%^22facet_ids^%^22,^%^22title^%^22,^%^22short_description^%^22,^%^22is_locked^%^22^%^5D^&amp;card_ids=^%^5B^%^22investments_list^%^22^%^5D&quot; -H &quot;cookie: _ga=GA1.2.35962729.1517412509; _gid=GA1.2.2072770006.1517412509; _vdl=1; _hp2_ses_props.973801186=^%^7B^%^22ts^%^22^%^3A1517412512548^%^2C^%^22d^%^22^%^3A^%^22www.crunchbase.com^%^22^%^2C^%^22h^%^22^%^3A^%^22^%^2Fsearch^%^2Fprincipal.investors^%^22^%^7D; __qca=P0-1969245879-1517412512628; D_IID=1B7344D2-1C8F-3327-8607-D786306444AE; D_UID=208F925B-3D1C-3491-A532-C82375EE187D; D_ZID=497DB63C-5101-3F49-BE35-1752A80F8DDA; D_ZUID=D89FCBAA-BF79-340C-BF55-B860768D0993; D_HID=57B19D5F-5069-3A82-94CB-D42821D1CD10; D_SID=123.120.141.63:bXaeU41PWi5vyYIflFmiShQiK1qwq/nC4G9IljWo+6A; AMCVS_6B25357E519160E40A490D44^%^40AdobeOrg=1; wcsid=KZbgLoopx4WnyMOW3F6pZ0H92JEzMrBd; hblid=cfw6lOKzm4FpCUou3F6pZ0H92JE6rBWB; s_cc=true; AMCV_6B25357E519160E40A490D44^%^40AdobeOrg=1099438348^%^7CMCMID^%^7C05859477990281579603868663655860142263^%^7CMCAAMLH-1518017313^%^7C11^%^7CMCAAMB-1518017313^%^7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y^%^7CMCOPTOUT-1517419713s^%^7CNONE^%^7CMCAID^%^7CNONE^%^7CMCSYNCSOP^%^7C411-17570^%^7CvVersion^%^7C2.1.0; _okdetect=^%^7B^%^22token^%^22^%^3A^%^2215174125149410^%^22^%^2C^%^22proto^%^22^%^3A^%^22https^%^3A^%^22^%^2C^%^22host^%^22^%^3A^%^22www.crunchbase.com^%^22^%^7D; olfsk=olfsk8562990481377502; _okbk=cd4^%^3Dtrue^%^2Cvi5^%^3D0^%^2Cvi4^%^3D1517412515909^%^2Cvi3^%^3Dactive^%^2Cvi2^%^3Dfalse^%^2Cvi1^%^3Dfalse^%^2Ccd8^%^3Dchat^%^2Ccd6^%^3D0^%^2Ccd5^%^3Daway^%^2Ccd3^%^3Dfalse^%^2Ccd2^%^3D0^%^2Ccd1^%^3D0^%^2C; _ok=1554-355-10-6773; _hp2_props.973801186=^%^7B^%^22Logged^%^20In^%^22^%^3Afalse^%^2C^%^22Pro^%^22^%^3Afalse^%^7D; _hp2_id.973801186=^%^7B^%^22userId^%^22^%^3A^%^228805156096536097^%^22^%^2C^%^22pageviewId^%^22^%^3A^%^221700148784936413^%^22^%^2C^%^22sessionId^%^22^%^3A^%^225929107734453151^%^22^%^2C^%^22identity^%^22^%^3Anull^%^2C^%^22trackerVersion^%^22^%^3A^%^223.0^%^22^%^7D; _oklv=1517412548852^%^2CKZbgLoopx4WnyMOW3F6pZ0H92JEzMrBd; s_pers=^%^20s_nrgvo^%^3DNew^%^7C1580484574965^%^3B&quot; -H &quot;origin: https://www.crunchbase.com&quot; -H &quot;accept-encoding: gzip, deflate, br&quot; -H &quot;x-distil-ajax: dfdvfavtsysazfberrtudvwabwe&quot; -H &quot;user-agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36&quot; -H &quot;content-type: application/json&quot; -H &quot;accept-language: zh-CN,zh;q=0.9,en;q=0.8&quot; -H &quot;accept: application/json, text/plain, */*&quot; -H &quot;referer: https://www.crunchbase.com/organization/500-startups/investments/investments_list&quot; -H &quot;authority: www.crunchbase.com&quot; -H &quot;x-requested-with: XMLHttpRequest&quot; --data-binary ^&quot;^&#123;^ ^\^&quot;card_lookups^\^&quot;: ^[^ ^&#123;^ ^\^&quot;card_id^\^&quot;: ^\^&quot;investments_list^\^&quot;,^ ^\^&quot;limit^\^&quot;: 100,^ ^\^&quot;after_id^\^&quot;: ^\^&quot;07a9c686-4590-fa0f-3ac4-fc7b898c0b7a^\^&quot;^ ^&#125;^ ^]^^&#125;^&quot; --compressed å¯¼å…¥ä¹‹åŽï¼Œsendï¼Œè¿”å›ž 400 é”™è¯¯ã€‚ postman è½¬ä¹‰çš„codeæ˜¯ï¼š 1234567891011121314151617181920212223242526import requestsurl = "https://www.crunchbase.com/v4/data/entities/organizations/56e40f50-97c7-2a77-255d-1d97d5f30646/overrides"querystring = &#123;"field_ids":"^%^5B^%^22identifier^%^22,^%^22layout_id^%^22,^%^22facet_ids^%^22,^%^22title^%^22,^%^22short_description^%^22,^%^22is_locked^%^22^%^5D^","card_ids":"^%^5B^%^22investments_list^%^22^%^5D"&#125;payload = "^^&#123;^\n\n ^\\^card_lookups^^: ^[^\n\n ^&#123;^\n\n ^\\^card_id^^: ^\\^investments_list^^,^\n\n ^\\^limit^^: 100,^\n\n ^\\^after_id^^: ^\\^07a9c686-4590-fa0f-3ac4-fc7b898c0b7a^^^\n\n ^&#125;^\n\n ^]^\n\n^&#125;^"headers = &#123; 'cookie': "_ga=GA1.2.35962729.1517412509; _gid=GA1.2.2072770006.1517412509; _vdl=1; _hp2_ses_props.973801186=^%^7B^%^22ts^%^22^%^3A1517412512548^%^2C^%^22d^%^22^%^3A^%^22www.crunchbase.com^%^22^%^2C^%^22h^%^22^%^3A^%^22^%^2Fsearch^%^2Fprincipal.investors^%^22^%^7D; __qca=P0-1969245879-1517412512628; D_IID=1B7344D2-1C8F-3327-8607-D786306444AE; D_UID=208F925B-3D1C-3491-A532-C82375EE187D; D_ZID=497DB63C-5101-3F49-BE35-1752A80F8DDA; D_ZUID=D89FCBAA-BF79-340C-BF55-B860768D0993; D_HID=57B19D5F-5069-3A82-94CB-D42821D1CD10; D_SID=123.120.141.63:bXaeU41PWi5vyYIflFmiShQiK1qwq/nC4G9IljWo+6A; AMCVS_6B25357E519160E40A490D44^%^40AdobeOrg=1; wcsid=KZbgLoopx4WnyMOW3F6pZ0H92JEzMrBd; hblid=cfw6lOKzm4FpCUou3F6pZ0H92JE6rBWB; s_cc=true; AMCV_6B25357E519160E40A490D44^%^40AdobeOrg=1099438348^%^7CMCMID^%^7C05859477990281579603868663655860142263^%^7CMCAAMLH-1518017313^%^7C11^%^7CMCAAMB-1518017313^%^7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y^%^7CMCOPTOUT-1517419713s^%^7CNONE^%^7CMCAID^%^7CNONE^%^7CMCSYNCSOP^%^7C411-17570^%^7CvVersion^%^7C2.1.0; _okdetect=^%^7B^%^22token^%^22^%^3A^%^2215174125149410^%^22^%^2C^%^22proto^%^22^%^3A^%^22https^%^3A^%^22^%^2C^%^22host^%^22^%^3A^%^22www.crunchbase.com^%^22^%^7D; olfsk=olfsk8562990481377502; _okbk=cd4^%^3Dtrue^%^2Cvi5^%^3D0^%^2Cvi4^%^3D1517412515909^%^2Cvi3^%^3Dactive^%^2Cvi2^%^3Dfalse^%^2Cvi1^%^3Dfalse^%^2Ccd8^%^3Dchat^%^2Ccd6^%^3D0^%^2Ccd5^%^3Daway^%^2Ccd3^%^3Dfalse^%^2Ccd2^%^3D0^%^2Ccd1^%^3D0^%^2C; _ok=1554-355-10-6773; _hp2_props.973801186=^%^7B^%^22Logged^%^20In^%^22^%^3Afalse^%^2C^%^22Pro^%^22^%^3Afalse^%^7D; _hp2_id.973801186=^%^7B^%^22userId^%^22^%^3A^%^228805156096536097^%^22^%^2C^%^22pageviewId^%^22^%^3A^%^221700148784936413^%^22^%^2C^%^22sessionId^%^22^%^3A^%^225929107734453151^%^22^%^2C^%^22identity^%^22^%^3Anull^%^2C^%^22trackerVersion^%^22^%^3A^%^223.0^%^22^%^7D; _oklv=1517412548852^%^2CKZbgLoopx4WnyMOW3F6pZ0H92JEzMrBd; s_pers=^%^20s_nrgvo^%^3DNew^%^7C1580484574965^%^3B", 'origin': "https://www.crunchbase.com", 'accept-encoding': "gzip, deflate, br", 'x-distil-ajax': "dfdvfavtsysazfberrtudvwabwe", 'user-agent': "Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36", 'content-type': "application/json", 'accept-language': "zh-CN,zh;q=0.9,en;q=0.8", 'accept': "application/json, text/plain, */*", 'referer': "https://www.crunchbase.com/organization/500-startups/investments/investments_list", 'authority': "www.crunchbase.com", 'x-requested-with': "XMLHttpRequest", 'cache-control': "no-cache", 'postman-token': "1df3b2b6-b682-edf7-4804-572ac5a03420" &#125;response = requests.request("POST", url, data=payload, headers=headers, params=querystring)print(response.text) å¯ä»¥çœ‹åˆ° åŠ å…¥äº†å¤§é‡çš„ ^ ç¬¦å·ï¼Œè¿™ä¸ªåœ¨Pythonä¸­æ˜¯è¿ç®—ç¬¦1^ æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦ï¼šå½“ä¸¤å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æ—¶ï¼Œç»“æžœä¸º1 (a ^ b) è¾“å‡ºç»“æžœ 49 ï¼ŒäºŒè¿›åˆ¶è§£é‡Šï¼š 0011 0001 è¿™ä¹Ÿæ˜¯ postman çš„ä¸€ä¸ªé—®é¢˜ è¯·æ±‚å¤±è¯¯è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚ï¼Œæœ‰çš„è¯·æ±‚ postman è¿”å›žé”™è¯¯ï¼Œä½†æ˜¯å¤åˆ¶ä»£ç åˆ° Python çŽ¯å¢ƒä¸­è¿è¡Œæ˜¯å¯ä»¥èŽ·å¾—æ•°æ®çš„ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å¤šæ¬¡éªŒè¯ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æœ‰äº†å¥¹ï¼Œè°æ•¢é˜»æ­¢æˆ‘å­¦ä¹ ]]></title>
      <url>%2F2018%2F01%2F30%2F%E6%9C%89%E4%BA%86%E5%A5%B9%EF%BC%8C%E8%B0%81%E6%95%A2%E9%98%BB%E6%AD%A2%E6%88%91%E5%AD%A6%E4%B9%A0%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  æˆ‘çˆ±å­¦ä¹  (à¹‘â€¢ . â€¢à¹‘) å…¬ä¼—å·Pythonçˆ±å¥½è€…ç¤¾åŒºï¼Œå¾®ä¿¡å·ï¼špython_shequ äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨Pythonã€‚åˆ†äº«Pythonç›¸å…³çš„æŠ€æœ¯æ–‡ç« ã€å·¥å…·èµ„æºã€ç²¾é€‰è¯¾ç¨‹ã€è§†é¢‘æ•™ç¨‹ã€çƒ­ç‚¹èµ„è®¯ã€å­¦ä¹ èµ„æ–™ç­‰ã€‚æ¯å¤©è‡ªåŠ¨æ›´æ–°å’ŒæŽ¨é€ã€‚ Pythonçˆ¬è™«åˆ†äº«ï¼Œå¾®ä¿¡å·ï¼špython_shequ çŸ¥ä¹Žä¸“æ â€œçˆ¬è™«ä»Žå…¥é—¨åˆ°æ”¾å¼ƒâ€ä½œè€…ã€‚ç›®å‰åœ¨çŸ¥ä¹Žè¿žè½½çˆ¬è™«ä»Žå…¥é—¨åˆ°æ”¾å¼ƒåˆ°ç²¾é€šç³»åˆ—æ–‡ç«  å¼ ä¿Šçº¢ï¼Œå¾®ä¿¡å·ï¼šzhangjunhong0428 ä¸­å›½ç»Ÿè®¡ç½‘ä¸“æ ä½œè€…ï¼Œæ•°æ®åˆ†æžè·¯ä¸Šçš„å­¦ä¹ è€…ä¸Žå®žè·µè€…ï¼Œä¸Žä½ åˆ†äº«æˆ‘çš„æ‰€è§ã€æ‰€å­¦ã€æ‰€æƒ³ã€‚ æ•°æ®å°é­”æ–¹ï¼Œå¾®ä¿¡å·ï¼šdatamofang ä¸“æ³¨äºŽæ•°æ®å¯è§†åŒ–åŠå•†åŠ¡æ™ºèƒ½çš„åŽŸåˆ›æŠ€èƒ½åˆ†äº«å¹³å°ï¼ Pythonçˆ¬è™«ä¸Žç®—æ³•è¿›é˜¶ï¼Œå¾®ä¿¡å·ï¼šzhangslob åˆ†äº«PythonçŸ¥è¯†ï¼Œå…³æ³¨çˆ¬è™«ä¸Žç®—æ³•,è®©æˆ‘ä»¬ä¸€èµ·ä»ŽèŒæ–°å˜æˆå¤§ç‰›å§! åœ¨çº¿ä¹¦ç± å…³äºŽPythonçš„é¢è¯•é¢˜ è‰æ ¹å­¦Python pythonæ•°æ®ç»“æž„å’Œç®—æ³• Pythonæœ€ä½³å®žè·µæŒ‡å—ï¼ Python Cookbook 3rd Edition Documentation Stackoverflow about Python Pythonè¿›é˜¶ å…è´¹è§†é¢‘ é›¶åŸºç¡€å…¥é—¨å­¦ä¹ Python è¯è¯´æˆ‘å½“æ—¶å°±çœ‹çš„å°ç”²é±¼è§†é¢‘å…¥é—¨çš„ Pythonè¯­è¨€ç¨‹åºè®¾è®¡ åµ©å¤©è€å¸ˆçš„ä¸€ç³»åˆ—è¯¾ç¨‹ Googleæœºå™¨å­¦ä¹  ç®€å•å…¥é—¨ ç®—æ³•åŸºç¡€ åŒ—å¤§åšå£«çš„è¯¾ç¨‹ã€‚ã€‚ å´æ©è¾¾æœºå™¨å­¦ä¹  è¿™ä¸ªå°±ä¸è¯„ä»·äº†ï¼Œéƒ½çŸ¥é“ çˆ¬è™«æ•™ç¨‹ çˆ¬è™«æ•™ç¨‹ æŸä½å¤§ä½¬æ‰€å†™ï¼Œç”±æµ…å…¥æ·± Scrapyåˆ†ç±» è´¨é‡éžå¸¸é«˜ Python3ç½‘ç»œçˆ¬è™«å®žæˆ˜ å´”å¤§çš„ä¹¦ï¼Œé©¬ä¸Šä¼šå‡ºç‰ˆ å¤§æ•°æ®ä¹‹ç½‘ç»œçˆ¬è™« ä¸»è¦æ˜¯åž‚ç›´åž‹ç½‘ç»œçˆ¬è™« ä½¿ç”¨Scrapy-rediså®žçŽ°åˆ†å¸ƒå¼çˆ¬å– åˆ†å¸ƒå¼èµ„æ–™ ä½¿ç”¨Dockeréƒ¨ç½²scrapy-redisåˆ†å¸ƒå¼çˆ¬è™« åŒæ ·æ˜¯åˆ†å¸ƒå¼èµ„æ–™ æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šä¸è¦å…‰æ”¶è—ï¼Œä¸åŽ»çœ‹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çƒ¦äººçš„Git ( Â´â€¢ï¸µâ€¢` )]]></title>
      <url>%2F2018%2F01%2F29%2F%E7%83%A6%E4%BA%BA%E7%9A%84Git%20%E7%BB%88%E4%BA%8E%E5%AD%A6%E4%BC%9A%E4%BA%86%20-%C2%B4%E2%80%A2%EF%B8%B5%E2%80%A2%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåå…­ç¯‡åŽŸåˆ›æ–‡ç«  ç»ˆäºŽä¼šç”¨Gitäº† (à¹‘â€¢ . â€¢à¹‘) Gitå¯¹äºŽæ–°æ‰‹æ¥è¯´ï¼ŒçœŸçš„å¾ˆçƒ¦äººå“Žï¼Œå¥½åœ¨æ‰¾åˆ°äº†å¥½å·¥å…· â€”â€” PyCharm ä½¿ç”¨PyCharmè¿›è¡Œä»£ç ç®¡ç†åœ¨VCSé‡Œæœ‰Gitï¼Œé‡Œé¢æœ‰å¸¸ç”¨çš„æ“ä½œï¼Œcloneã€pullã€pushç­‰ç­‰ã€‚ æ›´æ–¹ä¾¿çš„æ˜¯ï¼Œåœ¨å·¦ä¸‹è§’ï¼Œæœ‰Version Controlï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹åˆ°æ—¥å¿—æ”¹å˜ï¼Œå›¾ä¸­å¦ä¸€ä¸ªæ ‡è®°çš„ä½ç½®å¯ä»¥ç›´æŽ¥è¿›è¡Œcommitï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º æ›´å¤šå‚è€ƒå®˜æ–¹æ–‡æ¡£ Enabling Version Control æˆ‘ä¿®æ”¹äº†ä¸»é¢˜ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ”¹ Material Theme UI emmmï¼Œç®€å•çš„æ–¹æ³•å°±æ˜¯è¿™æ ·ï¼Œè¿˜æ˜¯éœ€è¦äº†è§£ä¸‹Gitçš„åŸºæœ¬æ“ä½œçš„ åˆ›å»ºæ–°ä»“åº“åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ï¼Œç„¶åŽæ‰§è¡Œ git init ä»¥åˆ›å»ºæ–°çš„ git ä»“åº“ã€‚ æˆ–è€…æŒ‰ç…§å®˜æ–¹æŽ¨èçš„ä¾‹å­ 123456789git clone git@github.com:zhangslob/test_test.gitecho "# test_test" &gt;&gt; README.mdgit initgit add README.mdgit commit -m "first commit"git remote add origin git@github.com:zhangslob/test_test.gitgit push -u origin master# å…¶ä¸­çš„å‘½ä»¤ä¸‹é¢ä¼šè®²åˆ° å…‹éš†ä»“åº“æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“çš„å…‹éš†ç‰ˆæœ¬ï¼š git clone /path/to/repository å¦‚æžœæ˜¯è¿œç«¯æœåŠ¡å™¨ä¸Šçš„ä»“åº“ï¼Œä½ çš„å‘½ä»¤ä¼šæ˜¯è¿™ä¸ªæ ·å­ï¼š git clone username@host:/path/to/repository æ·»åŠ å’Œæäº¤ä½ å¯ä»¥æå‡ºæ›´æ”¹ï¼ˆæŠŠå®ƒä»¬æ·»åŠ åˆ°æš‚å­˜åŒºï¼‰ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š git add . è¿™æ˜¯ git åŸºæœ¬å·¥ä½œæµç¨‹çš„ç¬¬ä¸€æ­¥ï¼›ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä»¥å®žé™…æäº¤æ”¹åŠ¨ï¼š git commit -m &quot;ä»£ç æäº¤ä¿¡æ¯&quot; çŽ°åœ¨ï¼Œä½ çš„æ”¹åŠ¨å·²ç»æäº¤åˆ°äº† HEADï¼Œä½†æ˜¯è¿˜æ²¡åˆ°ä½ çš„è¿œç«¯ä»“åº“ã€‚ æŽ¨é€æ”¹åŠ¨ä½ çš„æ”¹åŠ¨çŽ°åœ¨å·²ç»åœ¨æœ¬åœ°ä»“åº“çš„ HEAD ä¸­äº†ã€‚æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥å°†è¿™äº›æ”¹åŠ¨æäº¤åˆ°è¿œç«¯ä»“åº“ï¼š git push origin master å¯ä»¥æŠŠ master æ¢æˆä½ æƒ³è¦æŽ¨é€çš„ä»»ä½•åˆ†æ”¯ã€‚ åˆ†æ”¯åˆ†æ”¯æ˜¯ç”¨æ¥å°†ç‰¹æ€§å¼€å‘ç»ç¼˜å¼€æ¥çš„ã€‚åœ¨ä½ åˆ›å»ºä»“åº“çš„æ—¶å€™ï¼Œmaster æ˜¯â€œé»˜è®¤çš„â€åˆ†æ”¯ã€‚åœ¨å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå®ŒæˆåŽå†å°†å®ƒä»¬åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚ åˆ›å»ºä¸€ä¸ªå«åšâ€œdevelopâ€çš„åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢è¿‡åŽ»ï¼š git checkout -b develop åˆ‡æ¢å›žä¸»åˆ†æ”¯ï¼š git checkout master å†æŠŠæ–°å»ºçš„åˆ†æ”¯åˆ æŽ‰ï¼š git branch -d develop é™¤éžä½ å°†åˆ†æ”¯æŽ¨é€åˆ°è¿œç«¯ä»“åº“ï¼Œä¸ç„¶è¯¥åˆ†æ”¯å°±æ˜¯ ä¸ä¸ºä»–äººæ‰€è§çš„ï¼š git push origin &lt;branch&gt; æ›´æ–°ä¸Žåˆå¹¶è¦æ›´æ–°ä½ çš„æœ¬åœ°ä»“åº“è‡³æœ€æ–°æ”¹åŠ¨ï¼Œæ‰§è¡Œï¼š git pull ä»¥åœ¨ä½ çš„å·¥ä½œç›®å½•ä¸­ èŽ·å–ï¼ˆfetchï¼‰ å¹¶ åˆå¹¶ï¼ˆmergeï¼‰ è¿œç«¯çš„æ”¹åŠ¨ã€‚ è¦åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°ä½ çš„å½“å‰åˆ†æ”¯ï¼ˆä¾‹å¦‚ masterï¼‰ï¼Œæ‰§è¡Œï¼š git merge &lt;branch&gt; åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œgit éƒ½ä¼šå°è¯•åŽ»è‡ªåŠ¨åˆå¹¶æ”¹åŠ¨ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™å¯èƒ½å¹¶éžæ¯æ¬¡éƒ½æˆåŠŸï¼Œå¹¶å¯èƒ½å‡ºçŽ°å†²çªï¼ˆconflictsï¼‰ã€‚ è¿™æ—¶å€™å°±éœ€è¦ä½ ä¿®æ”¹è¿™äº›æ–‡ä»¶æ¥æ‰‹åŠ¨åˆå¹¶è¿™äº›å†²çªï¼ˆconflictsï¼‰ã€‚æ”¹å®Œä¹‹åŽï¼Œä½ éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥å°†å®ƒä»¬æ ‡è®°ä¸ºåˆå¹¶æˆåŠŸï¼š git add &lt;filename&gt; åœ¨åˆå¹¶æ”¹åŠ¨ä¹‹å‰ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é¢„è§ˆå·®å¼‚ï¼š git diff &lt;source_branch&gt; &lt;target_branch&gt; æ›¿æ¢æœ¬åœ°æ”¹åŠ¨å‡å¦‚ä½ æ“ä½œå¤±è¯¯ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ›¿æ¢æŽ‰æœ¬åœ°æ”¹åŠ¨ï¼š git checkout -- &lt;filename&gt; æ­¤å‘½ä»¤ä¼šä½¿ç”¨ HEAD ä¸­çš„æœ€æ–°å†…å®¹æ›¿æ¢æŽ‰ä½ çš„å·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶ã€‚å·²æ·»åŠ åˆ°æš‚å­˜åŒºçš„æ”¹åŠ¨ä»¥åŠæ–°æ–‡ä»¶éƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚ å‡å¦‚ä½ æƒ³ä¸¢å¼ƒä½ åœ¨æœ¬åœ°çš„æ‰€æœ‰æ”¹åŠ¨ä¸Žæäº¤ï¼Œå¯ä»¥åˆ°æœåŠ¡å™¨ä¸ŠèŽ·å–æœ€æ–°çš„ç‰ˆæœ¬åŽ†å²ï¼Œå¹¶å°†ä½ æœ¬åœ°ä¸»åˆ†æ”¯æŒ‡å‘å®ƒï¼š12git fetch origingit reset --hard origin/master å°æŠ€å·§ ä½¿ç”¨ git status å¯ä»¥è¿…é€ŸæŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œè‹¥æ·»åŠ æ–‡ä»¶ï¼Œä¼šæ˜¾ç¤ºç»¿è‰²çš„æ–‡å­— ä½¿ç”¨Githubçš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥äº‹åŠåŠŸå€ https://desktop.github.com/ æ›´å¤šå¯ä»¥å‚è€ƒ Git æ–‡æ¡£ Git Commit Message æ¨¡ç‰ˆæ¨¡ç‰ˆå‘½åçº¦å®šæ¨¡ç‰ˆåç§°ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆ gitmessage-${è¯­è¨€}[-full] ä»¥ -full ç»“å°¾çš„æ¨¡ç‰ˆåŒ…å«äº† message ç»„æˆåŒºåŸŸçš„è§£é‡Šä»¥åŠä¹¦å†™çš„æŒ‡å¯¼ï¼ŒæŽ¨èæ–°æ‰‹é€‰æ‹©è¯¥æ¨¡ç‰ˆä¸Šæ‰‹ï¼Œåœ¨ç†Ÿæ‚‰ä¹¦å†™è§„èŒƒåŽæ¢æˆç®€å•ç‰ˆæœ¬ã€‚ 1234567# feat (æ–°åŠŸèƒ½)# fix (é—®é¢˜ä¿®å¤)# refactor (ä»£ç é‡æž„)# style (ä»£ç é£Žæ ¼æ”¹åŠ¨ã€æ ¼å¼å˜åŒ–ç­‰ï¼Œæ— å®žçŽ°æ”¹åŠ¨)# docs (æ–‡æ¡£æ›´æ–°)# test (å¢žåŠ ã€é‡æž„æµ‹è¯•ï¼Œæ— å®žçŽ°æ”¹åŠ¨)# chore (ä¿®æ”¹ä¸€äº›é…ç½®æ–‡ä»¶å¦‚ .gitignore ç­‰ï¼Œæ— å®žçŽ°æ”¹åŠ¨)]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å­¦ç‚¹ç®—æ³•ä¹‹å­—ç¬¦ä¸²çš„ä¹±åºæ£€æŸ¥]]></title>
      <url>%2F2018%2F01%2F27%2F%E5%AD%A6%E7%82%B9%E7%AE%97%E6%B3%95%E4%B9%8B%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E4%B9%B1%E5%BA%8F%E6%A3%80%E6%9F%A5%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåäº”ç¯‡åŽŸåˆ›æ–‡ç«  è€æ¿ï¼Œæˆ‘è¦åšç®—æ³•å·¥ç¨‹å¸ˆï¼ é—®é¢˜å­—ç¬¦ä¸²çš„ä¹±åºæ£€æŸ¥ã€‚ ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¹±åºã€‚å¦‚æžœç¬¬äºŒä¸ªå­—ç¬¦ä¸²åªæ˜¯ç¬¬ä¸€ä¸ªçš„é‡æ–°æŽ’åˆ—ï¼Œä¾‹å¦‚ï¼Œâ€™heartâ€™ å’Œ â€˜earthâ€™ å°±æ˜¯ä¹±åºå­—ç¬¦ä¸²ã€‚â€™pythonâ€™ å’Œ â€˜typhonâ€™ ä¹Ÿæ˜¯ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾æ‰€è®¨è®ºçš„ä¸¤ä¸ªå­—ç¬¦ä¸²å…·æœ‰ç›¸ç­‰çš„é•¿åº¦ï¼Œå¹¶ä¸”ä»–ä»¬ç”± 26 ä¸ªå°å†™å­—æ¯é›†åˆç»„æˆã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å†™ä¸€ä¸ªå¸ƒå°”å‡½æ•°ï¼Œå®ƒå°†ä¸¤ä¸ªå­—ç¬¦ä¸²åšå‚æ•°å¹¶è¿”å›žå®ƒä»¬æ˜¯ä¸æ˜¯å›žæ–‡ã€‚ è§£æ³•1:æ£€æŸ¥æˆ‘ä»¬å¯¹ä¹±åºé—®é¢˜çš„ç¬¬ä¸€ä¸ªè§£æ³•æ˜¯æ£€æŸ¥ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å‡ºçŽ°åœ¨ç¬¬äºŒä¸ªå­—ç¬¦ä¸²ä¸­ã€‚å¦‚æžœå¯ä»¥æ£€éªŒåˆ°æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œé‚£ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸€å®šæ˜¯å›žæ–‡ã€‚å¯ä»¥é€šè¿‡ç”¨ None æ›¿æ¢å­—ç¬¦æ¥å®Œæˆæ£€æŸ¥ã€‚ä½†æ˜¯ï¼Œç”±äºŽ Python å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯å°†ç¬¬äºŒä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºåˆ—è¡¨ã€‚ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦å¯ä»¥é€šè¿‡æ£€æŸ¥åœ¨ç¬¬äºŒä¸ªåˆ—è¡¨ä¸­æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æžœå­˜åœ¨ï¼Œæ›¿æ¢æˆ Noneã€‚ 12345678910111213141516171819202122232425def anagramSolution1(s1,s2): alist = list(s2) pos1 = 0 stillOK = True while pos1 &lt; len(s1) and stillOK: pos2 = 0 found = False while pos2 &lt; len(alist) and not found: if s1[pos1] == alist[pos2]: found = True else: pos2 = pos2 + 1 if found: alist[pos2] = None else: stillOK = False pos1 = pos1 + 1 return stillOKprint(anagramSolution1('abcd','dcba')) s1 çš„æ¯ä¸ªå­—ç¬¦éƒ½ä¼šåœ¨ s2 ä¸­è¿›è¡Œæœ€å¤š n ä¸ªå­—ç¬¦çš„è¿­ä»£ s2 åˆ—è¡¨ä¸­çš„ n ä¸ªä½ç½®å°†è¢«è®¿é—®ä¸€æ¬¡æ¥åŒ¹é…æ¥è‡ª s1 çš„å­—ç¬¦ã€‚è®¿é—®æ¬¡æ•°å¯ä»¥å†™æˆ 1 åˆ° n æ•´æ•°çš„å’Œï¼Œå¯ä»¥å†™æˆ å½“ n å˜å¤§ï¼Œn^2 è¿™é¡¹å æ®ä¸»å¯¼ï¼Œ1/2 å¯ä»¥å¿½ç•¥ã€‚æ‰€ä»¥è¿™ä¸ªç®—æ³•å¤æ‚åº¦ä¸º O(n^2 )ã€‚ è§£æ³•2:æŽ’åºå’Œæ¯”è¾ƒå¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯åˆ©ç”¨è¿™ä¹ˆä¸€ä¸ªäº‹å®žï¼Œå³ä½¿ s1,s2 ä¸åŒï¼Œå®ƒä»¬åªæœ‰ç”±å®Œå…¨ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œå®ƒä»¬æ‰æ˜¯å›žæ–‡ã€‚æ‰€ä»¥ï¼Œå¦‚æžœæˆ‘ä»¬æŒ‰ç…§å­—æ¯é¡ºåºæŽ’åˆ—æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œä»Ž a åˆ° zï¼Œå¦‚æžœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ºå›žæ–‡ã€‚ 12345678910111213def anagramSolution2(s1,s2): alist1 = list(s1) alist2 = list(s2) alist1.sort() alist2.sort() if alist1 == alist2: return True else: return Falseprint(anagramSolution2('abcde','edcba')) è¿™ä¸ªç®—æ³•æ¯”è¾ƒç®€å•ï¼Œåªç”¨åˆ°äº†æŽ’åºç®—æ³•ï¼Œé‚£ä¹ˆæŽ’åºç®—æ³•çš„å¤æ‚åº¦è¿˜æ˜¯å¤šå°‘å‘¢ï¼Ÿ åœ¨è¿™é‡Œæ‰¾åˆ°äº†ç­”æ¡ˆ pythonä¸­çš„sortedç®—æ³•ï¼Œç½‘ä¸Šæœ‰äººæ’°æ–‡ï¼Œè¯´æ¯”è¾ƒä½Žçº§ã€‚å…¶å®žä¸ç„¶ï¼Œé€šè¿‡é˜…è¯»å®˜æ–¹æ–‡æ¡£ï¼Œå‘çŽ°pythonä¸­çš„sortedæŽ’åºï¼ŒçœŸçš„æ˜¯é«˜å¤§ä¸Šï¼Œç”¨çš„Timsortç®—æ³•ã€‚ä»€ä¹ˆæ˜¯Timsortï¼Œè¯·çœ‹ wikiçš„è§£é‡Šï¼šhttp://en.wikipedia.org/wiki/Timsort å¦å¤–ï¼Œå›½å†…æœ‰ä¸€ä¸ªæ–‡æ¡£ï¼Œé€‚å½“ç¿»è¯‘ï¼šhttp://blog.csdn.net/yangzhongblog/article/details/8184707ï¼Œè¿™é‡Œæˆªå–ä¸€ä¸ªä¸åŒæŽ’åºç®—æ³•æ¯”è¾ƒçš„å›¾ç¤ºï¼Œå°±æ˜Žç™½sortedçš„å¨åŠ›äº†ã€‚ ä»Žæ—¶é—´å¤æ‚åº¦æ¥çœ‹ï¼ŒTimsortæ˜¯å¨æ­¦çš„ã€‚ ä»Žç©ºé—´å¤æ‚åº¦æ¥è®²ï¼Œéœ€è¦çš„å¼€é”€åœ¨æ•°é‡å¤§çš„æ—¶å€™ä¼šå¢žå¤§ã€‚ è§£æ³•3: ç©·ä¸¾æ³•è§£å†³è¿™ç±»é—®é¢˜çš„å¼ºåŠ›æ–¹æ³•æ˜¯ç©·ä¸¾æ‰€æœ‰å¯èƒ½æ€§ã€‚ å¯¹äºŽå›žæ–‡æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆ s1 çš„æ‰€æœ‰ä¹±åºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œç„¶åŽæŸ¥çœ‹æ˜¯ä¸æ˜¯æœ‰ s2ã€‚è¿™ç§æ–¹æ³•æœ‰ä¸€ç‚¹å›°éš¾ã€‚å½“ s1 ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ä¸²æ—¶ï¼Œç¬¬ä¸€ä¸ªä½ç½®æœ‰ n ç§å¯èƒ½ï¼Œç¬¬äºŒä¸ªä½ç½®æœ‰ n-1 ç§ï¼Œç¬¬ä¸‰ä¸ªä½ç½®æœ‰ n-3 ç§ï¼Œç­‰ç­‰ã€‚æ€»æ•°ä¸º nâˆ—(nâˆ’1)âˆ—(nâˆ’2)âˆ—...âˆ—3âˆ—2âˆ—1nâˆ—(nâˆ’1)âˆ—(nâˆ’2)âˆ—...âˆ—3âˆ—2âˆ—1ï¼Œ å³ n! ã€‚ è™½ç„¶ä¸€äº›å­—ç¬¦ä¸²å¯èƒ½æ˜¯é‡å¤çš„ï¼Œç¨‹åºä¹Ÿä¸å¯èƒ½æå‰çŸ¥é“è¿™æ ·ï¼Œæ‰€ä»¥ä»–ä»ç„¶ä¼šç”Ÿæˆ n! ä¸ªå­—ç¬¦ä¸²ã€‚äº‹å®žè¯æ˜Žï¼Œn! æ¯” n^2 å¢žé•¿è¿˜å¿«ï¼Œäº‹å®žä¸Šï¼Œå¦‚æžœ s1 æœ‰ 20ä¸ªå­—ç¬¦é•¿ï¼Œåˆ™å°†æœ‰ 20! = 2,432,902,008,176,640,000 ä¸ªå­—ç¬¦ä¸²äº§ç”Ÿã€‚å¦‚æžœæˆ‘ä»¬æ¯ç§’å¤„ç†ä¸€ç§å¯èƒ½å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆéœ€è¦ 77,146,816,596 å¹´æ‰èƒ½è¿‡å®Œæ•´ä¸ªåˆ—è¡¨ã€‚ æ‰€ä»¥å½“ç„¶ä¸ä¼šé‡‡å–è¿™ç§æ–¹æ¡ˆäº†ã€‚ è§£æ³•4: è®¡æ•°å’Œæ¯”è¾ƒæˆ‘ä»¬æœ€ç»ˆè§£å†³å›žæ–‡çš„æ–¹æ³•æ˜¯åˆ©ç”¨ä¸¤ä¸ªä¹±åºå­—ç¬¦ä¸²å…·æœ‰ç›¸åŒçš„ a, b, c ç­‰ç­‰çš„äº‹å®žã€‚ æˆ‘ä»¬é¦–å…ˆè®¡ç®—çš„æ˜¯æ¯ä¸ªå­—æ¯å‡ºçŽ°çš„æ¬¡æ•°ã€‚ç”±äºŽæœ‰ 26 ä¸ªå¯èƒ½çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å°±ç”¨ ä¸€ä¸ªé•¿åº¦ä¸º 26 çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå¯èƒ½çš„å­—ç¬¦å ä¸€ä¸ªä½ç½®ã€‚æ¯æ¬¡çœ‹åˆ°ä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦ï¼Œå°±å¢žåŠ è¯¥ä½ç½®çš„è®¡æ•°å™¨ã€‚æœ€åŽå¦‚æžœä¸¤ä¸ªåˆ—è¡¨çš„è®¡æ•°å™¨ä¸€æ ·ï¼Œåˆ™å­—ç¬¦ä¸²ä¸ºä¹±åºå­—ç¬¦ä¸²ã€‚ 1234567891011121314151617181920212223def anagramSolution4(s1,s2): c1 = [0]*26 c2 = [0]*26 for i in range(len(s1)): pos = ord(s1[i])-ord('a') c1[pos] = c1[pos] + 1 for i in range(len(s2)): pos = ord(s2[i])-ord('a') c2[pos] = c2[pos] + 1 j = 0 stillOK = True while j&lt;26 and stillOK: if c1[j]==c2[j]: j = j + 1 else: stillOK = False return stillOKprint(anagramSolution4('apple','pleap')) åŒæ ·ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ‰å¤šä¸ªè¿­ä»£ï¼Œä½†æ˜¯å’Œç¬¬ä¸€ä¸ªè§£æ³•ä¸ä¸€æ ·ï¼Œå®ƒä¸æ˜¯åµŒå¥—çš„ã€‚ä¸¤ä¸ªè¿­ä»£éƒ½æ˜¯ n, ç¬¬ä¸‰ä¸ªè¿­ä»£ï¼Œæ¯”è¾ƒä¸¤ä¸ªè®¡æ•°åˆ—è¡¨ï¼Œéœ€è¦ 26 æ­¥ï¼Œå› ä¸ºæœ‰ 26 ä¸ªå­—æ¯ã€‚ä¸€å…± T(n)=2n+26T(n)=2n+26ï¼Œå³ O(n)ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªçº¿æ€§é‡çº§çš„ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å¦‚æžœè®©æˆ‘è‡ªå·±æ¥é€‰æ‹©ï¼Œæˆ‘å¯èƒ½ä¼šé€‰ç¬¬äºŒç§ï¼Œç¬¬äºŒç§æœ€ç®€å•ï¼Œä¹Ÿæœ€å¥½ç†è§£ã€‚ä½†æ˜¯æœ€åŽçš„ç»“è®ºè¡¨æ˜Ž è§£æ³•4 æ‰æ˜¯æœ€ä¼˜è§£æ³•ï¼ŒæŽ’åºå›ºç„¶ç®€å•ï¼Œä½†æ˜¯ä½†æ•°é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯èƒ½è¿œä¸æ­¢æˆ‘ä»¬æƒ³çš„é‚£ä¹ˆç®€å•ã€‚ åœ¨ç»“æŸè¿™ä¸ªä¾‹å­ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥è®¨è®ºä¸‹ç©ºé—´èŠ±è´¹ï¼Œè™½ç„¶æœ€åŽä¸€ä¸ªæ–¹æ¡ˆåœ¨çº¿æ€§æ—¶é—´æ‰§è¡Œï¼Œä½†å®ƒéœ€è¦é¢å¤–çš„å­˜å‚¨æ¥ä¿å­˜ä¸¤ä¸ªå­—ç¬¦è®¡æ•°åˆ—è¡¨ã€‚æ¢å¥è¯è¯´ï¼Œè¯¥ç®—æ³•ç‰ºç‰²äº†ç©ºé—´ä»¥èŽ·å¾—æ—¶é—´ã€‚ å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨ç©ºé—´å’Œæ—¶é—´ä¹‹é—´åšå‡ºæƒè¡¡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œé¢å¤–ç©ºé—´ä¸é‡è¦ï¼Œä½†æ˜¯å¦‚æžœæœ‰æ•°ç™¾ä¸‡ä¸ªå­—ç¬¦ï¼Œå°±éœ€è¦å…³æ³¨ä¸‹ã€‚ä½œä¸ºä¸€ä¸ªè®¡ç®—æœºç§‘å­¦å®¶ï¼Œå½“ç»™å®šä¸€ä¸ªç‰¹å®šçš„ç®—æ³•ï¼Œå°†ç”±ä½ å†³å®šå¦‚ä½•ä½¿ç”¨è®¡ç®—èµ„æºã€‚ å¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡å‡º å›¾ç‰‡æ¥æº å„ä½ä¸‹æœŸè§ï¼Œä¸èŠäº†ï¼Œåˆè¯¥æ¬ç –äº†ã€‚ã€‚ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨loggingç®¡ç†çˆ¬è™«]]></title>
      <url>%2F2018%2F01%2F15%2F%E4%BD%BF%E7%94%A8logging%E7%AE%A1%E7%90%86%E7%88%AC%E8%99%AB%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåå››ç¯‡åŽŸåˆ›æ–‡ç«  ä½¿ç”¨æ—¥å¿—è®°å½•ç¨‹åºè¿è¡ŒçŠ¶æ€ æ–‡æ¡£ æ—¥å¿— æ¨¡å—è‡ª2.3ç‰ˆæœ¬å¼€å§‹ä¾¿æ˜¯Pythonæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ã€‚å®ƒè¢«ç®€æ´çš„æè¿°åœ¨ PEP 282ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œé™¤äº† åŸºç¡€æ—¥å¿—æŒ‡å— éƒ¨åˆ†ï¼Œè¯¥æ–‡æ¡£å¹¶ä¸å®¹æ˜“é˜…è¯»ã€‚ æ—¥å¿—çš„ä¸¤ä¸ªç›®çš„ï¼š è¯Šæ–­æ—¥å¿— è®°å½•ä¸Žåº”ç”¨ç¨‹åºæ“ä½œç›¸å…³çš„æ—¥å¿—ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·é‡åˆ°çš„æŠ¥é”™ä¿¡æ¯ï¼Œ å¯é€šè¿‡æœç´¢è¯Šæ–­æ—¥å¿—èŽ·å¾—ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ å®¡è®¡æ—¥å¿— ä¸ºå•†ä¸šåˆ†æžè€Œè®°å½•çš„æ—¥å¿—ã€‚ä»Žå®¡è®¡æ—¥å¿—ä¸­ï¼Œå¯æå–ç”¨æˆ·çš„äº¤æ˜“ä¿¡æ¯ï¼Œ å¹¶ç»“åˆå…¶ä»–ç”¨æˆ·èµ„æ–™æž„æˆç”¨æˆ·æŠ¥å‘Šæˆ–è€…ç”¨æ¥ä¼˜åŒ–å•†ä¸šç›®æ ‡ã€‚ â€¦ æˆ–è€…æ‰“å°?å½“éœ€è¦åœ¨å‘½ä»¤è¡Œåº”ç”¨ä¸­æ˜¾ç¤ºå¸®åŠ©æ–‡æ¡£æ—¶ï¼Œ æ‰“å° æ˜¯ä¸€ä¸ªç›¸å¯¹äºŽæ—¥å¿—æ›´å¥½çš„é€‰æ‹©ã€‚ è€Œåœ¨å…¶ä»–æ—¶å€™ï¼Œæ—¥å¿—æ€»èƒ½ä¼˜äºŽ æ‰“å° ï¼Œç†ç”±å¦‚ä¸‹ï¼š æ—¥å¿—äº‹ä»¶äº§ç”Ÿçš„ æ—¥å¿—è®°å½• ï¼ŒåŒ…å«æ¸…æ™°å¯ç”¨çš„è¯Šæ–­ä¿¡æ¯ï¼Œå¦‚æ–‡ä»¶åç§°ã€è·¯å¾„ã€å‡½æ•°åå’Œè¡Œå·ç­‰ã€‚ åŒ…å«æ—¥å¿—æ¨¡å—çš„åº”ç”¨ï¼Œé»˜è®¤å¯é€šè¿‡æ ¹è®°å½•å™¨å¯¹åº”ç”¨çš„æ—¥å¿—æµè¿›è¡Œè®¿é—®ï¼Œé™¤éžæ‚¨å°†æ—¥å¿—è¿‡æ»¤äº†ã€‚ å¯é€šè¿‡ logging.Logger.setLevel() æ–¹æ³•æœ‰é€‰æ‹©åœ°è®°å½•æ—¥å¿—ï¼Œ æˆ–å¯é€šè¿‡è®¾ç½® logging.Logger.disabled å±žæ€§ä¸º True æ¥ç¦ç”¨ã€‚ åº“ä¸­çš„æ—¥å¿—æ—¥å¿—æŒ‡å— ä¸­å« åº“æ—¥å¿—é…ç½® çš„è¯´æ˜Žã€‚ç”±äºŽæ˜¯ ç”¨æˆ· ï¼Œè€Œéžåº“æ¥æŒ‡æ˜Žå¦‚ä½•å“åº”æ—¥å¿—äº‹ä»¶ï¼Œ å› æ­¤è¿™é‡Œæœ‰ä¸€ä¸ªå€¼å¾—åå¤è¯´æ˜Žçš„å¿ å‘Šï¼š æ³¨è§£å¼ºçƒˆå»ºè®®ä¸è¦å‘æ‚¨çš„åº“æ—¥å¿—ä¸­åŠ å…¥é™¤NullHandlerå¤–çš„å…¶å®ƒå¤„ç†ç¨‹åºã€‚ åœ¨åº“ä¸­ï¼Œå£°æ˜Žæ—¥å¿—çš„æœ€ä½³æ–¹å¼æ˜¯é€šè¿‡ __name__ å…¨å±€å˜é‡ï¼š logging æ¨¡å—é€šè¿‡ç‚¹(dot)è¿ç®—ç¬¦åˆ›å»ºå±‚çº§æŽ’åˆ—çš„æ—¥å¿—ï¼Œå› æ­¤ï¼Œç”¨ __name__ å¯ä»¥é¿å…åå­—å†²çªã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¥è‡ª requests èµ„æº çš„æœ€ä½³å®žè·µçš„ä¾‹å­ â€”â€” æŠŠå®ƒæ”¾ç½®åœ¨æ‚¨çš„ __init__.py æ–‡ä»¶ä¸­12import logginglogging.getLogger(__name__).addHandler(logging.NullHandler()) åº”ç”¨ç¨‹åºä¸­çš„æ—¥å¿—åº”ç”¨ç¨‹åºå¼€å‘çš„æƒå¨æŒ‡å—ï¼Œ åº”ç”¨çš„12è¦ç´  ï¼Œä¹Ÿåœ¨å…¶ä¸­ä¸€èŠ‚æè¿°äº† æ—¥å¿—çš„ä½œç”¨ ã€‚å®ƒç‰¹åˆ«å¼ºè°ƒå°†æ—¥å¿—è§†ä¸ºäº‹ä»¶æµï¼Œ å¹¶å°†å…¶å‘é€è‡³ç”±åº”ç”¨çŽ¯å¢ƒæ‰€å¤„ç†çš„æ ‡å‡†è¾“å‡ºä¸­ã€‚ é…ç½®æ—¥å¿—è‡³å°‘æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š ä½¿ç”¨INIæ ¼å¼æ–‡ä»¶ï¼š ä¼˜ç‚¹: ä½¿ç”¨ logging.config.listen() å‡½æ•°ç›‘å¬socketï¼Œå¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ›´æ–°é…ç½® ç¼ºç‚¹: é€šè¿‡æºç æŽ§åˆ¶æ—¥å¿—é…ç½®è¾ƒå°‘ï¼ˆ ä¾‹å¦‚ å­ç±»åŒ–å®šåˆ¶çš„è¿‡æ»¤å™¨æˆ–è®°å½•å™¨ï¼‰ã€‚ ä½¿ç”¨å­—å…¸æˆ–JSONæ ¼å¼æ–‡ä»¶ï¼š ä¼˜ç‚¹: é™¤äº†å¯åœ¨è¿è¡Œæ—¶åŠ¨æ€æ›´æ–°ï¼Œåœ¨Python 2.6ä¹‹åŽï¼Œè¿˜å¯é€šè¿‡ json æ¨¡å—ä»Žå…¶å®ƒæ–‡ä»¶ä¸­å¯¼å…¥é…ç½®ã€‚ ç¼ºç‚¹: å¾ˆéš¾é€šè¿‡æºç æŽ§åˆ¶æ—¥å¿—é…ç½®ã€‚ ä½¿ç”¨æºç ï¼š ä¼˜ç‚¹: å¯¹é…ç½®ç»å¯¹çš„æŽ§åˆ¶ã€‚ ç¼ºç‚¹: å¯¹é…ç½®çš„æ›´æ”¹éœ€è¦å¯¹æºç è¿›è¡Œä¿®æ”¹ã€‚ é€šè¿‡INIæ–‡ä»¶è¿›è¡Œé…ç½®çš„ä¾‹å­æˆ‘ä»¬å‡è®¾æ–‡ä»¶åä¸º logging_config.ini ã€‚å…³äºŽæ–‡ä»¶æ ¼å¼çš„æ›´å¤šç»†èŠ‚ï¼Œè¯·å‚è§ æ—¥å¿—æŒ‡å— ä¸­çš„ æ—¥å¿—é…ç½® éƒ¨åˆ†ã€‚ 123456789101112131415161718192021[loggers]keys=root[handlers]keys=stream_handler[formatters]keys=formatter[logger_root]level=DEBUGhandlers=stream_handler[handler_stream_handler]class=StreamHandlerlevel=DEBUGformatter=formatterargs=(sys.stderr,)[formatter_formatter]format=%(asctime)s %(name)-12s %(levelname)-8s %(message)s ç„¶åŽåœ¨æºç ä¸­è°ƒç”¨ logging.config.fileConfig() æ–¹æ³•ï¼š123456import loggingfrom logging.config import fileConfigfileConfig('logging_config.ini')logger = logging.getLogger()logger.debug('often makes a very good meal of %s', 'visiting tourists') é€šè¿‡å­—å…¸è¿›è¡Œé…ç½®çš„ä¾‹å­Python 2.7ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å­—å…¸å®žçŽ°è¯¦ç»†é…ç½®ã€‚PEP 391 åŒ…å«äº†ä¸€ç³»åˆ—å­—å…¸é…ç½®çš„å¼ºåˆ¶å’Œ éžå¼ºåˆ¶çš„å…ƒç´ ã€‚123456789101112131415161718192021222324import loggingfrom logging.config import dictConfiglogging_config = dict( version = 1, formatters = &#123; 'f': &#123;'format': '%(asctime)s %(name)-12s %(levelname)-8s %(message)s'&#125; &#125;, handlers = &#123; 'h': &#123;'class': 'logging.StreamHandler', 'formatter': 'f', 'level': logging.DEBUG&#125; &#125;, root = &#123; 'handlers': ['h'], 'level': logging.DEBUG, &#125;,)dictConfig(logging_config)logger = logging.getLogger()logger.debug('often makes a very good meal of %s', 'visiting tourists') é€šè¿‡æºç ç›´æŽ¥é…ç½®çš„ä¾‹å­ 1234567891011import logginglogger = logging.getLogger()handler = logging.StreamHandler()formatter = logging.Formatter( '%(asctime)s %(name)-12s %(levelname)-8s %(message)s')handler.setFormatter(formatter)logger.addHandler(handler)logger.setLevel(logging.DEBUG)logger.debug('often makes a very good meal of %s', 'visiting tourists') å®˜æ–¹æ–‡æ¡£è¯´å®Œäº†ï¼Œæ¥çœ‹çœ‹å…·ä½“çš„åº”ç”¨ã€‚ é»˜è®¤çš„æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º WARNING ï¼ˆæ—¥å¿—çº§åˆ«ç­‰çº§ CRITICAL &gt; ERROR &gt; WARNING &gt; INFO &gt; DEBUG &gt; NOTSETï¼‰, å°äºŽ WARNING çº§åˆ«çš„æ—¥å¿—éƒ½ä¸è¾“å‡º, å¤§äºŽç­‰äºŽ WARNING çº§åˆ«çš„æ—¥å¿—éƒ½ä¼šè¾“å‡ºã€‚ ç®€å•çš„å°†æ—¥å¿—æ‰“å°åˆ°å±å¹•12345678910111213141516171819#!/usr/bin/env python# -*- coding: utf8 -*-import loggingif __name__ == '__main__': logging.basicConfig(level=logging.DEBUG, format='%(asctime)s %(filename)s [line:%(lineno)d] %(levelname)s %(message)s', datefmt='%a, %d %b %Y %H:%M:%S', filename='test.log', filemode='w') console = logging.StreamHandler() console.setLevel(logging.WARNING) formatter=logging.Formatter('%(name)-12s: %(levelname)-8s %(message)s') console.setFormatter(formatter) logging.getLogger('').addHandler(console) logging.debug('This is DEBUG') logging.info('This is INFO') logging.warning('This is WARNING') è¾“å‡º:1root : WARNING This is WARNING test.logæ–‡ä»¶ä¸­åŒ…å«ï¼š123Mon, 15 Jan 2018 20:19:45 sfda.py [line:90] DEBUG This is DEBUGMon, 15 Jan 2018 20:19:45 sfda.py [line:91] INFO This is INFOMon, 15 Jan 2018 20:19:45 sfda.py [line:92] WARNING This is WARNING æ³¨æ„ï¼šç”±äºŽæ—¥å¿—å†™å…¥æ¨¡å¼è®¾ç½®ä¸º w ï¼Œå› æ­¤é‡å¤è¿è¡Œæ—¶ä¼šå°†ä¹‹å‰çš„æ—¥å¿—æ¸…ç©ºã€‚ logging.basicConfig å‡½æ•°å„å‚æ•°: 123456789101112131415161718filename: æŒ‡å®šæ—¥å¿—æ–‡ä»¶åfilemode: å’Œfileå‡½æ•°æ„ä¹‰ç›¸åŒï¼ŒæŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æ‰“å¼€æ¨¡å¼ï¼Œâ€™wâ€™æˆ–â€™aâ€™format: æŒ‡å®šè¾“å‡ºçš„æ ¼å¼å’Œå†…å®¹ï¼Œformatå¯ä»¥è¾“å‡ºå¾ˆå¤šæœ‰ç”¨ä¿¡æ¯ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤º:%(levelno)s: æ‰“å°æ—¥å¿—çº§åˆ«çš„æ•°å€¼%(levelname)s: æ‰“å°æ—¥å¿—çº§åˆ«åç§°%(pathname)s: æ‰“å°å½“å‰æ‰§è¡Œç¨‹åºçš„è·¯å¾„ï¼Œå…¶å®žå°±æ˜¯sys.argv[0]%(filename)s: æ‰“å°å½“å‰æ‰§è¡Œç¨‹åºå%(funcName)s: æ‰“å°æ—¥å¿—çš„å½“å‰å‡½æ•°%(lineno)d: æ‰“å°æ—¥å¿—çš„å½“å‰è¡Œå·%(asctime)s: æ‰“å°æ—¥å¿—çš„æ—¶é—´%(thread)d: æ‰“å°çº¿ç¨‹ID%(threadName)s: æ‰“å°çº¿ç¨‹åç§°%(process)d: æ‰“å°è¿›ç¨‹ID%(message)s: æ‰“å°æ—¥å¿—ä¿¡æ¯datefmt: æŒ‡å®šæ—¶é—´æ ¼å¼ï¼ŒåŒtime.strftime()level: è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤ä¸ºlogging.WARNINGstream: æŒ‡å®šå°†æ—¥å¿—çš„è¾“å‡ºæµï¼Œå¯ä»¥æŒ‡å®šè¾“å‡ºåˆ°sys.stderr,sys.stdoutæˆ–è€…æ–‡ä»¶ï¼Œé»˜è®¤è¾“å‡ºåˆ°sys.stderrï¼Œå½“streamå’ŒfilenameåŒæ—¶æŒ‡å®šæ—¶ï¼Œstreamè¢«å¿½ç•¥ logging ä¸‰å¤§æ¨¡å—ï¼š Logger , Handler ï¼Œ Formatlogger logger é€šè¿‡ getLogger å‡½æ•°å¾—åˆ°ï¼Œ å¯ä»¥åœ¨ä¸åŒçš„æ¨¡å—ä¸­ä½¿ç”¨ä¸åŒçš„ logger123import logginglogger = logging.getLogger(__name__)logger.debug('some infomation') Handler handler æœ‰å¤šç§ï¼Œ å¯ä»¥è®°å½•åˆ° consoleï¼Œ æˆ–è€…åˆ°æ–‡ä»¶ï¼Œ æ–‡ä»¶ä¹Ÿå¯ä»¥è‡ªåŠ¨ rotateï¼Œ å¸¸ç”¨çš„å‡ ä¸ª handler StreamHandler æ‰“å°åˆ°ç»ˆç«¯ FileHandler ä¿å­˜åˆ°æ–‡ä»¶ RotatingFileHandler ä¿å­˜åˆ°æ–‡ä»¶ï¼Œ è¾¾åˆ°ä¸€å®šå¤§å°ä¹‹åŽå¤‡ä»½æ–‡ä»¶ã€‚ TimedRotatingFileHandler å®šæ—¶å¤‡ä»½ Format Formatter å¯¹è±¡è®¾ç½®æ—¥å¿—ä¿¡æ¯æœ€åŽçš„è§„åˆ™ã€ç»“æž„å’Œå†…å®¹ï¼Œé»˜è®¤çš„æ—¶é—´æ ¼å¼ä¸º %Y-%m-%d %H:%M:%S Scrapy ä¸Ž Logging æ–‡æ¡£ Scrapy uses Pythonâ€™s builtin logging system for event logging. Weâ€™ll provide some simple examples to get you started, but for more advanced use-cases itâ€™s strongly suggested to read thoroughly its documentation. Scrapyä½¿ç”¨Pythonçš„å†…ç½®æ—¥å¿—è®°å½•ç³»ç»Ÿè¿›è¡Œäº‹ä»¶æ—¥å¿—è®°å½•ã€‚ æˆ‘ä»¬å°†æä¾›ä¸€äº›ç®€å•çš„ç¤ºä¾‹æ¥å¸®åŠ©æ‚¨å¼€å§‹ï¼Œä½†å¯¹äºŽæ›´é«˜çº§çš„ç”¨ä¾‹ï¼Œå¼ºçƒˆå»ºè®®æ‚¨ä»”ç»†é˜…è¯»å…¶æ–‡æ¡£ã€‚ Log levels logging.CRITICAL - for critical errors (highest severity) logging.ERROR - for regular errors logging.WARNING - for warning messages logging.INFO - for informational messages logging.DEBUG - for debugging messages (lowest severity) How to log messages quick example 123import logginglogger = logging.getLogger()logger.warning("This is a warning") Logging from Spidersè¯¥è®°å½•å™¨æ˜¯ä½¿ç”¨Spiderçš„åç§°åˆ›å»ºçš„ï¼Œä½†æ˜¯æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ‚¨æƒ³è¦çš„è‡ªå®šä¹‰Pythonè®°å½•å™¨ã€‚ ä¾‹å¦‚ï¼š 123456789101112import loggingimport scrapylogger = logging.getLogger('mycustomlogger')class MySpider(scrapy.Spider): name = 'myspider' start_urls = ['https://scrapinghub.com'] def parse(self, response): logger.info('Parse function called on %s', response.url) åœ¨middlewaresä¸­åº”ç”¨12345678import logginglogger = logging.getLogger(__name__)class ProxyMiddleware(object): def process_request(self, request, spider): request.meta['proxy'] = random.choice(proxy_list) spider.logger.info('get ip: &#123;&#125;'.format(request.meta['proxy'])) ä½¿ç”¨Scrapyè®°å½•çˆ¬å–æ—¥å¿—åœ¨ settings.py ä¸­ä¿®æ”¹:12LOG_STDOUT = TrueLOG_FILE = 'scrapy_log.txt' ç„¶åŽå¼€å§‹è¿è¡Œçˆ¬è™«ï¼Œæ—¥å¿—ä¸ä¼šæ‰“å°ï¼Œä¼šä¿å­˜åˆ° scrapy_log.txt æ–‡ä»¶ä¸­ã€‚ ä½¿ç”¨errbacksåœ¨è¯·æ±‚å¤„ç†ä¸­æ•èŽ·å¼‚å¸¸è¯·æ±‚çš„errbackæ˜¯åœ¨å¤„ç†å¼‚å¸¸æ—¶è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ å®ƒæŽ¥æ”¶Twisted Failureå®žä¾‹ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ç”¨äºŽè·Ÿè¸ªè¿žæŽ¥å»ºç«‹è¶…æ—¶ï¼ŒDNSé”™è¯¯ç­‰ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªçˆ¬è™«æ—¥å¿—è®°å½•æ‰€æœ‰çš„é”™è¯¯å’Œæ•æ‰ä¸€äº›ç‰¹å®šçš„é”™è¯¯ï¼Œä¾‹å­ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import scrapyfrom scrapy.spidermiddlewares.httperror import HttpErrorfrom twisted.internet.error import DNSLookupErrorfrom twisted.internet.error import TimeoutError, TCPTimedOutErrorclass ErrbackSpider(scrapy.Spider): name = "errback_example" start_urls = [ "http://www.httpbin.org/", # HTTP 200 expected "http://www.httpbin.org/status/404", # Not found error "http://www.httpbin.org/status/500", # server issue "http://www.httpbin.org:12345/", # non-responding host, timeout expected "http://www.httphttpbinbin.org/", # DNS error expected ] def start_requests(self): for u in self.start_urls: yield scrapy.Request(u, callback=self.parse_httpbin, errback=self.errback_httpbin, dont_filter=True) def parse_httpbin(self, response): self.logger.info('Got successful response from &#123;&#125;'.format(response.url)) # do something useful here... def errback_httpbin(self, failure): # log all failures self.logger.error(repr(failure)) # in case you want to do something special for some errors, # you may need the failure's type: if failure.check(HttpError): # these exceptions come from HttpError spider middleware # you can get the non-200 response response = failure.value.response self.logger.error('HttpError on %s', response.url) elif failure.check(DNSLookupError): # this is the original request request = failure.request self.logger.error('DNSLookupError on %s', request.url) elif failure.check(TimeoutError, TCPTimedOutError): request = failure.request self.logger.error('TimeoutError on %s', request.url)]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[2017 æ¢¦é†’æ—¶åˆ†]]></title>
      <url>%2F2017%2F12%2F31%2F2017-%E6%A2%A6%E9%86%92%E6%97%B6%E5%88%86%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  é¦–å…ˆè¯´è¯´è‡ªå·±å§ï¼Œå°æ­ªã€æ¥è‡ªæ¹–åŒ—ã€åœ¨æ­¦æ±‰ä¸­å—æ°‘æ—å¤§å­¦æœ¬ç§‘ç¤¾ä¼šå­¦ä¸“ä¸šï¼Œç›®å‰åœ¨åŒ—æ¼‚ï¼ŒèŒä½æ˜¯å®¢æˆ·æ”¯æŒ&amp;çˆ¬è™«å·¥ç¨‹å¸ˆã€‚ å…ˆè¯´è¯´è‡ªå·±çš„å¤§å­¦å§ï¼Œå¤§å­¦æ—¶åŸºæœ¬æ˜¯ä¸çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆï¼Œä¹Ÿæ²¡æœ‰æ€è€ƒè¿‡è‡ªå·±ä»¥åŽåŽ»åšä»€ä¹ˆè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è¯´æ˜¯çŽ©äº†ä¸‰å¹´ï¼Œåˆ°äº†å¤§å››ï¼Œé¢ä¸´ç€æ¯•ä¸šæ‰¾å·¥ä½œçš„åŽ‹åŠ›ï¼Œå‡ºåŽ»æ‰¾å®žä¹ ï¼Œå¯æ˜¯è‡ªå·±å•¥ä¹Ÿä¸ä¼šå•Šã€‚å°±æ˜¯åœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œæˆ‘æŽ¥è§¦åˆ°äº†Pythonã€‚ ç¿»çœ‹è‡ªå·±ä¸€å¹´å‰å†™çš„åšå®¢ Pythonç»ƒä¹ ç¬¬ä¸€é¢˜ï¼Œåœ¨å›¾ç‰‡ä¸ŠåŠ å…¥æ•°å­—ï¼Œæˆ‘åœ¨é‡Œé¢æ›¾ç»è¯´è¿‡è¿™æ ·ä¸€å¥è¯ï¼š æœ€åŽï¼Œæˆ‘æƒ³ç»™è‡ªå·±å®šä¸ªç›®æ ‡ï¼Œ2017å¹´åˆ©ç”¨Pythonæ‰¾åˆ°ä¸€ä»½å·¥ä½œï¼Œå…»æ´»è‡ªå·±ã€‚ åœ¨ä»Šå¤©ï¼Œä¹Ÿå°±æ˜¯2017å¹´12æœˆ31æ—¥ï¼Œæˆ‘å¯ä»¥è‡ªè±ªåœ°è¯´ï¼Œæˆ‘å®Œæˆäº†æˆ‘çš„ç›®æ ‡ã€‚ è¿™å…¶ä¸­å‘ç”Ÿäº†å¾ˆå¤šæœ‰è¶£çš„äº‹ï¼Œæˆ‘çŽ°åœ¨éƒ½è¯´ä¸€è¯´å§ã€‚ ç¬¬ä¸€ä¸ªofferä¸´è¿‘æ¯•ä¸šçš„æ—¶å€™å½“ç„¶ä¹Ÿæœ‰è·‘å®£è®²ä¼šä»€ä¹ˆçš„ï¼Œå„ç§æœºç¼˜å·§åˆä¸‹ï¼Œæ‹¿åˆ°äº†ç¬¬ä¸€ä¸ªofferï¼Œæ˜¯é£Ÿå“è¡Œä¸šçš„ï¼Œå¥½åƒæ˜¯ä»€ä¹ˆè´¨æ£€å‘˜ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±è¿˜æ˜¯æƒ³åŽ»äº’è”ç½‘è¡Œä¸šçš„ï¼Œæ‰€ä»¥æ‹’ç»äº†ã€‚ ç¬¬äºŒä¸ªofferç¬¬äºŒä¸ªæ˜¯æŸæ´¾æ–°é—»ï¼Œå·ç§°å…šåª’æ——ä¸‹çš„åª’ä½“ã€‚åˆšåŽ»çš„æ—¶å€™ï¼Œåšçš„æ˜¯å®¡æ ¸ç±»çš„å·¥ä½œï¼Œæœ€åŽæ‰å‘çŽ°é‡Œé¢çš„å„ç§å‘ã€‚å¥½é™©è‡ªå·±å‘çŽ°çš„æ—©ï¼Œæ—¶é—´å·²ç»æ¥åˆ°17å¹´çš„3æœˆä»½ã€‚ ç¬¬ä¸‰ä¸ªoffer åˆ°3æœˆä»½ï¼Œæˆ‘è¿˜æ²¡æ‰¾åˆ°å·¥ä½œï¼Œä½†æ˜¯è‡ªå·±å¿ƒç°æ„å†·ï¼Œå¾ˆå®³æ€•åˆšæ¯•ä¸šå°±å¤±ä¸šï¼Œä½†æ˜¯åœ¨æ­¦æ±‰æ ¹æœ¬å¾ˆéš¾æ‰¾åˆ°åˆé€‚çš„å·¥ä½œã€‚æ°å¥½åœ¨è¿™ä¸ªæ—¶å€™ï¼Œè®¤è¯†äº†å¤©å–„çš„å‹‡å“¥ï¼Œå¤§å®¶å¯ä»¥åŽ»çœ‹çœ‹å¤©å–„çš„è¯¾ç¨‹ï¼Œéƒ½æ˜¯ä¸€çº¿å¤§ç‰›äººç‰©ï¼Œå¤©å–„æ™ºèƒ½ã€‚ç„¶åŽæˆ‘å°±åŽ»ä¸Šæµ·äº†ï¼ŒåŽ»ä¸Šæµ·çš„ä¸€ä¸ªæœˆæ—¶é—´ï¼Œæˆ‘è‡ªå·±æ”¹å˜æ˜¯éžå¸¸å¤§çš„ã€‚è®¤è¯†äº†å¾ˆå¤šå¤§ä½¬ï¼Œè§è¯†äº†å¾ˆå¤šæ–°çš„æƒ³æ³•ã€‚ åœ¨å¤©å–„åšçš„æ˜¯æ–°åª’ä½“è¿™ä¸€å—ï¼Œä½†æ˜¯å°±æœ‰å†™è¿™æ ·ä¸€ç¯‡æ–‡ç« ï¼Œå«åšä¸ºäº†æ‰¾ä¸€ä»½Pythonå®žä¹ ï¼Œæˆ‘ç”¨çˆ¬è™«æ”¶é›†æ•°æ®ï¼Œå¾ˆå·§çš„äº‹æƒ…æ˜¯ï¼ŒçŽ°åœ¨æˆ‘çš„BOSSçœŸå¥½çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œç„¶åŽå°±è”ç³»æˆ‘äº†ï¼Œç„¶åŽæˆ‘å°±æ¥äº†ã€‚ ç¬¬å››ä¸ªoffer æˆ‘æ˜¯6æœˆä»½æ¥åˆ°åŒ—äº¬çš„ï¼Œåˆ°çŽ°åœ¨å·²ç»æœ‰åŠå¹´äº†ï¼Œä¸€ç›´å‘†åœ¨é€ æ•°ã€‚ åšè¿‡è¿è¥ã€åšè¿‡å®¢æˆ·æ”¯æŒï¼Œæœ€è¿‘å¼€å§‹æŽ¥è§¦é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨Pythonå¼€å‘é¡¹ç›®ï¼Œè™½ç„¶æœ‰å¾ˆå¤šåšå¾—ä¸å¥½çš„åœ°æ–¹ï¼Œä½†æ˜¯å¯¹æˆ‘æ¥è¯´è¿™æ˜¯ä¸€ä¸ªå¼€å§‹ã€‚ æˆ‘æ¯å¤©ä¼šèŠ±å¾ˆå¤šæ—¶é—´åŽ»å­¦ä¹ ï¼ˆå‘¨æœ«é™¤å¤–ï¼Œå› ä¸ºæˆ‘è¦åƒé¸¡ï¼Œhahaï¼‰ï¼Œä¹Ÿä¼šç»å¸¸å†™åšå®¢ï¼Œè®°å½•è‡ªå·±çš„å­¦ä¹ ç»åŽ†ï¼ŒæŽ¥è§¦é¡¹ç›®ä¹‹åŽæ‰å‘çŽ°è‡ªå·±ä»¥å‰çš„å„ç§æ¯›ç—…ï¼Œè¿™äº›éƒ½ä¸æ˜¯é—®é¢˜ï¼ŒåšæŒå­¦ä¹ å°±å¥½ã€‚ è¿™æœŸé—´ï¼Œæˆ‘è¿˜é…åˆé€ æ•°çš„é¦–å¸­çˆ¬è™«å·¥ç¨‹å¸ˆå°Xåˆ¶ä½œäº†ä¸€æœŸPythonçˆ¬è™«è¯¾ç¨‹ï¼Œè¯¾ç¨‹è¿˜æ˜¯æŒºç²¾å½©çš„ï¼Œæˆ‘å­¦ä¹ è¿›é˜¶éƒ¨åˆ†åŽï¼Œæ„Ÿè§‰å¯¹Scrapyæ¡†æž¶å…¥é—¨äº†ã€‚ æœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸æŽ¨èï¼Œå› ä¸ºå­¦Pythonæˆ–è€…çˆ¬è™«æœ€å¥½çš„è¿˜æ˜¯åŽ»çœ‹æ–‡æ¡£ï¼Œæ–‡æ¡£æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚è¿™ç§åŸ¹è®­è¯¾ç¨‹åªæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯åŠæ—¶çš„å¸®ä½ è§£ç­”ç–‘æƒ‘ã€‚ å¥½äº†ï¼Œä¸æ‰¯è¿œäº†ï¼Œç»§ç»­å›žåˆ°ä»Šå¤©çš„ä¸»é¢˜ã€‚ æ€»ç»“2017å¹´å¯¹æˆ‘æ¥è¯´å°±æ˜¯â€œæ¢¦é†’æ—¶åˆ†â€ï¼Œæ€»ç®—æ˜¯åœ¨è¿™ä¸€å¹´å®Œæˆäº†è‡ªå·±çš„æ¢¦æƒ³ï¼ŒæŽ¥ä¸‹æ¥å°±éœ€è¦è‡ªå·±æ›´åŠ åŠªåŠ›ï¼ŒåŽ»å¼¥è¡¥è‡ªå·±æ‰€ç¼ºä¹çš„ã€‚ å¯¹äºŽæˆ‘è¿™ä¸ªæ–‡ç§‘ç”Ÿæ¥è¯´ï¼Œç¡®å®žæ˜¯æŒºä¸å®¹æ˜“çš„ï¼Œä½†æ˜¯å°±åƒæ­Œè¯é‡Œçš„ï¼š æ–°çš„é£Žæš´å·²ç»å‡ºçŽ°æ€Žä¹ˆèƒ½å¤Ÿåœæ»žä¸å‰ç©¿è¶Šæ—¶ç©ºç«­å°½å…¨åŠ›æˆ‘ä¼šæ¥åˆ°ä½ èº«è¾¹å¾®ç¬‘é¢å¯¹å±é™©æ¢¦æƒ³æˆçœŸä¸ä¼šé¥è¿œé¼“èµ·å‹‡æ°”åšå®šå‘å‰å¥‡è¿¹ä¸€å®šä¼šå‡ºçŽ° éžå¸¸æ¬¢è¿Žå¤§å®¶ä¸Žæˆ‘äº¤æµï¼Œæœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥ç›´æŽ¥åœ¨è¯„è®ºä¸­è¯´å‡ºæ¥ï¼Œæˆ‘å®šä¼šçŸ¥æ— ä¸è¨€ã€‚ ä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡äº¤æµï¼š zhang7350 æœ€åŽï¼Œå¦‚æžœä½ ä¹Ÿæƒ³è¦å­¦Pythonæ‰¾å·¥ä½œï¼Œä½ åº”è¯¥å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼š æˆ‘å–œæ¬¢Pythonå—ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡‡é›†æ–¹æ¡ˆç­–ç•¥ä¹‹AppæŠ“åŒ…]]></title>
      <url>%2F2017%2F12%2F23%2F%E9%87%87%E9%9B%86%E6%96%B9%E6%A1%88%E7%AD%96%E7%95%A5%E4%B9%8BApp%E6%8A%93%E5%8C%85%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåäºŒç¯‡åŽŸåˆ›æ–‡ç«  é‡‡é›†æ–¹æ¡ˆç­–ç•¥è®¾è®¡åœ¨ç¾¤é‡Œçœ‹åˆ°æœ‰äººè¯¢é—®é¥¿äº†ä¹ˆçš„å‚æ•°ï¼Œæ­£å¥½æ„Ÿå…´è¶£ï¼Œå°±æ¥æ—¶é—´ä¸€ç•ªã€‚ è¿™é‡Œå¼•ç”¨ä¸‹å¤§ä½¬çš„ä¸€æ®µè¯ï¼š é¦–å…ˆå¤§çš„åœ°æ–¹ï¼Œæˆ‘ä»¬æƒ³æŠ“å–æŸä¸ªæ•°æ®æºï¼Œæˆ‘ä»¬è¦çŸ¥é“å¤§æ¦‚æœ‰å“ªäº›è·¯å¾„å¯ä»¥èŽ·å–åˆ°æ•°æ®æºï¼ŒåŸºæœ¬ä¸Šæ— å¤–ä¹Žä¸‰ç§ï¼š PCç«¯ç½‘ç«™ é’ˆå¯¹ç§»åŠ¨è®¾å¤‡å“åº”å¼è®¾è®¡çš„ç½‘ç«™ï¼ˆä¹Ÿå°±æ˜¯å¾ˆå¤šäººè¯´çš„H5, è™½ç„¶ä¸ä¸€å®šæ˜¯H5ï¼‰ï¼› ç§»åŠ¨App åŽŸåˆ™æ˜¯èƒ½æŠ“ç§»åŠ¨Appçš„ï¼Œæœ€å¥½æŠ“ç§»åŠ¨Appï¼Œå¦‚æžœæœ‰é’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„ç½‘ç«™ï¼Œå°±æŠ“é’ˆå¯¹ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„ç½‘ç«™ï¼Œæœ€åŽè€ƒè™‘PCç½‘ç«™ã€‚å› ä¸ºç§»åŠ¨AppåŸºæœ¬éƒ½æ˜¯APIå¾ˆç®€å•ï¼Œè€Œç§»åŠ¨è®¾å¤‡è®¿é—®ä¼˜åŒ–çš„ç½‘ç«™ä¸€èˆ¬æ¥è®²éƒ½æ˜¯ç»“æž„ç®€å•æ¸…æ™°çš„HTMLï¼Œè€ŒPCç½‘ç«™è‡ªç„¶æ˜¯æœ€å¤æ‚çš„äº†ï¼›é’ˆå¯¹PCç«¯ç½‘ç«™å’Œç§»åŠ¨ç½‘ç«™çš„åšæ³•ä¸€æ ·ï¼Œåˆ†æžæ€è·¯å¯ä»¥ä¸€èµ·è®²ï¼Œç§»åŠ¨Appå•ç‹¬åˆ†æžã€‚ å…¶å®žå¾ˆå¤šç½‘é¡µéƒ½æœ‰ç§»åŠ¨ç«¯ï¼Œåƒå¾®åšï¼Œæˆ‘çŸ¥é“è¿™ä¸‰ä¸ªï¼š weibo.com weibo.cn m.weibo.cn æœ€ç®€å•çš„å½“ç„¶æ˜¯ç¬¬äºŒç§äº†ï¼Œå¯¹äºŽä»Šå¤©çš„å—å®³è€…â€”â€”é¥¿äº†ä¹ˆæ¥è¯´ï¼Œå½“ç„¶ï¼Œé¦–é€‰ä¹Ÿæ˜¯ç§»åŠ¨ç«¯ã€‚ é¥¿äº†ä¹ˆæŠ“åŒ…åˆ†æžè¿™é‡ŒæŠ“åŒ…å·¥å…·é€‰æ‹©Fiddlerï¼Œè¿™é‡Œä¸è®²å¦‚ä½•é…ç½®ï¼Œå…·ä½“å‚è€ƒ ç”¨Fiddlerå¯¹Androidåº”ç”¨è¿›è¡ŒæŠ“åŒ… ä¸‹é¢æ‰“å¼€æ‰‹æœºçš„é¥¿äº†ä¹ˆï¼ŒåŽŸæœ¬ä»¥ä¸ºä¼šæœ‰æ•°æ®ï¼Œç»“æžœï¼Œç«Ÿç„¶æ˜¯è¿™æ · åŽ»è¯¢é—®äº†ä¸“ä¸šäººå£«ï¼Œäº†è§£äº†æœ‰äº›åº”ç”¨ä¸å…è®¸ç”¨æˆ·æŠ“åŒ…ï¼Œä¼šæœ‰ç›¸åº”çš„é™åˆ¶ã€‚å¥½å§ï¼Œè¿™å°±èƒ½éš¾å€’æˆ‘äº†å—ï¼Ÿï¼Ÿ å½“æˆ‘åˆ‡æ¢åˆ°å‘çŽ°ç±»ç›®ä¸‹ï¼Œå‘çŽ°æœ‰å¥‡æ€ªçš„æç¤º åœ¨ç–¯ç‹‚ç‚¹å‡»ç»§ç»­è®¿é—®åŽï¼Œæˆ‘ç»ˆäºŽå¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚ é‚£ä¹ˆå°±å¯ä»¥åœ¨Fiddlerä¸­æŸ¥çœ‹å¯¹åº”çš„æ•°æ®äº†ã€‚è¿™é‡Œç›´æŽ¥æŠŠæŽ¥å£å±•ç¤ºå‡ºæ¥ï¼šé¥¿äº†ä¹ˆæŽ¥å£ æµè§ˆå™¨ç›´æŽ¥æ‰“å¼€ï¼Œè²Œä¼¼æ²¡æœ‰å•¥éªŒè¯ å…·ä½“åˆ†æžé‡Œé¢çš„å‚æ•° 1234offset:20limit:40latitude:39.93245longitude:116.50097 æœ‰4ä¸ªå‚æ•°ï¼Œ offset å’Œ limit å°±å¾ˆå¸¸è§äº†ï¼Œç¿»é¡µå’Œæ¯é¡µçš„æ•°æ®ï¼Œè‡³äºŽ latitude å’Œ longitude ä»”ç»†è§‚å¯Ÿå°±çŸ¥é“ï¼Œç»çº¬åº¦å˜›ï¼ŒæŠŠå®ƒè¯¥ä¿®æ”¹ä¸ºä½ æƒ³é‡‡é›†çš„ä½ç½®çš„ç»çº¬åº¦å°±å¥½ã€‚ æŠ“åŒ…åˆ†æžä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥é‡‡é›†æ•°æ®å°±å¾ˆç®€å•äº†ï¼Œæ•°æ®å­—æ®µæ ‡è¯†ï¼š food_id æ˜¯å•†å“IDï¼ŒæŽ¥å£æ˜¯ï¼šhttps://www.ele.me/restapi/shopping/v1/foods?food_ids%5B%5D=712859937 æ‰“å¼€æ­¤é“¾æŽ¥å°±æ˜¯å•†å“è¯¦æƒ…å†…å®¹ å¯çˆ±çš„å°ç¬¼åŒ… restaurant_id æ˜¯åº—é“ºIDï¼ŒæŽ¥å£ https://www.ele.me/shop/157458556 æ‰“å¼€å°±æ˜¯åº—é“ºè¯¦æƒ…é¡µï¼Œå½“ç„¶ï¼Œä¹Ÿæœ‰ç§»åŠ¨ç«¯ï¼šhttps://h5.ele.me/shop/#id=157458556 è¿™æ ·è¿›è¡Œå•†å“é‡‡é›†å°±æ¯”è¾ƒè½»æ¾äº†ã€‚ å¥½é¥¿ï¼Œå®¹æˆ‘å…ˆç‚¹ä¸ªå¤–å–ã€‚ å¾®ä¿¡å…¬ä¼—å·æŠ“åŒ…åˆ†æžæ—¢ç„¶éƒ½çœ‹äº†é¥¿äº†ä¹ˆï¼Œé‚£ä¹Ÿæ¥çœ‹çœ‹å¾®ä¿¡å§ã€‚ ä½¿ç”¨FiddleræŠ“å‡ºæ¥çš„curlå‘½ä»¤ 1curl -k -i --raw -o 0.dat &quot;https://mp.weixin.qq.com/mp/profile_ext?action=getmsg&amp;__biz=MzA4NzA1OTc5Nw==&amp;f=json&amp;offset=20&amp;count=10&amp;appmsg_token=936_iWFH%%252F9haOTPb6GApBj6wXjPGKg9eeU7slzmH2Q~~&quot; -H &quot;User-Agent: Mozilla/5.0 (Linux; Android 7.1.1; MI 6 Build/NMF26X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043632 Safari/537.36 MicroMessenger/6.5.23.1180 NetType/WIFI Language/zh_CN&quot; -H &quot;Accept-Encoding: gzip, deflate&quot; -H &quot;Accept: */*&quot; -H &quot;Connection: keep-alive&quot; -H &quot;Host: mp.weixin.qq.com&quot; -H &quot;X-Requested-With: XMLHttpRequest&quot; -H &quot;Referer: https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=MzA4NzA1OTc5Nw==&amp;scene=124&amp;devicetype=android-25&amp;version=26051732&amp;lang=zh_CN&amp;nettype=WIFI&amp;a8scene=3&amp;pass_ticket=lLCqBwwrZ581bGDqrEkRsgjKkWYNPdUBs9grSaFjd79hSX0mdvR8%%2BLUbHoWGGBEp&amp;wx_header=1&quot; -H &quot;Accept-Language: zh-CN,en-US;q=0.8&quot; -H &quot;Cookie: pgv_pvi=4831552512; pgv_si=s989715456; sd_userid=18991505459750403; sd_cookie_crttime=1505459750403; tvfe_boss_uuid=a8e4e4f1ab6cd93d; pgv_info=ssid=s8735681072; pgv_pvid=4201362299; rewardsn=8d8b49dfb1811092eefe; wxtokenkey=19643e9f2ee569a10857d365bba88556d220fd33c1a0666b5d028a72b5bcd901; wxuin=838107840; devicetype=android-25; version=26051732; lang=zh_CN; pass_ticket=lLCqBwwrZ581bGDqrEkRsgjKkWYNPdUBs9grSaFjd79hSX0mdvR8+LUbHoWGGBEp; wap_sid2=CMCF0o8DElxUVDVJR3o1ZldpbDlHWWdjQ0xMU3lxM3BWTUozTFFuZFhrUEJaanhoSmZ1aEVncnU0VzFIaWR3QkVVVXFuTUlMTlkxNFZjTnRCMEt1VHJjV3UzQVNOYWdEQUFBfjD6rvjRBTgMQJRO&quot; -H &quot;Q-UA2: QV=3&amp;PL=ADR&amp;PR=WX&amp;PP=com.tencent.mm&amp;PPVN=6.5.23&amp;TBSVC=43602&amp;CO=BK&amp;COVC=043632&amp;PB=GE&amp;VE=GA&amp;DE=PHONE&amp;CHID=0&amp;LCID=9422&amp;MO= MI6 &amp;RL=1080*1920&amp;OS=7.1.1&amp;API=25&quot; -H &quot;Q-GUID: 569ade09b5931656e4f49098113e88cb&quot; -H &quot;Q-Auth: 31045b957cf33acf31e40be2f3e71c5217597676a9729f1b&quot; -H &quot;Content-Type: application/json; charset=UTF-8&quot; -H &quot;Cache-Control: no-cache, must-revalidate&quot; -H &quot;RetKey: 14&quot; -H &quot;LogicRet: 0&quot; ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä¼šæç¤ºé”™è¯¯ 12345&#123;ret: -3,errmsg: &quot;no session&quot;,cookie_count: 0&#125; ä½¿ç”¨postmanåˆ†æžï¼Œæœ€åŽPythonçš„ä»£ç æ˜¯ 1234567891011121314151617181920212223242526272829import requestsurl = "https://mp.weixin.qq.com/mp/profile_ext"querystring = &#123;"action":"getmsg","__biz":"MzA4NzA1OTc5Nw==","f":"json","offset":"20","count":"10","appmsg_token":"936_iWFH%2F9haOTPb6GApBj6wXjPGKg9eeU7slzmH2Q~~"&#125;headers = &#123; 'user-agent': "Mozilla/5.0 (Linux; Android 7.1.1; MI 6 Build/NMF26X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043632 Safari/537.36 MicroMessenger/6.5.23.1180 NetType/WIFI Language/zh_CN", 'accept-encoding': "gzip, deflate", 'accept': "*/*", 'connection': "keep-alive", 'host': "mp.weixin.qq.com", 'x-requested-with': "XMLHttpRequest", 'referer': "https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=MzA4NzA1OTc5Nw==&amp;scene=124&amp;devicetype=android-25&amp;version=26051732&amp;lang=zh_CN&amp;nettype=WIFI&amp;a8scene=3&amp;pass_ticket=lLCqBwwrZ581bGDqrEkRsgjKkWYNPdUBs9grSaFjd79hSX0mdvR8%%2BLUbHoWGGBEp&amp;wx_header=1", 'accept-language': "zh-CN,en-US;q=0.8", 'cookie': "pgv_pvi=4831552512; pgv_si=s989715456; sd_userid=18991505459750403; sd_cookie_crttime=1505459750403; tvfe_boss_uuid=a8e4e4f1ab6cd93d; pgv_info=ssid=s8735681072; pgv_pvid=4201362299; rewardsn=8d8b49dfb1811092eefe; wxtokenkey=19643e9f2ee569a10857d365bba88556d220fd33c1a0666b5d028a72b5bcd901; wxuin=838107840; devicetype=android-25; version=26051732; lang=zh_CN; pass_ticket=lLCqBwwrZ581bGDqrEkRsgjKkWYNPdUBs9grSaFjd79hSX0mdvR8+LUbHoWGGBEp; wap_sid2=CMCF0o8DElxUVDVJR3o1ZldpbDlHWWdjQ0xMU3lxM3BWTUozTFFuZFhrUEJaanhoSmZ1aEVncnU0VzFIaWR3QkVVVXFuTUlMTlkxNFZjTnRCMEt1VHJjV3UzQVNOYWdEQUFBfjD6rvjRBTgMQJRO", 'q-ua2': "QV=3&amp;PL=ADR&amp;PR=WX&amp;PP=com.tencent.mm&amp;PPVN=6.5.23&amp;TBSVC=43602&amp;CO=BK&amp;COVC=043632&amp;PB=GE&amp;VE=GA&amp;DE=PHONE&amp;CHID=0&amp;LCID=9422&amp;MO= MI6 &amp;RL=1080*1920&amp;OS=7.1.1&amp;API=25", 'q-guid': "569ade09b5931656e4f49098113e88cb", 'q-auth': "31045b957cf33acf31e40be2f3e71c5217597676a9729f1b", 'content-type': "application/json; charset=UTF-8", 'cache-control': "no-cache", 'retkey': "14", 'logicret': "0", &#125;response = requests.request("GET", url, headers=headers, params=querystring, verify=False)print(response.json()) è¿™ä¸ªæ—¶å€™çš„å‚æ•°æœ‰ 123456action:getmsg__biz:MzA4NzA1OTc5Nw==f:jsonoffset:20count:10appmsg_token:936_iWFH%%252F9haOTPb6GApBj6wXjPGKg9eeU7slzmH2Q~~ ç›®å‰è¿˜ä¸æ¸…æ¥šè¿™äº›å‚æ•°çš„ä½œç”¨ï¼Œå†æŠ“ä¸€ä¸ªè¯•è¯• 123456action:getmsg__biz:MjM5NzI3NDg4MA==f:jsonoffset:10count:10appmsg_token:936_kFNdYU3DJ%%252B%%252BVfHfEGImXqB5DMbIeqtSR75ZFZQ~~ ä¼°è®¡å°±æ˜¯ __biz å’Œ appmsg_token è¿™ä¸¤ä¸ªå‚æ•°å¯¹åº”ä¸åŒçš„å…¬ä¼—å· å¯¹äº†ï¼Œä¸Šé¢çš„ä»£ç ä¼šå‡ºçŽ°ä¸€ä¸ªé—®é¢˜ 12InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings InsecureRequestWarning) è§£å†³æ–¹æ³• 12from requests.packages import urllib3urllib3.disable_warnings() Appçš„åˆ†æžAppç±»ä½¿ç”¨çš„å·¥å…·æ˜¯Fidderï¼Œæ‰‹æœºå’Œç”µè„‘åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œå…ˆç”¨Fidderé…ç½®å¥½ç«¯å£ï¼Œç„¶åŽæ‰‹æœºè®¾ç½®ä»£ç†ï¼Œipä¸ºç”µè„‘çš„ipï¼Œç«¯å£ä¸ºè®¾ç½®çš„ç«¯å£ï¼Œç„¶åŽå¦‚æžœæ‰‹æœºä¸Šè¯·æ±‚ç½‘ç»œå†…å®¹æ—¶ï¼ŒFidderä¼šæ˜¾ç¤ºç›¸åº”åœ°è¯·æ±‚ï¼Œé‚£ä¹ˆå°±okäº†ï¼Œåˆ†æžçš„å¤§ä½“é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œé™åˆ¶ä¼šç›¸å¯¹å°‘å¾ˆå¤šï¼Œä½†æ˜¯ä¹Ÿæœ‰å‡ ç§æƒ…å†µéœ€è¦æ³¨æ„ï¼š åŠ å¯†ï¼ŒAppæœ‰æ—¶å€™ä¹Ÿæœ‰ä¸€äº›åŠ å¯†çš„å­—æ®µï¼Œè¿™ä¸ªæ—¶å€™,ä¸€èˆ¬æ¥è®²éƒ½ä¼šè¿›è¡Œåç¼–è¯‘è¿›è¡Œåˆ†æžï¼Œæ‰¾åˆ°å¯¹åº”çš„ä»£ç ç‰‡æ®µï¼Œé€†æŽ¨å‡ºåŠ å¯†æ–¹æ³•ï¼› gzipåŽ‹ç¼©æˆ–è€…base64ç¼–ç ï¼Œbase64ç¼–ç çš„è¾¨åˆ«åº¦è¾ƒé«˜ï¼Œæœ‰æ—¶å€™æ•°æ®è¢«gzipåŽ‹ç¼©äº†ï¼Œä¸è¿‡Charleséƒ½æ˜¯æœ‰è‡ªåŠ¨è§£å¯†çš„ï¼› httpsè¯ä¹¦ï¼Œæœ‰çš„httpsè¯·æ±‚ä¼šéªŒè¯è¯ä¹¦, Fidderæä¾›äº†è¯ä¹¦ï¼Œå¯ä»¥åœ¨å®˜ç½‘æ‰¾åˆ°ï¼Œæ‰‹æœºè®¿é—®ï¼Œç„¶åŽä¿¡ä»»æ·»åŠ å°±å¯ä»¥ã€‚ æœ€åŽï¼Œç¥å¤§å®¶åœ£è¯žèŠ‚å¿«ä¹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ã€RNG vs SKTã€‘å¼¹å¹•çš„è‡ªç„¶è¯­è¨€çš„åˆæ­¥åˆ†æž]]></title>
      <url>%2F2017%2F12%2F20%2F%E3%80%90RNG-vs-SKT%E3%80%91%E5%BC%B9%E5%B9%95%E7%9A%84%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E7%9A%84%E5%88%9D%E6%AD%A5%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåä¸€ç¯‡åŽŸåˆ›æ–‡ç«  å‰æŽ’ @çš‡æ—ç”µå­ç«žæŠ€ä¿±ä¹éƒ¨ ================================== S7ä¸­RNGå¯¹é˜µSKTï¼Œæƒ³å¿…æ˜¯å…¨ä¸–ç•ŒLOLçŽ©å®¶å…³æ³¨çš„é‡ç‚¹ã€‚åœ¨æ¯”èµ›å¼€å§‹å‰ï¼Œä½¿ç”¨å°è‘«èŠ¦æŠŠæ–—é±¼S7ç›´æ’­é—´çš„å¼¹å¹•éƒ½æŠ“ä¸‹æ¥ï¼Œæƒ³ç€åšä¸€å°ç‚¹åˆ†æžï¼Œçœ‹çœ‹ä¼šå¾—å‡ºä»€ä¹ˆç»“è®ºã€‚ å› ä¸ºæ•°æ®é‡å’Œåˆ†æžæ·±åº¦ç­‰åŽŸå› ï¼Œä»¥ä¸‹å†…å®¹ä»…ä¾›å¨±ä¹è§‚èµ æ•°æ®é‡‡é›†ä½¿ç”¨å°è‘«èŠ¦é‡‡é›†2ä¸‡å¤šæ¡å¼¹å¹•æ•°æ®ï¼ŒRNGå¯¹é˜µSKTæ–—é±¼ç›´æ’­é—´çš„å¼¹å¹•ï¼Œæœ€åŽå¾—åˆ°çº¦4ä¸‡å¯ç”¨æ•°æ® ä¸­æ–‡åˆ†è¯ä½¿ç”¨jiebaåˆ†è¯ï¼Œç®—æ³•å¦‚ä¸‹ åŸºäºŽå‰ç¼€è¯å…¸å®žçŽ°é«˜æ•ˆçš„è¯å›¾æ‰«æï¼Œç”Ÿæˆå¥å­ä¸­æ±‰å­—æ‰€æœ‰å¯èƒ½æˆè¯æƒ…å†µæ‰€æž„æˆçš„æœ‰å‘æ— çŽ¯å›¾ (DAG) é‡‡ç”¨äº†åŠ¨æ€è§„åˆ’æŸ¥æ‰¾æœ€å¤§æ¦‚çŽ‡è·¯å¾„, æ‰¾å‡ºåŸºäºŽè¯é¢‘çš„æœ€å¤§åˆ‡åˆ†ç»„åˆ å¯¹äºŽæœªç™»å½•è¯ï¼Œé‡‡ç”¨äº†åŸºäºŽæ±‰å­—æˆè¯èƒ½åŠ›çš„ HMM æ¨¡åž‹ï¼Œä½¿ç”¨äº† Viterbi ç®—æ³• ç®€å•å¤„ç†ä¹‹åŽï¼Œçœ‹èµ·æ¥æ˜¯è¿™æ · é¡ºä¾¿åšä¸ªç»Ÿè®¡ï¼Œçœ‹çœ‹éƒ½åœ¨è¯´ä»€ä¹ˆã€‚ä¸åŠ åœç”¨è¯æ˜¯è¿™æ ·çš„ï¼Œå…¨æ˜¯ â€œ666â€ RNGå’Œç‰›é€¼æ˜¯å‡ºçŽ°æœ€å¤šçš„è¯è¯­ï¼ŒåŒæ—¶ä¹Ÿå‘çŽ°â€œå¢æœ¬ä¼Ÿç‰›é€¼â€ å¼±å¼±é—®ä¸€å¥â€œå”æ¢¦ç¼â€æ˜¯è° ä¸‹é¢æ˜¯è¯äº‘ï¼ŒPythonçš„è¯äº‘åšä¸æ¥ä¸å¥½çœ‹ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨çš„å·¥å…· HTML5 Word Cloud å¼¹å¹•å†…å®¹è¯äº‘ ç”¨æˆ·æ˜µç§°è¯äº‘ æƒ…æ„Ÿåˆ†æžè¿™é‡Œä½¿ç”¨çš„æ˜¯ isnowfy/snownlpã€‚SnowNLPæ˜¯ä¸€ä¸ªpythonå†™çš„ç±»åº“ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¤„ç†ä¸­æ–‡æ–‡æœ¬å†…å®¹ï¼Œæ˜¯å—åˆ°äº†TextBlobçš„å¯å‘è€Œå†™çš„ã€‚ 1234from snownlp import SnowNLPs = SnowNLP(u'è¿™ä¸ªä¸œè¥¿çœŸå¿ƒå¾ˆèµž')s.sentiments # 0.9769663402895832 positiveçš„æ¦‚çŽ‡ æœ‰ç‚¹éš¾çœ‹ï¼Œç›´æŽ¥çœ‹æ•°æ®å§ï¼Œå¾—åˆ°çš„ç»“æžœæ˜¯åœ¨ [0ï¼Œ1] ä¹‹é—´çš„positiveçš„æ¦‚çŽ‡ 51659ä¸­æœ‰44705ä¸ªå¤§äºŽ0.5ï¼Œå æ¯”86.54%ï¼Œæœ‰ 6954æ¡å¼¹å¹•ä½ŽäºŽ0.5ï¼Œå æ¯”13.46%ã€‚ å¼¹å¹•ä¸­ç§¯æžçš„æ¦‚çŽ‡è¿˜æ˜¯ç›¸å½“é«˜çš„ï¼Œè¯´æ˜Žè§‚ä¼—è¿˜æ˜¯æ¯”è¾ƒèµžèµæ¯”èµ›çš„ã€‚ ç‰¹å¾æå–TF-IDFæ˜¯ä¿¡æ¯æ£€ç´¢é¢†åŸŸéžå¸¸é‡è¦çš„æœç´¢è¯é‡è¦æ€§åº¦é‡ï¼›tf-idfæ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨ä»¥è¯„ä¼°ä¸€å­—è¯å¯¹äºŽä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚ è¯é¢‘TF(Term Frequency) è¯wåœ¨æ–‡æ¡£dä¸­å‡ºçŽ°æ¬¡æ•°count(w, d)å’Œæ–‡æ¡£dä¸­æ€»è¯æ•°size(d)çš„æ¯”å€¼ï¼š åŸºäºŽ TF-IDF ç®—æ³•çš„å…³é”®è¯æŠ½å–ï¼š RNG rng è´ºç”µ åŠ æ²¹ å‘æ¥ 666 6666 66666 æ­å–œ 66666666666666 666666 66666666666 6666666 skt æŽå“¥ 66666666666666666666 SKT 66666666 666666666 é©¬ç”² åœ¨æ²¡æœ‰åŠ ä¸Šåœç”¨è¯çš„å‰æä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ•ˆæžœå¹¶ä¸ç†æƒ³ TextRankæ˜¯åœ¨Googleçš„PageRankç®—æ³•å¯å‘ä¸‹ï¼Œé’ˆå¯¹æ–‡æœ¬é‡Œçš„å¥å­è®¾è®¡çš„æƒé‡ç®—æ³•ï¼Œç›®æ ‡æ˜¯è‡ªåŠ¨æ‘˜è¦ã€‚å®ƒåˆ©ç”¨æŠ•ç¥¨çš„åŽŸç†ï¼Œè®©æ¯ä¸€ä¸ªå•è¯ç»™å®ƒçš„é‚»å±…ï¼ˆæœ¯è¯­ç§°çª—å£ï¼‰æŠ•èµžæˆç¥¨ï¼Œç¥¨çš„æƒé‡å–å†³äºŽè‡ªå·±çš„ç¥¨æ•°ã€‚ åŸºäºŽ TextRank ç®—æ³•çš„å…³é”®è¯æŠ½å–ï¼š å‘æ¥ è´ºç”µ åŠ æ²¹ å­¦é™¢ æœºå™¨äºº å¤§å­¦ èŒä¸š èˆ¹é•¿ æŠ€æœ¯ å°ç‚® æ²¡æœ‰ è§£è¯´ ä¸­å›½ ç»æµŽ å¼€å§‹ æ— æ•Œ é¦™é”… åžƒåœ¾ è€é¼  ç§‘æŠ€ ç‰¹å¾é€‰æ‹©Word2vecæ˜¯ä¸€ä¸ªå°†å•è¯è¡¨å¾æˆå‘é‡çš„å½¢å¼ï¼Œå®ƒå¯ä»¥æŠŠæ–‡æœ¬å†…å®¹çš„å¤„ç†ç®€åŒ–ä¸ºå‘é‡ç©ºé—´ä¸­çš„å‘é‡è¿ç®—ï¼Œè®¡ç®—å‡ºå‘é‡ç©ºé—´ä¸Šçš„ç›¸ä¼¼åº¦ï¼Œæ¥è¡¨ç¤ºæ–‡æœ¬è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼åº¦ã€‚ è®¡ç®—ç›¸ä¼¼åº¦ï¼šé¦–å…ˆæ˜¯RNGï¼š rng 0.9893965721130371 åŠ æ²¹ 0.9829007983207703 å¿…èƒœ 0.9790929555892944 Rng 0.9743078947067261 æ­å–œ 0.9733642339706421 ä¸­å›½é˜Ÿ 0.9397183656692505 å…³ 0.9283092021942139 &lt; 0.9278833866119385 ç‡•å°¾æ¸¯ 0.9222617149353027 B 0.9143030643463135 RNGåŠ æ²¹ çœ‹çœ‹SKTï¼š skt 0.9911665320396423 çš‡æ— 0.972029983997345 ï¼¾ 0.970970094203949 ç¨³ä½ 0.9653508067131042 å¹²æ­» 0.9643667340278625 ç‰›æ¯” 0.9629441499710083 ä¸€èµ· 0.9625348448753357 @ 0.9619969725608826 é¸Ÿå·¢ 0.9608791470527649 å† å†› 0.9608250856399536 ç¨³ä½ï¼Œå¹²æ­»SKTï¼Ÿ è´ºç”µï¼š å­¦é™¢ 0.9811943769454956 å¤§å­¦ 0.980491042137146 æŠ€æœ¯ 0.9766334295272827 èŒä¸š 0.9691535234451294 ç”µå­ç§‘æŠ€ 0.9668481349945068 å‘æ¥ 0.9619022607803345 ç§‘æŠ€ 0.9594647884368896 å±±ä¸œ 0.9568137526512146 é‡åº† 0.9440888166427612 å“ˆå°”æ»¨ 0.939836859703064 å±±ä¸œXXå­¦é™¢å‘æ¥è´ºç”µ åŠ æ²¹ï¼š å¿…èƒœ 0.9876022934913635 RNG 0.9829007983207703 rng 0.960281252861023 Rng 0.9591789841651917 æ­å–œ 0.9551880359649658 ä¸­å›½é˜Ÿ 0.9436988830566406 å…³ 0.94183349609375 ï¼ 0.921385645866394 ~ 0.9148629903793335 @ 0.9062787294387817 RNGåŠ æ²¹ï¼ŒRNGå¿…èƒœ å°ç‹—ï¼š å¹ 0.9970275163650513 æ— æ•Œ 0.996719241142273 ç¥žè¶… 0.996111273765564 åŽæœŸ 0.9959050416946411 åŽ‰å®³ 0.9957337975502014 å‡¶ 0.9957261681556702 å¼º 0.9955072402954102 ä¸€ä¸ª 0.9954395890235901 å¹² 0.99541175365448 èµ·æ¥ 0.9952359199523926 ç‹—å¹ï¼Ÿ æŽå“¥ï¼š è¿˜æ˜¯ 0.9825356602668762 ç”µè¯ 0.9700809717178345 æ‰¿ 0.9697628617286682 å¿ƒè„ 0.9686012864112854 é™ˆæ–‡æ³½åœ¨ 0.9681863188743591 éº»ç—¹ 0.9680625200271606 å“ 0.9674116373062134 ä»¥ä¸º 0.9664229154586792 ç‹—å“¥ 0.9592204689979553 ä¸ 0.9589840769767761 ä½ æŽå“¥è¿˜æ˜¯ä½ æŽå“¥ MLXGï¼š å®£å‘Š 0.9958090782165527 mlxg 0.9953181147575378 æ­»äº¡ 0.995277464389801 b 0.9949076771736145 6666 0.9947425723075867 ä¸‘ 0.9943945407867432 10 0.9943088293075562 è¾£é¸¡ 0.9940722584724426 å¹²æ­» 0.9940391778945923 é”¤ 0.9939616918563843 é¦™é”…å’Œæ­»äº¡å®£å‘Šæœ‰å•¥å…³ç³» å°è™Žï¼š ç¬‘ç¬‘ 0.9971799850463867 çœ‹åˆ° 0.9967395663261414 è§£è¯´ 0.9961692690849304 ä¸æ˜¯ 0.9959656000137329 ä¸­å• 0.9951503872871399 å‡ 0.9950063824653625 ä¸ºä»€ä¹ˆ 0.9944812655448914 åˆ 0.9942663908004761 ä¹ˆ 0.9938984513282776 é‡Œå¥¥ 0.9937981367111206 å°è™Žä¸ŽåŠ é‡Œå¥¥ï¼ˆï¼š letmeï¼š éš¾å— 0.9964221715927124 ç¬‘è¯ 0.9959778785705566 å“¦ 0.9958946108818054 ä¸–ç•Œ 0.9958213567733765 æ¯’å¥¶ 0.9957934021949768 KPL 0.9957884550094604 ä¸Šå• 0.9956253170967102 ç“œçš® 0.9955945014953613 å¿« 0.9953423738479614 æ‰“å›¢ 0.9953156113624573 çœŸéš¾å—å•Š To Do å¯ä»¥ä½¿ç”¨æœ´ç´ è´å¶æ–¯åšåˆ†ç±»æ¨¡åž‹ ä½¿ç”¨æœºå™¨å­¦ä¹ æ€§èƒ½è¯„ä¼°æŒ‡æ ‡é¢„æµ‹ç²¾ç¡®çŽ‡å’Œå‡†ç¡®çŽ‡ æ¬¢è¿Žè¡¥å…… å¯å‚è€ƒèµ„æ–™ ä¸­æ–‡åˆ†è¯åŸºæœ¬ç®—æ³•ä»‹ç» ICTCLAS æ±‰è¯­è¯æ€§æ ‡æ³¨é›† æ–‡æœ¬åˆ†ç±»æŠ€æœ¯ æ–‡æœ¬åˆ†ç±»ä¸ŽSVM åŸºäºŽè´å¶æ–¯ç®—æ³•çš„æ–‡æœ¬åˆ†ç±»ç®—æ³• åŸºäºŽlibsvmçš„ä¸­æ–‡æ–‡æœ¬åˆ†ç±»åŽŸåž‹ LDA-math-æ–‡æœ¬å»ºæ¨¡ æƒ…æ„Ÿåˆ†æžèµ„æº é¢å‘æƒ…æ„Ÿåˆ†æžçš„ç‰¹å¾æŠ½å–æŠ€æœ¯ç ”ç©¶ æ–¯å¦ç¦å¤§å­¦è‡ªç„¶è¯­è¨€å¤„ç†ç¬¬ä¸ƒè¯¾-æƒ…æ„Ÿåˆ†æž æ·±åº¦å­¦ä¹ ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œè¡¨å¾æ–¹æ³• Deep Learning in NLP ï¼ˆä¸€ï¼‰è¯å‘é‡å’Œè¯­è¨€æ¨¡åž‹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[scrapyå­¦ä¹ å®žä¾‹ï¼ˆå››ï¼‰é‡‡é›†æ·˜å®æ•°æ®å¹¶å±•ç¤º]]></title>
      <url>%2F2017%2F12%2F19%2Fscrapy%E5%AD%A6%E4%B9%A0%E5%AE%9E%E4%BE%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E9%87%87%E9%9B%86%E6%B7%98%E5%AE%9D%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%B1%95%E7%A4%BA%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒåç¯‡åŽŸåˆ›æ–‡ç«  æœ¬èŠ‚ä»£ç  ï¼š zhangslob/Taobao_duoshou ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç»™ä¸ªstarè¡Œä¸è¡Œ é“›é“›é“›ï¼Œæ‡’æƒ°äº†ä¸€æ®µæ—¶é—´ï¼Œå’±æŽ¥ç€å­¦Scrapyã€‚è¿™ä¸€æœŸçŽ©ç‚¹æ–°èŠ±æ ·ï¼Œä½¿ç”¨Flaskå±•ç¤ºæˆ‘ä»¬çš„æ•°æ®ã€‚æ•ˆæžœå¦‚ä¸‹å›¾ï¼š æœ‰äº›é‡å¤çš„ â•®(â•¯Ð”â•°)â•­ è¿‡ç¨‹ç®€å•æ¥è¯´æœ‰ä¸¤æ­¥ï¼š ä½¿ç”¨Scrapyé‡‡é›†æ·˜å®æ•°æ® ä½¿ç”¨Flaskå±•ç¤ºæ•°æ® é‡‡é›†æ•°æ®æŠ“åŒ…åˆ†æžå…¶å®žé‡‡é›†æ·˜å®æ•°æ®çš„æ–¹æ³•çœŸçš„å¾ˆå¤šå¾ˆå¤šï¼Œè¿™é‡Œä¸è®¨è®ºSeleniumï¼Œåªè¯´å¦‚ä½•æŠ“åŒ…åˆ†æžï¼Œå…ˆæä¾›å‡ ä¸ªæŽ¥å£ï¼Œä¾›è§‚ä¼—è€çˆ·è§‚èµï¼š https://s.taobao.com/list?seller_type=taobao&amp;json=on https://s.m.taobao.com/search?event_submit_do_new_search_auction=1&amp;_input_charset=utf-8&amp;topSearch=1&amp;atype=b&amp;searchfrom=1&amp;action=home%3Aredirect_app_action&amp;from=1&amp;q=%E6%B0%B4%E6%9E%9C&amp;sst=1&amp;n=44&amp;buying=buyitnow&amp;m=api4h5&amp;abtest=25&amp;wlsort=25&amp;page=1 http://h5.m.taobao.com/app/selectassistant/www/choiceness/index.html?m=select&amp;vm=nw&amp;ttid=null&amp;utd_id=null&amp;page=2&amp;n=44&amp;q=%E6%B0%B4%E6%9E%9C è¿™ä¸‰ç§æŽ¥å£éƒ½å¯ä»¥é‡‡é›†æ•°æ®ï¼Œåˆ«é—®æˆ‘æ€Žä¹ˆçŸ¥é“çš„ï¼Œç»åŽ†è¿‡åƒç™¾æ¬¡å¤±è´¥ã€‚è¿™é‡Œé€‰æ‹©çš„æ˜¯ç¬¬äºŒç§ï¼Œå¤§å®¶å¯ä»¥è¯•è¯•è¿™å‡ ç§çš„åŒºåˆ«ã€‚ ä½¿ç”¨ç¬¬äºŒç§åŽ»é‡‡é›†æ•°æ®æ—¶ï¼Œè¿”å›žçš„æ˜¯jsonæ•°æ®ï¼Œæ•°æ®é‡å·²ç»å¾ˆå¤šã€‚ å…¶ä¸­æœ‰å‡ ç‚¹å‘ï¼Œåˆ†äº«ä¸‹ã€‚ URLä¸åŒã€‚æ·˜å®å’Œå¤©çŒ«çš„é“¾æŽ¥æ˜¯ä¸åŒçš„ï¼Œç§»åŠ¨ç«¯å’Œç½‘é¡µç«¯æ˜¯ä¸åŒçš„ã€‚ è¿™é‡Œæ˜¾ç¤ºçš„ commentCount ï¼ˆè¯„è®ºæ•°é‡ï¼‰å¹¶ä¸æ˜¯çœŸå®žçš„ï¼Œä½ å¯ä»¥æ‰“å¼€è¯¦æƒ…é¡µå¯¹æ¯” è¯„è®ºæ•°é‡çš„æŽ¥å£ã€‚æ·˜å®å’Œå¤©çŒ«çš„éƒ½å¯ä»¥ä½¿ç”¨ https://rate.taobao.com/detailCount.do?itemId=å•†å“IDï¼Œæ¯ä»¶å•†å“éƒ½æœ‰è‡ªå·±çš„å”¯ä¸€ID ä»£ç å®žæˆ˜è¿™é‡Œç›´æŽ¥æŠŠä¸»ä»£ç è´´å‡ºæ¥ï¼Œä½¿ç”¨ Mongo ä¿å­˜æ•°æ®ã€‚ taobao.py 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687# -*- coding: utf-8 -*-import copyimport scrapyimport jsonfrom ..items import TaobaoInfoItemimport refrom traceback import format_exckw = ['ç½‘ç»œæœåŠ¡', 'è£…æ½¢', 'æŠ¤ç†', 'é€Ÿé£Ÿ', 'è¿åŠ¨éž‹', 'è¿åŠ¨æœ', 'ç”·è£…', 'é…ä»¶', 'è”¬æžœ', 'å¹²è´§', 'æ”»ç•¥', 'åœ°æ¯¯', 'æ–‡å…·', 'ä¹¦ç±', 'äººå¶', 'é¥°å“', 'æŠ¥çº¸', 'æ—¶å°šé¥°å“', 'ç¾Žå‘', 'è¿åŠ¨åŒ…', 'ç²®æ²¹', 'åƒå–çŽ©ä¹æŠ˜æ‰£åˆ¸', 'å·¥å…·', 'å½©å¦†', 'æ¼”å‡º', 'ç«¥è£…', 'ä¸ªæ€§å®šåˆ¶', 'æ•°ç ç›¸æœº', 'æ—¥åŒ–', 'æ¸¸æˆ', 'å°¿ç‰‡', 'å®‰é˜²', 'æ‘„åƒæœº', 'åŽ¨æˆ¿ç”µå™¨', 'åŠžå…¬è®¾å¤‡', 'ç½‘åº—', 'ZIPPO', 'æ‚å¿—', 'ç¤¼å“', 'æ‘„å½±å™¨æ', 'å–‚å“ºç­‰ç”¨å“', 'è½¯ä»¶', 'ç¬”è®°æœ¬ç”µè„‘', 'æ˜Žæ˜Ÿ', 'ç™»å±±', 'å±…å®¶æ—¥ç”¨', 'æˆ·å¤–', 'ç”µè„‘ç¡¬ä»¶', 'æµè¡Œé¦–é¥°', 'å¨ƒå¨ƒ', 'æ”¶çº³', 'å½±è§†', 'éŸ³ä¹', 'ç”µçŽ©', 'éŸ³åƒ', 'é¦™æ°´', 'æ°´äº§', 'çƒ­é”€å¥³åŒ…', 'å¤§å®¶ç”µ', 'å…¶ä»–ä¿å¥è¥å…»å“', 'ç®±åŒ…çš®å…·', 'ç‘žå£«å†›åˆ€', '3Cæ•°ç é…ä»¶å¸‚åœº', 'ç”µè„‘å‘¨è¾¹', 'ç”·åŒ…', 'çŽ©å…·', 'Uç›˜', 'æ¨¡åž‹', 'å­•å¦‡è£…', 'çª—å¸˜', 'çœ¼é•œ', 'ä¿ƒé”€åº—é“º', 'äº”é‡‘', 'æ—…è¡Œ', 'æ´—æŠ¤', 'æ¸…æ´', 'ç§»åŠ¨å­˜å‚¨', 'å«æµ´', 'é‡Žè¥', 'é¢ˆçŽ¯é…ä»¶', 'ç«¥éž‹', 'å®¶è£…é¥°å“', 'æ˜¾ç¤ºå™¨', 'é—ªå­˜å¡', 'ä¼ ç»Ÿæ»‹è¡¥å“', 'è€—æ', 'ç¯å…·']class TaobaoSpider(scrapy.Spider): name = 'taobao' allowed_domains = ['taobao.com'] start_urls = ['https://s.m.taobao.com/search?event_submit_do_new_search_auction=1&amp;_input_charset=utf-8&amp;topSearch=1&amp;atype=b&amp;searchfrom=1&amp;action=home%3Aredirect_app_action&amp;from=1&amp;q=&#123;&#125;&amp;sst=1&amp;n=44&amp;buying=buyitnow&amp;m=api4h5&amp;abtest=25&amp;wlsort=25&amp;page=&#123;&#125;'.format(i, y) for i in range(1, 101) for y in kw] # å…¶ä»–æŽ¥å£ http://h5.m.taobao.com/app/selectassistant/www/choiceness/index.html?m=select&amp;vm=nw&amp;ttid=null&amp;utd_id=null&amp;page=2&amp;n=44&amp;q=%E6%B0%B4%E6%9E%9C def parse(self, response): item = TaobaoInfoItem() ListItem = json.loads(response.text)['listItem'] for i in ListItem: item['name'] = i['name'] item['title'] = i['title'] item['area'] = i['area'] # å¤„ç†ä¸åŒçš„URL url = [] if 'https:' not in i['url']: if 'detail.m.tmall.com' in i['url']: url.append('https:' + i['url'].replace('.m','')) else: url.append('https:' + i['url']) if 'https:' in i['url']: url.append(i['url']) item['url'] = url print(item['url']) # è¯„è®ºç½‘å€ comment_url = [] ur = item['url'] comment_url.append(ur[0] + '#J_Reviews') item['comment_url'] = comment_url item['fastPostFee'] = i['fastPostFee'] item['sales'] = i['act'] item['price'] = i['price'] item['originalPrice'] = i['originalPrice'] item['nick'] = i['nick'] item['id'] = i['item_id'] item['loc'] = i['sellerLoc'] # å›¾ç‰‡é“¾æŽ¥ img_url = [] img_url.append('http:' + i['img2']) item['img_url'] = img_url count_url = [] count_url.append('https://rate.taobao.com/detailCount.do?itemId=' + i['item_id']) for url in count_url: yield scrapy.Request( url, callback=self.detail_parse, meta=&#123;'item': copy.deepcopy(item)&#125;, # ä½¿ç”¨copy.deepcopyæ·±å¤åˆ¶ï¼Œå¦åˆ™æ•°æ®ä¸å¯¹å•Š dont_filter=True, errback=self.error_back ) def detail_parse(self, response): item = response.meta['item'] pat_count = '&#123;"count":(.*?)&#125;' item['count'] = re.findall(pat_count, str(response.body)) yield item def error_back(self, e): _ = e self.logger.error(format_exc())'''['ç¾½ç»’æœ', 'æ¯›å‘¢å¤§è¡£', 'æ¯›è¡£', 'å†¬å­£å¤–å¥—', 'æ–°å“', 'è£¤å­', 'è¿žè¡£è£™', 'è…”è°ƒ', 'ç§‹å†¬æ–°å“', 'æ·˜ç‰¹èŽ±æ–¯', 'æ·˜å…ˆç”Ÿ', 'æ‹¾è´§', 'ç§‹å†¬å¤–å¥—', 'æ—¶å°šå¥—è£…', 'æ½®ç‰Œ', 'çˆ¸çˆ¸è£…', 'æ˜¥æ–°å“', 'æ€§æ„Ÿè¯±æƒ‘', 'ç”œç¾Žæ¸…æ–°', 'ç®€çº¦ä¼˜é›…', 'å¥¢åŽé«˜è´µ', 'è¿åŠ¨é£Ž', 'å¡‘èº«', 'åŸºç¡€å†…è¡£', 'è½»è–„æ¬¾', 'é•¿æ¬¾', 'çŸ­æ¬¾', 'æ¯›é¢†', 'åŠ åŽš', 'è¢«å­', 'é¹…ç»’', 'æ–°å“', 'ç§‹æ¬¾', 'å¤¹å…‹', 'å«è¡£', 'è¥¿è£…', 'é£Žè¡£', 'çš®è¡£', 'æ¯›å‘¢å¤–å¥—', 'è–„ç¾½ç»’', 'æ— é’¢åœˆ', 'æ— ç—•æ–‡èƒ¸', 'è•¾ä¸å†…è¡£', 'è¿åŠ¨æ–‡èƒ¸', 'èšæ‹¢æ–‡èƒ¸', 'å¤§ç æ–‡èƒ¸', 'æŠ¹èƒ¸å¼', 'éšå½¢', 'å»“å½¢', 'åŒé¢å‘¢', 'ç¾Šç»’', 'ä¸­é•¿æ¬¾', 'çŸ­æ¬¾', 'æ¯›é¢†', 'è®¾è®¡å¸ˆæ¬¾', 'ç³»å¸¦', 'Tæ¤', 'é•¿è¢–T', 'æ‰“åº•è¡«', 'çº¯è‰²', 'è¡¬è¡«', 'é•¿è¢–æ¬¾', 'å•†åŠ¡æ¬¾', 'æ—¶å°šæ¬¾', 'ç¡è¡£å¥—è£…', 'ç¡è£™', 'ç¡è¢æµ´è¢', 'å¤–ç©¿å®¶å±…', 'å¥³å£«ç¡è¡£', 'ç”·å£«ç¡è¡£', 'æƒ…ä¾£ç¡è¡£', 'äº²å­ç¡è¡£', 'é©¬æµ·æ¯›', 'è²‚ç»’', 'ç¾Šç»’', 'ç¾Šæ¯›', 'å¼€è¡«', 'ä¸­é•¿æ¬¾', 'çŸ­æ¬¾', 'å¡é€š', 'ä¼‘é—²è£¤', 'å·¥è£…è£¤', 'è¿åŠ¨è£¤', 'é•¿è£¤', 'ç‰›ä»”è£¤', 'å°è„šè£¤', 'å“ˆä¼¦è£¤', 'ç›´ç­’è£¤', 'å¥³å£«å†…è£¤', 'ç”·å£«å†…è£¤', 'ä¸‰è§’è£¤', 'å¹³è§’è£¤', 'ä¸å­—è£¤', 'é˜¿ç½—è£¤', 'æ˜ŸæœŸè£¤', 'ä½Žè…°', 'å¤–å¥—', 'å¥—è£…', 'é£Žè¡£', 'å«è¡£', 'çœŸçš®çš®è¡£', 'é©¬ç”²', 'å°è¥¿è£…', 'å”è£…', 'ä¸­è€å¹´', 'è–„æ¯›è¡£', 'é’ˆç»‡å¼€è¡«', 'åœ†é¢†æ¯›è¡£', 'Vé¢†æ¯›è¡£', 'çº¯è‰²æ¯›è¡£', 'æ°‘æ—é£Ž', 'ç¾Šæ¯›è¡«', 'ç¾Šç»’è¡«', 'èˆ¹è¢œ', 'ç”·äººè¢œ', 'è¿žè£¤è¢œ', 'éšå½¢è¢œ', 'æ”¶è…¹è£¤', 'å¡‘èº«è¡£', 'ç¾Žä½“è£¤', 'æ”¶è…¹å¸¦', 'å¸†å¸ƒéž‹', 'é«˜å¸®', 'ä½Žå¸®', 'å†…å¢žé«˜', 'æ‡’äººéž‹', 'åŽšåº•', 'éŸ©ç‰ˆ', 'ç³»å¸¦', 'æƒ…ä¾£æ¬¾', 'è¿åŠ¨é£Žéž‹', 'åŽšåº•', 'å†…å¢žé«˜', 'æ˜Ÿæ˜Ÿéž‹', 'ç³»å¸¦', 'ä¸Šæ–°', 'äººæ°”æ¬¾', 'å•è‚©åŒ…', 'æ–œæŒŽåŒ…', 'æ‰‹æåŒ…', 'è¿·ä½ åŒ…', 'æ‰‹æ‹¿åŒ…', 'å°æ–¹åŒ…', 'æ£’çƒå¸½', 'é¸­èˆŒå¸½', 'é®é˜³å¸½', 'æ¸”å¤«å¸½', 'è‰å¸½', 'å¹³é¡¶å¸½', 'å˜»å“ˆå¸½', 'è´é›·å¸½', 'ç‰›ä»”å¸½', 'çˆµå£«å¸½', 'é«˜è·Ÿ', 'å¹³åº•', 'åŽšåº•', 'ä¸­è·Ÿ', 'ç²—è·Ÿ', 'å¡è·Ÿ', 'æµ…å£', 'å°–å¤´', 'åœ†å¤´', 'è¿åŠ¨æ¬¾', 'å¤´å±‚ç‰›çš®', 'å†…å¢žé«˜', 'æ¾ç³•éž‹', 'è±†è±†éž‹', 'å•†åŠ¡', 'ä¼‘é—²', 'æ½®èŒƒ', 'èƒ¸åŒ…', 'è…°åŒ…', 'å•è‚©', 'æ–œè·¨', 'æ‰‹æ', 'æ‰‹æ‹¿', 'å¸†å¸ƒ', 'ç‰›çš®', 'å¥³å£«è…°å¸¦', 'ç”·å£«çš®å¸¦', 'å¸†å¸ƒè…°å¸¦', 'è…°å°', 'è…°é“¾', 'é’ˆæ‰£å¤´', 'å¹³æ»‘æ‰£', 'è‡ªåŠ¨æ‰£', 'çœŸçš®', 'æ­£å“', 'åŽšåº•', 'å†…å¢žé«˜', 'æ˜Ÿæ˜Ÿéž‹', 'ç³»å¸¦', 'ä¸€è„šè¹¬', 'é­”æœ¯è´´', 'æ°”åž«', 'ç½‘çŠ¶', 'å°èŠ±', 'é“†é’‰', 'æ°´æ´—çš®', 'å¡é€š', 'åŽŸå®¿', 'ç³–æžœè‰²', 'å•†åŠ¡', 'è¿åŠ¨', 'å¸†å¸ƒ', 'ç‰›çš®', 'å¥³å£«å›´å·¾', 'ç”·å£«å›´å·¾', 'æŠ«è‚©', 'ä¸å·¾', 'å‡é¢†', 'å°æ–¹å·¾', 'ä¸‰è§’å·¾', 'å¤§æ–¹å·¾', 'çœŸä¸', 'é›ªçºº', 'æ£‰è´¨', 'äºšéº»', 'è•¾ä¸', 'é’æ˜¥æ½®æµ', 'å•†åŠ¡çš®éž‹', 'ä¼‘é—²çš®éž‹', 'æ­£è£…çš®éž‹', 'å•†åŠ¡ä¼‘é—²', 'å¸ƒæ´›å…‹', 'å†…å¢žé«˜', 'åç»’çš®', 'çœŸçš®', 'æ½®æµä½Žå¸®', 'éŸ©ç‰ˆ', 'è‹±ä¼¦', 'å¤å¤', 'é“†é’‰', 'ç¼–ç»‡', 'è±¹çº¹', 'å¤§å¤´', 'æ‹‰æ†ç®±', 'å¯†ç ç®±', 'å­¦ç”Ÿç®±', 'å­æ¯ç®±', 'æ‹‰æ†åŒ…', 'ä¸‡å‘è½®', 'é£žæœºè½®', 'èˆªç©ºç®±', 'é“æ¡†', 'å¥³å£«æ‰‹å¥—', 'ç”·å£«æ‰‹å¥—', 'çœŸçš®æ‰‹å¥—', 'è•¾ä¸æ‰‹å¥—', 'é˜²æ™’æ‰‹å¥—', 'åŠæŒ‡æ‰‹å¥—', 'åˆ†æŒ‡æ‰‹å¥—', 'è¿žæŒ‡æ‰‹å¥—', 'çŸ­æ¬¾æ‰‹å¥—', 'é•¿æ¬¾æ‰‹å¥—', 'çš®éž‹', 'ä½Žå¸®', 'åç»’çš®', 'å¤§å¤´éž‹', 'è±†è±†éž‹', 'å¸†èˆ¹éž‹', 'æ‡’äººéž‹', 'å¸†å¸ƒ/æ¿éž‹', 'é«˜å¸®', 'å‡‰éž‹/æ‹–éž‹', 'æ²™æ»©éž‹', 'äººå­—æ‹–', 'çš®å‡‰éž‹', 'æ´žæ´žéž‹', 'é’±åŒ…', 'æ½®åŒ…é¦†', 'çœŸçš®åŒ…', 'æ‰‹æœºåŒ…', 'å¤§ç‰Œ', 'coach', 'MK', 'MCM', 'æ¯›çº¿', 'éž‹åž«', 'éž‹å¸¦', 'é¢†å¸¦', 'é¢†ç»“', 'è¢–æ‰£', 'æ‰‹å¸•', 'å¸ƒé¢æ–™', 'è€³å¥—', 'é¢†å¸¦å¤¹', 'å©šçº±é…ä»¶', 'çš®å¸¦æ‰£', 'è‹±å›½ç‰›æ ', 'è‹±å›½çˆ±ä»–ç¾Ž', 'ç¾Žèµžè‡£', 'é›…åŸ¹', 'æ¾³æ´²çˆ±ä»–ç¾Ž', 'å¯ç‘žåº·', 'æƒ æ°', 'è´å› ç¾Ž', 'æŽ¨è½¦', 'é©±èšŠå™¨', 'å©´å„¿åºŠ', 'ç†å‘å™¨', 'å¥¶ç“¶', 'é¤æ¤…', 'èƒŒå¸¦è…°å‡³', 'å®‰å…¨åº§æ¤…', 'å†…è¡£', 'å†…è£¤', 'å–‚å¥¶æž•', 'æ”¶è…¹å¸¦', 'å¦ˆå’ªåŒ…', 'å¾…äº§åŒ…', 'é˜²è¾å°„æœ', 'å‚¨å¥¶è¢‹', 'ç±³ç²‰', 'è‚‰æ¾', 'ç£¨ç‰™æ£’', 'æžœæ³¥', 'ç›Šç”ŸèŒ', 'æ¸…ç«å¼€èƒƒ', 'é’™é“é”Œ', 'ç»´ç”Ÿç´ ', 'èŠ±çŽ‹', 'moony', 'å¤§çŽ‹', 'å¸®å®é€‚', 'é›€æ°', 'å¥½å¥‡', 'å¦ˆå’ªå®è´', 'å®‰å„¿ä¹', 'æµ·æ·˜å¥¶ç²‰', 'æµ·æ·˜è¾…é£Ÿ', 'æµ·æ·˜è¥å…»å“', 'ç›´é‚®èŠ±çŽ‹', 'æµ·æ·˜æ´—æŠ¤', 'æµ·æ·˜å¥¶ç“¶', 'æµ·æ·˜é¤å…·', 'æµ·æ·˜å­•äº§', 'Tæ¤', 'è¿žè¡£è£™', 'æ³³è£…', 'å¥—è£…', 'è¡¬è¡«', 'é˜²æ™’æœ', 'åŠèº«è£™', 'çŸ­è£¤', 'å‡‰éž‹', 'æ²™æ»©éž‹', 'æ´žæ´žéž‹', 'ç½‘éž‹', 'å­¦æ­¥éž‹', 'æ‹–éž‹', 'å¸†å¸ƒéž‹', 'å®å®éž‹', 'æ¯å¥³è£™', 'çˆ¶å­è£…', 'äº²å­Tæ¤', 'äº²å­è¡¬è¡«', 'äº²å­å¥—è£…', 'æ¯å¥³éž‹', 'çˆ¶å­éž‹', 'å®¶åº­éž‹', 'æ²™æ»©æˆæ°´', 'æ—©æ•™å¯è’™', 'æ‹¼æ’ç›Šæ™º', 'é¥æŽ§æ¨¡åž‹', 'è¿åŠ¨æˆ·å¤–', 'å­¦ä¹ çˆ±å¥½', 'å¡é€šå…¬ä»”', 'äº²å­äº’åŠ¨', 'ç”µåŠ¨è½¦', 'è‡ªè¡Œè½¦', 'å­¦æ­¥è½¦', 'æ‰‹æŽ¨è½¦', 'ä¸‰è½®è½¦', 'æ»‘æ¿è½¦', 'æ‰­æ‰­è½¦', 'å„¿ç«¥è½®æ»‘', 'æ—©æ•™æœº', 'ç‚¹è¯»æœº', 'å¥èº«æž¶', 'å¸ƒä¹¦', 'ä¸²/ç»•ç ', 'åºŠ/æ‘‡é“ƒ', 'çˆ¬è¡Œåž«', 'æœ¨è´¨æ‹¼å›¾', 'å¸å¦†', 'é¢è†œ', 'æ´é¢', 'é˜²æ™’', 'é¢éœœ', 'çˆ½è‚¤æ°´', 'çœ¼éœœ', 'ä¹³æ¶²', 'è¡¥æ°´', 'ç¾Žç™½', 'æ”¶ç¼©æ¯›å­”', 'æŽ§æ²¹', 'ç¥›ç—˜', 'ç¥›æ–‘', 'åŽ»é»‘çœ¼åœˆ', 'åŽ»é»‘å¤´', 'BBéœœ', 'ç²‰åº•æ¶²', 'å”‡è†', 'éš”ç¦»', 'é®ç‘•', 'æŒ‡ç”²æ²¹', 'ç²‰é¥¼', 'å½©å¦†å¥—è£…', 'å¥³å£«é¦™æ°´', 'ç”·å£«é¦™æ°´', 'ä¸­æ€§é¦™æ°´', 'æ·¡é¦™æ°´', 'å¤é¾™æ°´', 'é¦™ç²¾', 'å¤æ–¹ç²¾æ²¹', 'é¦™ä½“ä¹³', 'æ´—å‘æ°´', 'æŠ¤å‘ç´ ', 'æŸ“å‘', 'çƒ«å‘', 'é€ åž‹', 'å‡å‘', 'æ´—æŠ¤å¥—è£…', 'å‡å‘é…ä»¶', 'ç¾Žèƒ¸', 'çº¤ä½“', 'èƒ¸éƒ¨æŠ¤ç†', 'èº«ä½“æŠ¤ç†', 'å¡‘èº«', 'è„±æ¯›', 'æ‰‹éƒ¨ä¿å…»', 'è¶³éƒ¨æŠ¤ç†', 'çœ¼çº¿', 'ç«æ¯›è†', 'çœ¼å½±', 'çœ‰ç¬”', 'å‡ç«æ¯›', 'çœ¼éœœ', 'åŒçœ¼çš®è´´', 'çœ¼éƒ¨æŠ¤ç†', 'åŠ²èƒ½é†’è‚¤', 'æ¸…æ´é¢è†œ', 'ç”·æ€§ä¸»ä¹‰', 'å‰ƒé¡»è†', 'ç”·å£«å¥—è£…', 'ç”·å£«é˜²æ™’', 'ç«å±±å²©', 'çˆ½èº«èµ°ç ', 'æŠ—çš±', 'æŠ—æ•æ„Ÿ', 'ä¿æ¹¿', 'åŽ»çœ¼è¢‹', 'æ»‹æ¶¦', 'æŠ—æ°§åŒ–', 'æ·±å±‚æ¸…æ´', 'é›…è¯—å…°é»›', 'å…°è”»', 'èµ„ç”Ÿå ‚', 'è‡ªç„¶ä¹å›­', 'SK-II', 'æ‚¦è¯—é£ŽåŸ', 'æ°´å®å®', 'å¥‘å°”æ°', 'èŠ¦èŸèƒ¶', 'å½©å¦†ç›˜', 'è…®çº¢', 'é¦™æ°›', 'é«˜å…‰æ£’', 'ä¿®å®¹', 'Vè„¸', 'åŽ»è§’è´¨', 'æ´é¢', 'çˆ½è‚¤æ°´', 'ç²¾åŽ', 'ä¹³æ¶²', 'é¼»è´´', 'é©¬æ²¹', 'ç‰›è‚‰å¹²', 'é²œèŠ±é¥¼', 'çº¢æž£', 'ç³–æžœ', 'å·§å…‹åŠ›', 'å±±æ ¸æ¡ƒ', 'æ¾å­', 'å¤å‘³', 'é¥¼å¹²', 'è¯æ¢…', 'è”“è¶ŠèŽ“', 'è–¯ç‰‡', 'å¥‡å¼‚æžœ', 'èŠ’æžœ', 'æ¨±æ¡ƒ', 'æ©™å­', 'ç§‹è‘µ', 'è‹¹æžœ', 'ç•ªèŒ„', 'æŸ æª¬', 'æ¤°å­', 'æ¦´èŽ²', 'å¤§ç±³', 'æ©„æ¦„æ²¹', 'å°ç±³', 'é»„è±†', 'èµ¤è±†', 'ç«è…¿', 'é¦™è‚ ', 'æœ¨è€³', 'é¦™è‡', 'è±†ç“£é…±', 'æµ·å‚', 'é¾™è™¾', 'ç‘¶æŸ±', 'åœŸé¸¡', 'ç‰›æŽ’', 'ä¸‰æ–‡é±¼', 'å’¸é¸­è›‹', 'çš®è›‹', 'äº”èŠ±è‚‰', 'åŒ—æžè´', 'é¸¡å°¾é…’', 'çº¢é…’', 'å•¤é…’', 'ç™½é…’', 'æ¢…é…’', 'æ´‹é…’', 'æ¸…é…’', 'æ»‹è¡¥é…’', 'èŒ…å°', 'äº”ç²®æ¶²', 'éº¦ç‰‡', 'å’–å•¡', 'ç‰›å¥¶', 'æŸšå­èŒ¶', 'é…¸æ¢…æ±¤', 'çŸ¿æ³‰æ°´', 'é…µç´ ', 'è—•ç²‰', 'å§œèŒ¶', 'é…¸å¥¶ç²‰', 'é“è§‚éŸ³', 'çº¢èŒ¶', 'èŠ±è‰èŒ¶', 'é¾™äº•', 'æ™®æ´±', 'é»‘èŒ¶', 'ç¢§èžºæ˜¥', 'æ¯›å³°', 'è¢‹æ³¡èŒ¶', 'ç™½èŒ¶', 'æž¸æž', 'äººå‚', 'çŸ³æ–›', 'ç‡•çª', 'é›ªè›¤', 'èœ‚èœœ', 'å¤©éº»', 'èŠ±ç²‰', 'å…šå‚', 'çº¢èŠ±', 'èŠ’æžœå¹²', 'é±¼å­é…±', 'å’–å•¡', 'æ©„æ¦„æ²¹', 'è–¯ç‰‡', 'å·§å…‹åŠ›', 'å’–å–±', 'æ–¹ä¾¿é¢', 'çº¢é…’', 'éº¦ç‰‡', 'é¡¹é“¾', 'æ‰‹é“¾', 'æˆ’æŒ‡', 'å‘é¥°', 'é“¶é¥°', 'æ°´æ™¶', 'è€³é¥°', 'æ‰‹é•¯', 'ç¿¡ç¿ ', 'å½©å®', 'èœœèœ¡', 'è£¸é’»', 'çç ', 'é»„é‡‘', 'é’»çŸ³', 'é‡‘æ¡', 'å’Œç”°çŽ‰', 'ç¿¡ç¿ ', 'æ°´æ™¶/ä½›ç ', 'é»„é‡‘', 'æ‰‹è¡¨', 'çœ¼é•œ', 'ç‘žå£«è¡¨', 'æœºæ¢°è¡¨', 'æ—¶è£…è¡¨', 'å„¿ç«¥è¡¨', 'ç”µå­è¡¨', 'æƒ…ä¾£è¡¨', 'çŸ³è‹±è¡¨', 'æ‰‹è¡¨é…ä»¶', 'å¤ªé˜³é•œ', 'åå…‰é•œ', 'è¿‘è§†é•œ', 'å¸æœºé•œ', 'æŠ¤ç›®é•œ', 'çœ¼é•œé…ä»¶', 'è¿åŠ¨é•œ', 'è€èŠ±é•œ', 'zippo', 'ç”µå­çƒŸ', 'çƒŸæ–—', 'ç‘žå£«å†›åˆ€', 'ç»ç¾Žé…’å…·', 'é£Žæ ¼ç”·è¡¨', 'ä½›ç ', 'æ°´æ™¶', 'ç¢§çŽº', '925é“¶', 'æ–½åŽæ´›', 'ç¿¡ç¿ ', 'çç ', 'é»„é‡‘', 'é“¶é¡¹é“¾', 'æµè¡Œé£Žæ ¼', 'å¤©ç„¶æ°´æ™¶', 'é”†çŸ³æ°´æ™¶', 'ä½›ç é¡¹é“¾', 'äººé€ æ°´æ™¶', '925é“¶', 'ç¿¡ç¿ ', 'å’Œç”°çŽ‰', 'å¤å¤æ³°é“¶', 'ç²‰æ™¶æ‰‹é•¯', 'é»„é‡‘æ‰‹é•¯', 'æ—¥éŸ©', 'ç”œç¾Ž', 'å¤å¤/å®«å»·', 'æ¬§ç¾Ž', 'ç‘žä¸½', 'æ³¢è¥¿ç±³äºš', 'æ°‘æ—é£Ž', 'å‘é¥°', 'é¡¹é“¾', 'å¥—è£…', 'è€³é¥°', 'éŸ©å¼', 'å¤´é¥°', 'ä¸‰ä»¶å¥—', 'åˆé‡‘é…ä»¶', 'é“¶é¥°', 'æ°´æ™¶é…ç ', 'ç‰ç’ƒ', 'çç æ¯è´', 'æœ‰æœºçŽ»ç’ƒ', 'äººé€ æ°´æ™¶', 'è®¾è®¡å¸ˆ', 'åŠåŒ…è£…ä¿®', 'å…¨åŒ…è£…ä¿®', 'å…¨æ¡ˆè£…ä¿®', 'è£…ä¿®ç›‘ç†', 'æ¸…åŒ…æ–½å·¥', 'å±€éƒ¨è£…ä¿®', 'éªŒæˆ¿é‡æˆ¿', 'è£…ä¿®ç©ºæ°”è´¨é‡æ£€æµ‹', 'è£…ä¿®æ±¡æŸ“æ²»ç†', 'æ•´ä½“æ©±æŸœ', 'å®šåˆ¶è¡£æŸœ', 'å®šåˆ¶åŠé¡¶', 'å®šåˆ¶æ·‹æµ´æˆ¿', 'é—¨', 'çª—', 'å®šåˆ¶æŸœ', 'æ¥¼æ¢¯', 'æ¦»æ¦»ç±³å®šåˆ¶', 'åœ°æš–', 'å¸é¡¶ç¯', 'åŠç¯', 'å¸åŠä¸¤ç”¨ç¯', 'ç­’ç¯', 'å°„ç¯', 'å°ç¯', 'è½åœ°ç¯', 'å®¤å¤–ç¯', 'å£ç¯', 'å°å¤œç¯', 'æµ´å®¤æŸœ', 'æ™®é€šé©¬æ¡¶', 'èŠ±æ´’å¥—è£…', 'ä¸€ä½“æ™ºèƒ½é©¬æ¡¶', 'æ™ºèƒ½é©¬æ¡¶ç›–æ¿', 'æ·‹æµ´æˆ¿', 'é¢ç›†é¾™å¤´', 'åœ°æ¼', 'äº”é‡‘æŒ‚ä»¶', 'æµ´éœ¸', 'PVCå¢™çº¸', 'æ— çººå¸ƒå¢™çº¸', 'çº¯çº¸å¢™çº¸', 'å¢™å¸ƒ', 'æ²™ç²’å¢™çº¸', 'ç»’é¢å¢™çº¸', 'å®šåˆ¶å£ç”»', '3Då¢™çº¸', 'å®žæœ¨åœ°æ¿', 'å®žæœ¨å¤åˆåœ°æ¿', 'å¼ºåŒ–å¤åˆåœ°æ¿', 'ç«¹åœ°æ¿', 'æˆ·å¤–åœ°æ¿', 'PVCåœ°æ¿', 'é˜²é™ç”µåœ°æ¿', 'é˜²æ½®è†œ', 'è¸¢è„šçº¿', 'åœ°æ¿é¾™éª¨', 'ä»¿å¤ç –', 'é‡‰é¢ç –', 'çŽ»åŒ–ç –', 'å¾®æ™¶çŸ³', 'é©¬èµ›å…‹', 'æŠ›æ™¶ç –', 'é€šä½“ç –', 'èŠ±ç‰‡', 'è…°çº¿', 'ç“·ç –èƒŒæ™¯å¢™', 'æ’åº§', 'å¼€å…³', 'ç”µçº¿', 'ç›‘æŽ§å™¨æ', 'æ™ºèƒ½å®¶å±…', 'é˜²ç›—æŠ¥è­¦å™¨æ', 'æ¶ˆé˜²æŠ¥è­¦è®¾å¤‡', 'æŽ¥çº¿æ¿æ’å¤´', 'å¸ƒçº¿ç®±', 'æ–­è·¯å™¨', 'æ¶‚æ–™ä¹³èƒ¶æ¼†', 'æ²¹æ¼†', 'æ°´ç®¡', 'æ¿æ', 'æœ¨æ–¹', 'é˜³å…‰æˆ¿', 'çº¿æ¡', 'å¤©ç„¶å¤§ç†çŸ³', 'äººé€ å¤§ç†çŸ³', 'é˜²æ°´æ¶‚æ–™', 'å®žæœ¨åºŠ', 'å¸ƒè‰ºåºŠ', 'çš®è‰ºåºŠ', 'åºŠåž«', 'è¡£æŸœ', 'æ–—æŸœ', 'æ¢³å¦†å°', 'å­æ¯åºŠ', 'åºŠå¤´æŸœ', 'å„¿ç«¥åºŠ', 'çš®è‰ºæ²™å‘', 'å¸ƒè‰ºæ²™å‘', 'æ²™å‘åºŠ', 'å®žæœ¨æ²™å‘', 'æ‡’äººæ²™å‘', 'ç”µè§†æŸœ', 'èŒ¶å‡ ', 'éž‹æŸœ', 'çŽ„å…³åŽ…', 'è¡£å¸½æž¶', 'é¤æ¡Œ', 'æŠ˜å é¤æ¡Œ', 'æ¬§å¼é¤æ¡Œ', 'å®žæœ¨é¤æ¡Œ', 'å¤§ç†çŸ³é¤æ¡Œ', 'é¤æ¤…', 'é¤è¾¹æŸœ', 'æ¢éž‹å‡³', 'è§’æŸœ', 'å±é£Ž', 'é¤æ¡Œ', 'æŠ˜å é¤æ¡Œ', 'æ¬§å¼é¤æ¡Œ', 'å®žæœ¨é¤æ¡Œ', 'å¤§ç†çŸ³é¤æ¡Œ', 'é¤æ¤…', 'é¤è¾¹æŸœ', 'æ¢éž‹å‡³', 'è§’æŸœ', 'å±é£Ž', 'èšŠå¸', 'ä¸‰å¼€èšŠå¸', 'å‡‰å¸­', 'å‡‰å¸­å¥—ä»¶', 'å†°ä¸å¸­', 'è—¤å¸­', 'ç‰›çš®å¸­', 'å¤å‡‰è¢«', 'ç©ºè°ƒè¢«', 'å¤©ä¸å¥—ä»¶', 'åºŠå•', 'åºŠç¬ ', 'å››ä»¶å¥—', 'å…¨æ£‰å¥—ä»¶', 'è¢«å¥—', 'èš•ä¸è¢«', 'ç¾½ç»’è¢«', 'æž•å¤´', 'ä¹³èƒ¶æž•', 'è®°å¿†æž•', 'åºŠè¤¥', 'æ¯›æ¯¯', 'å®šåˆ¶çª—å¸˜', 'åœ°æ¯¯', 'æ²™å‘åž«', 'é åž«', 'æ¡Œå¸ƒæ¡Œæ——', 'é£˜çª—åž«', 'åœ°åž«', 'é¤åž«', 'é˜²å°˜ç½©', 'æ¤…åž«', 'æˆå“çª—å¸˜', 'æ²™å‘ç½©', 'æ‘†ä»¶', 'èŠ±ç“¶', 'ä»¿çœŸèŠ±', 'å°é’Ÿé—¹é’Ÿ', 'é¦™è–°ç‚‰', 'å‚¨ç‰©ç½', 'è£…é¥°ç¢—ç›˜', 'æœ¨é›•', 'çƒŸç°ç¼¸', 'çº¸å·¾ç›’', 'èœ¡çƒ›çƒ›å°', 'ä»¿çœŸé¥°å“', 'çŽ°ä»£è£…é¥°ç”»', 'æ— æ¡†ç”»', 'åŽçŽ°ä»£ç”»', 'æ²¹ç”»', 'æŒ‚é’Ÿ', 'ç…§ç‰‡å¢™', 'æ–°ä¸­å¼', 'åŒ—æ¬§å®¶é¥°', 'ç¾Žå¼ä¹¡æ‘', 'æŒ‚é’©ææ¿', 'è£…é¥°æŒ‚é’©', 'å£é¥°', 'æ‰‡å­', 'æ¯›å·¾', 'æµ´å·¾', 'å£ç½©', 'éš”éŸ³è€³å¡ž', 'ç«¹ç‚­åŒ…', 'çœ¼ç½©', 'å¤å­£å‡‰æ‹–', 'å±…å®¶éž‹', 'å¤å­£æ¸…å‡‰', 'æ¹¿å·¾', 'æ™´é›¨ä¼ž', 'é©±èšŠç¯', 'é©±èšŠæ¶²', 'å†°æ ¼', 'ä¿é²œäº§å“', 'å¯†å°ç½', 'é˜²æ½®åˆ¶å“', 'ç”µæ‰‡/å†°åž«', '5å…ƒå°ç‰©', 'è¢«å­é˜²å°˜è¢‹', 'æ”¶çº³ç›’', 'æ”¶çº³è¢‹', 'å¤§è¡£/è¥¿æœç½©', 'æŠ¤æ´—è¢‹', 'æ”¶çº³å‡³', 'éž‹æŸœ', 'ç½®ç‰©æž¶', 'æ¡Œç”¨æ”¶çº³', 'å†…è¡£æ”¶çº³', 'æ´—å‘æŠ¤å‘', 'æ²æµ´éœ²', 'æ¼±å£æ°´', 'å«ç”Ÿå·¾', 'æ´—æ‰‹æ¶²', 'ç‰™è†', 'çº¸å·¾', 'é¦™çš‚', 'æ²æµ´çƒ/æµ´æ“¦/æµ´åˆ·', 'æŒ‡ç”²åˆ€', 'å‰ƒé¡»åˆ®æ¯›åˆ€', 'æ²æµ´çƒ', 'æµ´å®¤è§’æž¶', 'æµ´å¸˜æ†', 'æ‹–æŠŠ', 'åžƒåœ¾æ¡¶', 'æ¢³å­é•œå­', 'å›´è£™', 'ç™¾æ´å¸ƒ', 'æµ·ç»µæ“¦', 'é¤å…·', 'é”…å…·', 'åˆ€å…·', 'ç‚–é”…', 'è’¸é”…', 'æ±¤é”…', 'ç…Žé”…', 'åŽ‹åŠ›é”…', 'ç‚’é”…', 'èœæ¿ç §æ¿', 'ä¸€æ¬¡æ€§é¤æ¡Œç”¨å“', 'é…’æ¯é…’å…·', 'å’–å•¡å™¨å…·', 'ç¢—ç›˜ç¢Ÿ', 'åˆ€å‰å‹º', 'é¤å…·ç“·å™¨å¥—è£…', 'é¤æ¡Œå°ç‰©', 'é¥­ç›’', 'åŽ¨æˆ¿å‚¨ç‰©', 'ä¸€æ¬¡æ€§é¤æ¡Œç”¨å“', 'èŒ¶å…·', 'èŒ¶å£¶', 'é£˜é€¸æ¯', 'åŠŸå¤«èŒ¶æ¯', 'çŽ»ç’ƒæ¯', 'æ¯åž«', 'ä¿æ¸©æ¯', 'é©¬å…‹æ¯', 'ä¿æ¸©å£¶', 'æƒ…ä¾£æ¯', 'æ™’è¡£ç¯®', 'æ™¾è¡£æ†', 'è„è¡£ç¯®', 'è¡£æž¶', 'å®¶åº­æ¸…æ´å‰‚', 'è“æ³¡æ³¡', 'ç®¡é“ç–é€šå™¨', 'å¡‘èƒ¶æ‰‹å¥—', 'åŒ»è¯ç®±', 'åžƒåœ¾è¢‹', 'æ±½è½¦é¦–é¡µ', 'æ–°è½¦å…ˆè´­', 'è½¦æµ·æ·˜', 'äºŒæ‰‹è½¦', 'çˆ±è½¦ä¼°ä»·', 'suv', 'åˆ«å…‹', 'å¤§ä¼—', 'å®é©¬', 'åº§åž«', 'åº§å¥—', 'è„šåž«', 'é¦™æ°´', 'æ—…è¡ŒåºŠ', 'é®é˜³æŒ¡', 'æŒ‚ä»¶æ‘†ä»¶', 'å®‰å…¨åº§æ¤…', 'ä¸“è½¦ä¸“ç”¨åº§åž«', 'è„šåž«', 'å®‰å…¨åº§æ¤…', 'é¦™æ°´', 'é’¥åŒ™åŒ…', 'æŒ‚ä»¶', 'åº§å¥—', 'åŽå¤‡ç®±åž«', 'ç½®ç‰©ç®±', 'æ™ºèƒ½è½¦æœº', 'åŽè§†é•œ', 'å®‰å“å¯¼èˆª', 'ä¾¿æºGPS', 'DVDå¯¼èˆª', 'ç”µå­ç‹—', 'æµåŠ¨æµ‹é€Ÿ', 'å¯¼èˆªè½¯ä»¶', 'è®°å½•ä»ª', 'é¢„è­¦ä»ª', 'GPS', 'è½¦æœº', 'å€’è½¦é›·è¾¾', 'æ™ºèƒ½åŽè§†é•œ', 'è“ç‰™', 'é˜²ç›—å™¨', 'MP3', '4Sä¿å…»', 'ç”µç“¶å®‰è£…', 'é…ä»¶å®‰è£…', 'éš”çƒ­è†œ', 'æ´—è½¦å¡', 'é•€æ™¶é•€è†œ', 'è¿žé”ä¿å…»', 'ä¸Šé—¨æœåŠ¡', 'è¡Œè½¦è®°å½•ä»ª', 'é€†å˜å™¨', 'è·Ÿè¸ªå™¨', 'å……ç”µå™¨', 'å……æ°”æ³µ', 'èƒŽåŽ‹ç›‘æµ‹', 'è½¦è½½å†°ç®±', 'ç©ºæ°”å‡€åŒ–', 'è½¦è¡£', 'SUVè¸æ¿', 'æ™´é›¨æŒ¡', 'æ”¹è‰²è†œ', 'æ±½è½¦è½¦æ ‡', 'è½¦ç‰Œæž¶', 'è½®èƒŽ', 'é›¨åˆ®å™¨', 'æœºæ²¹æ»¤èŠ¯', 'ç©ºæ°”æ»¤èŠ¯', 'ç©ºè°ƒæ»¤èŠ¯', 'å‡éœ‡', 'åˆ¹è½¦ç‰‡', 'ç«èŠ±å¡ž', 'è½®èƒŽ', 'é›¨åˆ®', 'æœºæ²¹', 'é«˜äº®å¤§ç¯', 'æŒ¡æ³¥æ¿', 'ä¿é™©æ ', 'è½¦é¡¶æž¶', 'è½®çœ‰', 'è½®æ¯‚', 'æŽ’æ°”', 'ä¿é™©æ ', 'æ±½è½¦åŒ…å›´', 'æ°™æ°”ç¯', 'è½¦é¡¶æž¶', 'è„šè¸æ¿', 'å¤§ç¯æ€»æˆ', 'å°¾ç¿¼', 'è½®æ¯‚', 'æ±½è½¦è£…é¥°ç¯', 'æŽ’æ°”ç­’', 'å°¾å–‰', 'è½¦èº«é¥°æ¡', 'æ·»åŠ å‰‚', 'é˜²å†»æ¶²', 'çŽ»ç’ƒæ°´', 'è½¦èœ¡', 'è¡¥æ¼†ç¬”', 'æ´—è½¦æœº', 'æ´—è½¦æ°´æžª', 'è½¦æŽ¸èœ¡æ‹–', 'è½¦èœ¡', 'æ´—è½¦æœº', 'è¡¥æ¼†ç¬”', 'æŠ›å…‰æœº', 'æ‰“èœ¡æµ·ç»µ', 'è½¦ç”¨æ°´æ¡¶', 'æ“¦è½¦å·¾', 'è½¦åˆ·', 'è£…é¥°æ¡', 'è½¦è´´', 'å°¾å–‰', 'æ”¹è‰²è†œ', 'é˜²çˆ†è†œ', 'æ™´é›¨æŒ¡', 'æ—¥è¡Œç¯', 'è½¦è¡£', 'å¤å­£åº§åž«', 'é®é˜³æŒ¡', 'é˜²çœ©è“é•œ', 'é˜²æ™’æ‰‹å¥—', 'iPhone', 'å°ç±³', 'åŽä¸º', 'ä¸‰æ˜Ÿ', 'é­…æ—', 'çº½æ‰£', 'é…·æ´¾', 'VIVO', 'iPad', 'å°ç±³', 'ä¸‰æ˜Ÿ', '10å¯¸', 'å°ç”µ', 'win8', 'è“é­”', 'åŽä¸º', 'DIYç”µè„‘', 'ä¸€ä½“æœº', 'è·¯ç”±å™¨', 'æ˜¾ç¤ºå™¨', 'å­¦ç”Ÿ', 'CPU', 'ç§»åŠ¨ç¡¬ç›˜', 'æ— çº¿é¼ æ ‡', 'è‹¹æžœ', 'è”æƒ³', 'Thinkpad', 'æˆ´å°”', 'åŽç¡•', 'Acer', 'ç¥žå·ž', 'ä¸‰æ˜Ÿ', 'å•å', 'è‡ªæ‹ç¥žå™¨', 'æ‹ç«‹å¾—', 'ä½³èƒ½', 'å¾®å•', 'é•œå¤´', 'å¡è¥¿æ¬§', 'å°¼åº·', 'å……ç”µå®', 'æ™ºèƒ½ç©¿æˆ´', 'è“ç‰™è€³æœº', 'iPhone6å£³', 'ç”µè„‘åŒ…', 'æ‰‹æœºè´´è†œ', 'æ‰‹æœºå£³å¥—', 'ä¸‰è„šæž¶', 'ä¿æŠ¤å£³å¥—', 'ç‚«å½©è´´è†œ', 'ç§»åŠ¨ç”µæº', 'ç›¸æœºé…ä»¶', 'æ‰‹æœºé›¶ä»¶', 'è‡ªæ‹ç¥žå™¨', 'ç§»åŠ¨POSæ”¯ä»˜', 'ç”µæ± ', 'å„¿ç«¥æ‰‹è¡¨', 'Apple Watch', 'æ™ºèƒ½æ‰‹è¡¨', 'æ™ºèƒ½æ‰‹çŽ¯', 'æ™ºèƒ½é…é¥°', 'æ™ºèƒ½å¥åº·', 'æ™ºèƒ½æŽ’æ’', 'æ™ºèƒ½çœ¼é•œ', 'æ¸¸æˆæŽŒæœº', 'å®¶ç”¨æ¸¸æˆæœº', 'æ¸¸æˆæ‰‹æŸ„', 'PSä¸»æœº', 'XBOX', 'ä»»å¤©å ‚é…ä»¶', 'PSä¸»æœºé…ä»¶', 'XBOXé…ä»¶', 'è·¯ç”±å™¨', 'ç½‘å…³', 'äº¤æ¢æœº', 'å…‰çº¤è®¾å¤‡', 'ç½‘ç»œå­˜å‚¨è®¾å¤‡', 'æ— çº¿ä¸Šç½‘å¡', 'TP-LINK', 'å°ç±³è·¯ç”±å™¨', 'MP3', 'MP4', 'å½•éŸ³ç¬”', 'ç´¢å°¼', 'é£žåˆ©æµ¦', 'ipod', 'çˆ±å›½è€…', 'è€³æœº', 'Uç›˜', 'é—ªå­˜å¡', 'è®°å¿†æ£’', 'ç§»åŠ¨ç¡¬ç›˜', 'å¸Œæ·', 'ä¸‰æ˜Ÿ', 'Sandisk', 'é‡‘å£«é¡¿', 'ç”µç£ç‚‰', 'ç”µæ°´å£¶', 'æ–™ç†æœº', 'ç”µé¥­ç…²', 'æ¦¨æ±æœº', 'å‡€æ°´å™¨', 'è±†æµ†æœº', 'çƒ¤ç®±', 'ç”µé£Žæ‰‡', 'ç©ºè°ƒæ‰‡', 'æŒ‚çƒ«æœº', 'æ‰«åœ°æœº', 'å¸å°˜å™¨', 'åŠ æ¹¿å™¨', 'é™¤æ¹¿æœº', 'å¯¹è®²æœº', 'ç©ºæ°”å‡€åŒ–', 'ç†å‘å™¨', 'ç”µå­ç§°', 'ç¾Žå®¹ä»ª', 'æŒ‰æ‘©æ¤…', 'æŒ‰æ‘©æŠ«è‚©', 'è¡€åŽ‹è®¡', 'è¶³æµ´å™¨', 'ç”µåŠ¨ç‰™åˆ·', 'å‰ƒé¡»åˆ€', 'è€³æœº', 'éŸ³å“', 'ç½‘ç»œæœºé¡¶ç›’', 'éº¦å…‹é£Ž', 'æ‰©éŸ³å™¨', 'HiFiå¥—è£…', 'è“å…‰DVD', 'ä½ŽéŸ³ç‚®', 'æ‰“å°æœº', 'æŠ•å½±ä»ª', 'ç¡’é¼“å¢¨ç›’', 'A4çº¸', 'ä¸€ä½“æœº', 'å­¦ç”Ÿæ–‡å…·', 'ä¿é™©æŸœ', 'ç”µçº¸ä¹¦', 'å­¦ä¹ æœº', 'å†°ç®±', 'ç©ºè°ƒ', 'å¹³æ¿ç”µè§†', 'æ²¹çƒŸæœº', 'ç‡ƒæ°”ç¶', 'æ¶ˆæ¯’æŸœ', 'åŽ¨ç”µå¥—è£…', 'çƒ­æ°´å™¨', 'æ´—è¡£æœº', 'åŒ…è£…è®¾å¤‡', 'åŒ…è£…çº¸ç®±', 'å¡‘æ–™è¢‹', 'åŒ…è£…èƒ¶å¸¦', 'é“­ç‰Œ', 'å¿«é€’è¢‹', 'æ°”æ³¡è†œ', 'çœŸç©ºæœº', 'ç¬”è®°æœ¬', 'æ–‡ä»¶è¢‹', 'é’¢ç¬”', 'èƒ¶ç²˜ç”¨å“', 'é“…ç¬”', 'è®¡ç®—å™¨', 'ç™½æ¿', 'å°åŽ†', 'è®¾è®¡å®šåˆ¶', 'ä¼ä¸šç”¨å“å®šåˆ¶', 'Tæ¤å°åˆ¶', 'æ¯å­å®šåˆ¶', 'pptæ¨¡æ¿', 'ç­æœå®šåˆ¶', 'æ´—ç…§ç‰‡', 'äººå¶å®šåˆ¶', 'ç”µå­ç”µå·¥', 'æ°”åŠ¨å…ƒä»¶', 'æ°´æ³µ', 'é˜€é—¨', 'ç”µé’»', 'ç„ŠæŽ¥è®¾å¤‡', 'ä¸‡ç”¨è¡¨', 'é›•åˆ»æœº', 'åŠžå…¬å®¶å…·', 'å•†ä¸šè®¾æ–½', 'åŠžå…¬æ¡Œ', 'é™ˆåˆ—æŸœ', 'è´§æž¶', 'å¹¿å‘Šç‰Œ', 'æ–‡ä»¶æŸœ', 'æ²™å‘', 'ç½‘ç»œè®¾å¤‡', 'ç”µå­å…ƒå™¨ä»¶', 'è·¯ç”±å™¨', 'äº¤æ¢æœº', 'å…‰çº¤è®¾å¤‡', 'è§†é¢‘ä¼šè®®', 'æ— çº¿å®‰å…¨ä¿å¯†', 'æœºæŸœ', 'é¤é¥®ç¾Žé£Ÿ', 'å†°æ·‡æ·‹', 'ç«é”…', 'è´­ç‰©å¡åˆ¸', 'ä½“æ£€é…é•œ', 'ç¾Žå®¹ç¾Žç”²', 'ä¿é™©ç†è´¢', 'å©šçº±æ‘„å½±', 'æ—…è¡Œå›¢è´­', 'ä½åœ¨å¸éƒ½', 'ä½åœ¨é­”éƒ½', 'ä½åœ¨æ­å·ž', 'ä½åœ¨å—äº¬', 'ä½åœ¨å¹¿å·ž', 'ä½åœ¨é’å²›', 'ä½åœ¨å®æ³¢', 'ä½åœ¨æˆéƒ½', 'å°‘å„¿è‹±è¯­', 'å°å­¦æ•™è‚²', 'æ½œèƒ½å¼€å‘', 'å®¶é•¿è®­ç»ƒ', 'å­•äº§è‚²å„¿', 'å°‘å„¿ç»˜ç”»', 'å©´å¹¼æ—©æ•™', 'éŸ³ä¹', 'Qå¸å……å€¼', 'ç‚¹å¡å……å€¼', 'å……æ¸¸æˆå¸', 'æ¸¸æˆä»£ç»ƒ', 'è¶…å€¼è´¦å·', 'æ‰‹æ¸¸å……å€¼', 'ç”µç«žæ¯”èµ›', 'æ¸¸æˆå¸®æ´¾', 'æ½‡æ´’ä¸€å®¤', 'é è°±äºŒå®¤', 'èˆ’é€‚ä¸‰æˆ¿', 'å¤§å››å®¤', 'ç§è—åˆ«å¢…', 'æ™¯è§‚å±…æ‰€', 'è½¨é“æ²¿çº¿', 'å­¦åŒºæˆ¿', 'å®žç”¨è‹±è¯­', 'ç½‘ç«™åˆ¶ä½œ', 'ITæŠ€èƒ½', 'ä¼šè®¡èŒç§°', 'ä¸€å¯¹ä¸€', 'åŠžå…¬è½¯ä»¶', 'æ—¥è¯­', 'ç¼–ç¨‹', 'è‹±é›„è”ç›Ÿ', 'å‰‘ä¾ æƒ…ç¼˜3', 'å¾é€”2', 'é­”åŸŸ', 'æˆ‘å«MT', 'åˆ€å¡”ä¼ å¥‡', 'DOTA2', 'DNF', 'é­”å…½ä¸–ç•Œ', 'è‡ªåŠ©é¤', 'ä¸ªæ€§å†™çœŸ', 'å„¿ç«¥å†™çœŸ', 'ç”µå½±ç¥¨å›¢è´­', 'ä¸Šé—¨æœåŠ¡', 'å‘¨è¾¹æ—…æ¸¸', 'å¢ƒå¤–æ—…æ¸¸', 'åŸºé‡‘ç†è´¢', 'é­…åŠ›å¥èº«', 'æ—¶å°šç¾Žå¦†', 'æ‰‹å·¥DIY', 'èˆžè¹ˆ', 'å‡è‚¥ç‘œä¼½', 'ä¸ªäººå½¢è±¡', 'ç¾Žå‰§è‹±è¯­', 'æ‘„å½±', 'ç¾Žå¥³é™ªç»ƒ', 'è½»æ¾ç”©è‚‰', 'åŸºé‡‘ç†è´¢', 'æ·˜å®ç¾Žå·¥', 'åŠžå…¬æŠ€èƒ½', 'å©šçº±æ‘„å½±', 'å©šç¤¼ç­–åˆ’', 'ä¸‰äºšå©šæ‹', 'åŽ¦é—¨å©šæ‹', 'é’å²›å©šæ‹', 'åŒ—äº¬å©šæ‹', 'æ­å·žå©šæ‹', 'ä¸Šæµ·å©šæ‹', 'æ–°å¨˜è·Ÿå¦†', 'å©šç¤¼è·Ÿæ‹', 'å©šç¤¼å¸ä»ª', 'å©šè½¦ç§Ÿèµ', 'ä»»æ„æ´—', 'æ´—å¤–å¥—', 'æ´—è¥¿è£…', 'æ´—éž‹', 'æ´—å››ä»¶å¥—', 'æ´—çƒ«è¡¬è¡«', 'çš®åŒ…æŠ¤ç†', 'æ´—çª—å¸˜', 'æ´—åœ°æ¯¯', 'åœ¨çº¿æ´—è¡£', 'æ´—ç¤¼æœ', 'æ´—çŽ©å…·', 'å¼€è’ä¿æ´', 'åŽ¨æˆ¿ä¿æ´', 'å…¬å¸ä¿æ´', 'å®¶ç”µæ¸…æ´—', 'ç©ºè°ƒæ¸…æ´—', 'æ´—æ²¹çƒŸæœº', 'å†°ç®±æ¸…æ´—', 'æ“¦çŽ»ç’ƒ', 'å®¶æ”¿æœåŠ¡', 'å®¶åº­ä¿æ´', 'ä¿æ´æœåŠ¡', 'é’Ÿç‚¹å·¥', 'æ´—è¡£æœºæ¸…æ´—', 'å«ç”Ÿé—´ä¿æ´', 'ä¸Šé—¨å…»è½¦', 'æ´—è½¦', 'å°é‡‰é•€è†œ', 'å†…é¥°æ¸…æ´—', 'ç©ºè°ƒæ¸…æ´—', 'æ±½è½¦ç»´ä¿®', 'å……åŠ æ²¹å¡', 'å¹´æ£€ä»£åŠž', 'çŽ»ç’ƒè´´è†œ', 'æ±½è½¦è£…é¥°', 'åº•ç›˜è£…ç”²', 'å››è½®å®šä½', 'æ±½è½¦æ”¹è£…', 'è¿ç« ä»£åŠž', 'æ±½è½¦éš”éŸ³', 'ä¸Šé—¨æŒ‰æ‘©', 'å¸¸è§„ä½“æ£€', 'å…¥èŒä½“æ£€', 'è€äººä½“æ£€', 'å››ç»´å½©è¶…', 'å­•å‰æ£€æŸ¥', 'ä½“æ£€æŠ¥å‘Š', 'ä¸“ä¸šæ´—ç‰™', 'çƒ¤ç“·ç‰™', 'èƒƒéƒ¨æ£€æµ‹', 'æœˆå«‚', 'å‚¬ä¹³å¸ˆ', 'è‚²å„¿å«‚', 'è¥å…»å¸ˆ', 'æ™®é€šä¿å§†', 'æ¶‰å¤–ä¿å§†', 'äº§åŽé™ªæŠ¤', 'ä¸´æ—¶çœ‹æŠ¤', 'ç®¡å®¶', 'çƒ§é¥­é˜¿å§¨', 'å® ç‰©å¯„å…»', 'å® ç‰©ç¾Žå®¹', 'å® ç‰©é…ç§', 'å® ç‰©æ´—æ¾¡', 'å® ç‰©æ‘„å½±', 'å® ç‰©æ‰˜è¿', 'å® ç‰©è®­ç»ƒ', 'å® ç‰©åŒ»ç–—', 'æ°´æ—æœåŠ¡', 'å® ç‰©ç»è‚²', 'å® ç‰©æ´—ç‰™', 'å® ç‰©é€ åž‹', 'å® ç‰©ä½“æ£€', 'å±…å®¶æ¬å®¶', 'å…¬å¸æ¬è¿', 'ç©ºè°ƒæ‹†è£…', 'å®¶ç”µæ¬è¿', 'å®¶å…·æ¬è¿', 'æ‰“å­”', 'ç”µè·¯ç»´ä¿®', 'ç”²é†›æµ‹è¯•', 'å¼€é”æ¢é”', 'æ€è™«æ¶ˆæ¯’', 'é«˜ç©ºæ¸…æ´', 'é™¤å°˜é™¤èž¨', 'ç½‘ä¸ŠåŠžäº‹', 'ä»£ç¼´è´¹', 'ä»£æŽ’é˜Ÿ', 'äº¤ç½šå•', 'å«é†’æœåŠ¡', 'å®å®èµ·å', 'å­¦è½¦æŠ¥å', 'ä»£é‚®ä»£å–', 'è¯è´¹å……å€¼', 'ä»£é€é²œèŠ±', 'æ°´ç”µç…¤ç¼´è´¹', 'åŒåŸŽé€Ÿé€’', 'ä»£åŠžæ¡£æ¡ˆ', 'å®½å¸¦è´¹', 'æœºåœºåœè½¦', 'ä¸“åˆ©ç”³è¯·', 'æ³•å¾‹å’¨è¯¢', 'ä¸“ä¸šç¿»è¯‘', 'å¼€å‘å»ºç«™', 'å›¾ç‰‡å¤„ç†', 'è§†é¢‘åˆ¶ä½œ', 'åç‰‡åˆ¶ä½œ', 'å•†æ ‡è½¬è®©', 'æ‰“å°', 'å¤å°', 'å•†æ ‡æ³¨å†Œ', 'ç§äººå¾‹å¸ˆ', 'åˆåŒæ–‡ä¹¦', 'å‡ºå›½ç¿»è¯‘', 'æ‰‹æœºç»´ä¿®', 'padç»´ä¿®', 'ä¿®å°å¼æœº', 'ç›¸æœºç»´ä¿®', 'ä¿®ç¬”è®°æœ¬', 'ä¿®å¤å°æœº', 'ä¿®æ¸¸æˆæœº', 'ä¿®å¯¼èˆªä»ª', 'è½¯ä»¶æœåŠ¡', 'å»¶ä¿æœåŠ¡', 'ç¡¬ä»¶ç»´ä¿®', 'è‹¹æžœç»´ä¿®', 'å°ç±³ç»´ä¿®', 'ä¸‰æ˜Ÿç»´ä¿®', 'å®‰å“åˆ·æœº', 'æ•°æ®æ¢å¤', 'ç”µè„‘ç»´ä¿®', 'ipadç»´ä¿®', 'åŽä¸ºç»´ä¿®', 'é‡è£…ç³»ç»Ÿ', 'å®¶ç”µç»´ä¿®', 'ç›¸æœºç»´ä¿®', 'ç¡¬ç›˜ç»´ä¿®', 'è‹¹æžœæ¢å±', 'æ¢ä¸»æ¿', 'åä¼æ‹›è˜', 'é«˜è–ªå²—ä½', 'æ–‡æ¡ˆç¼–è¾‘', 'ç½‘åº—æŽ¨å¹¿', 'å¼€å‘æŠ€æœ¯', 'æ´»åŠ¨ç­–åˆ’', 'ç¾Žå·¥è®¾è®¡', 'é‡‘ç‰Œå®¢æœ', 'å¤§ä¿ƒå®¢æœ', 'ç½‘é¡µè®¾è®¡', 'äººæ‰è®¤è¯', 'å›¾ç‰‡è®¾è®¡', 'æ‘„å½±å¸ˆ', 'åº—é•¿', 'è¿è¥ä¸»ç®¡', 'å®¢æœä¸»ç®¡', 'ç¾Žå·¥ä¸»ç®¡', 'è·‘æ­¥éž‹', 'ç¯®çƒéž‹', 'ä¼‘é—²éž‹', 'è¶³çƒéž‹', 'å¸†å¸ƒéž‹', 'è®­ç»ƒéž‹', 'å¾’æ­¥éž‹', 'ç™»å±±éž‹', 'é™é‡ç‰ˆ', 'æ¿éž‹', 'Rosherun', 'è¿åŠ¨å¥—è£…', 'è¿åŠ¨å«è¡£', 'é•¿è£¤', 'çš®è‚¤é£Žè¡£', 'å¥èº«æœ', 'çƒæœ', 'è€å…‹', 'é˜¿è¿ªè¾¾æ–¯', 'ä¸‰å¶è‰', 'ç¾Žæ´¥æµ“', 'å½ªé©¬', 'ç‹¼çˆª', 'å±±åœ°è½¦', 'å…¬è·¯è½¦', 'éª‘è¡Œæœ', 'å¤´ç›”', 'è£…å¤‡', 'é›¶ä»¶', 'å·¥å…·', 'æŠ¤å…·', 'æŠ˜å è½¦', 'æ­»é£ž', 'æ°´å£¶æž¶', 'è¡ŒæŽæž¶', 'ç¾½æ¯›çƒæ‹', 'ç¾½æ¯›çƒæœ', 'ç¾½æ¯›çƒ', 'ç½‘çƒæ‹', 'ç¯®çƒ', 'ç¯®çƒæœ', 'è¶³çƒ', 'è¶³çƒæœ', 'ä¹’ä¹“çƒæ‹', 'æ©„æ¦„çƒ', 'å°çƒ', 'é«˜å°”å¤«', 'åŠåºŠ', 'å¤´ç¯', 'é®é˜³æ£š', 'æœ›è¿œé•œ', 'ç…§æ˜Ž', 'é‡Žè¥å¸ç¯·', 'é‡Žå¤–ç…§æ˜Ž', 'çƒ§çƒ¤ç‚‰', 'æœ›è¿œé•œ', 'æ½œæ°´é•œ', 'é˜²æ½®åž«', 'çš®åˆ’è‰‡', 'çš®è‚¤è¡£', 'é˜²æ™’è¡£', 'å†²é”‹è¡£', 'æŽ¢è·¯è€…', 'é€Ÿå¹²è£¤', 'è¿·å½©æœ', 'æˆ˜æœ¯é´', 'ç™»å±±éž‹', 'crocs', 'æº¯æºªéž‹', 'æˆ·å¤–éž‹', 'éº»å°†æœº', 'è½®æ»‘', 'éº»å°†', 'è±¡æ£‹', 'é›€å‹', 'é£žé•–', 'æ¡Œä¸Šè¶³çƒ', 'é£Žç­', 'é™€èžº', 'ç©ºç«¹', 'æ²™è¢‹', 'å¤ªæžæœ', 'ç”©è„‚æœº', 'è½®æ»‘è£…å¤‡', 'è·‘æ­¥æœº', 'èˆžè¹ˆ', 'ç‘œä¼½', 'å“‘é“ƒ', 'ä»°å§æ¿', 'è¸æ­¥æœº', 'åˆ’èˆ¹æœº', 'å§æŽ¨å™¨', 'å¥èº«è½¦', 'å‘¼å•¦åœˆ', 'èˆžè¹ˆ', 'ç‘œä¼½', 'å¹¿åœºèˆž', 'èˆžè¹ˆéž‹', 'æ‹‰ä¸éž‹', 'å¹¿åœºèˆžå¥—è£…', 'è‚šçš®èˆžæœè£…', 'ç‘œä¼½åž«', 'ç‘œä¼½çƒ', 'ç‘œä¼½æœ', 'é±¼é¥µ', 'å¥—è£…', 'è·¯äºš', 'é™„ä»¶', 'é±¼é’©', 'é’“é±¼å·¥å…·', 'èˆ¹/è‰‡', 'å°é’“ç«¿', 'æµ·é’“ç«¿', 'æºªæµç«¿', 'è·¯äºšç«¿', 'çŸ¶é’“æ†', 'å•è‚©èƒŒåŒ…', 'æ—…è¡ŒåŒ…', 'åŒè‚©èƒŒåŒ…', 'æŒŽåŒ…', 'æˆ·å¤–æ‘„å½±åŒ…', 'å¤´å·¾', 'è¿åŠ¨æ°´å£¶', 'é˜²æ°´åŒ…', 'ç”µæ± ', 'ç”µè‡ªè¡Œè½¦', 'å¹³è¡¡è½¦', 'æ»‘æ¿è½¦', 'å¤´ç›”', 'æ‘©æ‰˜è½¦', 'è€å¹´ä»£æ­¥', 'ç‹¬è½®è½¦', 'é®é˜³ä¼ž', 'æ‰­æ‰­è½¦', 'æŠ˜å è½¦', 'ä»¿çœŸæ¤ç‰©', 'å¹²èŠ±', 'DIYèŠ±', 'æ‰‹æ§èŠ±', 'é²œæžœè“', 'ä»¿çœŸè”¬æžœ', 'å¼€ä¸šèŠ±ç¯®', 'èŠ±ç“¶', 'ç»¿æ¤åŒåŸŽ', 'å›­è‰ºæ–¹æ¡ˆ', 'å¤šè‚‰æ¤ç‰©', 'æ¡Œé¢ç›†æ ½', 'è”¬èœç§å­', 'æ°´åŸ¹èŠ±å‰', 'è‹”è—“æ™¯è§‚', 'ç©ºæ°”å‡¤æ¢¨', 'è‚¥æ–™', 'èŠ±ç›†èŠ±å™¨', 'èŠ±å‰è¯å‰‚', 'è¥å…»åœŸ', 'å›­è‰ºå·¥å…·', 'æ´’æ°´å£¶', 'èŠ±æž¶', 'é“ºé¢çŸ³', 'çƒ­å¸¦é±¼', 'å­”é›€é±¼', 'åº•æ –é±¼', 'è™¾èžº', 'é¾™é±¼', 'ç½—æ±‰é±¼', 'é”¦é²¤', 'é‡‘é±¼', 'æ°´æ¯', 'ç¯ç§‘é±¼', 'ä¹Œé¾Ÿ', 'æ°´è‰', 'åº•ç ‚', 'æ°´è‰æ³¥', 'æ²‰æœ¨', 'ä»¿çœŸæ°´è‰', 'å‡å±±', 'æ°§æ°”æ³µ', 'è¿‡æ»¤å™¨', 'æ°´è‰ç¯', 'åŠ çƒ­æ£’', 'é±¼ç²®', 'æ°´è´¨ç»´æŠ¤', 'ç¡åŒ–ç»†èŒ', 'é™¤è—»å‰‚', 'é¾Ÿç²®', 'å…”å…”', 'ä»“é¼ ', 'é¾™çŒ«', 'é›ªè²‚', 'ç²®é£Ÿé›¶é£Ÿ', 'åŒ»ç–—ä¿å¥', 'ç¬¼å­', 'é¹¦é¹‰', 'é¸Ÿç¬¼', 'è§‚èµé¸Ÿ', 'èš‚èšå·¥åŠ', 'èœ˜è››', 'èš•', 'å¤§ç‰Œç‹—ç²®', 'å® ç‰©æœé¥°', 'ç‹—åŽ•æ‰€', 'å® ç‰©çª', 'èˆªç©ºç®±', 'æµ·è—»ç²‰', 'ç¾Šå¥¶ç²‰', 'å® ç‰©ç¬¼', 'å‚¨ç²®æ¡¶', 'å‰ƒæ¯›å™¨', 'è¥å…»è†', 'ä¸Šé—¨æœåŠ¡', 'å…¨æ–°é’¢ç´', 'æ™ºèƒ½é’¢ç´', 'ä¸­å¤é’¢ç´', 'å°¤å…‹é‡Œé‡Œ', 'æ°‘è°£å‰ä»–', 'è¨å…‹æ–¯é£Ž', 'å£ç´', 'å°æç´', 'é«˜è¾¾', 'æ‰‹åŠž', 'ç›’è›‹', 'å…µäºº', 'å˜å½¢é‡‘åˆš', 'åœ£è¡£ç¥žè¯', 'é’¢é“ä¾ ', 'BJD', 'æ‹¼è£…', 'äººå¶', 'çŒ«ç ‚', 'çŒ«ç²®', 'çŒ«çˆ¬æž¶', 'çŒ«çª', 'çŒ«ç ‚ç›†', 'åŒ–æ¯›è†', 'çŒ«ç½å¤´', 'å–‚é£Ÿå™¨', 'æŠ˜è€³çŒ«', 'çŒ«æŠ“æ¿', 'çŒ«çŽ©å…·', 'çŒ«ç¬¼', 'å¤ç­', 'äºŒèƒ¡', 'è‘«èŠ¦ä¸', 'æˆ˜é¼“', 'å¤ç´', 'é™¶ç¬›', 'çµç¶', 'ç¬›å­', 'åŠ¨æ¼«Tæ¤', 'åŠ¨æ¼«æŠ±æž•', 'COS', 'èƒŒåŒ…', 'é¡¹é“¾', 'é¢œæ–‡å­—', 'å“†å•¦Aæ¢¦', 'å¤§ç™½', 'æ‰‹è¡¨', 'ç›—å¢“ç¬”è®°', 'æµ·è´¼', 'ç«å½±', 'LOL', 'æ€èŒå‰‚', 'æ€è™«å‰‚', 'é™¤è‰å‰‚', 'è°ƒèŠ‚å‰‚', 'æ€èž¨å‰‚', 'æ€é¼ å‰‚', 'æ•Œæ•Œç•', 'è‰ç”˜è†¦', 'å›­æž—ç§è‹—', 'åŠ¨ç‰©ç§è‹—', 'è”¬èœç§è‹—', 'æ°´æžœç§è‹—', 'ç²®æ²¹ç§å­', 'è¯æç§è‹—', 'é£Ÿç”¨èŒç§', 'è¾£æœ¨ç±½', 'æ°®è‚¥', 'ç£·è‚¥', 'é’¾è‚¥', 'å¶é¢è‚¥', 'æ–°åž‹è‚¥æ–™', 'å¤åˆè‚¥', 'ç”Ÿç‰©è‚¥æ–™', 'æœ‰æœºè‚¥', 'è€•ç§æœºæ¢°', 'æ”¶å‰²æœºæ¢°', 'å†œæœºé…ä»¶', 'æ¤ä¿æœºæ¢°', 'æ‹–æ‹‰æœº', 'æ–½è‚¥æœºæ¢°', 'ç²®æ²¹è®¾å¤‡', 'å¾®è€•æœº', 'å¡‘æ–™è–„è†œ', 'å¤§æ£šè†œ', 'é˜²æ¸—è†œ', 'é±¼å¡˜ä¸“ç”¨', 'è–„è†œ', 'é®é˜³ç½‘', 'ç¯·å¸ƒ', 'é˜²è™«ç½‘', 'é•°åˆ€', 'é”¹', 'é«˜åŽ‹æ°´æžª', 'é”¨', 'é•', 'è€™å­', 'é”„å¤´', 'å‰', 'çŒªé¥²æ–™', 'ç¾Šé¥²æ–™', 'ç‰›é¥²æ–™', 'é¢„æ··æ–™', 'é¥²æ–™åŽŸæ–™', 'å…¨ä»·æ–™', 'é¥²æ–™æ·»åŠ å‰‚', 'æµ“ç¼©æ–™', 'åŠ å·¥è®¾å¤‡', 'å…»æ®–å™¨æ¢°', 'æ¸”ä¸šç”¨å…·', 'å…»æ®–æœåŠ¡', 'é…ç§æœåŠ¡', 'å…»é¸¡è®¾å¤‡', 'æŒ¤å¥¶æœº', 'æ¯çŒªäº§åºŠ', 'åŒ–å­¦è¯', 'ä¸­å…½è¯', 'æŠ—ç”Ÿç´ ', 'é©±è™«', 'æ¶ˆæ¯’å‰‚', 'ç–«è‹—', 'é˜¿èŽ«è¥¿æž—', 'æ°Ÿè‹¯å°¼è€ƒ']''' è¯´æ˜Žå‡ ç‚¹ï¼š åœ¨ä½¿ç”¨ meta ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œè¦ä½¿ç”¨ copy.deepcopy æ·±å¤åˆ¶ï¼Œè¯¦æƒ…æŸ¥é˜… ã€scrapyã€‘itemä¼ é€’å‡ºé”™ å…³äºŽæœç´¢è¯ã€‚å› ä¸ºæ·˜å®å¯¹æœç´¢ç»“æžœåªä¼šè¿”å›ž100é¡µï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¢žåŠ ç´¢å¼•è¯ï¼Œæ¥èŽ·å¾—æ›´å¤šæ•°æ®ã€‚å¯ä»¥åœ¨ä»£ç æœ«å°¾å‘çŽ°æ›´å¤šå…³é”®è¯ï¼Œæœ‰1000å¤šä¸ªï¼Œè¿™ä¸ªlistæ˜¯ä»Žè¿™é‡ŒèŽ·å¾— æ·˜å®é¦–é¡µè¡Œä¸šå¸‚åœº åçˆ¬å¤„ç†å‘ƒå‘ƒï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œè‡ªå·±è·‘äº†ä¸€ä¼šèŽ·å¾—äº†å‡ ä¸‡æ¡æ•°æ®ï¼Œå¹¶æ²¡æœ‰ä»»ä½•çš„å¼‚å¸¸ï¼Œæ²¡æœ‰åœ¨ middlewares.py åŠ ä»£ç†ï¼Œè¿ž UA éƒ½æ˜¯å›ºå®šçš„ï¼Œå¥½å¥‡æ€ªã€‚ å¯èƒ½é•¿å¾—å¸…çš„äººå“éƒ½æ¯”è¾ƒå¥½å§ã€‚ å±•ç¤ºæ•°æ®mongo ä¸­çš„æ•°æ® æ•°æ®å¹¶ä¸ç›´è§‚ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å±•ç¤ºå‡ºæ¥ï¼Œåšä¸€ä¸ªå°å°çš„èšåˆæœç´¢ åŒæ ·çœ‹çœ‹ä¸»æ–‡ä»¶ server.py 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768# -*- coding: UTF-8 -*-from flask import Flask, request, session, g, redirect, url_for, \ abort, render_template, flashfrom bson import json_utilfrom bson.objectid import ObjectIdimport jsonimport pymongoconn = pymongo.MongoClient('localhost', 27017)db = conn['taobao']goods_coll = db['search']cate_coll = db['categories']app = Flask(__name__)def toJson(data): return json.dumps( data, default=json_util.default, ensure_ascii=False )@app.errorhandler(404)def page_not_found(e): return render_template('404.html'), 404@app.route('/', methods=['GET'])def index(): if request.method == 'GET': total = goods_coll.count() return render_template('index.html', total=total) #if request.form['key']: # key = request.form['key'] # return redirect(url_for('get_goods', key=key, page=1))@app.route('/search', methods=['GET'])@app.route('/search/&lt;item&gt;', methods=['GET'])def get_goods(item=None): if request.method == 'GET': page = request.args.get('page', 1, type=int) limit = request.args.get('limit', 30, type=int) p = (page - 1) * limit offset = request.args.get('offset', p, type=int) catid = request.args.get('catid', None, type=str) jsons = request.args.get('json', 'off') keyword = request.args.get('key', '') if not keyword: keyword = item if catid: cursor = goods_coll.find(&#123;'categories.catid': catid&#125;) else: cursor = goods_coll.find(&#123;'title': &#123;'$regex': keyword&#125; &#125;) #total = cursor.count() #flash('å·²æŸ¥è¯¢åˆ° %d ä¸ªç»“æžœ.'%total) results = cursor.skip(offset).limit(limit) resultList = [] for result in results: resultList.append(result) if jsons == 'off': return render_template('search.html', entries=resultList) else: return toJson(resultList)if __name__ == '__main__': #app.run(host='0.0.0.0') app.run(debug=True) è¿™é‡Œæ˜¯å€Ÿé‰´äº†åˆ«äººçš„é¡¹ç›®ï¼Œåœ°å€åœ¨è¿™ 1dot75cm/taobaobao æ‚¨å¯ä»¥è‡ªå®šä¹‰åœ¨ \templatesç›®å½•ä¸‹ä¿®æ”¹å¯¹åº”çš„htmlæ–‡ä»¶ 12Î» ls404.html categories.html index.html layout.html search.html ç›´æŽ¥è¿è¡Œ server.py 12345Î» piython server.py * Restarting with stat * Debugger is active! * Debugger PIN: 503-651-032 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit) æ‰“å¼€ http://127.0.0.1:5000/ å³å¯æŸ¥çœ‹ç»“æžœ To Do æ•°æ®åŽ»é‡ ä»·æ ¼åŠé”€é‡å¯è§†åŒ–å±•ç¤º é€Ÿåº¦å¤ªæ…¢ï¼Œåº”ä½¿ç”¨åˆ†å¸ƒå¼ è¯„è®ºé‡‡é›† åŠ å¼ºçˆ¬è™«çš„åçˆ¬æŽªæ–½ Github ï¼š zhangslob/Taobao_duoshou ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç»™ä¸ªstarè¡Œä¸è¡Œ å‚è€ƒ 1dot75cm/taobaobao ã€scrapyã€‘itemä¼ é€’å‡ºé”™]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyå­¦ä¹ å®žä¾‹ï¼ˆä¸‰ï¼‰é‡‡é›†æ‰¹é‡ç½‘é¡µ]]></title>
      <url>%2F2017%2F12%2F12%2FScrapy%E5%AD%A6%E4%B9%A0%E5%AE%9E%E4%BE%8B%EF%BC%88%E4%B8%89%EF%BC%89%E9%87%87%E9%9B%86%E6%89%B9%E9%87%8F%E7%BD%91%E9%A1%B5%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åä¹ç¯‡åŽŸåˆ›æ–‡ç«  å…ˆæ¥é¦–ç«å½±åŽ‹åŽ‹æƒŠ (ï½¡ãƒ»`Ï‰Â´ï½¥) æœ€å¼€å§‹æŽ¥è§¦ Rulesæ˜¯åœ¨Scrapyçš„æ–‡æ¡£ä¸Šçœ‹åˆ°çš„ï¼Œä½†æ˜¯å¹¶çœ‹è¯»æ‡‚è¿™æ˜¯ä»€ä¹ˆæ„æ€ã€‚æŽ¥ä¸‹æ¥çœ‹åˆ«äººçš„æ¡ˆä¾‹ï¼Œæœ‰ä½¿ç”¨åˆ°Rulesï¼Œä¾¿èŠ±äº†å¾ˆå¤šæ—¶é—´åŽ»äº†è§£ã€‚ è§£é‡Šï¼šRuleæ˜¯åœ¨å®šä¹‰æŠ½å–é“¾æŽ¥çš„è§„åˆ™ï¼Œä¸Šé¢çš„ä¸¤æ¡è§„åˆ™åˆ†åˆ«å¯¹åº”åˆ—è¡¨é¡µçš„å„ä¸ªåˆ†é¡µé¡µé¢å’Œè¯¦æƒ…é¡µï¼Œå…³é”®ç‚¹åœ¨äºŽé€šè¿‡restrict_xpathæ¥é™å®šåªä»Žé¡µé¢ç‰¹å®šçš„éƒ¨åˆ†æ¥æŠ½å–æŽ¥ä¸‹æ¥å°†è¦çˆ¬å–çš„é“¾æŽ¥ã€‚ å…¶å®žç”¨æˆ‘çš„è¯æ¥è¯´å°±æ˜¯ï¼Œä¸€ä¸ªæ˜¯å¯ä»¥ä¾¿æ·çš„è¿›è¡Œç¿»é¡µæ“ä½œï¼ŒäºŒæ˜¯å¯ä»¥é‡‡é›†äºŒçº§é¡µé¢ï¼Œç›¸å½“äºŽæ‰“å¼€èŽ·å¾—è¯¦æƒ…é¡µå†…å®¹ã€‚æ‰€ä»¥è‹¥ä½¿ç”¨äº† Rulesï¼Œå¯ä»¥ä¾¿æ·çš„å¸®åŠ©æˆ‘ä»¬é‡‡é›†æ‰¹é‡ç½‘é¡µã€‚ å®˜æ–¹æ–‡æ¡£CrawlSpiderç¤ºä¾‹ 12345678910111213141516171819202122232425import scrapyfrom scrapy.spiders import CrawlSpider, Rulefrom scrapy.linkextractors import LinkExtractorclass MySpider(CrawlSpider): name = 'example.com' allowed_domains = ['example.com'] start_urls = ['http://www.example.com'] rules = ( # Extract links matching 'category.php' (but not matching 'subsection.php') # and follow links from them (since no callback means follow=True by default). Rule(LinkExtractor(allow=('category\.php', ), deny=('subsection\.php', ))), # Extract links matching 'item.php' and parse them with the spider's method parse_item Rule(LinkExtractor(allow=('item\.php', )), callback='parse_item'), ) def parse_item(self, response): self.logger.info('Hi, this is an item page! %s', response.url) item = scrapy.Item() item['id'] = response.xpath('//td[@id="item_id"]/text()').re(r'ID: (\d+)') item['name'] = response.xpath('//td[@id="item_name"]/text()').extract() item['description'] = response.xpath('//td[@id="item_description"]/text()').extract() return item è¯¥spiderå°†ä»Žexample.comçš„é¦–é¡µå¼€å§‹çˆ¬å–ï¼ŒèŽ·å–categoryä»¥åŠitemçš„é“¾æŽ¥å¹¶å¯¹åŽè€…ä½¿ç”¨ parse_item æ–¹æ³•ã€‚ å¯¹äºŽæ¯ä¸ªitem responseï¼Œå°†ä½¿ç”¨XPathä»ŽHTMLä¸­æå–ä¸€äº›æ•°æ®ï¼Œå¹¶ä½¿ç”¨å®ƒå¡«å……Itemã€‚ å®žé™…åº”ç”¨ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®žé™…æ¡ˆä¾‹ä¸­Ruleså¦‚ä½•ä½¿ç”¨ è±†ç“£åº”ç”¨12345rules = [Rule(LinkExtractor(allow=(r'https://movie.douban.com/top250\?start=\d+.*'))), Rule(LinkExtractor(allow=(r'https://movie.douban.com/subject/\d+')), callback='parse_item', follow=False)] å¦‚æžœæŽ¥è§¦è¿‡djangoï¼Œé‚£ä¹ˆå¯ä»¥å‘çŽ°è¿™ä¸ªè§„åˆ™ä¸Ždjangoçš„è·¯ç”±ç³»ç»Ÿååˆ†ç›¸ä¼¼ï¼ˆdjangoéƒ½å·²ç»å¿˜å®Œäº† -_-ï¼ï¼‰ï¼Œå…¶å®žè¿™é‡Œä½¿ç”¨çš„æ­£åˆ™åŒ¹é…ã€‚ ä½¿ç”¨ r&#39;https://movie.douban.com/top250\?start=\d+.*&#39;æ¥åŒ¹é…ç¿»é¡µé“¾æŽ¥ï¼Œå¦‚ï¼š https://movie.douban.com/top250?start=25&amp;filter= https://movie.douban.com/top250?start=50&amp;filter= ä½¿ç”¨https://movie.douban.com/subject/\d+æ¥åŒ¹é…å…·ä½“ç”µå½±çš„é“¾æŽ¥ï¼Œå¦‚ï¼š https://movie.douban.com/subject/1292052/ https://movie.douban.com/subject/1291546/ é“¾å®¶åº”ç”¨çˆ¬è™«çš„é€šå¸¸éœ€è¦åœ¨ä¸€ä¸ªç½‘é¡µé‡Œé¢çˆ¬åŽ»å…¶ä»–çš„é“¾æŽ¥ï¼Œç„¶åŽä¸€å±‚ä¸€å±‚å¾€ä¸‹çˆ¬ï¼Œscrapyæä¾›äº†LinkExtractorç±»ç”¨äºŽå¯¹ç½‘é¡µé“¾æŽ¥çš„æå–ï¼Œä½¿ç”¨LinkExtractoréœ€è¦ä½¿ç”¨CrawlSpiderçˆ¬è™«ç±»ä¸­ï¼ŒCrawlSpiderä¸ŽSpiderç›¸æ¯”ä¸»è¦æ˜¯å¤šäº†rulesï¼Œå¯ä»¥æ·»åŠ ä¸€äº›è§„åˆ™ï¼Œå…ˆçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œçˆ¬å–é“¾å®¶ç½‘çš„é“¾æŽ¥ 1234567891011121314151617181920212223from scrapy.spiders import CrawlSpider, Rulefrom scrapy.linkextractors import LinkExtractorclass LianjiaSpider(CrawlSpider): name = "lianjia" allowed_domains = ["lianjia.com"] start_urls = [ "http://bj.lianjia.com/ershoufang/" ] rules = [ # åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼,å¤„ç†ä¸‹ä¸€é¡µ Rule(LinkExtractor(allow=(r'http://bj.lianjia.com/ershoufang/pg\s+$',)), callback='parse_item'), # åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼,ç»“æžœåŠ åˆ°urlåˆ—è¡¨ä¸­,è®¾ç½®è¯·æ±‚é¢„å¤„ç†å‡½æ•° # Rule(FangLinkExtractor(allow=('http://www.lianjia.com/client/', )), follow=True, process_request='add_cookie') ] def parse_item(self, response): # è¿™é‡Œä¸Žä¹‹å‰çš„parseæ–¹æ³•ä¸€æ ·ï¼Œå¤„ç† pass åŒæ ·çš„ï¼Œä½¿ç”¨r&#39;http://bj.lianjia.com/ershoufang/pg\s+$&#39;æ¥åŒ¹é…ä¸‹ä¸€é¡µé“¾æŽ¥ï¼Œå¦‚ï¼š https://bj.lianjia.com/ershoufang/pg2/ https://bj.lianjia.com/ershoufang/pg3/ è¿˜å¯ä»¥ä½¿ç”¨ r&#39;https://bj.lianjia.com/ershoufang/\d+.html&#39;æ¥åŒ¹é…è¯¦æƒ…é¡µé“¾æŽ¥ï¼Œå¦‚ï¼š https://bj.lianjia.com/ershoufang/101102126888.html https://bj.lianjia.com/ershoufang/101100845676.html å­¦ä¹ å‚æ•°Ruleå¯¹è±¡Roleå¯¹è±¡æœ‰ä¸‹é¢å‚æ•° link_extractorï¼šé“¾æŽ¥æå–è§„åˆ™ callbackï¼šlink_extractoræå–çš„é“¾æŽ¥çš„è¯·æ±‚ç»“æžœçš„å›žè°ƒ cb_kwargsï¼šé™„åŠ å‚æ•°ï¼Œå¯ä»¥åœ¨å›žè°ƒå‡½æ•°ä¸­èŽ·å–åˆ° followï¼šè¡¨ç¤ºæå–çš„é“¾æŽ¥è¯·æ±‚å®ŒæˆåŽæ˜¯å¦è¿˜è¦åº”ç”¨å½“å‰è§„åˆ™ï¼ˆbooleanï¼‰ï¼Œå¦‚æžœä¸ºFalseåˆ™ä¸ä¼šå¯¹æå–å‡ºæ¥çš„ç½‘é¡µè¿›è¡Œè¿›ä¸€æ­¥æå–ï¼Œé»˜è®¤ä¸ºFalse process_linksï¼šå¤„ç†æ‰€æœ‰çš„é“¾æŽ¥çš„å›žè°ƒï¼Œç”¨äºŽå¤„ç†ä»Žresponseæå–çš„linksï¼Œé€šå¸¸ç”¨äºŽè¿‡æ»¤ï¼ˆå‚æ•°ä¸ºlinkåˆ—è¡¨ï¼‰ process_requestï¼šé“¾æŽ¥è¯·æ±‚é¢„å¤„ç†ï¼ˆæ·»åŠ headeræˆ–cookieç­‰ï¼‰ LinkExtractorLinkExtractorå¸¸ç”¨çš„å‚æ•°æœ‰ï¼š allowï¼šæå–æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„é“¾æŽ¥ denyï¼šæŽ’é™¤æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„é“¾æŽ¥ï¼ˆä¼˜å…ˆçº§é«˜äºŽallowï¼‰ allow_domainsï¼šå…è®¸çš„åŸŸåï¼ˆå¯ä»¥æ˜¯stræˆ–listï¼‰ deny_domainsï¼šæŽ’é™¤çš„åŸŸåï¼ˆå¯ä»¥æ˜¯stræˆ–listï¼‰ restrict_xpathsï¼šæå–æ»¡è¶³XPathé€‰æ‹©æ¡ä»¶çš„é“¾æŽ¥ï¼ˆå¯ä»¥æ˜¯stræˆ–listï¼‰ restrict_cssï¼šæå–æ»¡è¶³cssé€‰æ‹©æ¡ä»¶çš„é“¾æŽ¥ï¼ˆå¯ä»¥æ˜¯stræˆ–listï¼‰ tagsï¼šæå–æŒ‡å®šæ ‡ç­¾ä¸‹çš„é“¾æŽ¥ï¼Œé»˜è®¤ä»Žaå’Œareaä¸­æå–ï¼ˆå¯ä»¥æ˜¯stræˆ–listï¼‰ attrsï¼šæå–æ»¡è¶³æ‹¥æœ‰å±žæ€§çš„é“¾æŽ¥ï¼Œé»˜è®¤ä¸ºhrefï¼ˆç±»åž‹ä¸ºlistï¼‰ uniqueï¼šé“¾æŽ¥æ˜¯å¦åŽ»é‡ï¼ˆç±»åž‹ä¸ºbooleanï¼‰ process_valueï¼šå€¼å¤„ç†å‡½æ•°ï¼ˆä¼˜å…ˆçº§å¤§äºŽallowï¼‰ å…³äºŽLinkExtractorçš„è¯¦ç»†å‚æ•°ä»‹ç»è§å®˜ç½‘ æ³¨æ„ï¼šåœ¨ç¼–å†™æŠ“å–Spiderè§„åˆ™æ—¶ï¼Œé¿å…ä½¿ç”¨parseä½œä¸ºå›žè°ƒï¼Œå› ä¸ºCrawlSpiderä½¿ç”¨parseæ–¹æ³•è‡ªå·±å®žçŽ°å…¶é€»è¾‘ã€‚å› æ­¤ï¼Œå¦‚æžœä½ è¦†ç›–parseæ–¹æ³•ï¼Œçˆ¬è¡ŒSpiderå°†ä¸å†å·¥ä½œã€‚ æœ€åŽè¯´ä¸€ä¸ªè‡ªå·±çŠ¯è¿‡çš„ä½Žçº§é”™è¯¯ï¼Œæˆ‘ç”¨Scrapyæœ‰ä¸ªä¹ æƒ¯ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®ä¹‹åŽï¼Œç›´æŽ¥cdç›®å½•ï¼Œç„¶åŽä½¿ç”¨genspiderå‘½ä»¤ï¼Œç„¶åŽã€‚ã€‚ 12345678910111213141516D:\Backup\æ¡Œé¢Î» scrapy startproject exampleNew Scrapy project &apos;example&apos;, using template directory &apos;c:\\users\\administrator\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\scrapy\\templates\\project&apos;, created in: D:\Backup\æ¡Œé¢\exampleYou can start your first spider with: cd example scrapy genspider example example.comD:\Backup\æ¡Œé¢Î» cd exampleD:\Backup\æ¡Œé¢\exampleÎ» scrapy genspider em example.comCreated spider &apos;em&apos; using template &apos;basic&apos; in module: example.spiders.em ç„¶åŽæˆ‘çš„em.pyå°±å˜æˆäº†è¿™æ ·ï¼š 1234567891011# -*- coding: utf-8 -*-import scrapyclass EmSpider(scrapy.Spider): name = 'em' allowed_domains = ['example.com'] start_urls = ['http://example.com/'] def parse(self, response): pass æ³¨æ„ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¸èƒ½ä½¿ç”¨Rulesæ–¹æ³•çš„ï¼Œå› ä¸ºobjectä¸å¯¹ï¼Œåº”è¯¥æ˜¯ class EmSpider(CrawlSpider) è€Œä¸æ˜¯class EmSpider(scrapy.Spider): å…±å‹‰ï¼ï¼ï¼ ä¸‹ä¸€èŠ‚åº”è¯¥ä¼šè®²åˆ°Scrapyä¸­å„ä¸ªç»„ä»¶çš„ä½œç”¨ï¼Œä»¥åŠè¿™å¼ ç¥žå›¾ å‚è€ƒï¼š CrawlSpiderç¤ºä¾‹ scrapyå­¦ä¹ ç¬”è®°]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç»Ÿè®¡å­¦å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰æ•°æ®æ•´ç†ä¸Žå±•ç¤º]]></title>
      <url>%2F2017%2F12%2F06%2F%E7%BB%9F%E8%AE%A1%E5%AD%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E6%95%B4%E7%90%86%E4%B8%8E%E5%B1%95%E7%A4%BA%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åå…«ç¯‡åŽŸåˆ›æ–‡ç«  è¿™æ˜¯ç»Ÿè®¡å­¦çš„ç¬¬äºŒç¯‡ç¬”è®°ï¼Œä¸»è¦è®°å½•äº†å¦‚ä½•æ•´ç†æ•°æ®ä¸Žå±•ç¤ºæ•°æ®ï¼Œä¹¦æœ¬ä¸Šæ˜¯è¿™æ ·è¯´ï¼Œä½†æ˜¯æˆ‘è§‰å¾—çŽ°åœ¨äººä»¬ä¼šæ›´å¤šçš„å«åšæ•°æ®æ¸…æ´—ä¸Žæ•°æ®å¯è§†åŒ–ã€‚å‘½åæ— æ‰€è°“ï¼ŒæŽŒæ¡æ–¹æ³•å°±å¥½ã€‚ ä¸‹é¢æ˜¯æ­£æ–‡ã€‚ å¯ä»¥æŽ¥ç€è¿™é‡Œçœ‹å“¦ ç»Ÿè®¡å­¦å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ æ•°æ®æ•´ç†ä¸Žå±•ç¤º3.1 æ•°æ®çš„é¢„å¤„ç†3.1.1 æ•°æ®å®¡æ ¸ æ¦‚å¿µï¼šæ£€æŸ¥æ•°æ®æ˜¯å¦æœ‰é”™è¯¯ å¯¹äºŽé€šè¿‡è°ƒæŸ¥å–å¾—çš„åŽŸå§‹æ•°æ®ï¼Œä¸»è¦ä»Žå®Œæ•´æ€§å’Œå‡†ç¡®æ€§ä¸¤ä¸ªæ–¹é¢åŽ»å®¡æ ¸ å¯¹äºŽé€šè¿‡å…¶ä»–æ¸ é“èŽ·å¾—çš„äºŒæ‰‹æ•°æ®ï¼Œä¸»è¦å®¡æ ¸æ•°æ®çš„é€‚ç”¨æ€§å’Œæ—¶æ•ˆæ€§ 3.1.2 æ•°æ®ç­›é€‰ åˆ é™¤æŸäº›ä¸ç¬¦åˆè¦æ±‚çš„æ•°æ®å’Œæœ‰æ˜Žæ˜¾é”™è¯¯çš„æ•°æ® å°†ç¬¦åˆæŸç§ç‰¹å®šæ¡ä»¶çš„æ•°æ®ç­›é€‰å‡ºæ¥ï¼Œè€Œå°†ä¸ç¬¦åˆç‰¹å®šæ¡ä»¶çš„æ•°æ®äºˆä»¥å‰”é™¤ Excelä¸¾ä¾‹ 3.1.3 æ•°æ®æŽ’åº æ¦‚å¿µï¼šæŒ‰ä¸€å®šé¡ºåºå°†æ•°æ®æŽ’åˆ—ï¼Œä»¥ä¾¿äºŽç ”ç©¶è€…é€šè¿‡æ•°æ®å‘çŽ°ä¸€äº›æ˜Žæ˜¾çš„ç‰¹å¾æˆ–è¶‹åŠ¿ï¼Œæ‰¾åˆ°è§£å†³é—®é¢˜çš„çº¿ç´¢ é€šè¿‡æ•°æ®ç±»åž‹é€‰æ‹©æŽ’åºæ–¹å¼ï¼šå­—æ¯åž‹æ•°æ®ã€æ±‰å­—åž‹æ•°æ®ã€æ•°å€¼åž‹æ•°æ® è¿™ä¸ªå¥½åƒä¹Ÿå«åšæ•°æ®æ¸…æ´— 3.2 å“è´¨æ•°æ®çš„æ•´ç†ä¸Žå±•ç¤º3.2.1 é¢‘æ•°ä¸Žé¢‘æ•°åˆ†å¸ƒ è½åœ¨æŸä¸€ç‰¹å®šç±»åˆ«ä¸­çš„æ•°æ®ä¸ªæ•°ï¼Œæˆä¸ºé¢‘æ•° æŠŠå„ä¸ªç±»åˆ«åŠè½åœ¨å…¶ä¸­çš„ç›¸åº”é¢‘æ•°å…¨éƒ¨åˆ—å‡ºï¼Œå¹¶ç”¨è¡¨æ ¼å½¢å¼è¡¨çŽ°å‡ºæ¥ï¼Œæˆä¸ºé¢‘æ•°åˆ†å¸ƒ å¥½åƒä¸æ­¢è¡¨æ ¼å§ ä¸€ä¸ªæ€»ä½“ï¼ˆæˆ–æ ·æœ¬ï¼‰ä¸­å„ä¸ªéƒ¨åˆ†çš„æ•°æ®ä¸Žå…¨éƒ¨æ•°æ®ä¹‹æ¯”ï¼Œæˆä¸ºæ¯”ä¾‹ å°†æ¯”ä¾‹ä¹˜ä»¥100å¾—åˆ°çš„æ•°å€¼ï¼Œæˆä¸ºç™¾åˆ†æ¯”æˆ–ç™¾åˆ†æ•°ç”¨%è¡¨ç¤º æ€»ä½“ï¼ˆæˆ–æ ·æœ¬ï¼‰ä¸­å„ä¸åŒç±»åˆ«æ•°å€¼ä¹‹é—´çš„æ¯”å€¼ï¼Œæˆä¸ºæ¯”çŽ‡ 3.2.2 å“è´¨æ•°æ®çš„å±•ç¤º æ¡å½¢å›¾ é¥¼å›¾ çŽ¯å½¢å›¾ 3.3 æ•°å€¼åž‹æ•°æ®çš„æ•´ç†ä¸Žå±•ç¤º3.3.1 æ•°æ®åˆ†ç»„ æ ¹æ®ç»Ÿè®¡åˆ†æžçš„éœ€è¦ï¼Œå°†åŽŸå§‹æ•°æ®æŒ‰ç…§æŸç§æ ‡å‡†åˆ’åˆ†æˆä¸åŒçš„ç»„åˆ«ï¼Œæˆä¸ºæ•°æ®åˆ†ç»„ åœ¨ç»„è·åˆ†ç»„ä¸­ï¼Œä¸€ä¸ªç»„çš„æœ€å°å€¼ç§°ä¸ºä¸‹é™ï¼Œä¸€ä¸ªç»„çš„æœ€å¤§å€¼ç§°ä¸ºä¸Šé™ æ¯ä¸€ç»„çš„ä¸Šé™å’Œä¸‹é™ä¹‹é—´çš„ä¸­é—´å€¼ç§°ä¸ºç»„ä¸­å€¼ 3.3.2 æ•°å€¼åž‹æ•°æ®çš„å›¾ç¤º åˆ†ç»„æ•°æ®çœ‹åˆ†å¸ƒï¼šç›´æ–¹å›¾ï¼ˆhistogramï¼‰ æœªåˆ†ç»„æ•°æ®çœ‹åˆ†å¸ƒï¼šèŒŽå¶å›¾å’Œç®±åž‹å›¾ å¤šå˜é‡æ•°æ®çš„å±•ç¤ºï¼šé›·è¾¾å›¾ 3.4 ä½¿ç”¨å›¾è¡¨çš„æ³¨æ„äº‹é¡¹ä¼˜ç§€å›¾è¡¨ç‰¹å¾ï¼š æ˜¾ç¤ºæ•°æ® è®©è¯»è€…æŠŠæ³¨æ„åŠ›æ”¾åœ¨å›¾è¡¨å†…å®¹ä¸Š é¿å…æ­ªæ›² å¼ºè°ƒæ•°æ®ä¹‹é—´çš„æ¯”è¾ƒ æœåŠ¡äºŽä¸€ä¸ªæ˜Žç¡®çš„ç›®çš„ æœ‰å¯¹å›¾å½¢çš„æè¿°ç»Ÿè®¡å’Œæ–‡å­—è¯´æ˜Ž ä¼˜ç§€å›¾å½¢åº”å½“ï¼š ç²¾å¿ƒè®¾è®¡ï¼Œæœ‰åŠ©äºŽæ´žå¯Ÿé—®é¢˜çš„å®žè´¨ ä½¿å¤æ‚çš„è§‚ç‚¹å¾—åˆ°ç®€æ˜Žã€ç¡®åˆ‡ã€é«˜æ•ˆçš„é˜è¿° èƒ½åœ¨æœ€çŸ­çš„æ—¶é—´å†…ã€ä»¥æœ€å°‘çš„ç¬”å¢¨ç»™è¯»è€…æä¾›å¤§é‡çš„ä¿¡æ¯ æ˜¯å¤šç»´çš„ è¡¨è¿°æ•°æ®çš„çœŸå®žæƒ…å†µ å“è´¨æ•°æ®æ‚¨åº”è¯¥ä¼šå’Œæˆ‘ä¸€æ ·æé—®ï¼Œä»€ä¹ˆæ˜¯å“è´¨æ•°æ®ï¼Ÿ å“è´¨æ•°æ®:å¯¹äº§å“æˆ–å•†å“è¿›è¡Œå„ç§åŒ–å­¦ã€ç‰©ç†ã€åŠ›å­¦ç­‰è¯•éªŒåŽæ‰€å¾—å‡ºçš„æ•°æ®ã€‚ å“è´¨æ•°æ®ï¼šå¯¹äº§å“æˆ–å•†å“è¿›è¡Œå„ç§åŒ–å­¦ã€ç‰©ç†ã€åŠ›å­¦ç­‰è¯•éªŒåŽæ‰€å¾—å‡ºçš„æ•°æ®ã€‚ å“è´¨åž‹æ•°æ®ï¼šæŒ‰å“è´¨æ ‡å¿—åˆ†ç»„æ‰€å¾—åˆ°æ•°æ®ï¼ŒåŒ…æ‹¬åˆ†ç±»æ•°æ®å’Œé¡ºåºæ•°æ®ï¼Œä»–ä»¬åœ¨æ•´ç†å’Œå›¾å½¢å±•ç¤ºä¸Šçš„æ–¹æ³•å¤§ä½“ç›¸åŒã€‚ æœ¬æ–‡ä¸­æåˆ°çš„å“è´¨æ•°æ®åº”è¯¥æ˜¯åŽè€… æ•°æ®å¯è§†åŒ–è¿™é‡Œé‡ç‚¹è¯´ä¸‹æ•°æ®å›¾è¡¨çš„é€‰æ‹©ã€‚ å°±æˆ‘è‡ªå·±çš„å·¥ä½œä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯ç›´æ–¹å›¾ã€æŠ˜çº¿å›¾ä¸Žé¥¼å›¾ï¼Œè¯äº‘å›¾ï¼ˆå¦‚æžœç®—çš„è¯ï¼‰ã€‚æ•™æä¸­ä¹Ÿè¯´äº†å¾ˆå¤šæ²¡ç”¨è¿‡çš„å›¾ï¼Œè¿™ä¸ªä¸œè¥¿è¿˜æ˜¯è¦æ ¹æ®è‡ªå·±çš„å…·ä½“ä¸šåŠ¡æ¥æ“ä½œã€‚ è¿™é‡ŒæŽ¨èä¸€ä¸ªå¾ˆå¥½çš„ç½‘ç«™ï¼Œå›¾è¡¨ä½¿ç”¨ è¿™ä¸ªç½‘ç«™æœ‰å¤šå¥½ï¼Œä½ ä¸€çœ‹ä¾¿çŸ¥ï¼Œä¸å¤šè§£é‡Šã€‚ æ•°æ®æ¸…æ´—æœ‰äººè¯´ï¼šä¸€ä¸ªåˆ†æžé¡¹ç›®åŸºæœ¬å…«æˆæ—¶é—´åœ¨æ´—æ•°æ®ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¸…æ´—æ•°æ®ã€‚ æ•°æ®æ¸…æ´—æ˜¯æŒ‡å‘çŽ°å¹¶çº æ­£æ•°æ®æ–‡ä»¶ä¸­å¯è¯†åˆ«çš„é”™è¯¯çš„æœ€åŽä¸€é“ç¨‹åºï¼ŒåŒ…æ‹¬æ£€æŸ¥æ•°æ®ä¸€è‡´æ€§ï¼Œå¤„ç†æ— æ•ˆå€¼å’Œç¼ºå¤±å€¼ç­‰ã€‚ä¸Žé—®å·å®¡æ ¸ä¸åŒï¼Œå½•å…¥åŽçš„æ•°æ®æ¸…ç†ä¸€èˆ¬æ˜¯ç”±è®¡ç®—æœºè€Œä¸æ˜¯äººå·¥å®Œæˆã€‚ æ•°æ®æ¸…æ´—çš„æ–¹æ³• è§£å†³ä¸å®Œæ•´æ•°æ®ï¼ˆ å³å€¼ç¼ºå¤±ï¼‰çš„æ–¹æ³• é”™è¯¯å€¼çš„æ£€æµ‹åŠè§£å†³æ–¹æ³• é‡å¤è®°å½•çš„æ£€æµ‹åŠæ¶ˆé™¤æ–¹æ³• ä¸ä¸€è‡´æ€§ï¼ˆ æ•°æ®æºå†…éƒ¨åŠæ•°æ®æºä¹‹é—´ï¼‰çš„æ£€æµ‹åŠè§£å†³æ–¹æ³• è½¬æ¢æž„é€  æ•°æ®åŽ‹ç¼© è€è§„çŸ©ï¼Œè¿˜æ˜¯æ”¾ä¸€ç‚¹ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839import numpy as npimport matplotlib.pyplot as pltimport matplotlib.patches as patchesimport matplotlib.path as pathfig, ax = plt.subplots()# Fixing random state for reproducibilitynp.random.seed(19680801)# histogram our data with numpydata = np.random.randn(1000)n, bins = np.histogram(data, 50)# get the corners of the rectangles for the histogramleft = np.array(bins[:-1])right = np.array(bins[1:])bottom = np.zeros(len(left))top = bottom + n# we need a (numrects x numsides x 2) numpy array for the path helper# function to build a compound pathXY = np.array([[left, left, right, right], [bottom, top, top, bottom]]).T# get the Path objectbarpath = path.Path.make_compound_path_from_polys(XY)# make a patch out of itpatch = patches.PathPatch(barpath)ax.add_patch(patch)# update the view limitsax.set_xlim(left[0], right[-1])ax.set_ylim(bottom.min(), top.max())plt.show() å‚è€ƒ æ•°æ®æ¸…æ´— æ•°æ®æŒ–æŽ˜ä¸­å¸¸ç”¨çš„æ•°æ®æ¸…æ´—æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyå­¦ä¹ å®žä¾‹ï¼ˆäºŒï¼‰é‡‡é›†æ— é™æ»šåŠ¨é¡µé¢]]></title>
      <url>%2F2017%2F12%2F03%2FScrapy%E5%AD%A6%E4%B9%A0%E5%AE%9E%E4%BE%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E9%87%87%E9%9B%86%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8%E9%A1%B5%E9%9D%A2%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  ä¸Šä¸€ç¯‡å†™çš„æ˜¯é‡‡é›†è™Žå—…ç½‘é¦–é¡µçš„æ–°é—»æ•°æ®ï¼Œæœ‰æœ‹å‹å¯¹æˆ‘è¯´ï¼Œé‡‡é›†å¤šé¡µè¯•è¯•çœ‹ã€‚åŽæ¥ç ”ç©¶ä¸‹ï¼Œè™Žå—…ç½‘é¦–é¡µæ˜¯POSTåŠ è½½ï¼ŒForm Dataä¸­æºå¸¦å‚æ•°ï¼Œæ‰€ä»¥åªéœ€è¦å¸¦ä¸Šä¸€ä¸ªå¾ªçŽ¯å°±å¥½äº†ã€‚è¿™æ˜¯æˆ‘æœ€åˆçš„æƒ³æ³•ï¼Œå…ˆè®©æˆ‘ä»¬çœ‹çœ‹Scrapyä¸­å¦‚ä½•é‡‡é›†æ— é™æ»šåŠ¨é¡µé¢ï¼Ÿ å…ˆä¸¾ä¸ªæ —å­ï¼Œé‡‡é›†ç½‘ç«™æ˜¯quotes åˆ†æžç½‘é¡µ ä¸‹æ‹‰æ—¶ï¼Œä¼šå‘çŽ°æ›´å¤šæ–°çš„è¯·æ±‚ï¼Œè§‚å¯Ÿè¿™äº›è¯·æ±‚ï¼Œè¿”å›žçš„éƒ½æ˜¯jsonæ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€éœ€çš„ï¼Œå†çœ‹çœ‹ä»–ä»¬çš„ä¸åŒï¼Œä¹Ÿå°±æ˜¯å‚æ•°çš„æ”¹å˜ï¼Œå®Œæ•´é“¾æŽ¥æ˜¯ï¼š 123http://spidyquotes.herokuapp.com/api/quotes?page=2http://spidyquotes.herokuapp.com/api/quotes?page=3http://spidyquotes.herokuapp.com/api/quotes?page=4 è¿™å°±å¾ˆæ¸…æ™°äº†ã€‚ è¿”å›žçš„æ˜¯jsonï¼Œæˆ‘ä»¬éœ€è¦è§£æžï¼Œç„¶åŽæå–æ•°æ®ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•çŸ¥é“æœ€å¤šæœ‰å¤šå°‘æ¡jsonå‘¢ï¼Œæ–‡ä»¶å·²ç»å‘Šè¯‰æˆ‘ä»¬äº†ï¼š has_next:true åˆ›å»ºé¡¹ç›®12345scrapy startproject quotecd quotescrapy genspider spiderquote http://spidyquotes.herokuapp.com/scroll å®šä¹‰ItemæŸ¥çœ‹ç½‘ç«™ï¼Œé‡‡é›†textã€authorå’Œtagsè¿™ä¸‰ä¸ª 123456789import scrapyclass QuoteItem(scrapy.Item): # define the fields for your item here like: # name = scrapy.Field() text = scrapy.Field() author = scrapy.Field() tag = scrapy.Field() ç¼–å†™spider1234567891011121314151617181920212223# -*- coding: utf-8 -*-import scrapyimport jsonclass SpiderquoteSpider(scrapy.Spider): name = 'spiderquote' quotes_base_url = 'http://spidyquotes.herokuapp.com/api/quotes?page=%s' start_urls = [quotes_base_url % 1] download_delay = 1.5 def parse(self, response): data = json.loads(response.body) for item in data.get('quotes', []): yield &#123; 'text': item.get('text'), 'author': item.get('author', &#123;&#125;).get('name'), 'tags': item.get('tags'), &#125; if data['has_next']: next_page = data['page'] + 1 yield scrapy.Request(self.quotes_base_url % next_page) è¿è¡Œçˆ¬è™«ï¼Œç„¶åŽå°±å¯ä»¥çœ‹åˆ°ç»“æžœäº†ã€‚ åº”ç”¨åˆ°è™Žå—…ç½‘é‚£ä¹ˆå¦‚ä½•åº”ç”¨åˆ°è™Žå—…ç½‘å‘¢ï¼Ÿé¦–å…ˆè¿˜æ˜¯è¦åŽ»åˆ†æžç½‘é¡µã€‚ è™Žå—…ç½‘çš„å‚æ•°æœ‰3ä¸ªï¼š 123huxiu_hash_code:13a3a353c52d424e1e263dda4d594e59page:3last_dateline:1512026700 æˆ‘ä»¬çŸ¥é“pageå°±æ˜¯ç¿»é¡µé¡µç ï¼Œhuxiu_hash_codeæ˜¯ä¸€ä¸ªä¸å˜çš„å­—ç¬¦ï¼Œlast_datelineçœ‹èµ·æ¥åƒunixæ—¶é—´æˆ³ï¼ŒéªŒè¯ç¡®å®žå¦‚æ­¤ã€‚è¿™ä¸ªæ—¶é—´æˆ³æœ‰å¿…è¦å¸¦ä¸Šå—ï¼Œæˆ‘æƒ³éªŒè¯è¯•è¯•çœ‹ã€‚ åœ¨postmanä¸­æµ‹è¯•ï¼Œä¸å¸¦ä¸Šlast_datelineä¹Ÿæ˜¯å¯ä»¥è¿”å›žæ•°æ®ï¼Œå¹¶ä¸”è¿™ä¸ªjsonä¸­å·²ç»å‘Šè¯‰æˆ‘ä»¬ä¸€å…±æœ‰å¤šå°‘é¡µï¼š &quot;total_page&quot;: 1654 åœ¨ä¸»å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥ä¾è‘«èŠ¦ç”»ç“¢ 12345678910111213141516171819202122232425262728293031# -*- coding: utf-8 -*-import scrapyfrom huxiu.items import HuxiuItemimport jsonfrom lxml import etreeclass HuxiuSpider(scrapy.Spider): name = 'HuXiu' def start_requests(self): url = 'https://www.huxiu.com/v2_action/article_list' for i in range(1, 10): # FormRequest æ˜¯Scrapyå‘é€POSTè¯·æ±‚çš„æ–¹æ³• yield scrapy.FormRequest( url = url, formdata = &#123;"huxiu_hash_code" : "13a3a353c52d424e1e263dda4d594e59", "page" : str(i)&#125;, callback = self.parse ) def parse(self, response): item = HuxiuItem() data = json.loads(response.text) s = etree.HTML(data['data']) item['title'] = s.xpath('//a[@class="transition msubstr-row2"]/text()') item['link'] = s.xpath('//a[@class="transition msubstr-row2"]/@href') item['author'] = s.xpath('//span[@class="author-name"]/text()') item['introduction'] = s.xpath('//div[@class="mob-sub"]/text()') yield item è¾“å‡ºçš„æ•°æ®æœ‰ç‚¹éš¾çœ‹ï¼Œæ˜¯ä¸€æ®µä¸€æ®µçš„ã€‚ã€‚ å› ä¸ºdata[&#39;data&#39;]æ˜¯ä¸€æ®µhtmlæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©çš„æ˜¯xpathï¼Œä¸æ¸…æ¥šè¿™é‡Œæ˜¯å¦ç›´æŽ¥ä½¿ç”¨Scrapyçš„xpathè§£æžå·¥å…·ï¼Œå¦‚æžœå¯ä»¥ï¼Œæ¬¢è¿Žåœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ã€‚ æœ¬ç¯‡æ”¶èŽ· Scrapyé‡‡é›†åŠ¨æ€ç½‘ç«™ï¼šåˆ†æžç½‘é¡µ ä½¿ç”¨Scrapyæ¨¡æ‹Ÿpostè¯·æ±‚æ–¹æ³•ï¼Œæ–‡æ¡£åœ¨è¿™ åˆ˜äº¦è²å¥½æ¼‚äº® å¾…åšäº‹å®œ å®Œå–„æ–‡ä»¶ä¿å­˜ä¸Žè§£æž å…¨ç«™æŠ“å–å¤§æ¦‚ç”¨äº†3åˆ†é’Ÿï¼Œé€Ÿåº¦æœ‰ç‚¹æ…¢ è‹¥æƒ³è¯„è®ºï¼Œå…ˆç¿»é•¿åŸŽ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ç»Ÿè®¡å­¦å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2017%2F11%2F30%2F%E7%BB%9F%E8%AE%A1%E5%AD%A6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åå…­ç¯‡åŽŸåˆ›æ–‡ç«  è¿™æ˜¯å­¦ä¹ ç»Ÿè®¡å­¦çš„ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œä»¥åŽå°½é‡éƒ½æ”¾åœ¨è¿™é‡Œå§ã€‚ å‘çŽ°ä½¿ç”¨hexoå‘æ–‡ç« çš„å¿«æ·é”®ï¼š hexo clean &amp;&amp; hexo g &amp;&amp; hexo d ä¸‹é¢æ˜¯æ­£æ–‡ï¼š 1ã€ç»Ÿè®¡ä¸­çš„åŸºæœ¬æ¦‚å¿µ æ€»ä½“å’Œæ ·æœ¬ã€‚æ€»ä½“ï¼šæ‰€ç ”ç©¶çš„å…¨éƒ¨ä¸ªä½“ï¼›æ ·æœ¬ï¼šæ€»ä½“ä¸­çš„ä¸€éƒ¨åˆ† å‚æ•°å’Œç»Ÿè®¡é‡ã€‚å‚æ•°ï¼šç”¨æ¥æè¿°æ€»ä½“ç‰¹å¾çš„æ¦‚æ‹¬æ€§æ•°å­—åº¦é‡ï¼›ç»Ÿè®¡é‡ï¼šç”¨æ¥æè¿°æ ·æœ¬ç‰¹å¾çš„æ¦‚æ‹¬æ€§æ•°å­—åº¦é‡ã€‚ å˜é‡ã€‚å˜é‡ã€åˆ†ç±»å˜é‡ï¼ˆäº‹ç‰©ç±»åˆ«çš„ä¸€ä¸ªåç§°ï¼‰ã€é¡ºåºå˜é‡ï¼ˆäº‹ç‰©æœ‰åºç±»åˆ«çš„ä¸€ä¸ªåç§°ï¼‰ã€æ•°å€¼åž‹å˜é‡ã€ç¦»æ•£åž‹å˜é‡ï¼ˆåªèƒ½å–å¯æ•°å€¼çš„å˜é‡ï¼‰ã€è¿žç»­æ€§å˜é‡ã€‚ 2ã€æ•°æ®çš„æ”¶é›†1ã€æ•°æ®çš„é—´æŽ¥æ¥æºäºŒæ‰‹æ•°æ®ï¼šå…¬å¼€å‡ºç‰ˆçš„æˆ–å…¬å¼€æŠ¥é“çš„æ•°æ®ã€‚ 2ã€æ•°æ®çš„ç›´æŽ¥æ¥æºï¼ˆ1ï¼‰ç»Ÿè®¡è°ƒæŸ¥æ–¹å¼ æŠ½æ ·è°ƒæŸ¥ï¼šç»æµŽæ€§ã€æ—¶æ•ˆæ€§å¼ºã€é€‚åº”é¢å¹¿ã€å‡†ç¡®æ€§é«˜ã€‚ æ™®æŸ¥ï¼šä¸€æ¬¡æ€§æˆ–å‘¨æœŸæ€§ã€è§„å®šè°ƒæŸ¥æ—¶é—´ã€æ•°æ®æ¯”è¾ƒå‡†ç¡®ã€èŒƒå›´æ¯”è¾ƒç‹­çª„ã€‚ ï¼ˆ2ï¼‰æ•°æ®çš„æ”¶é›†æ–¹æ³• è¯¢é—®è°ƒæŸ¥ï¼šè®¿é—®è°ƒæŸ¥ã€é‚®å¯„è°ƒæŸ¥ã€ç”µè¯è°ƒæŸ¥ã€è®¡ç®—æœºè¾…åŠ©è°ƒæŸ¥ã€åº§è°ˆä¼šã€ä¸ªåˆ«æ·±åº¦è®¿é—®ã€‚ è§‚å¯Ÿä¸Žå®žéªŒï¼šè§‚å¯Ÿæ³•ã€å®žéªŒæ³•ã€‚ ç«Ÿç„¶æ²¡ç½‘ç»œçˆ¬è™«ï¼Œå˜¤å˜¤å˜¤ 3ã€è°ƒæŸ¥è®¾è®¡ï¼ˆ1ï¼‰è°ƒæŸ¥æ–¹æ¡ˆè®¾è®¡ è°ƒæŸ¥ç›®çš„ è°ƒæŸ¥å¯¹è±¡å’Œè°ƒæŸ¥å•ä½ è°ƒæŸ¥é¡¹ç›®å’Œè°ƒæŸ¥è¡¨ ï¼ˆ2ï¼‰è°ƒæŸ¥é—®å·è®¾è®¡a.è°ƒæŸ¥é—®å·çš„åŸºæœ¬ç»“æž„ï¼š å¼€å¤´éƒ¨åˆ†ï¼ˆé—®å€™è¯­ã€å¡«è¡¨è¯´æ˜Žã€é—®å·ç¼–å· ï¼‰ ç”„åˆ«éƒ¨åˆ†ï¼šè¿‡æ»¤â€”â€”ç­›é€‰æŽ‰ä¸éœ€è¦çš„éƒ¨åˆ†â€”â€”é’ˆå¯¹ç‰¹å®šäººç¾¤ ä¸»ä½“éƒ¨åˆ†ï¼šè°ƒæŸ¥çš„å…¨éƒ¨é—®é¢˜ èƒŒæ™¯éƒ¨åˆ†ï¼šè¢«è°ƒæŸ¥è€…çš„èƒŒæ™¯èµ„æ–™ b.æé—®é¡¹ç›®çš„è®¾è®¡ï¼š æé—®çš„å†…å®¹å°½å¯èƒ½çŸ­ ç”¨è¯è¦ç¡®åˆ‡ã€é€šä¿— ä¸€ä¸ªé¡¹ç›®åªåŒ…å«ä¸€é¡¹å†…å®¹ é¿å…è¯±å¯¼æ€§æé—® é¿å…å¦å®šå¼æé—® é¿å…æ•æ„Ÿæ€§é—®é¢˜ c.å›žç­”é¡¹ç›®çš„è®¾è®¡ å¼€æ”¾æ€§é—®é¢˜ï¼šçµæ´»ï¼›æ•´ç†èµ„æ–™å›°éš¾ å°é—­æ€§é—®é¢˜ï¼šä¸¤é¡¹é€‰æ‹©æ³•ã€å¤šé¡¹é€‰æ‹©æ³•ï¼ˆå•é¡¹é€‰æ‹©åž‹ã€å¤šé¡¹é€‰æ‹©åž‹ã€é™åˆ¶é€‰æ‹©åž‹ï¼‰ é¡ºåºé€‰æ‹©æ³•ï¼šæŒ‰é¡ºåºæŽ’åˆ— è¯„å®šå°ºåº¦æ³•ï¼šå’ŒNPSæœ‰ç‚¹åƒå“¦ åŒå‘åˆ—è”æ³•ï¼šè¡¨æ ¼è¡¨çŽ° d.é—®é¢˜é¡ºåºçš„è®¾è®¡ é—®é¢˜çš„å®‰æŽ’ç¡¬å…·æœ‰é€»è¾‘æ€§ é—®é¢˜çš„é¡ºåºåº”å…ˆéš¾åŽæ˜“ èƒ½å¼•èµ·è¢«è°ƒæŸ¥è€…å…´è¶£çš„é—®é¢˜æ”¾åœ¨æœ€å‰é¢ å¼€æ”¾æ€§é—®é¢˜æ”¾åœ¨åŽé¢ ï¼ˆ3ï¼‰ç»Ÿè®¡æ•°æ®çš„è´¨é‡a.ç»Ÿè®¡æ•°æ®çš„è¯¯å·®b.ç»Ÿè®¡æ•°æ®çš„è¯¯å·® ç²¾åº¦ å‡†ç¡®æ€§ å…³è”æ€§ åŠæ—¶æ€§ ä¸€è‡´æ€§ æœ€ä½Žæˆæœ¬ è¿™æ˜¯ç»Ÿè®¡å­¦åŸºç¡€ ç¬¬ä¸‰ç‰ˆ (è´¾ä¿Šå¹³)çš„è®°å½•ï¼Œçœ‹äº†å‰ä¸¤ç« ï¼Œæ„Ÿè§‰å—ç›ŠåŒªæµ…ï¼Œå°¤å…¶æ˜¯é—®å·çš„è®¾è®¡ï¼Œæ¯”è¾ƒç³»ç»Ÿã€å®Œæ•´ï¼Œå¯ä»¥åº”ç”¨åœ¨ä»¥åŽçš„å·¥ä½œä¸­ã€‚ ä¹¦åï¼šç»Ÿè®¡å­¦åŸºç¡€ ç¬¬ä¸‰ç‰ˆ ä½œè€…ï¼šè´¾ä¿Šå¹³ å‡ºç‰ˆç¤¾ï¼šä¸­å›½äººæ°‘å¤§å­¦å‡ºç‰ˆç¤¾ æœ€åŽè¯´ä¸€è¯´ä¸ºä»€ä¹ˆè¦å­¦ç»Ÿè®¡å­¦æœ€ç›´æŽ¥åŽŸå› æ˜¯å·¥èµ„é«˜ã€‚å¯ä»¥åŽ»æ‹‰å‹¾ä¸Šçœ‹çœ‹â€œæ•°æ®åˆ†æžâ€ã€â€œæ•°æ®æŒ–æŽ˜â€ã€â€œæ•°æ®ç§‘å­¦å®¶â€ç­‰èŒä½ï¼Œä»–ä»¬å¯¹å­¦åŽ†çš„è¦æ±‚åŸºæœ¬ä¸Šéƒ½ä¼šæœ‰â€œç»Ÿè®¡å­¦â€ã€‚ å¯¹äºŽæˆ‘è¿™ç§æ–‡ç§‘ç”Ÿæ¥è¯´ï¼Œå­¦ä¹ ç»Ÿè®¡å­¦æ˜¯å¿…ç»ä¹‹è·¯ã€‚æ•²é—¨ç –å•Šï¼ æœ€åŽè®°å½•ä¸‹æœ€è¿‘å­¦ä¹ çš„æ•°æ®ç§‘å­¦çš„æµç¨‹ï¼š ä¸šåŠ¡ç†è§£ åˆ†æžæ–¹æ³• æ•°æ®è¦æ±‚ æ”¶é›†æ•°æ® æ•°æ®ç†è§£ æ•°æ®å‡†å¤‡ å»ºæ¨¡ï¼ˆuse and testï¼‰ æ¨¡åž‹è¯„ä¼° éƒ¨ç½²ä¸Žåé¦ˆ è‡ªå·±åˆ¤æ–­ï¼Œç¼ºå°‘çš„æ˜¯ä¸šåŠ¡ç†è§£ï¼Œå¯¹ç›¸å…³çš„ä¸šåŠ¡çŸ¥è¯†äº†è§£å¤ªå°‘ï¼›åˆ†æžæ–¹æ³•çŸ¥é“çš„å¤ªå°‘äº†ï¼ŒæŽ¥ä¸‹æ¥ä¼šç€é‡å­¦ä¹ ä¸€äº›å¸¸è§çš„ç®—æ³•ï¼›æ•°æ®å‡†å¤‡ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å‘ï¼Œä¸è¿‡å¥½åœ¨è‡ªå·±æœ‰ä¸€äº›PythonåŸºç¡€ï¼›å»ºæ¨¡æ‰æ˜¯æœ€éš¾çš„ï¼Œæ…¢æ…¢æ¥å§ã€‚ æœ€è¿‘å‡ å¤©éœ€è¦ä¸ªè‡ªå·±å®šä¸€ä¸ªå­¦ä¹ ä»»åŠ¡ï¼Œå†…å®¹ä¸»è¦åŒ…æ‹¬ï¼šç»Ÿè®¡å­¦åŸºç¡€ã€å¸¸è§ç®—æ³•ã€pandaså¤„ç†æ•°æ®åŠå¯è§†åŒ–ã€ä¸šåŠ¡ç†è§£ã€Scrapyæ¡†æž¶å­¦ä¹ ã€å‰ç«¯ï¼ˆæ²¡é”™ï¼Œå­¦ç‚¹å‰ç«¯å¾ˆæœ‰å¿…è¦ï¼‰ æ¬¢è¿ŽåŠ æˆ‘å¾®ä¿¡ï¼Œä¸€èµ·æ¥å­¦ä¹ ï¼Œå˜¤å˜¤å˜¤ ä¸‹é¢æ˜¯å¸¸è§çš„åˆ†æžæ–¹æ³•]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Scrapyå­¦ä¹ å®žä¾‹ï¼ˆä¸€ï¼‰]]></title>
      <url>%2F2017%2F11%2F29%2FScrapy%E5%AD%A6%E4%B9%A0%E5%AE%9E%E4%BE%8B%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åäº”ç¯‡åŽŸåˆ›æ–‡ç«  Helloï¼Œæˆ‘åˆå›žæ¥å•¦ã€‚ä»¥åŽå°±åœ¨è¿™å‘æ–‡ç« å§ï¼Œè®°å½•è‡ªå·±çš„å­¦ä¹ åŽ†ç¨‹ã€‚ ä¸¾å¤´å–ç«¹é¼ ï¼Œä½Žå¤´å˜¤å˜¤å˜¤ã€‚ æˆ‘ä¼šè®°å½•è‡ªå·±å¯¹Scrapyçš„å­¦åŽ†ç»åŽ†ï¼Œæ›´é‡è¦çš„æ˜¯ç†è§£ã€‚ä¸‹é¢å°±å¼€å§‹å§ï¼Œé¦–å…ˆå½“ç„¶æ˜¯åˆ›å»ºä¸€ä¸ªé¡¹ç›®å•¦ï¼ æˆ‘é€‰æ‹©çˆ¬å–è™Žå—…ç½‘é¦–é¡µçš„æ–°é—»åˆ—è¡¨ã€‚ 1ã€åˆ›å»ºé¡¹ç›®1234567891011121314151617F:\Python\huxiu&gt;scrapy startproject huxiuNew Scrapy project 'huxiu', using template directory 'c:\\users\\administrator\\appdata\\local\\programs\\python\\python36\\lib\\site-packages\\scrapy\\templates\\project', created in: F:\Python\huxiu\huxiuYou can start your first spider with: cd huxiu scrapy genspider example example.comF:\Python\huxiu&gt;cd huxiuF:\Python\huxiu\huxiu&gt;scrapy genspider huxiu huxiu.comCannot create a spider with the same name as your projectF:\Python\huxiu\huxiu&gt;scrapy genspider HuXiu huxiu.comCreated spider 'HuXiu' using template 'basic' in module: huxiu.spiders.HuXiu è®°ä½çˆ¬è™«å’Œé¡¹ç›®å‘½åä¸ä¸€æ · 2ã€å®šä¹‰Itemåœ¨item.pyä¸­åˆ›å»ºscrapy.Itemç±»ï¼Œå¹¶å®šä¹‰å®ƒçš„ç±»åž‹ä¸ºscrapy.Fieldçš„å±žæ€§ã€‚ 123456789101112import scrapyclass HuxiuItem(scrapy.Item): # define the fields for your item here like: # name = scrapy.Field() title = scrapy.Field() #æ ‡é¢˜ link = scrapy.Field() #é“¾æŽ¥ author = scrapy.Field() #ä½œè€… introduction = scrapy.Field() #ç®€ä»‹ time = scrapy.Field() #æ—¶é—´ 3ã€ç¼–å†™Spider ä¸€ç›®äº†ç„¶ åœ¨huxiu/spider/HuXiu.pyä¸­ç¼–å†™ä»£ç  12345678910111213141516171819202122# -*- coding: utf-8 -*-import scrapyfrom huxiu.items import HuxiuItemclass HuxiuSpider(scrapy.Spider): name = 'HuXiu' allowed_domains = ['huxiu.com'] start_urls = ['http://huxiu.com/'] def parse(self, response): for s in response.xpath('//div[@class="mod-info-flow"]/div/div[@class="mob-ctt"]'): item = HuxiuItem() item['title'] = s.xpath('h2/a/text()')[0].extract() item['link'] = s.xpath('h2/a/@href')[0].extract() url = response.urljoin(item['link']) item['author'] = s.xpath('div/a/span/text()')[0].extract() item['introduction'] = s.xpath('div[2]/text()')[0].extract() item['time'] = s.xpath('div/span/text()')[0].extract() print(item) åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ scrapy crawl HuXiu éƒ¨åˆ†è¾“å‡º 4ã€æ·±åº¦çˆ¬å–å“ˆå“ˆï¼Œè¿™é‡Œå€Ÿç”¨é€ æ•°çš„å‘½åäº†ã€‚å…¶å®žå°±æ˜¯çˆ¬å–æ–°é—»è¯¦æƒ…é¡µã€‚1234567891011121314151617181920212223242526272829303132333435# -*- coding: utf-8 -*-import scrapyfrom huxiu.items import HuxiuItemclass HuxiuSpider(scrapy.Spider): name = 'HuXiu' allowed_domains = ['huxiu.com'] start_urls = ['http://huxiu.com/'] def parse(self, response): for s in response.xpath('//div[@class="mod-info-flow"]/div/div[@class="mob-ctt"]'): item = HuxiuItem() item['title'] = s.xpath('h2/a/text()')[0].extract() item['link'] = s.xpath('h2/a/@href')[0].extract() url = response.urljoin(item['link']) item['author'] = s.xpath('div/a/span/text()')[0].extract() item['introduction'] = s.xpath('div[2]/text()')[0].extract() item['time'] = s.xpath('div/span/text()')[0].extract() #print(item) yield scrapy.Request(url, callback=self.parse_article) def parse_article(self, response): item = HuxiuItem() detail = response.xpath('//div[@class="article-wrap"]') item['title'] = detail.xpath('h1/text()')[0].extract().strip() item['link'] = response.url item['author'] = detail.xpath('div[@class="article-author"]/span/a/text()')[0].extract() item['time'] = detail.xpath('div[@class="article-author"]/div[@class="column-link-box"]/span/text()')[0].extract() print(item) word = detail.xpath('div[5]') print(word[0].xpath('string(.)').extract()[0]) yield item è¾“å‡ºç»“æžœ è¯´æ˜Žä¸€ç‚¹ï¼Œå¦‚ä½•ä½¿ç”¨xpathèŽ·å¾—å¤šä¸ªæ ‡ç­¾ä¸‹çš„æ–‡æœ¬ï¼Œè¿™é‡Œå‚è€ƒäº†è§£å†³ï¼šxpathå–å‡ºæŒ‡å®šå¤šæ ‡ç­¾å†…æ‰€æœ‰æ–‡å­—textï¼ŒæŠŠæ–‡ç« è¯¦ç»†å†…å®¹æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¼šé‡åˆ°ä¸€äº›é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨gooseæ¥è¯•è¯•çœ‹ã€‚ Python-Goose - Article Extractor1234567891011&gt;&gt;&gt; from goose import Goose&gt;&gt;&gt; from goose.text import StopWordsChinese&gt;&gt;&gt; url = 'http://www.bbc.co.uk/zhongwen/simp/chinese_news/2012/12/121210_hongkong_politics.shtml'&gt;&gt;&gt; g = Goose(&#123;'stopwords_class': StopWordsChinese&#125;)&gt;&gt;&gt; article = g.extract(url=url)&gt;&gt;&gt; print article.cleaned_text[:150]é¦™æ¸¯è¡Œæ”¿é•¿å®˜æ¢æŒ¯è‹±åœ¨å„æ–¹åŽ‹åŠ›ä¸‹å°±å…¶å¤§å®…çš„è¿ç« å»ºç­‘ï¼ˆåƒ­å»ºï¼‰é—®é¢˜åˆ°ç«‹æ³•ä¼šæŽ¥å—è´¨è¯¢ï¼Œå¹¶å‘é¦™æ¸¯æ°‘ä¼—é“æ­‰ã€‚æ¢æŒ¯è‹±åœ¨æ˜ŸæœŸäºŒï¼ˆ12æœˆ10æ—¥ï¼‰çš„ç­”é—®å¤§ä¼šå¼€å§‹ä¹‹é™…åœ¨å…¶æ¼”è¯´ä¸­é“æ­‰ï¼Œä½†å¼ºè°ƒä»–åœ¨è¿ç« å»ºç­‘é—®é¢˜ä¸Šæ²¡æœ‰éšçž’çš„æ„å›¾å’ŒåŠ¨æœºã€‚ä¸€äº›äº²åŒ—äº¬é˜µè¥è®®å‘˜æ¬¢è¿Žæ¢æŒ¯è‹±é“æ­‰ï¼Œä¸”è®¤ä¸ºåº”èƒ½èŽ·å¾—é¦™æ¸¯æ°‘ä¼—æŽ¥å—ï¼Œä½†è¿™äº›è®®å‘˜ä¹Ÿè´¨é—®æ¢æŒ¯è‹±æœ‰ å‚è€ƒæ–‡ç« ï¼š Scrapyç¬”è®°02- å®Œæ•´ç¤ºä¾‹ è§£å†³ï¼šxpathå–å‡ºæŒ‡å®šå¤šæ ‡ç­¾å†…æ‰€æœ‰æ–‡å­—text è‹¥æƒ³è¯„è®ºï¼Œå…ˆç¿»é•¿åŸŽ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çˆ¬è™«ä¸‰æ­¥èµ°ï¼ˆäºŒï¼‰è§£æžæºç ]]></title>
      <url>%2F2017%2F05%2F26%2F%E7%88%AC%E8%99%AB%E4%B8%89%E6%AD%A5%E8%B5%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E8%A7%A3%E6%9E%90%E6%BA%90%E7%A0%81%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åå››ç¯‡åŽŸåˆ›æ–‡ç«  çˆ¬è™«ä¸‰æ­¥èµ°ï¼šèŽ·å–æºç ã€è§£æžæºç ã€æ•°æ®å‚¨å­˜ ä¸Šä¸€æœŸè®²äº†å¦‚ä½•èŽ·å–ç½‘é¡µæºç çš„æ–¹æ³•ï¼Œè¿™ä¸€æœŸè¯´ä¸€è¯´æ€Žä¹ˆä»Žå…¶ä¸­èŽ·å¾—æˆ‘ä»¬éœ€è¦çš„å’Œæ•°æ®ã€‚ è§£æžç½‘é¡µçš„æ–¹æ³•å¾ˆå¤šï¼Œæœ€å¸¸è§çš„å°±æ˜¯BeautifulSoupå’Œæ­£åˆ™äº†ï¼Œå…¶ä»–çš„åƒxpathã€PyQueryç­‰ç­‰ï¼Œå…¶ä¸­æˆ‘è§‰å¾—æœ€å¥½ç”¨çš„å°±æ˜¯xpathäº†ï¼ŒxpathçœŸçš„è¶…çº§ç®€å•å¥½ç”¨ï¼Œå­¦äº†ä¹‹åŽå†ä¹Ÿä¸æƒ³å–ç”¨ç¾Žä¸½æ±¤äº†ã€‚ä¸‹é¢ä»‹ç»xpathçš„ä½¿ç”¨æ–¹æ³•ã€‚ é¦–å…ˆéœ€è¦å®‰è£…lxmlï¼Œwindowsä¸‹å®‰è£…lxmlæ˜¯ä¸ªå¤§å‘ï¼ŒçŸ¥ä¹Žä¸Šæœ‰äººç»™å‡ºäº†è§£å†³æ–¹æ³•Python LXMLæ¨¡å—æ­»æ´»å®‰è£…ä¸äº†æ€Žä¹ˆåŠžï¼Ÿ è¯¦ç»†çš„ç”¨æ³•å¯ä»¥å‚è€ƒçˆ¬è™«å…¥é—¨åˆ°ç²¾é€š-ç½‘é¡µçš„è§£æžï¼ˆxpathï¼‰ åœ¨è¿™é‡Œæˆ‘ä»¬å°è¯•ä½¿ç”¨xpathæ¥è¿…é€ŸèŽ·å–æ•°æ®ã€‚ ä¾‹å¦‚æƒ³è¦èŽ·ç†ŠçŒ«ç›´æ’­è™Žç‰™ç›´æ’­ä¸‹ä¸»æ’­çš„ID import requests from lxml import etree url = &apos;http://www.huya.com/g/lol&apos; headers = {&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} res = requests.get(url,headers=headers).text s = etree.HTML(res) print(s.xpath(&apos;//i[@class=&quot;nick&quot;]/text()&apos;)) è¾“å‡ºï¼š ä¸‹é¢ä¸€æ­¥æ­¥è®²è§£ä¸ºä»€ä¹ˆè¿™æ ·åšã€‚ import requests from lxml import etree é¦–å…ˆæ˜¯å¯¼å…¥æ¨¡å—ï¼Œrequestså¾ˆå¸¸è§ï¼Œä½†æ˜¯xpathéœ€è¦ from lxml import etreeï¼Œä½ è‚¯ç‚¹æƒ³é—®ä¸ºä»€ä¹ˆè¿™æ ·å†™ï¼Œå›žç­”æ˜¯â€œæˆ‘ä¹Ÿä¸çŸ¥é“â€ï¼Œå°±åƒæ˜¯çº¦å®šä¿—æˆçš„ä¸œè¥¿ä¸€æ ·ã€‚ url = &apos;http://www.huya.com/g/lol&apos; headers = {&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} res = requests.get(url,headers=headers).text è¿™ä¸‰æ­¥å°±æ˜¯å¹³å¸¸èŽ·å–æºç çš„è¿‡ç¨‹ï¼Œå¾ˆç®€å•ã€‚ s = etree.HTML(res) ç»™ä¸€ä¸ªhtmlï¼Œè¿”å›žxmlç»“æž„ï¼Œä¸ºä»€ä¹ˆè¿™æ ·å†™ï¼Ÿï¼Ÿç­”æ¡ˆå’Œä¸Šé¢ä¸€æ ·ã€‚æœ€é‡è¦çš„å°±æ˜¯ä¸‹é¢çš„è¿™ä¸€æ­¥ï¼š s.xpath(&apos;//i[@class=&quot;nick&quot;]/text()&apos;) æŒ‰ä¸‹F12çœ‹åˆ°â€œçˆ±æ‹-å¤æ‰‹ç¾½â€åœ¨iæ ‡ç­¾ä¸‹ï¼ŒæŽ¥ç€æˆ‘ä»¬å³é”®æ‰“å¼€â€œæŸ¥çœ‹ç½‘é¡µæºä»£ç â€ï¼Œæœç´¢â€œçˆ±æ‹-å¤æ‰‹ç¾½â€ ç¡®å®žæ‰¾åˆ°äº†â€œçˆ±æ‹-å¤æ‰‹ç¾½â€å°±åœ¨iæ ‡ç­¾ä¸‹ï¼Œé‚£æˆ‘ä»¬å°±æŠŠä»–æå‡ºæ¥å§ï¼ s.xpath(&#39;//i[@class=&quot;nick&quot;]/text()&#39;) è¿™ä¸ªæ®µä»£ç æ„æ€æ˜¯ï¼Œæ‰¾åˆ°classä¸ºâ€œnickâ€çš„iæ ‡ç­¾ï¼Œè¿”å›žå…¶ä¸­çš„æ–‡æœ¬ä¿¡æ¯ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿”å›žiæ ‡ç­¾ä¸­çš„titleï¼Œå†™æ³•å¦‚ä¸‹ï¼š s.xpath(&#39;//i[@class=&quot;nick&quot;]/@title&#39;) text()è¿”å›žçš„æ˜¯æ–‡æœ¬ä¿¡æ¯ï¼Œ@titleåˆ™æ˜¯æ ‡ç­¾é‡Œé¢çš„å…·ä½“å±žæ€§çš„å€¼ï¼Œä¾‹å¦‚æˆ‘æƒ³çŸ¥é“è§‚ä¼—äººæ•° import requests from lxml import etree url = &apos;http://www.huya.com/g/lol&apos; headers = {&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} res = requests.get(url,headers=headers).text s = etree.HTML(res) print(s.xpath(&apos;//i[@class=&quot;js-num&quot;]/text()&apos;)) åªéœ€åœ¨åŽŸæ¥åŸºç¡€ä¸Šä¿®æ”¹ä¸€ä¸ªå±žæ€§ï¼Œiæ ‡ç­¾classä¸ºâ€œjs-numâ€é‡Œé¢çš„å€¼ print(s.xpath(&apos;//i[@class=&quot;js-num&quot;]/text()&apos;)) è¿”å›žç»“æžœæ˜¯ï¼š è¯´æ˜Žï¼šåœ¨è¿è¡Œä»£ç ä¸­ï¼Œå‘çŽ°è™Žç‰™åçˆ¬è™«åšå¾—æŒºå¥½çš„ï¼Œçž¬é—´å°±è¯†åˆ«çˆ¬è™«èº«ä»½å¹¶å°äº†IPï¼Œæ‰€ä»¥æˆ‘æ¢äº†IPåŽ»è®¿é—®ï¼Œè‡³äºŽå¦‚ä½•è®¾ç½®ä»£ç†ï¼Œåœ¨æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æœ‰è¯´åˆ°ï¼ŒåŽ»çœ‹çœ‹å§ã€‚ åœ¨å®žé™…æ“ä½œä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ›´åŠ å¤æ‚çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸€å®šè®°å¾—åŽ»çœ‹çœ‹è¯¦ç»†çš„æ•™ç¨‹ã€‚çˆ¬è™«å…¥é—¨åˆ°ç²¾é€š-ç½‘é¡µçš„è§£æžï¼ˆxpathï¼‰ å°å¹¿å‘Šï¼šå–œæ¬¢çˆ¬è™«ã€æ•°æ®çš„å¯ä»¥å…³æ³¨ä¸€ä¸‹æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼ˆzhangslobï¼‰ï¼Œå¤šå¤šäº¤æµã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çˆ¬è™«ä¸‰æ­¥èµ°ï¼ˆä¸€ï¼‰èŽ·å–æºç ]]></title>
      <url>%2F2017%2F05%2F25%2F%E7%88%AC%E8%99%AB%E4%B8%89%E6%AD%A5%E8%B5%B0%EF%BC%88%E4%B8%80%EF%BC%89%E8%8E%B7%E5%8F%96%E6%BA%90%E7%A0%81%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  çˆ¬è™«ä¸‰æ­¥èµ°ï¼šèŽ·å–æºç ã€è§£æžæºç ã€æ•°æ®å‚¨å­˜ ä¸¾ä¸ªä¾‹å­ï¼Œçˆ¬ä¸€çˆ¬çŸ¥ä¹Žæ—¥æŠ¥çš„ç›¸å…³æ•°æ® çŸ¥ä¹Žæ—¥æŠ¥ - æ¯å¤© 3 æ¬¡ï¼Œæ¯æ¬¡ 7 åˆ†é’Ÿ 1ã€èŽ·å–æºç 12345import requests url = 'http://daily.zhihu.com/'res = requests.get(url).textprint(res) ä¸ªäººå–œæ¬¢requestsï¼Œç›´æŽ¥è®¿é—®ï¼Œå‘çŽ°è¿”å›ž500é”™è¯¯ C:\Python35\python.exe F:/PyCharm/çˆ¬è™«/daily.py &lt;html&gt;&lt;body&gt;&lt;h1&gt;500 Server Error&lt;/h1&gt; An internal server error occured. &lt;/body&gt;&lt;/html&gt; Process finished with exit code 0 æ ¹æ®ç»éªŒåˆ¤æ–­ï¼Œæ˜¯çŸ¥ä¹Žç¦æ­¢çˆ¬è™«ï¼Œéœ€è¦åŠ ä¸Šä¸€äº›ä¼ªè£…ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹åŠ ä¸Šæµè§ˆå™¨ä¼ªè£…æ•ˆæžœ import requests headers = {&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} url = &apos;http://daily.zhihu.com/&apos; res = requests.get(url,headers=headers).text print(res) çœ‹çœ‹ç»“æžœï¼Œå·²ç»è¿”å›žæˆ‘ä»¬éœ€è¦çš„æ•°æ® C:\Python35\python.exe F:/PyCharm/çˆ¬è™«/daily.py &lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh-CN&quot;&gt;&lt;head&gt;&lt;title&gt;çŸ¥ä¹Žæ—¥æŠ¥ - æ¯å¤© 3 æ¬¡ï¼Œæ¯æ¬¡ 7 åˆ†é’Ÿ&lt;/title&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot;&gt;&lt;meta name=&quot;description&quot; content=&quot;åœ¨ä¸­å›½ï¼Œèµ„è®¯ç±»ç§»åŠ¨åº”ç”¨çš„äººå‡é˜…è¯»æ—¶é•¿æ˜¯ 5 åˆ†é’Ÿï¼Œè€Œåœ¨çŸ¥ä¹Žæ—¥æŠ¥ï¼Œè¿™ä¸ªæ•°å­—æ˜¯ 21ã€‚ä»¥ç‹¬æœ‰çš„æ–¹å¼ä¸ºä½ æä¾›æœ€é«˜è´¨ã€æœ€æ·±åº¦ã€æœ€æœ‰æ”¶èŽ·çš„é˜…è¯»ä½“éªŒã€‚&quot;&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/base.auto.css&quot;&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/new_home_v3.auto.css&quot;&gt;&lt;script src=&quot;/js/jquery.1.9.1.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;/js/new_index_v3/home.js&quot;&gt;&lt;/script&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.ico&quot; type=&quot;image/x-icon&quot;&gt;&lt;base target=&quot;_blank&quot;&gt;&lt;style&gt;h1,h2,h3 {padding: 0;margin:0}&lt;/style&gt;&lt;base target=&quot;_blank&quot;&gt;&lt;/head&gt;&lt;body class=&quot;home&quot;&gt;&lt;a href=&quot;javascript:;&quot; title=&quot;å›žåˆ°é¡¶éƒ¨&quot; class=&quot;back-to-top&quot;&gt;&lt;/a&gt;&lt;div class=&quot;header navbar-fixed-top&quot;&gt;&lt;div class=&quot;container-fixed-width clearfix&quot;&gt;&lt;div class=&quot;top-nav-link&quot;&gt;&lt;a href=&quot;javascript:;&quot; data-offset=&quot;470&quot;&gt;&lt;span&gt;æµè§ˆå†…å®¹&lt;/span&gt;&lt;/a&gt;&lt;a href=&quot;javascript:;&quot; data-offset=&quot;0&quot; class=&quot;active&quot;&gt;&lt;span&gt;App ä¸‹è½½&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;h1 class=&quot;logo&quot;&gt;&lt;a href=&quot;http://daily.zhihu.com/&quot; title=&quot;çŸ¥ä¹Žæ—¥æŠ¥&quot; class=&quot;link-logo&quot;&gt;çŸ¥ä¹Žæ—¥æŠ¥&lt;/a&gt;&lt;/h1&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;download&quot;&gt; ... ä½†æ˜¯è¿™ç§å†™æ³•æ˜¯å¦å¯ä»¥åº”ç”¨åˆ°æ‰€æœ‰çš„ç½‘ç«™ï¼Œç­”æ¡ˆæ˜¯â€œä¸â€ 2ã€ä»£ç†è®¾ç½®æœ‰æ—¶å€™åŒä¸€ä¸ªIPåŽ»çˆ¬å–åŒä¸€ç½‘ç«™ä¸Šçš„å†…å®¹ï¼Œä¹…äº†ä¹‹åŽå°±ä¼šè¢«è¯¥ç½‘ç«™æœåŠ¡å™¨å±è”½ã€‚è§£å†³æ–¹æ³•å°±æ˜¯æ›´æ¢IPã€‚è¿™ä¸ªæ—¶å€™ï¼Œåœ¨å¯¹æ–¹ç½‘ç«™ä¸Šï¼Œæ˜¾ç¤ºçš„ä¸æ˜¯æˆ‘ä»¬çœŸå®žåœ°IPåœ°å€ï¼Œè€Œæ˜¯ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€ã€‚ å›½å†…é«˜åŒ¿å…è´¹HTTPä»£ç†IP_å›½å†…é«˜åŒ¿ è¥¿åˆºä»£ç†æä¾›äº†å¾ˆå¤šå¯ç”¨çš„å›½å†…IPï¼Œå¯ä»¥ç›´æŽ¥æ‹¿æ¥ä½¿ç”¨ã€‚ é‚£ä¹ˆå¦‚ä½•åœ¨çˆ¬è™«é‡ŒåŠ å…¥ä»£ç†å‘¢ï¼Œçœ‹çœ‹requestsçš„å®˜æ–¹æ–‡æ¡£æ€Žä¹ˆè¯´ã€‚é«˜çº§ç”¨æ³• - Requests 2.10.0 æ–‡æ¡£ å¦‚æžœéœ€è¦ä½¿ç”¨ä»£ç†ï¼Œä½ å¯ä»¥é€šè¿‡ä¸ºä»»æ„è¯·æ±‚æ–¹æ³•æä¾› proxies å‚æ•°æ¥é…ç½®å•ä¸ªè¯·æ±‚: import requests proxies = { &quot;http&quot;: &quot;http://10.10.1.10:3128&quot;, &quot;https&quot;: &quot;http://10.10.1.10:1080&quot;, } requests.get(&quot;http://example.org&quot;, proxies=proxies) ç”¨æ³•å¾ˆç®€å•ï¼ŒåŠ å…¥proxieså‚æ•°å³å¯ import requests proxies = { &quot;http&quot;: &quot;http://121.201.24.248ï¼š8088&quot;, &quot;https&quot;: &quot;http://36.249.194.52ï¼š8118&quot;, } headers = {&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} url = &apos;http://daily.zhihu.com/&apos; res = requests.get(url,headers=headersï¼Œproxies=proxies).text print(len(res)) ä¸ºäº†ä¾¿äºŽæµ‹è¯•ï¼Œåªæ‰“å°å‡ºè¿”å›žæ•°æ®çš„é•¿åº¦ C:\Python35\python.exe F:/PyCharm/çˆ¬è™«/daily.py 10830 Process finished with exit code 0 å‘çŽ°ä»£ç†æœåŠ¡å™¨æˆåŠŸçˆ¬å–çŸ¥ä¹Žæ—¥æŠ¥çš„ä¿¡æ¯ï¼Œå†…å®¹æ˜¯10830ï¼Œæ•…æ„æŠŠä»£ç†IPå†™é”™ä¸€ä½æ•°ï¼Œçœ‹çœ‹ç»“æžœ import requests proxies = { &quot;http&quot;: &quot;http://121.201.24.248ï¼š8088&quot;, &quot;https&quot;: &quot;http://36.249.194.52: 222&quot;, } headers = {&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36&apos;} url = &apos;http://daily.zhihu.com/&apos; res = requests.get(url,headers=headers,proxies=proxies).text print(len(res)) æˆ‘ä»¬æŠŠâ€httpsâ€: â€œhttp://36.249.194.52ï¼š8118&quot;ä¿®æ”¹ä¸º&quot;httpsâ€œ: â€œhttp://36.249.194.52: 222â€ï¼Œæ­¤æ—¶è¿”å›žçš„ç»“æžœå¦‚ä¸‹ï¼Œå‘çŽ°ä¸èƒ½èŽ·å–ç½‘é¡µæ•°æ®ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ä»£ç†æœåŠ¡å™¨çˆ¬åŽ»ç½‘ç«™æ—¶ï¼Œå¦‚æžœå‡ºçŽ°å¼‚å¸¸ï¼Œè¦è€ƒè™‘ä»£ç†IPæ˜¯å¦å¤±æ•ˆäº†ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥å†™ä¸€ä¸ªçˆ¬è™«ï¼Œå®žæ—¶æŠ“å–æœ€æ–°çš„ä»£ç†IPç”¨æ¥çˆ¬å–ã€‚ Traceback (most recent call last): File &quot;F:/PyCharm/çˆ¬è™«/daily.py&quot;, line 9, in &lt;module&gt; res = requests.get(url,headers=headers,proxies=proxies).text File &quot;C:\Python35\lib\site-packages\requests\api.py&quot;, line 70, in get return request(&apos;get&apos;, url, params=params, **kwargs) File &quot;C:\Python35\lib\site-packages\requests\api.py&quot;, line 56, in request return session.request(method=method, url=url, **kwargs) File &quot;C:\Python35\lib\site-packages\requests\sessions.py&quot;, line 488, in request resp = self.send(prep, **send_kwargs) File &quot;C:\Python35\lib\site-packages\requests\sessions.py&quot;, line 609, in send r = adapter.send(request, **kwargs) File &quot;C:\Python35\lib\site-packages\requests\adapters.py&quot;, line 485, in send raise ProxyError(e, request=request) requests.exceptions.ProxyError: HTTPConnectionPool(host=&apos;121.201.24.248ï¼š8088&apos;, port=80): Max retries exceeded with url: http://daily.zhihu.com/ (Caused by ProxyError(&apos;Cannot connect to proxy.&apos;, NewConnectionError(&apos;&lt;requests.packages.urllib3.connection.HTTPConnection object at 0x0000000003860DA0&gt;: Failed to establish a new connection: [Errno 11004] getaddrinfo failed&apos;,))) 3ã€æ¨¡æ‹Ÿç™»å½•æœ‰äº›ç½‘ç«™æ˜¯éœ€è¦ç™»å½•æ‰èƒ½çœ‹åˆ°ä¿¡æ¯çš„ï¼Œä¾‹å¦‚çŸ¥ä¹Žï¼Œç›´æŽ¥ç”¨requestsèŽ·å–çŸ¥ä¹Žé¦–é¡µä¿¡æ¯ï¼Œè¿”å›žæ•°æ®æ˜¯éœ€è¦ä½ ç™»å½•çš„ï¼Œåªæœ‰ç™»å½•äº†æ‰èƒ½çœ‹åˆ°æ•°æ®ã€‚ &lt;button type=&quot;button&quot; class=&quot;signin-switch-button&quot;&gt;æ‰‹æœºéªŒè¯ç ç™»å½•&lt;/button&gt; &lt;a class=&quot;unable-login&quot; href=&quot;#&quot;&gt;æ— æ³•ç™»å½•ï¼Ÿ&lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;social-signup-wrapper&quot; data-za-module=&quot;SNSSignIn&quot;&gt; &lt;span class=&quot;name js-toggle-sns-buttons&quot;&gt;ç¤¾äº¤å¸å·ç™»å½•&lt;/span&gt; &lt;div class=&quot;sns-buttons&quot;&gt; &lt;a title=&quot;å¾®ä¿¡ç™»å½•&quot; class=&quot;js-bindwechat&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;sprite-index-icon-wechat&quot;&gt;&lt;/i&gt;&lt;/a&gt; &lt;a title=&quot;å¾®åšç™»å½•&quot; class=&quot;js-bindweibo&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;sprite-index-icon-weibo&quot;&gt;&lt;/i&gt;&lt;/a&gt; &lt;a title=&quot;QQ ç™»å½•&quot; class=&quot;js-bindqq&quot; href=&quot;#&quot;&gt;&lt;i class=&quot;sprite-index-icon-qq&quot;&gt;&lt;/i&gt;&lt;/a&gt; &lt;/div&gt; å†æ¬¡å›žåˆ°å®˜æ–¹æ–‡æ¡£å¿«é€Ÿä¸Šæ‰‹ - Requests 2.10.0 æ–‡æ¡£ å¦‚æžœæŸä¸ªå“åº”ä¸­åŒ…å«ä¸€äº› cookieï¼Œä½ å¯ä»¥å¿«é€Ÿè®¿é—®å®ƒä»¬ï¼š &gt;&gt;&gt; url = &apos;http://example.com/some/cookie/setting/url&apos; &gt;&gt;&gt; r = requests.get(url) &gt;&gt;&gt; r.cookies[&apos;example_cookie_name&apos;] &apos;example_cookie_value&apos; è¦æƒ³å‘é€ä½ çš„cookiesåˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ cookies å‚æ•°ï¼š &gt;&gt;&gt; url = &apos;http://httpbin.org/cookies&apos; &gt;&gt;&gt; cookies = dict(cookies_are=&apos;working&apos;) &gt;&gt;&gt; r = requests.get(url, cookies=cookies) &gt;&gt;&gt; r.text &apos;{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}&apos; å…·ä½“çš„åˆ†æžè¿‡ç¨‹å¯ä»¥å‚è€ƒxchaoinfoæ‰€å†™çš„æ–‡ç« å’Œè§†é¢‘ï¼Œè®²è§£ååˆ†æ¸…æ™°Python æ¨¡æ‹Ÿç™»å½•å“ªäº›äº‹å„¿ - çŸ¥ä¹Žä¸“æ  ä¸‹é¢æ˜¯ä»£ç  import requests from bs4 import BeautifulSoup import os, time import re # import http.cookiejar as cookielib # æž„é€  Request headers agent = &apos;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Mobile Safari/537.36&apos; headers = { &quot;Host&quot;: &quot;www.zhihu.com&quot;, &quot;Referer&quot;: &quot;https://www.zhihu.com/&quot;, &apos;User-Agent&apos;: agent } ######### æž„é€ ç”¨äºŽç½‘ç»œè¯·æ±‚çš„session session = requests.Session() # session.cookies = cookielib.LWPCookieJar(filename=&apos;zhihucookie&apos;) # try: # session.cookies.load(ignore_discard=True) # except: # print(&apos;cookie æ–‡ä»¶æœªèƒ½åŠ è½½&apos;) ############ èŽ·å–xsrf_token homeurl = &apos;https://www.zhihu.com&apos; homeresponse = session.get(url=homeurl, headers=headers) homesoup = BeautifulSoup(homeresponse.text, &apos;html.parser&apos;) xsrfinput = homesoup.find(&apos;input&apos;, {&apos;name&apos;: &apos;_xsrf&apos;}) xsrf_token = xsrfinput[&apos;value&apos;] print(&quot;èŽ·å–åˆ°çš„xsrf_tokenä¸ºï¼š &quot;, xsrf_token) ########## èŽ·å–éªŒè¯ç æ–‡ä»¶ randomtime = str(int(time.time() * 1000)) captchaurl = &apos;https://www.zhihu.com/captcha.gif?r=&apos;+\ randomtime+&quot;&amp;type=login&quot; captcharesponse = session.get(url=captchaurl, headers=headers) with open(&apos;checkcode.gif&apos;, &apos;wb&apos;) as f: f.write(captcharesponse.content) f.close() # os.startfile(&apos;checkcode.gif&apos;) captcha = input(&apos;è¯·è¾“å…¥éªŒè¯ç ï¼š&apos;) print(captcha) ########### å¼€å§‹ç™»é™† headers[&apos;X-Xsrftoken&apos;] = xsrf_token headers[&apos;X-Requested-With&apos;] = &apos;XMLHttpRequest&apos; loginurl = &apos;https://www.zhihu.com/login/email&apos; postdata = { &apos;_xsrf&apos;: xsrf_token, &apos;email&apos;: &apos;é‚®ç®±@qq.com&apos;, &apos;password&apos;: &apos;å¯†ç &apos; } loginresponse = session.post(url=loginurl, headers=headers, data=postdata) print(&apos;æœåŠ¡å™¨ç«¯è¿”å›žå“åº”ç ï¼š&apos;, loginresponse.status_code) print(loginresponse.json()) # éªŒè¯ç é—®é¢˜è¾“å…¥å¯¼è‡´å¤±è´¥: çŒœæµ‹è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºŽsessionä¸­å¯¹äºŽéªŒè¯ç çš„è¯·æ±‚è¿‡æœŸå¯¼è‡´ if loginresponse.json()[&apos;r&apos;]==1: # é‡æ–°è¾“å…¥éªŒè¯ç ï¼Œå†æ¬¡è¿è¡Œä»£ç åˆ™æ­£å¸¸ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥å†ç¬¬ä¸€æ¬¡ä¸è¾“å…¥éªŒè¯ç ï¼Œæˆ–è€…è¾“å…¥ä¸€ä¸ªé”™è¯¯çš„éªŒè¯ç ï¼Œåªæœ‰ç¬¬äºŒæ¬¡æ‰æ˜¯æœ‰æ•ˆçš„ randomtime = str(int(time.time() * 1000)) captchaurl = &apos;https://www.zhihu.com/captcha.gif?r=&apos; + \ randomtime + &quot;&amp;type=login&quot; captcharesponse = session.get(url=captchaurl, headers=headers) with open(&apos;checkcode.gif&apos;, &apos;wb&apos;) as f: f.write(captcharesponse.content) f.close() os.startfile(&apos;checkcode.gif&apos;) captcha = input(&apos;è¯·è¾“å…¥éªŒè¯ç ï¼š&apos;) print(captcha) postdata[&apos;captcha&apos;] = captcha loginresponse = session.post(url=loginurl, headers=headers, data=postdata) print(&apos;æœåŠ¡å™¨ç«¯è¿”å›žå“åº”ç ï¼š&apos;, loginresponse.status_code) print(loginresponse.json()) ##########################ä¿å­˜ç™»é™†åŽçš„cookieä¿¡æ¯ # session.cookies.save() ############################åˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸ profileurl = &apos;https://www.zhihu.com/settings/profile&apos; profileresponse = session.get(url=profileurl, headers=headers) print(&apos;profileé¡µé¢å“åº”ç ï¼š&apos;, profileresponse.status_code) profilesoup = BeautifulSoup(profileresponse.text, &apos;html.parser&apos;) div = profilesoup.find(&apos;div&apos;, {&apos;id&apos;: &apos;rename-section&apos;}) print(div) å¥½äº†å…³äºŽçˆ¬è™«çš„ç¬¬ä¸€æ­¥ï¼ŒèŽ·å–æºç è¿™ä¸€èŠ‚è®²äº†å¾ˆå¤šï¼Œå…¶å®žå¤§å¤šæ•°ç½‘ç«™åŠ ä¸ŠUser-Agentå’Œä»£ç†IPå°±å¯ä»¥æ­£å¸¸çˆ¬å–ã€‚ä¸‹ä¸€èŠ‚ä¼šè®²è®²å¦‚ä½•åˆ©ç”¨xpathæ¥è§£æžç½‘é¡µï¼ŒèŽ·å–æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚ å–œæ¬¢çˆ¬è™«ã€æ•°æ®çš„å¯ä»¥å…³æ³¨ä¸€ä¸‹æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œå¤šå¤šäº¤æµã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[çŸ¥ä¹Žä¸Šå¦¹å­éƒ½çˆ±å–å•¥åï¼Ÿ]]></title>
      <url>%2F2017%2F05%2F20%2F%E7%9F%A5%E4%B9%8E%E4%B8%8A%E5%A6%B9%E5%AD%90%E9%83%BD%E7%88%B1%E5%8F%96%E5%95%A5%E5%90%8D%EF%BC%9F%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åäºŒç¯‡åŽŸåˆ›æ–‡ç«  é—²æ¥æ— äº‹ä¸ŠçŸ¥ä¹Žï¼Œçœ‹åˆ°å¥½å¤šå¦¹å­ï¼ŒäºŽæ˜¯æŠ“å–ä¸€æ³¢ã€‚ ç›®æ ‡ç½‘å€ï¼šè½®å­å“¥å¸¦æˆ‘é€›çŸ¥ä¹Ž - æ”¶è—å¤¹ - çŸ¥ä¹Ž ç›®æ ‡ï¼šæŠ“å–å¦¹å­çš„ID 1ã€æŠ“å–è¿™æ¬¡å¹¶æ²¡æœ‰ä½¿ç”¨Pythonåšçˆ¬è™«ï¼Œä½¿ç”¨å·¥å…·æ¥ï¼Œé€Ÿåº¦æ›´å¿«ã€‚é€ æ•° - æ–°ä¸€ä»£æ™ºèƒ½äº‘çˆ¬è™« ä¸åˆ°ååˆ†é’Ÿå°±å®Œæˆäº†ï¼Œé—å¤±äº†éƒ¨åˆ†æ•°æ®ï¼Œä½†æ˜¯æ— æ‰€è°“å•¦ã€‚ä¿å­˜ä¸‹æ¥ï¼Œåˆ†æžåˆ†æžã€‚ 2ã€åˆ†æž ä½¿ç”¨pandasæ“ä½œæ–‡ä»¶ import pandas as pd fp = pd.read_excel(&apos;D:\Backup\æ¡Œé¢\lunzige.xlsx&apos;) fp name = fp[&apos;name&apos;].tolist() li1 = list(set(name)) li1 [&apos;é˜¿è•¾&apos;, &apos;æ¨é¢&apos;, &apos;é™ˆ10&apos;, &apos;æ¨é¡ºé¡º&apos;, &apos;éœ§æ©¤&apos;, &apos;çœŸé¡ºé¡ºçœŸ&apos;, &apos;è°¢æ¤¿æ˜Ž&apos;, &apos;åˆ€åˆ€&apos;, &apos;æ°´æžªå¤§å¸&apos;, &apos;å€¾æµ…&apos;, &apos;Listening&apos;, &apos;å°ç«é¾™&apos;, &apos;åŒ…å­ç›&apos;, &apos;æ¨ç¬‹ç¬‹&apos;, &apos;èœ‰è£&apos;, &apos;åå…ƒ&apos;, &apos;é¡é¡ä¹‹éŸ³&apos;, &apos;Realæœºæ™ºå¼ &apos;, &apos;é™ˆæ¢“å°ç«¥éž‹&apos;, &apos;èŠ±ç”²&apos;, &apos;çª—é‡Œçª—å¤–&apos;, &apos;åˆ˜æ¢“ä¹”&apos;, &apos;ç’‡ç’‡97&apos;, &apos;OliviaèŠé¦™å°å§å§&apos;, &apos;ç‰›å¥¶å°å¤ç›®&apos;, &apos;å‘¨ä¾å®&apos;, &apos;ä¸‡é˜¿å’¸&apos;, &apos;ä¸€è“‘çƒŸé›¨ä»»å¹³ç”Ÿ&apos;, &apos;æ¥éƒ½æ¥äº†&apos;, &apos;å°±åƒå‘¨ä¸€&apos;, &apos;Mcè›‹è›‹&apos;, &apos;ç§‰å‰‘ä¾¯&apos;, &apos;æŽå¤§æ¢¦Lee&apos;, &apos;Dissé”é›¯&apos;, &apos;é›¨éŸ³çœžç™½&apos;, &apos;åŠä»™å¹ºå¹º&apos;, &apos;Natsukiæ˜¯åªè ¢å…”çº¸&apos;, &apos;å¤å†°èŽ¹&apos;, &apos;guuweihai&apos;, &apos;é˜¿èˆž&apos;, &apos;è‚–æŸšå¦®&apos;, &apos;å¢¨è„±è¦å¼€&apos;, &apos;èŠ·çž&apos;, &apos;èˆ’è¥¿å©·&apos;, &apos;Childe0Q&apos;, &apos;è¢«åŽ‹æ‰çš„æµ·èžº&apos;, &apos;snow arc&apos;, &apos;ç°ç°ç°ç°ç°plus&apos;, &apos;å°å…”å­è²å‘€&apos;, &apos;å£«å¤šå•¤æ¢¨ç¾Šå’©å’©&apos;, &apos;æŽå°å¯å¯&apos;, &apos;è°æ¥æ‹½æˆ‘çš„å°¾å·´&apos;, &apos;é£žé¸½ä¹‹èˆž&apos;, &apos;å°ç¾Ž&apos;, &apos;æ¨±é›ªç»«sama&apos;, &apos;zshiyao&apos;, &apos;çŽ‹æ¼ é‡Œ&apos;, &apos;Slivan&apos;, &apos;å–µå°è™¾&apos;, &apos;SUSANè‹&apos;, &apos;ä¸Šå®˜å…°é¢œ&apos;, &apos;è¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·&apos;, &apos;çœ‹æœ±æˆç¢§çº·æ€å›&apos;, &apos;æƒ…ç»ª&apos;, &apos;æˆ‘ç³»å°å¿Œå»‰&apos;, &apos;ä¸€åªå…”&apos;, &apos;June&apos;, &apos;æˆ‘å°±æƒ³æ”¹åè€Œå·²&apos;, &apos;æ¸©æŸ”çš„å¤§çŒ«Leo&apos;, &apos;çŒ«èŠ™ç³&apos;, &apos;ä»¥å¤ª&apos;, &apos;åšä¸½é­”ç†æ²™&apos;, &apos;æ´›ä¸½å¡”&apos;, &apos;ç¾½å°å›¢&apos;, &apos;å¨„è‰¯&apos;, &apos;Rosi&apos;, &apos;å¶ä»¥åŒ—&apos;, &apos;åƒä¸èƒ–çš„å°çŒ«&apos;, &apos;Lina&apos;, &apos;ingrid&apos;, &apos;itttttx&apos;, &apos;èƒ¡æ¨&apos;, &apos;å­™é˜¿ç«¥&apos;, &apos;æž—ç¾Žç&apos;, &apos;èµ«è˜¿Taiga&apos;, &apos;å®«æ›¼æ›¼&apos;, &apos;Yoonyicc&apos;, &apos;ZW711&apos;, &apos;ç¬™ç®«&apos;, &apos;KIKI.Liu&apos;, &apos;å¦ä¸€åªè¢œå­&apos;, &apos;è’é‡Žå¤§å«–å®¢&apos;, &apos;å°‘å¥³è¯—&apos;, &apos;èŠ¸è±†è±†è±†è±†&apos;, &apos;ç’ç’å™œ&apos;, &apos;æ£¹æ­Œ&apos;, &apos;æ¢¦é‡Œæœ‰åªç‹¬è§’å…½&apos;, &apos;Ooæ¾„å­oO&apos;, &apos;é›·æ¢…è‹”ä¸&apos;, &apos;CherryZhao&apos;, &apos;æŽè¬ä¸€&apos;, &apos;ç´è„‚&apos;, &apos;é¹¿æ–‘æ¯”&apos;, &apos;Chriså§¬-äº‘çƒŸ&apos;, &apos;hyoram&apos;, &apos;è”—è”—è”—&apos;, &apos;æŸšå­Ruby&apos;, &apos;Sheena&apos;, &apos;å­Ÿå¾·å°”&apos;, &apos;kakaå°å¸ˆå¦¹&apos;, &apos;æ¡¢è§†æ˜Ž&apos;, &apos;å¤§è±†è‹—&apos;, &apos;å°‘å¥³å¼€è†›æ‰‹&apos;, &apos;é™ˆè¯—èŒ—&apos;] é‚£ä¹ˆï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¯¹åå­—è¿›è¡Œåˆ†è¯äº†ï¼Œjiebaåˆ†è¯ï¼Œä½ å€¼å¾—æ‹¥æœ‰ã€‚fxsjy/jieba li2 = &apos;&apos;.join(li1) li2 &apos;é˜¿è•¾æ¨é¢é™ˆ10æ¨é¡ºé¡ºéœ§æ©¤çœŸé¡ºé¡ºçœŸè°¢æ¤¿æ˜Žåˆ€åˆ€æ°´æžªå¤§å¸å€¾æµ…Listeningå°ç«é¾™åŒ…å­ç›æ¨ç¬‹ç¬‹èœ‰è£åå…ƒé¡é¡ä¹‹éŸ³Realæœºæ™ºå¼ é™ˆæ¢“å°ç«¥éž‹èŠ±ç”²çª—é‡Œçª—å¤–åˆ˜æ¢“ä¹”ç’‡ç’‡97OliviaèŠé¦™å°å§å§ç‰›å¥¶å°å¤ç›®å‘¨ä¾å®ä¸‡é˜¿å’¸ä¸€è“‘çƒŸé›¨ä»»å¹³ç”Ÿæ¥éƒ½æ¥äº†å°±åƒå‘¨ä¸€Mcè›‹è›‹ç§‰å‰‘ä¾¯æŽå¤§æ¢¦LeeDissé”é›¯é›¨éŸ³çœžç™½åŠä»™å¹ºå¹ºNatsukiæ˜¯åªè ¢å…”çº¸å¤å†°èŽ¹guuweihaié˜¿èˆžè‚–æŸšå¦®å¢¨è„±è¦å¼€èŠ·çžèˆ’è¥¿å©·Childe0Qè¢«åŽ‹æ‰çš„æµ·èžºsnow arcç°ç°ç°ç°ç°pluså°å…”å­è²å‘€å£«å¤šå•¤æ¢¨ç¾Šå’©å’©æŽå°å¯å¯è°æ¥æ‹½æˆ‘çš„å°¾å·´é£žé¸½ä¹‹èˆžå°ç¾Žæ¨±é›ªç»«samazshiyaoçŽ‹æ¼ é‡ŒSlivanå–µå°è™¾SUSANè‹ä¸Šå®˜å…°é¢œè¿™ä¸ªæ€æ‰‹ä¸å¤ªå†·çœ‹æœ±æˆç¢§çº·æ€å›æƒ…ç»ªæˆ‘ç³»å°å¿Œå»‰ä¸€åªå…”Juneæˆ‘å°±æƒ³æ”¹åè€Œå·²æ¸©æŸ”çš„å¤§çŒ«LeoçŒ«èŠ™ç³ä»¥å¤ªåšä¸½é­”ç†æ²™æ´›ä¸½å¡”ç¾½å°å›¢å¨„è‰¯Rosiå¶ä»¥åŒ—åƒä¸èƒ–çš„å°çŒ«Linaingriditttttxèƒ¡æ¨å­™é˜¿ç«¥æž—ç¾Žçèµ«è˜¿Taigaå®«æ›¼æ›¼YoonyiccZW711ç¬™ç®«KIKI.Liuå¦ä¸€åªè¢œå­è’é‡Žå¤§å«–å®¢å°‘å¥³è¯—èŠ¸è±†è±†è±†è±†ç’ç’å™œæ£¹æ­Œæ¢¦é‡Œæœ‰åªç‹¬è§’å…½Ooæ¾„å­oOé›·æ¢…è‹”ä¸CherryZhaoæŽè¬ä¸€ç´è„‚é¹¿æ–‘æ¯”Chriså§¬-äº‘çƒŸhyoramè”—è”—è”—æŸšå­RubySheenaå­Ÿå¾·å°”kakaå°å¸ˆå¦¹æ¡¢è§†æ˜Žå¤§è±†è‹—å°‘å¥³å¼€è†›æ‰‹é™ˆè¯—èŒ—&apos; æœ‰ä½•æ„Ÿæƒ³ï¼Ÿï¼Ÿ ä¸‹ä¸€æ­¥å°±æ˜¯åˆ†è¯åˆ¶ä½œå›¾äº‘äº† import jieba seg_list = jieba.cut(li2) word = &quot;/&quot;.join(seg_list) print(&quot;Full Mode: &quot; + &quot;/ &quot;.join(seg_list)) Building prefix dict from the default dictionary ... Dumping model to file cache C:\Users\ADMINI~1\AppData\Local\Temp\jieba.cache Loading model cost 1.148 seconds. Prefix dict has been built succesfully. Full Mode: é˜¿è•¾/ æ¨/ é¢é™ˆ/ 10/ æ¨/ é¡ºé¡º/ éœ§/ æ©¤/ çœŸ/ é¡ºé¡º/ çœŸ/ è°¢æ¤¿æ˜Ž/ åˆ€åˆ€/ æ°´æžª/ å¤§å¸/ å€¾æµ…/ Listening/ å°/ ç«é¾™/ åŒ…å­/ ç›/ æ¨ç¬‹/ ç¬‹/ èœ‰è£/ åå…ƒ/ é¡é¡ä¹‹éŸ³/ Real/ æœºæ™º/ å¼ / é™ˆæ¢“/ å°/ ç«¥éž‹/ èŠ±ç”²/ çª—é‡Œ/ çª—å¤–/ åˆ˜æ¢“ä¹”/ ç’‡/ ç’‡/ 97Olivia/ èŠé¦™/ å°å§å§/ ç‰›å¥¶/ å°å¤ç›®/ å‘¨ä¾å®/ ä¸‡/ é˜¿/ å’¸ä¸€/ è“‘/ çƒŸé›¨ä»»/ å¹³ç”Ÿ/ æ¥/ éƒ½/ æ¥/ äº†/ å°±/ åƒ/ å‘¨ä¸€/ Mc/ è›‹è›‹/ ç§‰å‰‘ä¾¯/ æŽå¤§æ¢¦/ LeeDiss/ é”é›¯é›¨/ éŸ³çœžç™½/ åŠä»™/ å¹º/ å¹º/ Natsuki/ æ˜¯/ åª/ è ¢/ å…”çº¸/ å¤/ å†°èŽ¹/ guuweihai/ é˜¿èˆž/ è‚–æŸšå¦®/ å¢¨è„±/ è¦/ å¼€èŠ·/ çž/ èˆ’è¥¿å©·/ Childe0Q/ è¢«/ åŽ‹æ‰/ çš„/ æµ·èžº/ snow/ / arc/ ç°ç°/ ç°ç°/ ç°/ plus/ å°å…”å­/ è²/ å‘€/ å£«å¤šå•¤æ¢¨/ ç¾Š/ å’©/ å’©/ æŽå°/ å¯å¯/ è°/ æ¥/ æ‹½/ æˆ‘/ çš„/ å°¾å·´/ é£žé¸½/ ä¹‹èˆž/ å°ç¾Ž/ æ¨±é›ª/ ç»«/ samazshiyao/ çŽ‹æ¼ / é‡Œ/ Slivan/ å–µ/ å°è™¾/ SUSAN/ è‹/ ä¸Šå®˜/ å…°é¢œ/ è¿™ä¸ª/ æ€æ‰‹/ ä¸/ å¤ªå†·/ çœ‹æœ±æˆç¢§/ çº·æ€å›/ æƒ…ç»ª/ æˆ‘ç³»/ å°å¿Œå»‰/ ä¸€åª/ å…”/ June/ æˆ‘/ å°±/ æƒ³/ æ”¹å/ è€Œå·²/ æ¸©æŸ”/ çš„/ å¤§çŒ«/ Leo/ çŒ«/ èŠ™ç³/ ä»¥å¤ª/ åšä¸½/ é­”ç†æ²™/ æ´›ä¸½å¡”/ ç¾½å°å›¢/ å¨„è‰¯/ Rosi/ å¶/ ä»¥åŒ—/ åƒä¸èƒ–/ çš„/ å°çŒ«/ Linaingriditttttx/ èƒ¡æ¨/ å­™é˜¿ç«¥/ æž—ç¾Žç/ èµ«è˜¿/ Taiga/ å®«æ›¼æ›¼/ YoonyiccZW711/ ç¬™ç®«/ KIKI/ ./ Liu/ å¦ä¸€åª/ è¢œå­/ è’é‡Ž/ å¤§/ å«–å®¢/ å°‘å¥³/ è¯—/ èŠ¸è±†/ è±†è±†/ è±†ç’ç’å™œ/ æ£¹/ æ­Œæ¢¦é‡Œ/ æœ‰/ åª/ ç‹¬è§’å…½/ Oo/ æ¾„å­/ oO/ é›·æ¢…/ è‹”ä¸/ CherryZhao/ æŽè¬/ ä¸€ç´è„‚/ é¹¿æ–‘/ æ¯”/ Chris/ å§¬/ -/ äº‘çƒŸ/ hyoram/ è”—è”—è”—/ æŸšå­/ RubySheena/ å­Ÿå¾·å°”/ kaka/ å°/ å¸ˆå¦¹/ æ¡¢è§†/ æ˜Žå¤§/ è±†è‹—/ å°‘å¥³/ å¼€è†›æ‰‹/ é™ˆè¯—/ èŒ— ä¸‹ä¸€æ­¥ç»˜åˆ¶å›¾äº‘ï¼Œç”¨jupyteré‡åˆ°äº†å¾ˆå¤šå‘ã€‚ã€‚ # -*- coding: utf-8 -*- import matplotlib.pyplot as plt from wordcloud import WordCloud,STOPWORDS,ImageColorGenerator # ç›´æŽ¥ä»Žæ–‡ä»¶è¯»å–æ•°æ® text = &apos;&apos;&apos;é˜¿è•¾/æ¨/é¢é™ˆ/10/æ¨/é¡ºé¡º/éœ§/æ©¤/çœŸ/é¡ºé¡º/çœŸ/è°¢æ¤¿æ˜Ž/åˆ€åˆ€/æ°´æžª/å¤§å¸/å€¾æµ…/Listening/å°/ç«é¾™/åŒ…å­/ç›/æ¨ç¬‹/ç¬‹/èœ‰è£/åå…ƒ/é¡é¡ä¹‹éŸ³/Real/æœºæ™º/å¼ /é™ˆæ¢“/å°/ç«¥éž‹/èŠ±ç”²/çª—é‡Œ/çª—å¤–/åˆ˜æ¢“ä¹”/ç’‡/ç’‡/97Olivia/èŠé¦™/å°å§å§/ç‰›å¥¶/å°å¤ç›®/å‘¨ä¾å®/ä¸‡/é˜¿/å’¸ä¸€/è“‘/çƒŸé›¨ä»»/å¹³ç”Ÿ/æ¥/éƒ½/æ¥/äº†/å°±/åƒ/å‘¨ä¸€/Mc/è›‹è›‹/ç§‰å‰‘ä¾¯/æŽå¤§æ¢¦/LeeDiss/é”é›¯é›¨/éŸ³çœžç™½/åŠä»™/å¹º/å¹º/Natsuki/æ˜¯/åª/è ¢/å…”çº¸/å¤/å†°èŽ¹/guuweihai/é˜¿èˆž/è‚–æŸšå¦®/å¢¨è„±/è¦/å¼€èŠ·/çž/èˆ’è¥¿å©·/Childe0Q/è¢«/åŽ‹æ‰/çš„/æµ·èžº/snow/ /arc/ç°ç°/ç°ç°/ç°/plus/å°å…”å­/è²/å‘€/å£«å¤šå•¤æ¢¨/ç¾Š/å’©/å’©/æŽå°/å¯å¯/è°/æ¥/æ‹½/æˆ‘/çš„/å°¾å·´/é£žé¸½/ä¹‹èˆž/å°ç¾Ž/æ¨±é›ª/ç»«/samazshiyao/çŽ‹æ¼ /é‡Œ/Slivan/å–µ/å°è™¾/SUSAN/è‹/ä¸Šå®˜/å…°é¢œ/è¿™ä¸ª/æ€æ‰‹/ä¸/å¤ªå†·/çœ‹æœ±æˆç¢§/çº·æ€å›/æƒ…ç»ª/æˆ‘ç³»/å°å¿Œå»‰/ä¸€åª/å…”/June/æˆ‘/å°±/æƒ³/æ”¹å/è€Œå·²/æ¸©æŸ”/çš„/å¤§çŒ«/Leo/çŒ«/èŠ™ç³/ä»¥å¤ª/åšä¸½/é­”ç†æ²™/æ´›ä¸½å¡”/ç¾½å°å›¢/å¨„è‰¯/Rosi/å¶/ä»¥åŒ—/åƒä¸èƒ–/çš„/å°çŒ«/Linaingriditttttx/èƒ¡æ¨/å­™é˜¿ç«¥/æž—ç¾Žç/èµ«è˜¿/Taiga/å®«æ›¼æ›¼/YoonyiccZW711/ç¬™ç®«/KIKI/./Liu/å¦ä¸€åª/è¢œå­/è’é‡Ž/å¤§/å«–å®¢/å°‘å¥³/è¯—/èŠ¸è±†/è±†è±†/è±†ç’ç’å™œ/æ£¹/æ­Œæ¢¦é‡Œ/æœ‰/åª/ç‹¬è§’å…½/Oo/æ¾„å­/oO/é›·æ¢…/è‹”ä¸/CherryZhao/æŽè¬/ä¸€ç´è„‚/é¹¿æ–‘/æ¯”/Chris/å§¬/-/äº‘çƒŸ/hyoram/è”—è”—è”—/æŸšå­/RubySheena/å­Ÿå¾·å°”/kaka/å°/å¸ˆå¦¹/æ¡¢è§†/æ˜Žå¤§/è±†è‹—/å°‘å¥³/å¼€è†›æ‰‹/é™ˆè¯—/èŒ—&apos;&apos;&apos; backgroud_Image = plt.imread(&apos;girl.jpg&apos;) wc = WordCloud( background_color = &apos;white&apos;, # è®¾ç½®èƒŒæ™¯é¢œè‰² mask = backgroud_Image, # è®¾ç½®èƒŒæ™¯å›¾ç‰‡ max_words = 2000, # è®¾ç½®æœ€å¤§çŽ°å®žçš„å­—æ•° stopwords = STOPWORDS, # è®¾ç½®åœç”¨è¯ font_path = &apos;C:/Users/Windows/fonts/msyh.ttf&apos;,# è®¾ç½®å­—ä½“æ ¼å¼ï¼Œå¦‚ä¸è®¾ç½®æ˜¾ç¤ºä¸äº†ä¸­æ–‡ max_font_size = 300, # è®¾ç½®å­—ä½“æœ€å¤§å€¼ random_state = 50, # è®¾ç½®æœ‰å¤šå°‘ç§éšæœºç”ŸæˆçŠ¶æ€ï¼Œå³æœ‰å¤šå°‘ç§é…è‰²æ–¹æ¡ˆ ) wc.generate(text) image_colors = ImageColorGenerator(backgroud_Image) #wc.recolor(color_func = image_colors) plt.imshow(wc) plt.axis(&apos;off&apos;) plt.show() æ¥çœ‹çœ‹å›¾äº‘å§ å…¶å®žè¿™ä¸ªå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼ŒçŸ¥è¯†è‡ªå·±æ— èŠæ—¶çŽ©çŽ©çš„ã€‚ä¸‹é¢æ‰æ˜¯æˆ‘æƒ³è¦çš„ 0 é™ˆè¯—èŒ— https://www.zhihu.com/people/chen-shi-ming-69 1 æŽå¤§æ¢¦Lee https://www.zhihu.com/people/li-da-meng-58-44 2 snow arc https://www.zhihu.com/people/xiaoxueli 3 å¤å†°èŽ¹ https://www.zhihu.com/people/xia-bingying 4 Sheena https://www.zhihu.com/people/zhang-chu-yun-84 5 å–µå°è™¾ https://www.zhihu.com/people/maoxiaoxia233 6 æŽå¤§æ¢¦Lee https://www.zhihu.com/people/li-da-meng-58-44 7 æŽå¤§æ¢¦Lee https://www.zhihu.com/people/li-da-meng-58-44 8 ä»¥å¤ª https://www.zhihu.com/people/elapse08 9 zshiyao https://www.zhihu.com/people/duo-rou-wan-zi-89 10 SUSANè‹ https://www.zhihu.com/people/susansu-66 11 æ¸©æŸ”çš„å¤§çŒ«Leo https://www.zhihu.com/people/li-yue-90-56 12 ç´è„‚ https://www.zhihu.com/people/qin-zhi-49 13 çŽ‹æ¼ é‡Œ https://www.zhihu.com/people/wang-mo-li-66 14 èŠ±ç”² https://www.zhihu.com/people/hua-jia-1-71 15 é›·æ¢…è‹”ä¸ https://www.zhihu.com/people/lei-mei-tai-si-15 16 OliviaèŠé¦™å°å§å§ https://www.zhihu.com/people/olivia-60-10 17 èŠ·çž https://www.zhihu.com/people/zhi-luo-90-6 18 Mcè›‹è›‹ https://www.zhihu.com/people/lee2egg 19 å°‘å¥³è¯— https://www.zhihu.com/people/shao-nu-shi-75 20 ingrid https://www.zhihu.com/people/da-da-yao-guai 21 åšä¸½é­”ç†æ²™ https://www.zhihu.com/people/nan-xiao-niao-94-5 22 èµ«è˜¿Taiga https://www.zhihu.com/people/he-luo-taiga 23 kakaå°å¸ˆå¦¹ https://www.zhihu.com/people/kakasis 24 èŠ¸è±†è±†è±†è±† https://www.zhihu.com/people/yun-dou-dou-dou-dou 25 æž—ç¾Žç https://www.zhihu.com/people/lin-mei-zhen 26 å–µå°è™¾ https://www.zhihu.com/people/maoxiaoxia233 27 è¿™ä¸ªæ€æ‰‹ä¸å¤ªå†· https://www.zhihu.com/people/wei-jun-jie-9 28 å–µå°è™¾ https://www.zhihu.com/people/maoxiaoxia233 29 Rosi https://www.zhihu.com/people/rosi-91 ... ... ... 111 æ´›ä¸½å¡” https://www.zhihu.com/people/hua-hua-gu-niang-5 112 æ´›ä¸½å¡” https://www.zhihu.com/people/hua-hua-gu-niang-5 113 æ´›ä¸½å¡” https://www.zhihu.com/people/hua-hua-gu-niang-5 114 æ´›ä¸½å¡” https://www.zhihu.com/people/hua-hua-gu-niang-5 115 Dissé”é›¯ https://www.zhihu.com/people/DSRiven 116 æ°´æžªå¤§å¸ https://www.zhihu.com/people/shuiqiangge 117 æ¨±é›ªç»«sama https://www.zhihu.com/people/lin-xuan-ting-1 118 æŽå°å¯å¯ https://www.zhihu.com/people/li-gao-xing-2 119 å£«å¤šå•¤æ¢¨ç¾Šå’©å’© https://www.zhihu.com/people/shi-duo-pi-li-yan... 120 æŽè¬ä¸€ https://www.zhihu.com/people/moire 121 ä¸‡é˜¿å’¸ https://www.zhihu.com/people/wan-a-xian-58 122 ç¬™ç®« https://www.zhihu.com/people/sheng-xiao-36 123 è°¢æ¤¿æ˜Ž https://www.zhihu.com/people/xie-chun-ming-16 124 å­™é˜¿ç«¥ https://www.zhihu.com/people/sun-a-tong 125 å®«æ›¼æ›¼ https://www.zhihu.com/people/gong-nuo-6 126 è’é‡Žå¤§å«–å®¢ https://www.zhihu.com/people/ji-da-fa-37 127 æˆ‘å°±æƒ³æ”¹åè€Œå·² https://www.zhihu.com/people/wowjessica 128 å°±åƒå‘¨ä¸€ https://www.zhihu.com/people/yin-qing-chu-kai 129 èƒ¡æ¨ https://www.zhihu.com/people/hu-yang-49-22 130 æ¨ç¬‹ç¬‹ https://www.zhihu.com/people/yang-sun-sun-98 131 èœ‰è£ https://www.zhihu.com/people/yuan-xia-66 132 ç¾½å°å›¢ https://www.zhihu.com/people/xiao-yu-bao-er 133 æ¨ç¬‹ç¬‹ https://www.zhihu.com/people/yang-sun-sun-98 134 Lina https://www.zhihu.com/people/li-nuo-84-28 135 å¦ä¸€åªè¢œå­ https://www.zhihu.com/people/151231 136 åˆ˜æ¢“ä¹” https://www.zhihu.com/people/liu-zi-qiao-42 137 guuweihai https://www.zhihu.com/people/guuweihai 138 é™ˆ10 https://www.zhihu.com/people/chen-10-80 139 ZW711 https://www.zhihu.com/people/zw711 140 çœ‹æœ±æˆç¢§çº·æ€å› https://www.zhihu.com/people/kan-zhu-cheng-bi-... ä¸‹å‘¨äºŒæ™šä¸Š8ç‚¹ï¼Œæˆ‘ä¼šåœ¨è¶£ç›´æ’­èŠä¸€èŠPythonçˆ¬è™«ï¼Œå¦‚æžœä½ æ„Ÿå…´è¶£ï¼Œæ¬¢è¿Žä½ æ¥å‚åŠ ã€‚ è¶£ç›´æ’­ - çŸ¥è¯†ç›´æ’­å¹³å°]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode_4.Median of Two Sorted Arrays]]></title>
      <url>%2F2017%2F05%2F19%2FLeetcode-4-Median-of-Two-Sorted-Arrays%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åä¸€ç¯‡åŽŸåˆ›æ–‡ç«  å‚è€ƒMedian of Two Sorted Arrays 1ã€é¢˜ç›®There are two sorted arrays nums1 and nums2 of size m and n respectively. Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)). Example 1: nums1 = [1, 3] nums2 = [2] The median is 2.0 Example 2: nums1 = [1, 2] nums2 = [3, 4] The median is (2 + 3)/2 = 2.5 2ã€æ€è·¯è›‹ç–¼çš„è¯´ï¼Œæˆ‘æœ‰çœ‹ä¸æ‡‚é¢˜ç›®äº†ï¼Œå°¤å…¶æ˜¯O(log (m+n))ï¼Œå•¥çŽ©æ„ã€‚æ²¡åŠžæ³•ï¼ŒåŽ»ç½‘ä¸Šæœç´¢ï¼Œçœ‹çœ‹å‰è¾ˆä»¬çš„æƒ³æ³•ã€‚ ç¿»è¯‘å¦‚ä¸‹ï¼š ç»™ä½ ä¸¤ä¸ªæŽ’åºæ•°ç»„ï¼Œå®¹é‡ä¸ºmçš„æ•°ç»„Aï¼Œå®¹é‡ä¸ºnçš„æ•°ç»„Bã€‚æ±‚å‡ºä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°ï¼ˆå•¥çŽ©æ„ï¼Ÿï¼‰ï¼Œç¡¬æ€§è¦æ±‚æ—¶é—´å¤æ‚åº¦O(log (m+n)). 1ï¼šå¤ªæ±—é¢œäº†ï¼Œmedianåˆ°åº•æ˜¯ä¸ªå•¥ï¼ŒæŸ¥ä¸€ä¸‹ï¼š ä¸­ä½æ•°æ˜¯åœ¨ä¸€ç»„æ•°æ®ä¸­å±…äºŽä¸­é—´çš„æ•°(ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼šè¿™ç»„æ•°æ®ä¹‹å‰å·²ç»ç»è¿‡å‡åºæŽ’åˆ—ï¼ï¼ï¼)ï¼Œå³åœ¨è¿™ç»„æ•°æ®ä¸­ï¼Œæœ‰ä¸€åŠçš„æ•°æ®æ¯”å®ƒå¤§ï¼Œæœ‰ä¸€åŠçš„æ•°æ®æ¯”å®ƒå°ã€‚å¦‚æžœè¿™ç»„æ•°æ®åŒ…å«å¶æ•°ä¸ªæ•°å­—ï¼Œä¸­å€¼æ˜¯ä½äºŽä¸­é—´çš„ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚ 2ï¼šå¥½å§ï¼Œä¸­ä½æ•°æ˜¯è¿™ä¹ˆä¸ªçŽ©æ„ï¼Œé‚£ä¹ˆç†è®ºä¸Šé¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆå°†ä¸¤ä¸ªæ•°ç»„åˆä¸ºä¸€ï¼Œå†æ±‚è¿™ä¸ªæ–°åˆå¹¶çš„æ•°ç»„çš„ä¸­ä½æ•°ã€‚ 3ï¼šä½†æ˜¯ï¼Œå·²ç»é™å®šæ­»äº†æ—¶é—´å¤æ‚åº¦ä¸ºlogï¼ˆm+nï¼‰ï¼ŒåŽŸæ¥LeetCodeçš„é¢˜ç›®ä¹Ÿæ€è·¯ä¸å¼€æ”¾å˜›ã€‚ 4ï¼šé—®é¢˜å¯ä»¥è½¬åŒ–æˆä¸¤ä¸ªæœ‰åºåºåˆ—æ‰¾ç¬¬numå¤§çš„æ•°ï¼Œç”±äºŽæ—¶é—´å¤æ‚åº¦å·²ç»é™å®šæ­»äº†ï¼Œåªèƒ½é‡‡ç”¨ç±»ä¼¼äºŒåˆ†çš„æ€æƒ³ï¼Œæ¯ä¸ªæ­¥éª¤åŽ»æŽ‰ä¸€åŠæ•°æ®å…ƒç´ ã€‚ å‡ºçŽ°äº†ä¸€ä¸ªè¯è¯­ï¼šæ—¶é—´å¤æ‚åº¦ï¼Œè¿™æ˜¯ä¸ªå•¥ï¼Ÿ å®Œå…¨ä¸æ‡‚ï¼Œæ¢ä¸ªæ€è·¯æ¥å§ï¼Œä¸åŽ»çœ‹é¢˜ç›®äº†ï¼Œç›´æŽ¥çœ‹ç¬¬å››ç‚¹ï¼š é—®é¢˜å¯ä»¥è½¬åŒ–æˆä¸¤ä¸ªæœ‰åºåºåˆ—æ‰¾ç¬¬numå¤§çš„æ•°ï¼Œç”±äºŽæ—¶é—´å¤æ‚åº¦å·²ç»é™å®šæ­»äº†ï¼Œåªèƒ½é‡‡ç”¨ç±»ä¼¼äºŒåˆ†çš„æ€æƒ³ï¼Œæ¯ä¸ªæ­¥éª¤åŽ»æŽ‰ä¸€åŠæ•°æ®å…ƒç´ ã€‚ äºŒåˆ†ï¼Œåˆæ˜¯äºŒåˆ†ï¼Œèµ¶ç´§åŽ»å¤ä¹ ä¸‹ã€‚ äºŒåˆ†æŸ¥æ‰¾å°±æ˜¯å°†æŸ¥æ‰¾çš„é”®å’Œå­æ•°ç»„çš„ä¸­é—´é”®ä½œæ¯”è¾ƒï¼Œå¦‚æžœè¢«æŸ¥æ‰¾çš„é”®å°äºŽä¸­é—´é”®ï¼Œå°±åœ¨å·¦å­æ•°ç»„ç»§ç»­æŸ¥æ‰¾ï¼›å¦‚æžœå¤§äºŽä¸­é—´é”®ï¼Œå°±åœ¨å³å­æ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œå¦åˆ™ä¸­é—´é”®å°±æ˜¯è¦æ‰¾çš„å…ƒç´ ã€‚ è¿™ä¸ªå¥½åƒè¿˜å¯ä»¥çœ‹å¾—æ‡‚ï¼Œå˜¿å˜¿ã€‚æˆ‘è¿˜å‘çŽ°äº†Pythonæºä»£ç ï¼ˆç™¾åº¦è¿™æ ·è¯´çš„ï¼‰ï¼š def bin_search(data_list, val): low = 0 # æœ€å°æ•°ä¸‹æ ‡ high = len(data_list) - 1 # æœ€å¤§æ•°ä¸‹æ ‡ while low &lt;= high: mid = (low + high) // 2 # ä¸­é—´æ•°ä¸‹æ ‡ if data_list[mid] == val: # å¦‚æžœä¸­é—´æ•°ä¸‹æ ‡ç­‰äºŽval, è¿”å›ž return mid elif data_list[mid] &gt; val: # å¦‚æžœvalåœ¨ä¸­é—´æ•°å·¦è¾¹, ç§»åŠ¨highä¸‹æ ‡ high = mid - 1 else: # å¦‚æžœvalåœ¨ä¸­é—´æ•°å³è¾¹, ç§»åŠ¨lowä¸‹æ ‡ low = mid + 1 return # valä¸å­˜åœ¨, è¿”å›žNone ret = bin_search(list(range(1, 10)), 3) print(ret) å¤§æ¦‚æ˜Žç™½ä»–çš„æ„æ€äº†ã€‚ 3ã€è§£æ³•å¾ˆå¤šè§£æ³•éƒ½æåˆ°ï¼šå¦‚æžœæˆ‘ä»¬å¯ä»¥åœ¨ä¸¤ä¸ªæ•°åˆ—ä¸­æ±‚å‡ºç¬¬Kå°çš„å…ƒç´ ï¼Œä¾¿å¯ä»¥è§£å†³è¯¥é—®é¢˜ è§£é¢˜æ€è·¯ï¼šè¿™é“é¢˜è¦æ±‚ä¸¤ä¸ªå·²ç»æŽ’å¥½åºçš„æ•°åˆ—çš„ä¸­ä½æ•°ã€‚ä¸­ä½æ•°çš„å®šä¹‰ï¼šå¦‚æžœæ•°åˆ—æœ‰å¶æ•°ä¸ªæ•°ï¼Œé‚£ä¹ˆä¸­ä½æ•°ä¸ºä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ï¼›å¦‚æžœæ•°åˆ—æœ‰å¥‡æ•°ä¸ªæ•°ï¼Œé‚£ä¹ˆä¸­ä½æ•°ä¸ºä¸­é—´çš„é‚£ä¸ªæ•°ã€‚æ¯”å¦‚{1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5}çš„ä¸­ä½æ•°ä¸º3ã€‚{1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6}çš„ä¸­ä½æ•°ä¸ºï¼ˆ3+4ï¼‰/ 2 = 3.5ã€‚é‚£ä¹ˆè¿™é¢˜æœ€ç›´æŽ¥çš„æ€è·¯å°±æ˜¯å°†ä¸¤ä¸ªæ•°åˆ—åˆå¹¶åœ¨ä¸€èµ·ï¼Œç„¶åŽæŽ’åºï¼Œç„¶åŽæ‰¾åˆ°ä¸­ä½æ•°å°±è¡Œäº†ã€‚å¯æ˜¯è¿™æ ·æœ€å¿«ä¹Ÿè¦O((m+n)log(m+n))çš„æ—¶é—´å¤æ‚åº¦ï¼Œè€Œé¢˜ç›®è¦æ±‚O(log(m+n))çš„æ—¶é—´å¤æ‚åº¦ã€‚è¿™é“é¢˜å…¶å®žè€ƒå¯Ÿçš„æ˜¯äºŒåˆ†æŸ¥æ‰¾ï¼Œæ˜¯ã€Šç®—æ³•å¯¼è®ºã€‹çš„ä¸€é“è¯¾åŽä¹ é¢˜ï¼Œéš¾åº¦è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ã€‚ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹å¦‚ä½•æ‰¾åˆ°ä¸¤ä¸ªæ•°åˆ—çš„ç¬¬kå°ä¸ªæ•°ï¼Œå³ç¨‹åºä¸­getKth(A, B , k)å‡½æ•°çš„å®žçŽ°ã€‚ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Žè¿™ä¸ªé—®é¢˜ï¼šA = {1ï¼Œ3ï¼Œ5ï¼Œ7}ï¼›B = {2ï¼Œ4ï¼Œ6ï¼Œ8ï¼Œ9ï¼Œ10}ï¼›å¦‚æžœè¦æ±‚ç¬¬7ä¸ªå°çš„æ•°ï¼ŒAæ•°åˆ—çš„å…ƒç´ ä¸ªæ•°ä¸º4ï¼ŒBæ•°åˆ—çš„å…ƒç´ ä¸ªæ•°ä¸º6ï¼›k/2 = 7/2 = 3ï¼Œè€ŒAä¸­çš„ç¬¬3ä¸ªæ•°A[2]=5ï¼›Bä¸­çš„ç¬¬3ä¸ªæ•°B[2]=6ï¼›è€ŒA[2]&lt;B[2]ï¼›åˆ™A[0]ï¼ŒA[1]ï¼ŒA[2]ä¸­å¿…ç„¶ä¸å¯èƒ½æœ‰ç¬¬7ä¸ªå°çš„æ•°ã€‚å› ä¸ºA[2]&lt;B[2]ï¼Œæ‰€ä»¥æ¯”A[2]å°çš„æ•°æœ€å¤šå¯èƒ½ä¸ºA[0], A[1], B[0], B[1]è¿™å››ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´A[2]æœ€å¤šå¯èƒ½æ˜¯ç¬¬5ä¸ªå¤§çš„æ•°ï¼Œç”±äºŽæˆ‘ä»¬è¦æ±‚çš„æ˜¯getKth(A, B, 7)ï¼›çŽ°åœ¨å°±å˜æˆäº†æ±‚getKth(Aâ€™, B, 4)ï¼›å³Aâ€™ = {7}ï¼›Bä¸å˜ï¼Œæ±‚è¿™ä¸¤ä¸ªæ•°åˆ—çš„ç¬¬4ä¸ªå°çš„æ•°ï¼Œå› ä¸ºA[0]ï¼ŒA[1]ï¼ŒA[2]ä¸­æ²¡æœ‰è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æŽ¥åˆ æŽ‰å®ƒä»¬å°±å¯ä»¥äº†ã€‚è¿™ä¸ªå¯ä»¥ä½¿ç”¨é€’å½’æ¥å®žçŽ°ã€‚ class Solution: # @return a float # @line20 must multiply 0.5 for return a float else it will return an int def getKth(self, A, B, k): lenA = len(A); lenB = len(B) if lenA &gt; lenB: return self.getKth(B, A, k) if lenA == 0: return B[k - 1] if k == 1: return min(A[0], B[0]) pa = min(k/2, lenA); pb = k - pa if A[pa - 1] &lt;= B[pb - 1]: return self.getKth(A[pa:], B, pb) else: return self.getKth(A, B[pb:], pa) def findMedianSortedArrays(self, A, B): lenA = len(A); lenB = len(B) if (lenA + lenB) % 2 == 1: return self.getKth(A, B, (lenA + lenB)/2 + 1) else: return (self.getKth(A, B, (lenA + lenB)/2) + self.getKth(A, B, (lenA + lenB)/2 + 1)) * 0.5 åœ¨æˆ‘æäº¤äº†ä»£ç ä¹‹åŽï¼Œå‘çŽ°è¶…è¿‡50.24 % æˆ‘æ‰¾å‡ºæœ€å¿«çš„è§£æ³•ï¼Œæ¥å­¦ä¹ ä¸‹ï¼š class Solution(object): def findMedianSortedArrays(self, a, b): &quot;&quot;&quot; :type nums1: List[int] :type nums2: List[int] :rtype: float &quot;&quot;&quot; c = a+b c.sort() m = len(c) / 2 mm = len(c) % 2 if mm &gt; 0 : return c[m] return (c[m-1]+c[m])/2.# + (c[m-1]+c[m])%2 ç¬¬äºŒåçš„ï¼š class Solution(object): def findMedianSortedArrays(self, nums1, nums2): &quot;&quot;&quot; :type nums1: List[int] :type nums2: List[int] :rtype: float &quot;&quot;&quot; nums3 = nums1 + nums2 nums3.sort() l = len(nums3) if l%2 == 1: return nums3[l/2] else: return (float(nums3[l/2]) + float(nums3[l/2-1]))/2 æ¯åšä¸€é¢˜ï¼Œéƒ½ä¼šè¢«æ‰“å‡»å¥½å¤šæ¬¡ï¼Œä½†æ˜¯ç®—æ³•æ˜¯ä¸€å®šè¦å­¦ä¹ çš„ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Leetcode_2. Add Two Numbers]]></title>
      <url>%2F2017%2F05%2F14%2FLeetcode-2-Add-Two-Numbers%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬åç¯‡åŽŸåˆ›æ–‡ç«  å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œå®šä¸ªå°ç›®æ ‡ï¼Œ2å¤©ä¸€ç¯‡ï¼Œå“ˆå“ˆã€‚ 1ã€é¢˜ç›®You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list. You may assume the two numbers do not contain any leading zero, except the number 0 itself. Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4) Output: 7 -&gt; 0 -&gt; 8 2ã€æ€è·¯å…¶å®žæˆ‘å¹¶çœ‹ä¸æ‡‚é¢˜ç›®è¯´å¾—å•¥æ„æ€ï¼Œå¦‚æžœè¯´243+564ï¼Œç»“æžœæ˜¯807æ‰æ˜¯ï¼Œä½†æ˜¯å¾ˆæ˜Žæ˜¾é¢˜ç›®ä¸ä¼šè¿™ä¹ˆç®€å•ã€‚æ€Žä¹ˆåŠžï¼Ÿ å¥½åƒåªèƒ½åŽ»çœ‹çœ‹åˆ«äººçš„ç†è§£äº†ï¼Œå‘çŽ°ï¼š 1.å› ä¸ºå­˜å‚¨æ˜¯åè¿‡æ¥çš„ï¼Œå³æ•°å­—342å­˜æˆ2-&gt;4-&gt;3ï¼Œæ‰€ä»¥è¦æ³¨æ„è¿›ä½æ˜¯å‘åŽçš„ï¼› 2.é“¾è¡¨l1æˆ–l2ä¸ºç©ºæ—¶ï¼Œç›´æŽ¥è¿”å›žï¼Œè¿™æ˜¯è¾¹ç•Œæ¡ä»¶ï¼ŒçœæŽ‰å¤šä½™çš„æ“ä½œï¼› 3.é“¾è¡¨l1å’Œl2é•¿åº¦å¯èƒ½ä¸åŒï¼Œå› æ­¤è¦æ³¨æ„å¤„ç†æŸä¸ªé“¾è¡¨å‰©ä½™çš„é«˜ä½ï¼› 4.2ä¸ªæ•°ç›¸åŠ ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæœ€é«˜ä½çš„è¿›ä½ï¼Œå› æ­¤è¦æ³¨æ„åœ¨å®Œæˆä»¥ä¸Š1ï¼3çš„æ“ä½œåŽï¼Œåˆ¤æ–­è¿›ä½æ˜¯å¦ä¸º0ï¼Œä¸ä¸º0åˆ™éœ€è¦å¢žåŠ ç»“ç‚¹å­˜å‚¨æœ€é«˜ä½çš„è¿›ä½ã€‚ ç»™ä¸ªé“¾æŽ¥http://blog.csdn.net/zhouworld16/article/details/14045855 åŽŸæ¥æ˜¯å€’ç€ç›¸åŠ ï¼Œ342+465=807ï¼Œç»“æžœå€’åºï¼Œæ­£å¥½æ˜¯708ï¼Œé¢˜ç›®åº”è¯¥æ˜¯è¿™æ ·ç†è§£çš„å§ï¼Œå“ˆå“ˆã€‚ æ€è·¯æœ¬é¢˜çš„æ€è·¯å¾ˆç®€å•ï¼ŒæŒ‰ç…§å°å­¦æ•°å­¦ä¸­å­¦ä¹ çš„åŠ æ³•åŽŸç†ä»Žæœ«å°¾åˆ°é¦–ä½ï¼Œå¯¹æ¯ä¸€ä½å¯¹é½ç›¸åŠ å³å¯ã€‚æŠ€å·§åœ¨äºŽå¦‚ä½•å¤„ç†ä¸åŒé•¿åº¦çš„æ•°å­—ï¼Œä»¥åŠè¿›ä½å’Œæœ€é«˜ä½çš„åˆ¤æ–­ã€‚è¿™é‡Œå¯¹äºŽä¸åŒé•¿åº¦çš„æ•°å­—ï¼Œæˆ‘ä»¬é€šè¿‡å°†è¾ƒçŸ­çš„æ•°å­—è¡¥0æ¥ä¿è¯æ¯ä¸€ä½éƒ½èƒ½ç›¸åŠ ã€‚é€’å½’å†™æ³•çš„æ€è·¯æ¯”è¾ƒç›´æŽ¥ï¼Œå³åˆ¤æ–­è¯¥è½®é€’å½’ä¸­ä¸¤ä¸ªListNodeæ˜¯å¦ä¸ºnullã€‚ å…¨éƒ¨ä¸ºnullæ—¶ï¼Œè¿”å›žè¿›ä½å€¼ æœ‰ä¸€ä¸ªä¸ºnullæ—¶ï¼Œè¿”å›žä¸ä¸ºnullçš„é‚£ä¸ªListNodeå’Œè¿›ä½ç›¸åŠ çš„å€¼ éƒ½ä¸ä¸ºnullæ—¶ï¼Œè¿”å›ž ä¸¤ä¸ªListNodeå’Œè¿›ä½ç›¸åŠ çš„å€¼ æ¥æºä¸€ä½å¤§ä½¬https://segmentfault.com/a/1190000002986101 åŽŸæ¥æ˜¯å°å­¦å†…å®¹å°å­¦æ•°å­¦ä¸­å­¦ä¹ çš„åŠ æ³•ï¼Œä½¿ç”¨é€’å½’å†™æ³•ã€‚ é€’å½’ï¼Œå°±æ˜¯åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­è°ƒç”¨è‡ªå·±ã€‚ä»€ä¹ˆé¬¼å•Šï¼Œè‡ªå·±ä½¿ç”¨è‡ªå·±å—ï¼Ÿ ç›®å‰æˆ‘æ‰¾åˆ°çš„å¯¹é€’å½’æœ€æ°å½“çš„æ¯”å–»ï¼Œå°±æ˜¯æŸ¥è¯å…¸ã€‚ æˆ‘ä»¬ä½¿ç”¨çš„è¯å…¸ï¼Œæœ¬èº«å°±æ˜¯é€’å½’ï¼Œä¸ºäº†è§£é‡Šä¸€ä¸ªè¯ï¼Œéœ€è¦ä½¿ç”¨æ›´å¤šçš„è¯ã€‚ å½“ä½ æŸ¥ä¸€ä¸ªè¯ï¼Œå‘çŽ°è¿™ä¸ªè¯çš„è§£é‡Šä¸­æŸä¸ªè¯ä»ç„¶ä¸æ‡‚ï¼ŒäºŽæ˜¯ä½ å¼€å§‹æŸ¥è¿™ç¬¬äºŒä¸ªè¯ï¼Œå¯æƒœï¼Œç¬¬äºŒä¸ªè¯é‡Œä»ç„¶æœ‰ä¸æ‡‚çš„è¯ï¼ŒäºŽæ˜¯æŸ¥ç¬¬ä¸‰ä¸ªè¯ï¼Œè¿™æ ·æŸ¥ä¸‹åŽ»ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªè¯çš„è§£é‡Šæ˜¯ä½ å®Œå…¨èƒ½çœ‹æ‡‚çš„ï¼Œé‚£ä¹ˆé€’å½’èµ°åˆ°äº†å°½å¤´ï¼Œç„¶åŽä½ å¼€å§‹åŽé€€ï¼Œé€ä¸ªæ˜Žç™½ä¹‹å‰æŸ¥è¿‡çš„æ¯ä¸€ä¸ªè¯ï¼Œæœ€ç»ˆï¼Œä½ æ˜Žç™½äº†æœ€å¼€å§‹é‚£ä¸ªè¯çš„æ„æ€ã€‚ã€‚ã€‚ å¥½åƒæ˜Žç™½äº†ä¸€ç‚¹ç‚¹~ 3ã€è§£æ³• #ï¼ˆPythonï¼‰ç‰ˆæœ¬1 class Solution: def addTwoNumbers(self, l1, l2): addends = l1, l2 dummy = end = ListNode(0) carry = 0 while addends or carry: carry += sum(a.val for a in addends) addends = [a.next for a in addends if a.next] end.next = end = ListNode(carry % 10) carry /= 10 return dummy.next ç‰ˆæœ¬2 class Solution: # @return a ListNode def addTwoNumbers(self, l1, l2): carry = 0 sum = ListNode(0) s = sum while l1 is not None or l2 is not None or carry: s.val = carry if l1: s.val += l1.val l1 = l1.next if l2: s.val += l2.val l2 = l2.next carry = s.val / 10 s.val = s.val % 10 if l1 or l2 or carry: s.next = ListNode(0) s = s.next return sum å¥½å§ï¼Œæ‰¿è®¤ç‰ˆæœ¬1çœ‹ä¸æ‡‚ã€‚è‡³äºŽç‰ˆæœ¬2 ListNode æ˜¯ä¸€ä¸ªå…ƒç¥–ï¼Œç„¶åŽã€‚ã€‚ã€‚s.valæ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Ÿåˆä¸æ‡‚ã€‚å›žåŽ»çœ‹çœ‹ï¼ŒåŽŸæ¥æ˜¯å·²ç»å®šä¹‰äº†ListNode # Definition for singly-linked list. # class ListNode(object): # def __init__(self, x): # self.val = x # self.next = None ä¹Ÿå°±æ˜¯è¯´æœ‰2ä¸ªç±»ï¼ŒSolution å’Œ ListNode ä»Šå¤©å…ˆè¿™æ ·äº†ï¼Œæˆ‘éœ€è¦åŽ»å­¦ä¹ ä¸€ä¸‹ä»€ä¹ˆæ˜¯â€œç±»â€ï¼Œä¹Ÿå°±æ˜¯Pythonçš„é¢å‘å¯¹è±¡ç¼–ç¨‹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä½¿ç”¨Pythonè®¡ç®—æ–‡ç« ä¸­çš„å­—è¯é¢‘çŽ‡ä¸¨å­¦ä¹ ç¬”è®°å’Œåæ€]]></title>
      <url>%2F2017%2F03%2F28%2F%E4%BD%BF%E7%94%A8Python%E8%AE%A1%E7%AE%97%E6%96%87%E7%AB%A0%E4%B8%AD%E7%9A%84%E5%AD%97%E8%AF%8D%E9%A2%91%E7%8E%87%E4%B8%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%92%8C%E5%8F%8D%E6%80%9D%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¹ç¯‡åŽŸåˆ›æ–‡ç«  æ¥æºï¼šå¤©å–„æ™ºèƒ½-å•†ä¸šæ™ºèƒ½å’Œå¤§æ•°æ®åœ¨çº¿ç¤¾åŒºï¼Œç”¨å¿ƒåˆ›é€ ä»·å€¼https://edu.hellobi.com/course/159/play/lesson/2531 ä¸˜ç¥çŽ®https://ask.hellobi.com/people/DavidChiuäººäººéƒ½çˆ±æ•°æ®ç§‘å­¦å®¶ï¼Pythonæ•°æ®ç§‘å­¦ç²¾åŽå®žæˆ˜è¯¾ç¨‹ çŽ¯å¢ƒï¼šAnaconda3 å»ºè®®ä½¿ç”¨Anacondaï¼Œä¸‹è½½æºæ–‡ä»¶åŽå†é˜…è¯»æœ¬æ–‡ï¼šhttps://github.com/zhangslob/DanmuFenxi é€‰æ‹©ç»å…¸æ¼”è®²ç¨¿ï¼Œå¥¥å·´é©¬2009å¹´9æœˆ8æ—¥å¼€å­¦æ¼”è®²ã€‚ã€‚https://wenku.baidu.com/view/ad77bc1caf45b307e8719758.html THE PRESIDENT: Hello, everybody! Thank you. Thank you. Thank you, everybody. All right, everybody go ahead and have a seat. How is everybody doing today? (Applause.) How about Tim Spicer? (Applause.) I am here with students at Wakefield High School in Arlington, Virginia. And weâ€™ve got students tuning in from all across America, from kindergarten through 12th grade. And I am just so glad that all could join us today. And I want to thank Wakefield for being such an outstanding host. Give yourselves a big round of applause. (Applause.)â€¦ 1ã€World Count(Version 1)æŠŠæ•°æ®å‘½åä¸ºspeech_textï¼Œé¦–å…ˆéœ€è¦å¯¹è‹±æ–‡è¿›è¡Œåˆ†è¯ã€‚è‹±æ–‡ä¸­ä¸»è¦æ˜¯ç©ºæ ¼ï¼Œä½¿ç”¨split()å‡½æ•° # coding: utf-8 # In[1]: speech_text=&apos;&apos;&apos;#é•¿æ–‡æœ¬ä½¿ç”¨&apos;&apos;&apos;..&apos;&apos;&apos; THE PRESIDENT: Hello, everybody! Thank you. Thank you. Thank you, everybody. All right, everybody go ahead and have a seat. How is everybody doing today? (Applause.) How about Tim Spicer? (Applause.) I am here with students at Wakefield High School in Arlington, Virginia. And we&apos;ve got students tuning in from all across America, from kindergarten through 12th grade. And I am just so glad that all could join us today. And I want to thank Wakefield for being such an outstanding host. Give yourselves a big round of applause. (Applause.) ...#çœç•¥æ–‡å­— &apos;&apos;&apos; # In[2]: speech=speech_text.split() # In[3]: speech ä¸‹ä¸€æ­¥ï¼Œè®¡ç®—speechä¸­è¯è¯­å‡ºçŽ°çš„æ¬¡æ•° # In[4]: dic={} for word in speech: if word not in dic: dic[word] = 1 else: dic[word] = dic[word] + 1 # In[5]: dic é€šè¿‡ items() å‡½æ•°ä»¥åˆ—è¡¨è¿”å›žå¯éåŽ†çš„(é”®, å€¼) å…ƒç»„æ•°ç»„ã€‚ ä¸‹ä¸€æ­¥ï¼Œå¯¹è¯è¯­è¿›è¡ŒæŽ’åº # In[7]: import operator swd=sorted(dic.items(),key=operator.itemgetter(1),reverse=True)#ä»Žå¤§åˆ°å°æŽ’åº # In[9]: swd å‘çŽ°å…¶ä¸­â€œtoâ€ã€â€œtheâ€ç­‰å•è¯æ˜¯å¸¸è§è¯ï¼Œå€Ÿç”¨nltkæˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›è¯è¯­åŽ»æŽ‰ from nltk.corpus import stopwords stop_words = stopwords.words(&apos;English&apos;) è™½è¯´Anacondaå·²ç»å®‰è£…äº†NLTKï¼Œä½†æ˜¯æˆ‘è‡ªå·±æ“ä½œæ—¶stopwordsè²Œä¼¼æ²¡æœ‰ï¼Œå‡ºé”™è¯·å‚è€ƒhttps://www.douban.com/note/534906136/ çœ‹çœ‹è‹±æ–‡ä¸­çš„åŽ»åœè¯ï¼Œä¸‹ä¸€æ­¥ï¼ŒéåŽ†ï¼Œæ‰“å°å‡ºä¸å«æœ‰åŽ»åœè¯ for k,v in swd2: if k not in stop_words: print(k,v) å‘çŽ°å‡ºçŽ°äº†å¾ˆå¤šâ€œâ€“â€ï¼Œå›žåŽ»åŽŸæ–‡ä¸­è§‚å¯Ÿï¼Œå‘çŽ°ç¡®å®žæœ‰å¾ˆå¤šï¼Œ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆå‡ºçŽ°è¿™ä¹ˆå¤šâ€œâ€“â€ã€‚èŒæ–°æ±‚è§£ï¼ 2ã€World Count(Version 2)from collections import Counter c=Counter(speech2) ä½¿ç”¨Python çš„collectionsæ¨¡å—æ›´ç®€æ´ï¼Œè¯¦ç»†è§http://www.jb51.net/article/48771.htm åŒæ ·å¯ä»¥ä½¿ç”¨stop_wordï¼Œè¿˜å¯ä»¥ä½¿ç”¨most_commonæ‰“å°å‡ºå‰å‡ ä¸ª for sw in stop_words: del c[sw] 3ã€åæ€ä¸Šä¸€ç¯‡æ–‡ç« https://zhuanlan.zhihu.com/p/25983014å†™çš„æ¯”è¾ƒç²—ç³™ï¼Œå¾ˆå¤šäººè¦æ±‚æŠŠâ€œè§‚ä¼—â€ â€œç¤¼ç‰©â€ç­›é€‰å‡ºæ¥ï¼Œé‚£æˆ‘æ¥è¯•è¯•ã€‚ stop = [&apos;ï¼&apos;,&apos;*&apos;,&apos;è§‚ä¼—&apos;,&apos;ç¤¼ç‰©&apos;,&apos;:&apos;,&apos;ï¼Ÿ&apos;,&apos;ã€‚&apos;,&apos;ï¼Œ&apos;,&apos;~&apos;,&apos;1&apos;] åŽ»åœè¯åªæœ‰è¿™äº›ã€å¯ä»¥æ ¹æ®å®žé™…æƒ…å†µæ·»åˆ ã€‚ çœ‹æ¥è§‚ä¼—å¾ˆå–œæ¬¢è¯´â€œxxå­¦é™¢å‘æ¥è´ºç”µ~~â€]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ˜¨å¤©çœ‹çƒæ—¶ï¼Œçƒè¿·éƒ½è¯´äº†å•¥â€”â€”å¼¹å¹•æŠ“å–ä¸Žåˆ†æž]]></title>
      <url>%2F2017%2F03%2F24%2F%E6%98%A8%E5%A4%A9%E7%9C%8B%E7%90%83%E6%97%B6%EF%BC%8C%E7%90%83%E8%BF%B7%E9%83%BD%E8%AF%B4%E4%BA%86%E5%95%A5%E2%80%94%E2%80%94%E5%BC%B9%E5%B9%95%E6%8A%93%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…«ç¯‡åŽŸåˆ›æ–‡ç«  æ•°æ®æ¥æºï¼šhttp://star.longzhu.com/teamchina æœ¬æ¬¡å¼¹å¹•è®°å½•ï¼ˆå¼€å§‹æ—¶é—´: 2017-03-23-19:43:34ï¼Œç»“æŸ21:29:33)ï¼Œå…±è®°å½•20788æ¡æ•°æ®ã€‚ ä½¿ç”¨OBSå¼¹å¹•åŠ©æ‰‹è®°å½•http://www.obsapp.com/apps/obsdanmu/ 1ã€åˆ†æž æ–‡ä»¶ä¸­å«æœ‰æ—¶é—´è®°å½•ï¼Œè§‚ä¼—IDå’Œé€ç¤¼è®°å½•ï¼Œå…¶æ¬¡æ˜¯å¼¹å¹•å†…å®¹ï¼Œæ‰€ä»¥å†³å®šå¯¹å‰ä¸¤åˆ—å†…å®¹ä¸åˆ†æžã€‚ é¦–å…ˆéœ€è¦å¯¹æ–‡æœ¬åˆ†è¯ï¼Œè¿™é‡Œé‡‡ç”¨jiebaåˆ†è¯ https://github.com/fxsjy/jieba/ åŽ»é™¤ç©ºæ ¼ï¼Œä½¿ç”¨strip()å‡½æ•°ï¼Œ åŽ»æŽ‰æ¢è¡Œç¬¦â€\nâ€ line = line.strip(&apos;\n&apos;) æŠŠåˆ†æžç»“æžœå†™å…¥æ–°çš„æ–‡æ¡£â€™text.txtâ€™ï¼ŒPython join() æ–¹æ³•ç”¨äºŽå°†åºåˆ—ä¸­çš„å…ƒç´ ä»¥æŒ‡å®šçš„å­—ç¬¦è¿žæŽ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸² text = &apos;&apos; with open(&apos;danmu.txt&apos;,encoding=&apos;utf-8&apos;) as fin: for line in fin.readlines(): line = line.strip(&apos;\n&apos;) text += &apos;/&apos;.join(jieba.cut(line)) text += &apos; &apos; fout = open(&apos;text.txt&apos;,&apos;wb&apos;)#ä»¥äºŒè¿›åˆ¶å†™æ¨¡å¼å†™å…¥ pickle.dump(text,fout) fout.close() è¿™æ ·å°±å®Œæˆäº†åˆ†è¯è¿‡ç¨‹ï¼Œç»“æžœå¦‚ä¸‹ï¼š 2ã€ç»˜åˆ¶å›¾äº‘# ç›´æŽ¥ä»Žæ–‡ä»¶è¯»å–æ•°æ® fr = open(&apos;text.txt&apos;,&apos;rb&apos;) text = pickle.load(fr) ä½¿ç”¨word_cloudï¼Œå…·ä½“ç”¨æ³•https://github.com/amueller/word_cloud backgroud_Image = plt.imread(&apos;girl.jpg&apos;) wc = WordCloud( background_color = &apos;white&apos;, # è®¾ç½®èƒŒæ™¯é¢œè‰² mask = backgroud_Image, # è®¾ç½®èƒŒæ™¯å›¾ç‰‡ max_words = 2000, # è®¾ç½®æœ€å¤§çŽ°å®žçš„å­—æ•° stopwords = STOPWORDS, # è®¾ç½®åœç”¨è¯ font_path = &apos;C:/Users/Windows/fonts/msyh.ttf&apos;,# è®¾ç½®å­—ä½“æ ¼å¼ï¼Œå¦‚ä¸è®¾ç½®æ˜¾ç¤ºä¸äº†ä¸­æ–‡ max_font_size = 300, # è®¾ç½®å­—ä½“æœ€å¤§å€¼ random_state = 50, # è®¾ç½®æœ‰å¤šå°‘ç§éšæœºç”ŸæˆçŠ¶æ€ï¼Œå³æœ‰å¤šå°‘ç§é…è‰²æ–¹æ¡ˆ ) ä½¿ç”¨matplotlibç»˜å›¾http://matplotlib.org/2.0.0/index.html wc.generate(text) image_colors = ImageColorGenerator(backgroud_Image) #wc.recolor(color_func = image_colors) plt.imshow(wc) plt.axis(&apos;off&apos;) plt.show() OKï¼Œè¿™æ ·å°±å®Œæˆäº†ï¼Œé™„ä¸Šç»“æžœ æœ‰æ²¡æœ‰ä½ å‘è¿‡çš„å¼¹å¹•å‘¢ï¼Ÿ å¯è‡ªå½¢ä¿®æ”¹æ•°æ®ï¼Œå¾—åˆ°æ›´å¥½çœ‹å›¾ç‰‡ã€‚ èƒ½åŠ›æœ‰é™ï¼Œåˆ†æžå¾ˆå°‘ï¼Œå¦‚æžœä½ æƒ³è¿›è¡Œæ›´æ·±å…¥åˆ†æžï¼Œè¯·æ‰¾æˆ‘è¦æ–‡ä»¶ã€‚ å¯¹è‹±é›„è”ç›Ÿæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹çœ‹è¿™ç¯‡ï¼Œå¯¹æ¸¸æˆç›´æ’­å¼¹å¹•çš„åˆ†æžã€‚ https://zhangslob.github.io/2017/03/24/%E5%88%A9%E7%94%A8Python%E5%AF%B9%E7%9B%B4%E6%92%AD%E5%BC%B9%E5%B9%95%E7%9A%84%E5%88%86%E6%9E%90/ githubï¼šhttps://github.com/zhangslob/DanmuFenxi]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ©ç”¨Pythonå¯¹ç›´æ’­å¼¹å¹•çš„åˆ†æž]]></title>
      <url>%2F2017%2F03%2F24%2F%E5%88%A9%E7%94%A8Python%E5%AF%B9%E7%9B%B4%E6%92%AD%E5%BC%B9%E5%B9%95%E7%9A%84%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸ƒç¯‡åŽŸåˆ›æ–‡ç«  å¼¹å¹•ï¼ˆ barrageï¼‰ï¼Œä¸­æ–‡æµè¡Œè¯è¯­ï¼ŒåŽŸæ„æŒ‡ç”¨å¤§é‡æˆ–å°‘é‡ç«ç‚®æä¾›å¯†é›†ç‚®å‡»ã€‚è€Œå¼¹å¹•ï¼Œé¡¾åæ€ä¹‰æ˜¯æŒ‡å­å¼¹å¤šè€Œå½¢æˆçš„å¹•å¸ƒï¼Œ å¤§é‡åæ§½è¯„è®ºä»Žå±å¹•é£˜è¿‡æ—¶æ•ˆæžœçœ‹ä¸ŠåŽ»åƒæ˜¯é£žè¡Œå°„å‡»æ¸¸æˆé‡Œçš„å¼¹å¹•ã€‚ ä»Šå¤©å°±æ¥è¯´è¯´æ¸¸æˆç›´æ’­ä¸­ï¼Œ å¼¹å¹•éƒ½æœ‰å“ªäº›ã€‚ ä¸€ã€å‡†å¤‡åˆ©ç”¨ danmu å¼¹å¹•æŽ¥å£å¯¹æ–—é±¼ä¸»æ’­èµé‡‘æœ¯å£«ç›´æ’­é—´çš„å¼¹å¹•è¿›è¡ŒæŠ“å–ï¼ŒæŠ“å–æ—¶é—´çº¦2 å°æ—¶ï¼Œå…±è®¡ 2534 æ¡å¼¹å¹•ã€‚èµé‡‘ç›´æ’­é—´ï¼š https://www.douyu.com/846805 äºŒã€ åˆ†æž1ã€ å¼¹å¹•è¯äº‘è¯äº‘ï¼Œ ç”±è¯æ±‡ç»„æˆç±»ä¼¼äº‘çš„å½©è‰²å›¾å½¢ã€‚ ä½¿ç”¨çš„æ˜¯ Python çš„æ¨¡å— wordcloudã€‚ é€šè¿‡ jieba åˆ†è¯å¯¹å¼¹å¹•ä¸­æ–‡åˆ†è¯ï¼Œ ä½¿ç”¨ wordcloud å¯¹ç»“æžœæž„é€ è¯äº‘ï¼Œ æœ€ç»ˆç»“æžœä¸ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œé«˜é¢‘çŽ‡è¯è¯­æœ‰ï¼š å¤–ç”¥ã€æ— æ•Œã€åŽ‰å®³ã€å¯ä»¥ã€æ— é™ã€ç«åŠ›ã€ä»€ä¹ˆã€åžƒåœ¾ã€èµé‡‘ã€‚ 2ã€å…³é”®è¯TextRankç®—æ³•å¯ä»¥ç”¨æ¥ä»Žæ–‡æœ¬ä¸­æå–å…³é”®è¯å’Œæ‘˜è¦ å…³é”®è¯ï¼š ä¸ 0.010922664205428556 å¤–ç”¥ 0.010484629632807344 çŽ© 0.008177160003721682 æ— é™ 0.0058741805660283575 æ²¡ 0.005665342357801469 è¯´ 0.005548941560115147 å¤§ 0.005541099430280024 ä¸»æ’­ 0.005498954448927515 å‡º 0.0054948076800822405 çœ‹ 0.0051528084835430555 å¯ä»¥çœ‹å‡ºæ¥ï¼Œä½œä¸ºæ±‰å­—å¸¸ç”¨å­—ï¼Œâ€˜ä¸â€™ã€â€˜çŽ©â€™ã€â€˜æ²¡â€™ã€â€˜è¯´â€™ã€â€˜å¤§â€™ã€â€˜å‡ºâ€™ã€â€˜çœ‹â€™è¿™7ä¸ªå­—å‡ºçŽ°é¢‘çŽ‡é«˜ï¼Œè¿™ä¸å¥‡æ€ªã€‚ä½†æ˜¯ï¼Œâ€˜å¤–ç”¥â€™ã€â€˜æ— é™â€™ã€â€˜ä¸»æ’­â€™å°±å’Œè‹±é›„è”ç›Ÿä¸»æ’­èµé‡‘æœ¯å£«æœ‰è´£å¾ˆå¤§å…³ç³»äº†ã€‚ å¤–ç”¥æ˜¯èµé‡‘åŒæŽ’çš„ä¸€ä½é€‰æ‰‹ã€æ‰®æ¼”ç€æžç¬‘ã€é€—ä¹çš„è§’è‰²ã€‚â€˜æ— é™â€™åˆ™æ˜¯â€œæ— é™ç«åŠ›â€ï¼Œä¸€ä¸ªç‰¹å®šæ¨¡å¼ï¼Œé¢‡å—çŽ©å®¶å–œçˆ±ã€‚ä¸»æ’­å¯èƒ½æ˜¯èµé‡‘ï¼Œä¹Ÿæœ‰å¯èƒ½è¯´åˆ«çš„ä¸»æ’­ã€‚ å…³é”®çŸ­è¯­ï¼š å¯¹é¢ä¸ä¼š åžƒåœ¾ä¸»æ’­ ä¸å‡º æ²¡å¸¦ ä¸å¤§ èµé‡‘çŽ© å¯¹é¢å¾·çŽ› å¤–ç”¥è¯´ å¤§ä¸ å¤–ç”¥å¤§ æ‘˜è¦ï¼š 7337 0.0006968086282134394 çœŸçš„æœ‰æŠ¤çœ¼æ¨¡å¼666 3059 0.0006968086282134393 æŠ¤çœ¼æ¨¡å¼ä¸ºä»€ä¹ˆè¿™ä¹ˆç»¿ 10503 0.00047342729603724247 æ‰¾å„¿å­ï¼Œçˆ±å¥½æŠ¤çœ¼ ä»Žæ‘˜è¦ä¸­çœ‹åˆ°ä¸‰æ¡å¼¹å¹•ä¸­ï¼Œéƒ½å«æœ‰â€œæŠ¤çœ¼â€äºŒå­—ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ lolæŠ¤çœ¼ä¸€è¯ï¼Œå…¶å®žä¸»è¦æ¥æºäºŽè‹±é›„è”ç›Ÿçš„ç›´æ’­å¹³å°ï¼Œéšç€å«çš„äººå¤šäº†ï¼Œè¿™ä¸ªè¯ä¾¿ç«çƒ­äº†èµ·æ¥ã€‚èµ·åˆæ˜¯æœ‰äººå¸¦èŠ‚å¥ï¼Œè¯´æ‰“æŠ¤çœ¼æ–—é±¼å¯ä»¥è¿›å…¥æŠ¤çœ¼æ¨¡å¼ã€‚ä¸€èˆ¬åœ¨ç›´æ’­lolçš„ä¸»æ’­ä½¿ç”¨çš„è‹±é›„æ­»æŽ‰åŽï¼Œç•Œé¢ä¼šå‘ˆçŽ°æš—ç°è‰²çš„ï¼Œäº®åº¦é™ä½Žæœ‰åˆ©äºŽé˜²æŠ¤çœ¼ç›ï¼Œä»Žè€Œå°±æœ‰äº†lolæŠ¤çœ¼ï¼Œå½“ç„¶æ„æ€å°±æ˜¯å˜²è®½ä¸»æ’­å¾ˆèœçš„æ„æ€ã€‚ ä¸‰ã€æ€»ç»“ï¼šç”±äºŽè‡ªå·±æ‰€æ”¶é›†çš„æ•°æ®è¿‡å°‘ã€è€Œä¸”ä»…ä¿å­˜äº†ä¸€ä½ä¸»æ’­çš„å¼¹å¹•ï¼Œé€ æˆç»“æžœä¸å…·æœ‰é€šç”¨æ€§ï¼Œå¯ä»¥é€šè¿‡å¯¹å„å¤§ç›´æ’­å¹³å°çš„çƒ­é—¨ä¸»æ’­å¼¹å¹•çš„çˆ¬å–ï¼ŒèŽ·å¾—è§‚ä¼—çš„å¿ƒç†å˜åŒ–å’Œç½‘ç»œé£Žæ°”ã€‚ ä»¥åŠä¸»æ’­æœ‰æ²¡æœ‰è¿‡æ°”ä¸€è¯´~ githubï¼šhttps://github.com/zhangslob/DanmuFenxi]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å¦‚ä½•ä¼˜é›…çš„â€œè½®å¸¦é€›â€åˆçº§ç¯‡â€”â€”èŽ·å–å•å¼ å›¾ç‰‡]]></title>
      <url>%2F2017%2F03%2F20%2F%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E2%80%9C%E8%BD%AE%E5%B8%A6%E9%80%9B%E2%80%9D%E5%88%9D%E7%BA%A7%E7%AF%87%E2%80%94%E2%80%94%E8%8E%B7%E5%8F%96%E5%8D%95%E5%BC%A0%E5%9B%BE%E7%89%87%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å…­ç¯‡åŽŸåˆ›æ–‡ç«  è½®å­å“¥æŠ¤ä½“ é¦–å…ˆä¸Šæ”¶è—å¤¹ https://www.zhihu.com/collection/78172986?page=1 ç”±@vega13åˆ›å»ºï¼Œå†…å®¹æŒºå¤šçš„ã€‚ä¾‹å¦‚ï¼Œ ç­‰ç­‰ï¼Œçœ‹çš„è€å¤«è„¸éƒ½çº¢äº† å†™äº†ä¸€ä¸ªç®€å•çˆ¬å–å›¾ç‰‡çš„ç¨‹åºã€‚è®°å½•ä¸‹è¿‡ç¨‹ã€‚æ‰‹åŠ¨ @è½®å­å“¥ 1ã€åˆ†æžç½‘é¡µæ”¶è—å¤¹åªæ”¶è—äº†é—®é¢˜çš„ä¸€ä¸ªç­”æ¡ˆï¼Œåˆæ­¥æƒ³æ³•æ˜¯èŽ·å–å½“å‰é¡µé¢çš„å›¾ç‰‡ å› ä¸ºä¸Šä¸€æ¬¡åŽŸå› ï¼Œç›´æŽ¥åŽ»ç½‘é¡µæºä»£ç  &lt;img src=&quot;https://pic4.zhimg.com/de5ecb16bcb912e99a83f647eb96c5bb_200x112.jpg&quot; data-rawwidth=&quot;1080&quot; data-rawheight=&quot;1080&quot; class=&quot;origin_image inline-img zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/de5ecb16bcb912e99a83f647eb96c5bb_r.jpg&quot;&gt; &lt;img data-rawwidth=&quot;1280&quot; data-rawheight=&quot;1836&quot; src=&quot;https://pic2.zhimg.com/v2-61ba67d910104f99acdb805a3568ab05_200x112.jpg&quot; class=&quot;origin_image inline-img zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-61ba67d910104f99acdb805a3568ab05_r.jpg&quot;&gt; åœ¨&lt;img&gt;æ ‡ç­¾ä¸‹ï¼Œsrcå’Œdata-originaléƒ½å«æœ‰å›¾ç‰‡é“¾æŽ¥ï¼Œç»éªŒè¯data-originalæ˜¯å¤§å›¾ï¼Œé‚£å°±æŠŠæ¯ä¸ªé—®é¢˜çš„å›¾ç‰‡é“¾æŽ¥æ‰¾åˆ°äº†ï¼ŒæŽ¥ä¸‹æ¥å°±å¾ˆç®€å•äº†ã€‚ 2ã€ä»£ç å°±18è¡Œçš„ä»£ç ã€‚ç®€å•å§~ import requests,urllib from lxml import etree def get_img(url): headers = {&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&apos;} r= requests.get(url,headers=headers).text s = etree.HTML(r) #print(r) link = s.xpath(&apos;//img/@data-original&apos;) for i in link: print(i) name = i.split(&apos;/&apos;)[-1]#å›¾ç‰‡åç§° urllib.request.urlretrieve(i,name) if __name__ == &apos;__main__&apos;: for i in range(1,43): url = &apos;https://www.zhihu.com/collection/78172986?page=&apos; + str(i) get_img(url) ä½†æ˜¯è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜ link = s.xpath(&apos;//img/@data-original&apos;) è¿™é‡Œçš„linkåªæœ‰æ¯ä¸ªå›žç­”çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œæ›´å¤šçš„å›¾ç‰‡è—åœ¨æ–‡æœ¬ä¸­ï¼Œé™¤äº†æ­£åˆ™ä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„åŠžæ³• åªæœ‰200å¤šå¼ å›¾ç‰‡ã€‚ç»“å°¾æœ‰ç™¾åº¦äº‘ ä¸‹è½½äº†å‡ åˆ†é’Ÿå‡ºçŽ°é”™è¯¯ï¼Œæœ‰ä¸€å¼ å›¾ç‰‡ä¸‹è½½ä¸äº†ï¼ŒçŸ¥å‹ä»¬æœ‰ä»€ä¹ˆå¥½åŠžæ³•å—ï¼Ÿ ä¸‰ã€â€œè½®å¸¦é€›â€é«˜çº§ç¯‡æ—¢ç„¶æœ‰åˆçº§ç¯‡ï¼Œè‚¯å®šè¿˜æœ‰é«˜çº§ç¯‡ã€‚ å…¶å®žè¿™ä¸ªæ”¶è—å¤¹ä¸­æ¯ä¸€ä¸ªé—®é¢˜ä¸‹é¢éƒ½å«æœ‰å¾ˆå¤šå›žç­”ï¼Œæ”¶è—å¤¹åªæ˜¯é€‰å–å…¶ä¸­ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è¢«è½®å­å“¥ç‚¹èµžçš„é‚£ä¸ªï¼Œé‚£ä¹ˆè¿˜æœ‰é‚£äº›æ²¡æœ‰è¢«ç‚¹èµžçš„å‘¢ï¼Ÿ ä¸‹ä¸€æœŸè®²ä¸€è®²æ€Žä¹ˆèŽ·å–æ‰€æœ‰å›¾ç‰‡é“¾æŽ¥ã€‚ æ”¾ä¸€å¼ å›¾ç‰‡ï¼Œå¡æ­»æˆ‘ç¨‹åºçš„ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æœ€åŽçš„å°å¹¿å‘Šâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ æœ‰æœ‹å‹ç«Ÿç„¶å«æˆ‘åŽ»ä½œä¸€æœŸç›´æ’­ï¼Œè®²ä¸€è®²Pythonã€‚ æ‰“ç®—æ ¹æ®è‡ªå·±çš„ç»åŽ†åˆ†äº«ä¸€äº›ç»éªŒï¼Œä¸»è¦æ˜¯å…³äºŽPythonå…¥é—¨çš„ï¼Œæƒ³å¬å¬å¯ä»¥ç§ä¿¡æˆ‘ã€‚ æ—¶é—´æ˜¯å‘¨äºŒæ™š9ç‚¹~ ç™¾åº¦äº‘ä¸‹è½½ é“¾æŽ¥ï¼šhttp://pan.baidu.com/s/1dFOPbUx å¯†ç ï¼šabrl]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonçˆ¬è™«å®žæˆ˜â€”â€”å…è´¹å›¾ç‰‡ - Pixabay]]></title>
      <url>%2F2017%2F03%2F19%2FPython%E7%88%AC%E8%99%AB%E5%AE%9E%E6%88%98%E2%80%94%E2%80%94%E5%85%8D%E8%B4%B9%E5%9B%BE%E7%89%87-Pixabay%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äº”ç¯‡åŽŸåˆ›æ–‡ç«  Pixabayï¼Œä¸€ä¸ªæŒºä¸é”™çš„é«˜æ¸…æ— ç å›¾ç‰‡ç½‘ç«™ï¼Œå¯ä»¥å…è´¹ä¸‹è½½ã€‚ https://pixabay.com/ ä¸€äº›ä»‹ç» è¶…è¿‡ 900000 é«˜è´¨é‡ç…§ç‰‡ã€ æ’å›¾å’ŒçŸ¢é‡å›¾å½¢ã€‚å¯å…è´¹ç”¨äºŽå•†ä¸šç”¨é€”ã€‚æ²¡æœ‰æ‰€éœ€çš„å½’å±žã€‚ Pixabayæ˜¯ä¸€å®¶é«˜è´¨é‡å›¾ç‰‡åˆ†äº«ç½‘ç«™ã€‚æœ€åˆï¼Œè¯¥ç½‘ç«™ç”±Hans Braxmeierå’ŒSimon Steinbergeråœ¨å¾·å›½å‘å±•èµ·æ¥ã€‚2013å¹´2æœˆï¼Œç½‘ç«™æ‹¥æœ‰ç”±å½±å¸ˆå’Œå…¶ç¤¾åŒºçš„æ’ç”»å®¶æä¾›çš„å¤§çº¦7ä¸‡å¼ å…è´¹çš„ç…§ç‰‡å’ŒçŸ¢é‡å›¾å½¢ã€‚è¯¥å…¬å¸äºŽ2010å¹´12æœˆåœ¨å¾·å›½ä¹Œå°”å§†æˆç«‹ã€‚ 2012å¹´3æœˆï¼ŒPixabayå¼€å§‹ä»Žä¸€ä¸ªç§äººå›¾åƒæœé›†ç½‘ç«™è½¬å˜æˆä¸€ä¸ªäº’åŠ¨çš„ç½‘ä¸Šç¤¾åŒºï¼Œè¯¥ç½‘ç«™æ”¯æŒ20ç§è¯­è¨€ã€‚åŒå¹´5æœˆï¼Œç½‘ç«™æŽ¨å‡ºå…¬å…±åº”ç”¨ç¨‹åºç¼–ç¨‹æŽ¥å£ï¼Œä»Žè€Œä½¿ç¬¬ä¸‰æ–¹ç”¨æˆ·å’Œç½‘ç«™å¼€å‘äººå‘˜æœç´¢å…¶å›¾åƒæ•°æ®åº“ã€‚ç½‘ç«™è¿˜ä¸ŽFlickrï¼ŒYouTubeå’Œç»´åŸºå…±äº«èµ„æºã€‚ Pixabayç”¨æˆ·æ— éœ€æ³¨å†Œå°±å¯ä»¥èŽ·å¾—å…è´¹ç‰ˆæƒçš„é«˜è´¨é‡å›¾åƒã€‚æ ¹æ®çŸ¥è¯†å…±äº«å¥‘çº¦CC0ç›¸å…³çš„è‚–åƒæƒï¼Œç”¨æˆ·åœ¨è¯¥ç½‘ç«™é€šè¿‡ä¸Šä¼ å›¾ç‰‡å°±é»˜è®¤æ”¾å¼ƒå›¾ç‰‡ç‰ˆæƒï¼Œä»Žè€Œä½¿å›¾ç‰‡å¹¿æ³›æµé€šã€‚ç½‘ç«™å…è®¸ä»»ä½•äººä½¿ç”¨ï¼Œä¿®æ”¹å›¾ç‰‡ - å³ä¾¿æ˜¯åœ¨å•†ä¸šåº”ç”¨ - ä¸è¦æ±‚è®¸å¯å¹¶ä¸”æœªè®¤å¯ã€‚ Pixabayä¸ºäº†ç¡®ä¿é«˜å“è´¨å›¾ç‰‡æ ‡å‡†ï¼Œç”¨æˆ·ä¸Šä¼ çš„æ‰€æœ‰å›¾ç‰‡å°†ç”±ç½‘ç«™å·¥ä½œäººå‘˜æ‰‹åŠ¨å®¡æ‰¹ã€‚å¤§çº¦27ï¼…çš„ç”¨æˆ·ä¼šè¯´è‹±è¯­ï¼Œ20ï¼…çš„ç”¨æˆ·ä¼šè¯´è¥¿ç­ç‰™è¯­ï¼Œ11ï¼…çš„ç”¨æˆ·ä¼šè¯´è‘¡è„ç‰™è¯­ï¼Œ7ï¼…çš„ç”¨æˆ·ä¼šè¯´å¾·è¯­å’Œ5ï¼…çš„ç”¨æˆ·ä¼šè¯´æ³•è¯­ã€‚å…¶ç”¨æˆ·ä¸»è¦æ˜¯åšå®¢ã€å›¾å½¢è®¾è®¡å¸ˆã€ä½œå®¶ã€è®°è€…å’Œå¹¿å‘Šå•†ã€‚ ä»Šå¤©çš„ç›®æ ‡å°±æ˜¯çˆ¬å–å°ç¼–ç²¾é€‰çš„å›¾ç‰‡ https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=1 ä¸€ã€åˆ†æžæˆ‘ä»¬éœ€è¦å†™3ä¸ªå‡½æ•° ä¸€ä¸ªDownload(url)ï¼Œç”¨æ¥ä¸‹è½½å›¾ç‰‡ ä¸€ä¸ªç”¨æ¥èŽ·å–å°ç¼–ç²¾é€‰ä¸€å…±æœ‰çš„165é¡µFullUrl() æœ€åŽç”¨æ¥è°ƒç”¨main() ä¸‹é¢å¼€å§‹ä¸€ä¸ªä¸ªå†™å§~ https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=1 æ‰“å¼€ç½‘é¡µï¼ŒF12ï¼ŒæŸ¥çœ‹å›¾ç‰‡é“¾æŽ¥æ‰€åœ¨çš„æ ‡ç­¾ å¯ä»¥çœ‹åˆ°å›¾ç‰‡é“¾æŽ¥éƒ½åœ¨&lt;img&gt;æ ‡ç­¾ä¸‹ï¼Œä½†æ˜¯æˆ‘è‡ªå·±å‘çŽ°å‰å‡ å¼ å’ŒåŽå‡ å¼ çš„å±žæ€§æ˜¯ä¸ä¸€æ ·çš„ï¼Œæå–å‡º&lt;img&gt;ä¸­â€œsrcâ€å°±å¯ä»¥äº†ï¼Œä½¿ç”¨çš„æ˜¯xpath import requests from lxml import etree header = {&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&apos;} url = &apos;https://pixabay.com/zh/editors_choice/&apos; r = requests.get(url,headers=header).text s = etree.HTML(r) print(s.xpath(&apos;//img/@src&apos;)) ç»“æžœæ˜¯ å‰é¢éƒ½æ˜¯æ­£ç¡®çš„å›¾ç‰‡é“¾æŽ¥ï¼Œå¯æ˜¯åŽé¢å‡ºçŽ°äº†â€™/static/img/blank.gifâ€™ï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆé¬¼ï¼ŒæŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œæœç´¢ å¯ä»¥å‘çŽ°ç¡®å®žæœ‰è¿™ä¸€æ®µå­—ç¬¦ä¸²ï¼Œæˆ‘è‡ªå·±åœ¨è¿™ä¸€ç‚¹ä¸ŠèŠ±äº†å¾ˆå¤šæ—¶é—´ã€‚æ„Ÿè°¢@æŽå®æ°çš„å¸®åŠ©ï¼Œhttps://www.zhihu.com/question/57188290 æµè§ˆå™¨ä¸­çš„ä»£ç æ˜¯JavaScriptä¿®æ”¹è¿‡çš„, ä½ ç›´æŽ¥ç”¨requestsè¯·æ±‚ç„¶åŽæ‰“å°å‡ºæ¥çœ‹å°±ä¼šå‘çŽ° &lt;div class=&quot;item&quot; data-w=&quot;640&quot; data-h=&quot;426&quot;&gt; &lt;a href=&quot;/zh/%E8%9B%8B%E7%B3%95-%E4%B8%80%E5%9D%97%E8%9B%8B%E7%B3%95-%E9%A3%9F%E8%B0%B1-%E4%B8%80%E7%89%87-%E7%B3%96%E6%9E%9C-%E6%8F%92%E5%9B%BE-%E7%83%98%E7%83%A4-%E7%94%9C%E7%82%B9-%E9%A3%9F%E5%93%81-1971556/&quot;&gt; &lt;img src=&quot;/static/img/blank.gif&quot; data-lazy-srcset=&quot;https://cdn.pixabay.com/photo/2017/01/11/11/33/cake-1971556__340.jpg 1x, https://cdn.pixabay.com/photo/2017/01/11/11/33/cake-1971556__480.jpg 2x&quot; data-lazy=&quot;https://cdn.pixabay.com/photo/2017/01/11/11/33/cake-1971556__340.jpg&quot; alt=&quot;&quot;&gt; &lt;/a&gt; &lt;div&gt; requestsè¿”å›žçš„æ•°æ®ä¸­å¯ä»¥çœ‹åˆ°ï¼Œâ€œdata-lazyâ€æ€»å«æœ‰æˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼Œä¿®æ”¹ä»£ç  å‘çŽ°çŽ°åœ¨è¿”å›žçš„æ•°æ®æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæ‰“å¼€ä¸€å¼ å›¾ç‰‡æŸ¥çœ‹ ä¸‹é¢çš„å›¾ç‰‡è¦æ¸…æ™°å¾ˆå¤šï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠ__340æ¢æˆ_960_720å³å¯ å°ç¼–ç²¾é€‰ä¸€å…±æœ‰165é¡µï¼Œæˆ‘ä»¬éœ€è¦èŽ·å–ä¸‹ä¸€é¡µURL https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=2 https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=3 ã€‚ã€‚ã€‚ è§„å¾‹å¾ˆç®€å• full_link = [] for i in range(1,165): #print(i) full_link.append( &apos;https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=&apos;+ str(i)) åˆ°çŽ°åœ¨ï¼Œå‡†å¤‡å·¥ä½œåšå¥½äº†ï¼Œæ€è·¯å¯èƒ½ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè¯·è°…è§£~ äºŒã€ä»£ç import requests from lxml import etree import time import urllib def Download(url): header = { &apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&apos;} r = s.get(url, headers=header).text s = etree.HTML(r) r = s.xpath(&apos;//img/@data-lazy&apos;) for i in r: imglist = i.replace(&apos;__340&apos;, &apos;_960_720&apos;) name = imglist.split(&apos;/&apos;)[-1]#å›¾ç‰‡åç§° urllib.request.urlretrieve(imglist,name) time.sleep(1) def FullUrl(): full_link = [] for i in range(2,165): #print(i) full_link.append( &apos;https://pixabay.com/zh/editors_choice/?media_type=photo&amp;pagi=&apos;+ str(i)) #print(full) return full_link if __name__ == &apos;__main__&apos;: urls = FullUrl() for url in urls: Download(url) çˆ¬å–å›¾ç‰‡çš„å·¥ä½œå°±å®Œæˆäº†ï¼Œç²—ç•¥çš„è®¡ç®—6600å¼ ï¼Œæ¯ä¸€å¼ ä¸‹è½½éœ€è¦5ç§’é’Ÿï¼Œä¸€åˆ†é’Ÿ60ç§’ã€ä¸€å°æ—¶60åˆ†é’Ÿï¼Œå¤©å‘ï¼Œéœ€è¦9ä¸ªå°æ—¶æ‰èƒ½çˆ¬å–å…¨éƒ¨çš„å›¾ç‰‡ã€‚æƒ³ä¸€æƒ³è¿˜æ˜¯ç®—äº†å§ï¼Œæ•´ç«™çˆ¬å–è¿˜æ˜¯è¦ä½¿ç”¨Scrapy+mongodbã€‚ &gt;&gt;&gt; 165*40 6600 &gt;&gt;&gt; from __future__ import division &gt;&gt;&gt; 6600*5/60/60 9.166666666666666 ä¸‹è½½äº†700å¤šå¼ ï¼Œ108Mï¼Œä¹Ÿç®—æ˜¯ç•™ç€çœ‹çœ‹å§ã€‚ ä¸€ä¼šä¸Šä¼ åˆ°Githubä¸Š ä¸‰ã€ç»“è¯­æ˜¨å¤©å­¦ä¹ äº†å´”åº†æ‰è€å¸ˆçš„çˆ¬è™«ï¼Œæ„Ÿè§‰çœŸçš„å­¦ä¹ åˆ°äº†å¥½å¤šï¼Œå¯¹Pythonçˆ¬è™«æé«˜å¾ˆæœ‰å¸®åŠ©ï¼Œè¿˜æœ‰ï¼ŒåŽŸæ¥ä»–å°±æ˜¯é™è§…ï¼Œåˆšå¼€å§‹å­¦ä¹ çˆ¬è™«å°±åœ¨çœ‹ä»–çš„åšå®¢ï¼Œæ²¡æƒ³åˆ°ä»–çŽ°åœ¨åˆåœ¨å‡ºçˆ¬è™«æ•™ç¨‹ï¼Œæ‰“ç®—è·Ÿç€å­¦ä¹ ã€‚ åˆ†äº«å†…å®¹ï¼š 1. åˆ†æžçŸ¥ä¹ŽAjaxè¯·æ±‚åŠçˆ¬å–é€»è¾‘ 2. ç”¨Scrapyå®žçŽ°é€’å½’çˆ¬å– 3. çˆ¬å–ç»“æžœå­˜å‚¨åˆ°MongoDB åºŸè¯ä¸å¤šè¯´ï¼Œè‡ªå·±çœ‹çœ‹å°±çŸ¥é“äº†ã€‚ é™è§…ä¸¨å´”åº†æ‰çš„ä¸ªäººåšå®¢http://cuiqingcai.com/ å¾®è¯¾å½•æ’­ | 03æœˆ17æ—¥ çˆ¬å–çŸ¥ä¹Žæ‰€æœ‰ç”¨æˆ·è¯¦ç»†ä¿¡æ¯https://edu.hellobi.com/course/163 æœ€åŽçš„å°å¹¿å‘Š æœ‰æœ‹å‹ç«Ÿç„¶å«æˆ‘åŽ»ä½œä¸€æœŸç›´æ’­ï¼Œè®²ä¸€è®²Pythonã€‚ æ‰“ç®—æ ¹æ®è‡ªå·±çš„ç»åŽ†åˆ†äº«ä¸€äº›ç»éªŒï¼Œä¸»è¦æ˜¯å…³äºŽPythonå…¥é—¨çš„ï¼Œæƒ³å¬å¬å¯ä»¥ç§ä¿¡æˆ‘ã€‚ æ—¶é—´æ˜¯å‘¨äºŒæ™š9ç‚¹~ Hello Worldï¼ Try to be a Pythonerï¼]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonç»ƒä¹ ç¬¬ä¹é¢˜ï¼Œçˆ¬å–è´´å§å›¾ç‰‡]]></title>
      <url>%2F2017%2F03%2F14%2FPython%E7%BB%83%E4%B9%A0%E7%AC%AC%E4%B9%9D%E9%A2%98%EF%BC%8C%E7%88%AC%E5%8F%96%E8%B4%B4%E5%90%A7%E5%9B%BE%E7%89%87%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬å››ç¯‡åŽŸåˆ›æ–‡ç«  ä¸€ã€é—®é¢˜ï¼šç”¨ Pythonçˆ¬å–å¦¹å­å›¾ç‰‡ :) http://tieba.baidu.com/p/2166231880 äºŒã€åˆ†æžè´´å§ç½‘é¡µæºç æ‰“å¼€ç½‘é¡µhttp://tieba.baidu.com/p/2166231880ï¼ŒF12 å‘çŽ°å›¾ç‰‡é“¾æŽ¥éƒ½åœ¨&lt;img&gt;æ ‡ç­¾ä¸­ &lt;cc&gt; &lt;div...&gt; &lt;img...&gt; &lt;img...&gt; æµ‹è¯•å‘çŽ°ï¼Œsrcä¸­çš„é“¾æŽ¥å°±æ˜¯å›¾ç‰‡é“¾æŽ¥ã€‚é‚£ä¹ˆå°±å¾ˆç®€å•ï¼Œåªéœ€è¦æŠŠ&lt;img&gt;ä¸­çš„srcçš„é“¾æŽ¥æ‹¿å‡ºæ¥å³å¯ã€‚ ä¸‰ã€å†™ä»£ç çŽ¯å¢ƒï¼šPython3ï¼ŒPycharm ä½¿ç”¨requestså’Œxpathï¼Œæœ€è¿‘æ‰å­¦äº†xpathï¼Œå‘çŽ°è¶…çº§å¥½ç”¨ï¼Œæ¯”bs4ç®€æ´ï¼Œæœ‰å…´è¶£çœ‹çœ‹è¿™ä¸ªhttps://zhuanlan.zhihu.com/p/25572729 import requests from lxml import etree url = &apos;http://tieba.baidu.com/p/2166231880&apos; header = {&apos;User-Agent&apos;:&apos;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&apos;} r = requests.get(url,headers=header).content s = etree.HTML(r) print(s.xpath(&apos;//div/img/@src&apos;)) å‘çŽ°é“¾æŽ¥éƒ½å·²ç»æ‹¿åˆ°æ‰‹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ä¸‹è½½äº†~ ä¸‹è½½å›¾ç‰‡çš„è¯­å¥ï¼š import urllib.request path = &apos;......&apos; #ä¸‹è½½é“¾æŽ¥ jpg_link ï¼ &apos;......&apos; #å›¾ç‰‡é“¾æŽ¥ request.urlretrieve(jpg_link, path) åŠ åœ¨ä¸€èµ·ï¼Œå¤§åŠŸå‘Šæˆã€‚ å››ã€æ€»ç»“ç»æµ‹è¯•ï¼Œè´´å§é‡Œé¢å…¶ä»–ç½‘é¡µå¦‚ï¼šhttp://tieba.baidu.com/p/1165861759 æœ¬ä»£ç éƒ½å¯ä»¥ä¸‹è½½ï¼Œé¡ºä¾¿è¯´ä¸€è¯´é—®é¢˜ã€‚ 1ã€å›¾ç‰‡åç§°ä½¿ç”¨å›¾ç‰‡é“¾æŽ¥ä¸­çš„åç§°ï¼ŒåŒ…å«å¤§é‡æ•°å­—å’Œå­—æ¯ï¼Œå¯ä»¥ä¼˜åŒ–ã€‚ 2ã€å¯ä»¥çœ‹åˆ°ï¼Œä¸‹è½½æ–‡ä»¶ä¸­åŒ…å«äº†ä¸€ä¸ªè¡¨æƒ…ï¼ŒæŸ¥çœ‹é‚£æ˜¯ç”¨æˆ·æ‰€å‘ï¼Œè¯´æ˜Žç­›é€‰å‡ºäº†é—®é¢˜ã€‚ 3ã€å¸–å­æ•°é‡å¤šï¼Œç¿»é¡µè¿‡åŽï¼Œéœ€è¦åœ¨ä»£ç ä¸­åŠ å…¥èŽ·å–ä¸‹ä¸€é¡µé“¾æŽ¥ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ æºç è¯·è§ï¼šhttps://github.com/zhangslob/TiebaImg]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Pythonç»ƒä¹ ç¬¬ä¸ƒé¢˜ï¼Œæˆ‘è¦å€’è¿‡æ¥çœ‹]]></title>
      <url>%2F2017%2F03%2F06%2FPython%E7%BB%83%E4%B9%A0%E7%AC%AC%E4%B8%83%E9%A2%98%EF%BC%8C%E6%88%91%E8%A6%81%E5%80%92%E8%BF%87%E6%9D%A5%E7%9C%8B%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸‰ç¯‡åŽŸåˆ›æ–‡ç«  ä¸€ã€ChallengeUsing the Python language, have the function FirstReverse(str) take the str parameter being passed and return the string in reversedï¼ˆé¢ å€’çš„ï¼‰ order. For example: if the input string is â€œHello World and Codersâ€ then your program should return the string sredoC dna dlroW olleH.é¢˜ç›®æ„æ€æ˜¯ï¼Œç»™å®šå­—ç¬¦ä¸²ï¼Œè¿”å›žåŽŸæ¥çš„å€’åºã€‚ä¾‹å¦‚ç»™å‡ºçš„æ˜¯â€œHello World and Codersâ€ï¼Œè¿”å›žâ€œsredoC dna dlroW olleH.â€ Sample Test Cases Input:â€coderbyteâ€ Output:â€etybredocâ€ Input:â€I Love Codeâ€ Output:â€edoC evoL Iâ€ Hint Think of how you can loop through a string or array of characters backwards to produce a new string. def FirstReverse(str): # code goes here return str # keep this function call here print FirstReverse(raw_input()) äºŒã€è§£æ³•:åˆ‡ç‰‡çŽ¯å¢ƒï¼šPython3.5 A simple way to reverse a string would be to create a new string and fill it with the characters from the original string, but backwards. To do this, we need to loop through the original string starting from the end, and every iteration of the loop we move to the previous character in the string. Here is an example: def FirstReverse(str): return str[::-1] print (FirstReverse(input())) éžå¸¸ç®€æ´str[::-1]å°±å¯ä»¥å®Œæˆç›®æ ‡ã€‚ ä¸‰ã€åˆ‡ç‰‡è¯¦è§£1ã€å–å­—ç¬¦ä¸²ä¸­ç¬¬å‡ ä¸ªå­—ç¬¦ &gt;&gt;&gt; &apos;hello&apos;[0]#è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ &apos;h&apos; &gt;&gt;&gt; &apos;hello&apos;[-1]#è¡¨ç¤ºè¾“å‡ºå­—ç¬¦ä¸²ä¸­æœ€åŽä¸€ä¸ªå­—ç¬¦ &apos;o&apos; 2ã€å­—ç¬¦ä¸²åˆ†å‰² &gt;&gt;&gt; &apos;hello&apos;[1:3] &apos;el&apos; ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºåŽŸæ¥å­—ç¬¦ä¸²ä¸­çš„ä¸‹è¡¨ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåˆ†å‰²åŽå‰©ä¸‹çš„å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ åœ¨ åŽŸæ¥å­—ç¬¦ä¸²ä¸­çš„ä¸‹æ ‡ æ³¨æ„ï¼ŒPythonä»Ž0å¼€å§‹è®¡æ•° 3ã€å‡ ç§ç‰¹æ®Šæƒ…å†µ &gt;&gt;&gt; &apos;hello&apos;[:3]#ä»Žç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æˆªå–ï¼Œç›´åˆ°æœ€åŽ &apos;hel&apos; &gt;&gt;&gt; &apos;hello&apos;[0:]#ä»Žç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æˆªå–ï¼Œæˆªå–åˆ°æœ€åŽ &apos;hello&apos; &gt;&gt;&gt; &apos;hello&apos;[:] &apos;hello&apos; 4ã€æ­¥é•¿æˆªå– &gt;&gt;&gt; &apos;abcde&apos;[::2]#è¡¨ç¤ºä»Žç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æˆªå–ï¼Œé—´éš”2ä¸ªå­—ç¬¦å–ä¸€ä¸ªã€‚ &apos;ace&apos; &gt;&gt;&gt; &apos;abcde&apos;[::-2] &apos;eca&apos; &gt;&gt;&gt; &apos;abcde&apos;[::-1] &apos;edcba&apos; æŽ¨èé˜…è¯»ï¼š å®˜æ–¹æ–‡æ¡£https://docs.python.org/3/tutorial/introduction.html#strings å»–é›ªå³°çš„æ•™ç¨‹ http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431756919644a792ee4ead724ef7afab3f7f771b04f5000 æ›´å¤šè§£æ³•ï¼š def FirstReverse(str): # reversed(str) turns the string into an iterator object (similar to an array) # and reverses the order of the characters # then we join it with an empty string producing a final string for us return &apos;&apos;.join(reversed(str)) print(FirstReverse(input())) ä½¿ç”¨äº†ä»€ä¹ˆè¯­æ³•ï¼Ÿè¯„è®ºä¸­è§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[æ•™ä½ å…è´¹æ­å»ºä¸ªäººåšå®¢ï¼ŒHexo&Github]]></title>
      <url>%2F2017%2F02%2F28%2F%E6%95%99%E4%BD%A0%E5%85%8D%E8%B4%B9%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%8CHexo-Github%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬äºŒç¯‡åŽŸåˆ›æ–‡ç«  è¯´åœ¨å‰é¢ï¼š ä¸ºä»€ä¹ˆè‡ªå·±æ­å»ºåšå®¢ï¼ŒçŸ¥ä¹Žä¸è¡Œå—ï¼Ÿå¯ä»¥çœ‹çœ‹åˆ˜æœªé¹ | Mind Hacksï¼Œå‰äº›å¤©å‘å¸ƒäº†æŸç¯‡æ–‡ç« åº”è¯¥æ˜¯è¢«äººä¸¾æŠ¥äº†ï¼Œç»“æžœçŸ¥ä¹Žå°±åˆ äº†ã€‚æœ‰è‡ªå·±çš„åšå®¢è‡ªç”±ï¼Œè‡ªåœ¨ã€‚æ›´å¤šè¯·çœ‹ä¸ºä»€ä¹ˆè¦è‡ªå»ºåšå®¢ï¼Ÿhttps://www.zhihu.com/question/19916345 è¯´åœ¨å‰é¢ï¼š ä¸ºä»€ä¹ˆè‡ªå·±æ­å»ºåšå®¢ï¼ŒçŸ¥ä¹Žä¸è¡Œå—ï¼Ÿå¯ä»¥çœ‹çœ‹åˆ˜æœªé¹ | Mind Hacksï¼Œå‰äº›å¤©å‘å¸ƒäº†æŸç¯‡æ–‡ç« åº”è¯¥æ˜¯è¢«äººä¸¾æŠ¥äº†ï¼Œç»“æžœçŸ¥ä¹Žå°±åˆ äº†ã€‚æœ‰è‡ªå·±çš„åšå®¢è‡ªç”±ï¼Œè‡ªåœ¨ã€‚æ›´å¤šè¯·çœ‹ä¸ºä»€ä¹ˆè¦è‡ªå»ºåšå®¢ï¼Ÿhttps://www.zhihu.com/question/19916345 æˆ‘ç”¨äº†å¤šä¹…æ‰å®Œæˆåšå®¢çš„æ­å»ºï¼Ÿä¸çž’æ‚¨è¯´ï¼Œæˆ‘èŠ±äº†æœ‰3å¤©æ—¶é—´ã€‚å¯¹ç€åˆ«äººçš„â€œ5åˆ†é’Ÿ æ­å»ºå…è´¹ä¸ªäººåšå®¢â€èŠ±äº†3å¤©æ‰å®Œæˆï¼Œä¸­é—´é‡åˆ°äº†æ— æ•°å›°éš¾ã€‚æŸ¥çœ‹å¾ˆå¤šèµ„æ–™ï¼Œæ‰€ä»¥å½“ä½ é‡åˆ°å›°éš¾ï¼Œåˆ«æ”¾å¼ƒï¼Œä»”ç»†çœ‹æ–‡æ¡£æˆ–èµ„æ–™ã€‚ ä¸ºäº†å‘å¸ƒè¿™ç¯‡æ•™ç¨‹ï¼Œé‡æ–°æ³¨å†Œäº†Githubï¼Œå´”æ–¯ç‰¹çš„åšå®¢https://zhangslob.github.io/è¿™ä¸ªæ˜¯æˆ‘è‡ªå·±çš„åšå®¢ï¼Œå´”æ–¯ç‰¹æµ‹è¯•æ‰€ç”¨åšå®¢https://zhihuya.github.io/è¿™ä¸ªæ˜¯æˆ‘ä¸€è¾¹å†™è¿™ç¯‡æ•™ç¨‹ä¸€è¾¹æ­å»ºçš„ã€‚æ‰€ä»¥å¦‚æžœä½ ä¹Ÿå’Œæˆ‘ä¸€æ ·ï¼Œå–œæ¬¢è‡ªç”±ï¼Œå–œæ¬¢æ£è…¾ï¼Œé‚£å°±æ¥å§ã€‚ ç³»ç»Ÿï¼šwindows 7 64ä½ï¼Œç¼–è¾‘å™¨ï¼šsublime text3ï¼ŒæŽ§åˆ¶å°ï¼šcmderæ­å»ºåšå®¢ä½¿ç”¨hexo+Github ä»€ä¹ˆæ˜¯ Hexoï¼Ÿhttps://hexo.io/zh-cn/docs/ Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ã€‚Hexo ä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“Žï¼‰è§£æžæ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ ä¸€ã€é…ç½®Githubé¦–å…ˆæ³¨å†Œã€ç™»å½• https://github.com/ è®°ä½è‡ªå·±çš„Usernameï¼ˆå¾ˆé‡è¦ï¼‰ ç„¶åŽå³ä¸Šè§’é€‰æ‹© Create a new repository https://github.com/new Repository name ï¼ˆå¡«è‡ªå·±çš„åå­—ï¼‰ yourname.github.io(yournameä¸Žä½ çš„æ³¨å†Œç”¨æˆ·åä¸€è‡´,è¿™ä¸ªå°±æ˜¯ä½ åšå®¢çš„åŸŸåäº†) ä¾‹å¦‚ï¼Œæˆ‘çš„åŸŸåæ˜¯github.com/zhihuyaï¼Œå°±å¡«å…¥zhihuya.github.ioã€‚æˆåŠŸåŽå‡ºçŽ°ä¸‹é¢çš„ç”»é¢ äºŒã€çŽ¯å¢ƒå®‰è£…ï¼ˆnodeã€gitï¼‰1ã€å®‰è£… Node.js https://nodejs.org/en/ 2ã€å®‰è£… Git https://github.com/waylau/git-for-win Gitæ•™ç¨‹ https://github.com/waylau/git-for-winå»–é›ªå³°è€å¸ˆçš„æ•™ç¨‹ï¼Œéžå¸¸å¥½ã€‚ 3ã€å®‰è£…å®ŒæˆåŽï¼Œåœ¨å¼€å§‹èœå•é‡Œæ‰¾åˆ°â€œGitâ€-&gt;â€œGit Bashâ€ï¼Œåç§°å’Œé‚®ç®±æ˜¯Githubä¸Šçš„ 4ã€å®‰è£… Hexoã€‚æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®ŒæˆåŽï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoã€‚ $ npm install -g hexo-cli ï¼ˆä½¿ç”¨çš„cmderï¼Œè¶…çº§å¥½ç”¨~~ã€‚ç­‰å¾…æ—¶é—´å¯èƒ½æœ‰ç‚¹é•¿ï¼‰ å¥½äº†åˆ°è¿™ä¸€æ­¥æˆ‘ä»¬çŽ¯å¢ƒå…¨éƒ¨å®‰è£…å¥½äº†ã€‚ ä¸‰ã€è®¾ç½®åœ¨ç”µè„‘Fç›˜ï¼ˆè‡ªå·±éšæ„ï¼‰ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ testï¼Œè¿›å…¥testï¼ŒæŒ‰ä½Shifté”®ç‚¹å‡»é¼ æ ‡å³é”® å› ä¸ºæˆ‘æœ‰å®‰è£…Cmderï¼Œæ²¡æœ‰å®‰è£…çš„ç‚¹å‡»â€œåœ¨æ­¤å¤„æ‰“å¼€å‘½ä»¤çª—å£â€ï¼Œè¾“å…¥ hexo init blog ç¨å¾®ç­‰å¾…ä¸‹ï¼Œé€Ÿåº¦æœ‰ç‚¹æ…¢ã€‚æˆåŠŸæç¤º INFO Start blogging with Hexo! å› ä¸ºä½ åˆå§‹åŒ–hexo ä¹‹åŽsourceç›®å½•ä¸‹è‡ªå¸¦ä¸€ç¯‡hello worldæ–‡ç« , æ‰€ä»¥ç›´æŽ¥æ‰§è¡Œä¸‹æ–¹å‘½ä»¤ $ hexo generate # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ $ hexo server # åœ¨æµè§ˆå™¨è¾“å…¥ http://localhost:4000/å°±å¯ä»¥çœ‹è§ç½‘é¡µå’Œæ¨¡æ¿äº† INFO Start processing INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. è®¿é—®http://localhost:4000/ï¼Œä¾¿å¯ä»¥çœ‹åˆ°ç½‘ç«™åˆæ­¥çš„æ¨¡æ ·ï¼Œä¸è¦æ¿€åŠ¨ï¼Œæˆ‘ä»¬è¿˜è¦æŠŠç½‘é¡µå‘å¸ƒåˆ°Githubä¸ŠåŽ»ã€‚ é‡æ–°æ‰“å¼€CMDï¼Œè¾“å…¥ï¼š ssh-keygen -t rsa -C &quot;Githubçš„æ³¨å†Œé‚®ç®±åœ°å€&quot; ä¸€è·¯Enterè¿‡æ¥å°±å¥½ï¼Œå¾—åˆ°ä¿¡æ¯ï¼š Your public key has been saved in /c/Users/user/.ssh/id_rsa.pub. æ‰¾åˆ°è¯¥æ–‡ä»¶ï¼Œæ‰“å¼€ï¼ˆsublime textï¼‰ï¼ŒCtrl + aå¤åˆ¶é‡Œé¢çš„æ‰€æœ‰å†…å®¹ï¼Œç„¶åŽè¿›å…¥Sign in to GitHubï¼šhttps://github.com/settings/ssh New SSH key â€”â€”Titleï¼šblog â€”â€” Keyï¼šè¾“å…¥åˆšæ‰å¤åˆ¶çš„â€”â€” Add SSH key å››ã€é…ç½®åšå®¢åœ¨blogç›®å½•ä¸‹ï¼Œç”¨sublimeæ‰“å¼€_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹å‚æ•°ä¿¡æ¯ ç‰¹åˆ«æé†’ï¼Œåœ¨æ¯ä¸ªå‚æ•°çš„ï¼šåŽéƒ½è¦åŠ ä¸€ä¸ªç©ºæ ¼ ä¿®æ”¹ç½‘ç«™ç›¸å…³ä¿¡æ¯ title: å´”æ–¯ç‰¹æµ‹è¯•æ‰€ç”¨åšå®¢ subtitle: å‰¯æ ‡é¢˜ description: ç½‘é¡µæè¿° author: å´”æ–¯ç‰¹ language: zh-CN timezone: Asia/Shanghai é…ç½®éƒ¨ç½²ï¼ˆæˆ‘çš„æ˜¯zhihuyaï¼Œä¿®æ”¹æˆè‡ªå·±çš„ï¼‰ deploy: type: git repo: https://github.com/zhihuya/zhihuya.github.io.git branch: master äº”ã€å‘è¡¨æ–‡ç« åœ¨CMDä¸­è¾“å…¥ $ hexo new &quot;å´”æ–¯ç‰¹æµ‹è¯•æ–‡ç« &quot; INFO Created: F:\test\blog\source\_posts\å´”æ–¯ç‰¹æµ‹è¯•æ–‡ç« .md æ‰¾åˆ°è¯¥æ–‡ç« ï¼Œæ‰“å¼€ï¼Œä½¿ç”¨Markdownè¯­æ³•ï¼Œè¯¥è¯­æ³•ä»‹ç»å¯ä»¥æŸ¥çœ‹https://zhangslob.github.io/2017/02/26/%E5%88%A9%E7%94%A8HEXO%E6%90%AD%E5%BB%BA%E7%9A%84%E5%8D%9A%E5%AE%A2/ --- title: å´”æ–¯ç‰¹æµ‹è¯•æ–‡ç«  date: 2017-02-28 13:03:44 tags: --- è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œæ¬¢è¿Žå…³æ³¨ä½œè€…åšå®¢[1]: https://zhangslob.github.io/ ä¿å­˜ï¼Œç„¶åŽæ‰§è¡Œä¸‹åˆ—æ­¥éª¤ï¼š F:\test\blog $ hexo clean INFO Deleted database. INFO Deleted public folder. F:\test\blog $ hexo generate INFO Start processing INFO Files loaded in 1.48 s #çœç•¥ INFO 29 files generated in 4.27 s F:\test\blog $ hexo server INFO Start processing INFO Hexo is running at http://localhost:4000/. Press Ctrl+C to stop. è¿™ä¸ªæ—¶å€™ï¼Œæ‰“å¼€http://localhost:4000/ï¼Œå‘çŽ°åˆšæ‰çš„æ–‡ç« å·²ç»æˆåŠŸäº† æœ€åŽä¸€æ­¥ï¼Œå‘å¸ƒåˆ°ç½‘ä¸Šï¼Œæ‰§è¡Œï¼š F:\test\blog $ hexo deploy INFO Deploying: git INFO Clearing .deploy_git folder... INFO Copying files from public folder... #çœç•¥ å…¶ä¸­ä¼šè·³å‡ºGithubç™»å½•ï¼Œç›´æŽ¥ç™»å½•ï¼Œå¦‚æžœæ²¡æœ‰é—®é¢˜è¾“å…¥zhihuyaï¼ˆæ¢æˆä½ çš„ï¼‰.github.io/ å´”æ–¯ç‰¹æµ‹è¯•æ‰€ç”¨åšå®¢https://zhihuya.github.io/ ç„¶åŽå°±å¯ä»¥çœ‹åˆ°å·²ç»å‘å¸ƒäº† å…­ã€æ€»ç»“å‘å¸ƒæ–‡ç« çš„æ­¥éª¤ï¼š 1ã€hexo new åˆ›å»ºæ–‡ç«  2ã€Markdownè¯­æ³•ç¼–è¾‘æ–‡ç«  3ã€éƒ¨ç½²ï¼ˆæ‰€æœ‰æ‰“å¼€CMDéƒ½æ˜¯åœ¨blogç›®å½•ä¸‹ï¼‰ hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤ hexo generate #ç”Ÿæˆ hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆï¼Œéžå¿…è¦ï¼Œå¯æœ¬åœ°æµè§ˆç½‘é¡µ hexo deploy #éƒ¨ç½²å‘å¸ƒ ç®€å†™Tipsï¼š hexo n â€œæˆ‘çš„åšå®¢â€ == hexo new â€œæˆ‘çš„åšå®¢â€ #æ–°å»ºæ–‡ç«  hexo p == hexo publish hexo g == hexo generate#ç”Ÿæˆ hexo s == hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆ hexo d == hexo deploy#éƒ¨ç½² å¦‚æžœåœ¨æ‰§è¡Œ hexo deploy åŽ,å‡ºçŽ° error deployer not found:github çš„é”™è¯¯ï¼Œæ‰§è¡Œï¼š npm install hexo-deployer-git --save å‡ºé”™æ˜¯æ­£å¸¸çš„ï¼Œå‡ºé”™äº†è‡ªå·±å…ˆç™¾åº¦æˆ–googleï¼Œå®žåœ¨ä¸çŸ¥é“çš„å¯ä»¥è¯¢é—®æˆ‘ã€‚ æ‰˜ç®¡çš„è¯ä¸ä»…æœ‰githubå¯ä»¥ç”¨ï¼Œè¿˜æœ‰ä¸ªå›½å†…çš„https://coding.net/å¯é€‰ åˆ°è¿™é‡Œå·²ç»å®Œæˆäº†åšå®¢çš„æ­å»ºï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šéœ€è¦è®¾ç½®å’Œè°ƒæ•´çš„ã€‚è¿™æ˜¯æˆ‘çš„åšå®¢ï¼Œä¹Ÿè®¸ä½ ä¼šå‘çŽ°ï¼Œæˆ‘å’Œåˆšæ‰æ­å»ºçš„ä¸ä¸€æ ·ï¼Œå› ä¸ºæˆ‘ä¿®æ”¹äº†åšå®¢ä¸»é¢˜ï¼Œç®€æ´ã€ä¼˜ç¾Žã€‚ ä¸»é¢˜ä»‹ç»https://github.com/litten/hexo-theme-yilia æ¬¢è¿Žå¤§å®¶å…³æ³¨ï¼Œå®šä¼šæœ‰æ›´å¤šç²¾å½© çŸ¥ä¹Žhttps://www.zhihu.com/people/cuishite åšå®¢https://zhangslob.github.io/]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[åˆ©ç”¨HEXOæ­å»ºçš„åšå®¢åŠMarkdownè¯­æ³•ä»‹ç»]]></title>
      <url>%2F2017%2F02%2F26%2F%E5%88%A9%E7%94%A8HEXO%E6%90%AD%E5%BB%BA%E7%9A%84%E5%8D%9A%E5%AE%A2%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å´”æ–¯ç‰¹çš„ç¬¬ä¸€ç¯‡åŽŸåˆ›æ–‡ç«  Markdownçš„ä¸€äº›è¯­æ³• èŠ±äº†ä¸å°‘æ—¶é—´ã€‚ç»ˆäºŽæŠŠè‡ªå·±çš„ç¬¬ä¸€ä¸ªåšå®¢æ­å»ºæˆåŠŸäº†ã€‚ä½†æ˜¯é‡åˆ°æ–°é—®é¢˜ï¼Œå‘è¡¨æ–‡ç« éœ€è¦ä½¿ç”¨Markdownè¯­æ³•ï¼Œä¸‹é¢å°±æ¥è¯´è¯´ã€‚ Markdownçš„æ–‡æ¡£ä»‹ç»http://www.appinn.com/markdown/çœ‹çœ‹ç®€å•ä»‹ç»å°±å¯ä»¥äº†ï¼Œä»¥åŽæœ‰éœ€æ±‚å†åŽ»å­¦ä¹ ã€‚ 1ã€æ ‡é¢˜å’Œå¼•ç”¨ã€‚Markdown æ”¯æŒä¸¤ç§æ ‡é¢˜çš„è¯­æ³•ï¼ŒSetext å’Œ atx å½¢å¼ã€‚Setext å½¢å¼æ˜¯ç”¨åº•çº¿çš„å½¢å¼ï¼Œåˆ©ç”¨ = ï¼ˆæœ€é«˜é˜¶æ ‡é¢˜ï¼‰å’Œ - ï¼ˆç¬¬äºŒé˜¶æ ‡é¢˜ï¼‰ï¼ŒAtx å½¢å¼åœ¨è¡Œé¦–æ’å…¥ 1 åˆ° 6 ä¸ª # ï¼Œå¯¹åº”åˆ°æ ‡é¢˜ 1 åˆ° 6 é˜¶ã€‚ åŒºå—å¼•ç”¨åˆ™ä½¿ç”¨ email å½¢å¼çš„ â€˜&gt;â€™ è§’æ‹¬å·ã€‚ å¦‚ä½ æ‰€è§ï¼Œå·¦è¾¹æ˜¯ç¼–è¾‘åŒºï¼Œå³è¾¹å¯ä»¥ç›´æŽ¥çœ‹åˆ°ç»“æžœã€‚ç¼–è¾‘å™¨æ˜¯MarkdownPadï¼Œä¸‹è½½é“¾æŽ¥æ˜¯http://markdownpad.com/download.html 2ã€ä¿®è¾žå’Œå¼ºè°ƒã€‚ 3ã€é“¾æŽ¥å’Œå›¾ç‰‡ã€‚ï¼ˆå¦‚æžœä½ æœ‰ä¸‹è½½MarkdownPadè¿™ä¸ªç¼–è¾‘å™¨ï¼Œä¼šæ›´åŠ æ–¹ä¾¿å“¦ï¼‰ 4ã€åŠ å…¥ä»£ç ,ä½¿ç”¨å•å¼•å·ã€‚ è¿™äº›åº”è¯¥å¯ä»¥å¸®åŠ©æˆ‘å®Œæˆä¸€èˆ¬ä¹¦å†™ï¼Œå¥½çš„å‘¢ï¼Œç¬¬ä¸€ç¯‡æ–‡ç« å°±å®Œæˆäº†ã€‚ æ¬¢è¿Žè¯„è®ºã€‚ã€‚ äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘å­¦Python (à¹‘â€¢ . â€¢à¹‘) 2017/2/27 19:11:11]]></content>
    </entry>

    
  
  
</search>
